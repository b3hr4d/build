{"version":3,"sources":["components/LearningPages/Lesson/index.tsx"],"names":["Lesson","changeContent","fullContent","content","JSON","parse","props","requestPlayer","svgWidth","i","playModeChanger","changeMode","nextProps","data","this","id","console","log","path","pathFinder","pathname","requestLesson","lesson","resetPlayer","setState","classes","theme","melodition","error","rest","className","root","loading","playMode","container","main","item","xs","direction","justify","alignItems","doubleGrid","variant","title","centerText","excerpt","component","autoMargin","Component","connectedLesson","connect","state","ownProps","single","auth","course","router","location","dispatch","bindActionCreators","withStyles","createStyles","width","minHeight","overflow","breakpoints","down","margin","height","flexWrap","maxWidth","padding","textAlign"],"mappings":"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","file":"static/js/25.7b840459.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { requestLesson } from \"../../../_actions/lesson.actions\";\r\nimport {\r\n  requestPlayer,\r\n  resetPlayer,\r\n  changeMode,\r\n} from \"../../../_actions/player.actions\";\r\nimport { pathFinder } from \"../../../_helpers/constants\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport { AppActions, AppState } from \"../../../_types\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport {\r\n  PlayerLeftSide,\r\n  PlayerRightSide,\r\n} from \"../../Layout/Player/PlayerSides\";\r\nimport { IMelodition } from \"../../../_types/player.types\";\r\nimport Fingers from \"../../Layout/Instruments/Finger/Fingers\";\r\nimport Piano from \"../../Layout/Instruments/Piano\";\r\nimport { PlayButton } from \"../../Layout/Player/Buttons\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      overflow: \"hidden\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 113px)\",\r\n      },\r\n      display: \"flex\",\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n    main: {\r\n      width: \"100vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      overflow: \"hidden\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 113px)\",\r\n      },\r\n      display: \"flex\",\r\n    },\r\n    content: {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      flexWrap: \"nowrap\",\r\n    },\r\n    doubleGrid: {\r\n      flexWrap: \"nowrap\",\r\n      width: \"100%\",\r\n      maxWidth: \"100%\",\r\n      \"& > div\": {\r\n        margin: \"auto\",\r\n        padding: 0,\r\n        height: \"100%\",\r\n      },\r\n    },\r\n    centerText: {\r\n      textAlign: \"center\",\r\n    },\r\n  });\r\n\r\ninterface LessonProps extends WithStyles<typeof useStyles> {\r\n  error: string;\r\n  data?: ILesson;\r\n  course?: ICourse;\r\n  pathname: string;\r\n  melodition: IMelodition;\r\n  theme: \"light\" | \"dark\";\r\n}\r\n\r\ninterface States {}\r\n\r\ntype Props = LessonProps & ReturnType<typeof mapDispatchToProps>;\r\n\r\nclass Lesson extends Component<Props, States> {\r\n  shouldComponentUpdate(nextProps: Props) {\r\n    if (nextProps.data && this.props.data?.id !== nextProps.data.id) {\r\n      this.changeContent(nextProps.data.content);\r\n    }\r\n    return true;\r\n  }\r\n  componentDidMount() {\r\n    console.log(\"mounted\");\r\n    const path = pathFinder(this.props.pathname);\r\n    this.props.requestLesson(path);\r\n    if (this.props.data?.id === path.lesson) {\r\n      this.changeContent(this.props.data!.content);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    console.log(\"dismount\");\r\n    this.props.resetPlayer();\r\n    this.setState = () => {\r\n      return;\r\n    };\r\n  }\r\n\r\n  changeContent = (fullContent: string) => {\r\n    const content = JSON.parse(fullContent);\r\n    this.props.requestPlayer(content);\r\n  };\r\n\r\n  svgWidth = (i: number): number => {\r\n    const num = i === 1 ? 668 : 584;\r\n    return num;\r\n  };\r\n\r\n  playModeChanger = () => {\r\n    this.props.changeMode(true);\r\n  };\r\n  render() {\r\n    const { theme, classes, data, melodition, error, ...rest } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        {melodition.loading || melodition.playMode ? (\r\n          <LoadingCircle />\r\n        ) : data ? (\r\n          <Grid container className={classes.main}>\r\n            <Grid item xs={1}>\r\n              <PlayerLeftSide {...rest} data={data} />\r\n            </Grid>\r\n            <Grid item xs={10}>\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n                className={classes.content}\r\n              >\r\n                <Grid item xs={3} className={classes.doubleGrid}>\r\n                  <Grid container justify=\"center\" alignItems=\"center\">\r\n                    <Grid item xs={9}>\r\n                      <Typography variant=\"h4\">{data.title}</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={3} className={classes.centerText}>\r\n                      <PlayButton loading={melodition.loading} />\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={6} className={classes.doubleGrid}>\r\n                  <Grid container justify=\"center\" alignItems=\"center\">\r\n                    <Grid item xs={12}>\r\n                      <Piano />\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={3} className={classes.doubleGrid}>\r\n                  <Grid container justify=\"center\" alignItems=\"center\">\r\n                    <Grid item xs={6}>\r\n                      <Typography>{data.excerpt}</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6} className={classes.centerText}>\r\n                      <Fingers />\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={1}>\r\n              <PlayerRightSide playModeChanger={this.playModeChanger} />\r\n            </Grid>\r\n          </Grid>\r\n        ) : (\r\n          <Typography component=\"div\" className={classes.autoMargin}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props) => ({\r\n  ...state.single.lesson,\r\n  melodition: state.melodition,\r\n  theme: state.auth.theme,\r\n  classes: ownProps.classes,\r\n  course: state.single.course.data,\r\n  pathname: state.router.location.pathname,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  changeMode: bindActionCreators(changeMode, dispatch),\r\n  requestLesson: bindActionCreators(requestLesson, dispatch),\r\n  requestPlayer: bindActionCreators(requestPlayer, dispatch),\r\n  resetPlayer: bindActionCreators(resetPlayer, dispatch),\r\n});\r\n\r\nconst connectedLesson = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(Lesson));\r\n\r\nexport default connectedLesson;\r\n"],"sourceRoot":""}