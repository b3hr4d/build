{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/regenerator-runtime/runtime.js","assets/sounds lazy /^/default_drum_0.*$/ groupOptions: {} namespace object","assets/sounds lazy /^/default_tone_0.*$/ groupOptions: {} namespace object","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","plugin/Melodition/Song.ts","plugin/Melodition/WebAudio.ts","_helpers/playerApi.ts"],"names":["module","exports","runtime","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","map","webpackAsyncContext","req","__webpack_require__","o","e","code","ids","id","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","Song","audioContext","volume","tracks","analyserNode","sampleNodes","masterVolumeNode","paused","muted","loopEndTime","loopMode","loopStartTime","trackVolumeNodes","elapsedTimeSinceStart","decodedAudioBuffers","addTrack","data","decodedBuffer","buffer","peaks","vol","panning","solo","sampleNode","volumeNode","loadBuffer","a","song","decodeAudioData","buildGraph","sources","sample","createBufferSource","createGain","gain","connect","destination","play","startTime","setTrackVolumesDependingOnMuteSoloStatus","s","start","pause","setVolume","setMasterVolume","val","fraction","setVolumeOfTrack","trackNumber","getUrlsOfTracks","urls","track","url","getDuration","dur","duration","getNbTracks","toggleLoopMode","toggleMute","togglePause","thereIsSolo","nbTracks","createAnalyser","WebAudioFontChannel","input","band32","band64","band128","band256","band512","band1k","band2k","band4k","band8k","band16k","output","bandEqualizer","from","frequency","filter","createBiquadFilter","setTargetAtTime","Q","console","log","createDynamicsCompressor","threshold","setValueAtTime","knee","ratio","attack","release","WebAudioFontLoader","player","cached","choosenInfos","drumKeyArray","drumNamesArray","instrumentKeyArray","instrumentNamesArray","startLoad","filePath","variableName","window","r","document","createElement","setAttribute","getElementsByTagName","appendChild","decodeAfterLoading","waitOrFinish","adjustPreset","onFinish","me","setTimeout","loaded","preset","zones","progress","k","waitLoad","instrumentTitles","insNames","instrumentKeys","instrumentInfo","n","p","Number","substr","variable","title","findInstrument","program","substring","drumTitles","drumNames","drumKeys","drumInfo","pitch","findDrum","nn","WebAudioFontReverberator","convolver","dry","wet","irrArrayBuffer","irr","reverbrator","datalen","ArrayBuffer","b","view","Uint8Array","decoded","atob","charCodeAt","audioBuffer","createConvolver","AudioContext","webkitAudioContext","fontPlayer","envelopes","loader","onCacheFinish","onCacheProgress","afterTime","nearZero","createChannel","createReverberator","limitVolume","queueChord","target","when","pitches","slides","queueWaveTable","Math","random","queueStrumUp","sort","queueStrum","queueStrumDown","currentTime","queueSnap","resume","zone","findZone","baseDetune","originalPitch","coarseTune","fineTune","playbackRate","pow","startWhen","waveDuration","loop","loopStart","loopEnd","envelope","findEnvelope","setupEnvelope","audioBufferSourceNode","newPlaybackRate","newWhen","linearRampToValueAtTime","sampleRate","delay","noZeroVolume","sampleDuration","lastTime","lastVolume","ahdsr","cancelScheduledValues","numValue","aValue","defValue","disconnect","x","cancel","adjustZone","createBuffer","b1","b2","float32Array","getChannelData","file","arraybuffer","sustain","keyRangeLow","keyRangeHigh","ex","cancelQueue","master","orientation","reverberator","ResetPlayer","options","songDetails","loading","onAir","playMode","sL","bpm","rythm","TrackID","tempo","neededLines","neededTracks","fingerNotes","storeFingers","storeTracks","storeDrums","metronomeInfo","trackInfo","seekValue","songs","songLength","tapSize","equalizer","drumVolumes","assign","lessonCompiler","Melo","content","JSON","parse","dataString","fingers","neededInst","neededDrums","strings","split","parseInt","storedFingersFunc","t","cntD","storeDrumsFunc","drm","index","findIndex","drum","beat","cntT","storeTracksFunc","up","down","trc","number","notes","audioNode","replacement","sound","default","default_metronome","mtr","cnt","gap","l","main","f","i32","shift"],"mappings":"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wBACA,wBACA,wBACA,2BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,2BACA,8BACA,8BACA,8BACA,wBACA,wBACA,8BACA,wBACA,8BACA,wBACA,sBACA,2BACA,wBACA,2BACA,wBACA,8BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,8BACA,8BACA,wBACA,2BACA,wBACA,wBACA,wBACA,2BACA,2BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,8BACA,wBACA,2BACA,wBACA,2BACA,2BACA,2BACA,wBACA,8BACA,uBACA,uBACA,uBACA,gCACA,wBACA,gCACA,gCACA,gCACA,gCACA,8BACA,wBACA,8BACA,6BACA,wBACA,8BACA,wBACA,wBACA,2BACA,8BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,2BACA,wBACA,8BACA,8BACA,wBACA,8BACA,8BACA,wBACA,wBACA,wBACA,8BACA,wBACA,8BACA,wBACA,8BACA,8BACA,wBACA,2BACA,2BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,2BACA,2BACA,8BACA,wBACA,wBACA,8BACA,wBACA,sBACA,2BACA,wBACA,2BACA,wBACA,2BACA,wBACA,8BACA,8BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,+BACA,wBACA,2BACA,8BACA,wBACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,8BACA,8BACA,8BACA,0BAGG,EAAKA,oBA7S0B,KA+SxC2B,eAAiB,SAACC,GAChB,IAAI3Q,EAAM,EAAKyQ,iBAAiBE,GAC5BC,EAAI,EAAIC,OAAO7Q,EAAI8Q,OAAO,EAAG,IACjC,MAAO,CACLC,SAAU,SAAW/Q,EACrBiM,IAAK,oDAAsDjM,EAAM,MACjEgR,MAAO,EAAKT,mBAAmBK,KArTK,KAwTxCK,eAAiB,SAACC,GACX,EAAKtC,eACR,EAAKA,aAAe,CAClB,CAAC,EAAG,GACJ,CA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","file":"static/js/29.b6749bca.chunk.js","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","var map = {\n\t\"./default_drum_00\": [\n\t\t370,\n\t\t5\n\t],\n\t\"./default_drum_00.ts\": [\n\t\t370,\n\t\t5\n\t],\n\t\"./default_drum_01\": [\n\t\t371,\n\t\t6\n\t],\n\t\"./default_drum_01.ts\": [\n\t\t371,\n\t\t6\n\t],\n\t\"./default_drum_02\": [\n\t\t372,\n\t\t7\n\t],\n\t\"./default_drum_02.ts\": [\n\t\t372,\n\t\t7\n\t],\n\t\"./default_drum_03\": [\n\t\t373,\n\t\t8\n\t],\n\t\"./default_drum_03.ts\": [\n\t\t373,\n\t\t8\n\t],\n\t\"./default_drum_04\": [\n\t\t374,\n\t\t9\n\t],\n\t\"./default_drum_04.ts\": [\n\t\t374,\n\t\t9\n\t],\n\t\"./default_drum_05\": [\n\t\t375,\n\t\t10\n\t],\n\t\"./default_drum_05.ts\": [\n\t\t375,\n\t\t10\n\t],\n\t\"./default_drum_06\": [\n\t\t376,\n\t\t11\n\t],\n\t\"./default_drum_06.ts\": [\n\t\t376,\n\t\t11\n\t],\n\t\"./default_drum_07\": [\n\t\t377,\n\t\t12\n\t],\n\t\"./default_drum_07.ts\": [\n\t\t377,\n\t\t12\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 430;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./default_tone_00\": [\n\t\t378,\n\t\t13\n\t],\n\t\"./default_tone_00.ts\": [\n\t\t378,\n\t\t13\n\t],\n\t\"./default_tone_01\": [\n\t\t379,\n\t\t14\n\t],\n\t\"./default_tone_01.ts\": [\n\t\t379,\n\t\t14\n\t],\n\t\"./default_tone_02\": [\n\t\t380,\n\t\t15\n\t],\n\t\"./default_tone_02.ts\": [\n\t\t380,\n\t\t15\n\t],\n\t\"./default_tone_03\": [\n\t\t381,\n\t\t16\n\t],\n\t\"./default_tone_03.ts\": [\n\t\t381,\n\t\t16\n\t],\n\t\"./default_tone_04\": [\n\t\t382,\n\t\t17\n\t],\n\t\"./default_tone_04.ts\": [\n\t\t382,\n\t\t17\n\t],\n\t\"./default_tone_05\": [\n\t\t383,\n\t\t18\n\t],\n\t\"./default_tone_05.ts\": [\n\t\t383,\n\t\t18\n\t],\n\t\"./default_tone_06\": [\n\t\t384,\n\t\t19\n\t],\n\t\"./default_tone_06.ts\": [\n\t\t384,\n\t\t19\n\t],\n\t\"./default_tone_07\": [\n\t\t385,\n\t\t20\n\t],\n\t\"./default_tone_07.ts\": [\n\t\t385,\n\t\t20\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 431;\nmodule.exports = webpackAsyncContext;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default class Song {\n  volume = 1;\n  tracks: any[] = [];\n  analyserNode: any;\n  sampleNodes: any[] = [];\n  masterVolumeNode: any;\n  paused: boolean = true;\n  muted: boolean = false;\n  loopEndTime: any = null;\n  loopMode: boolean = false;\n  loopStartTime: any = null;\n  audioContext: AudioContext;\n  trackVolumeNodes: any[] = [];\n  elapsedTimeSinceStart: any = null;\n  decodedAudioBuffers: AudioBuffer[] | [] = [];\n\n  constructor(audioContext: AudioContext) {\n    this.audioContext = audioContext;\n    this.masterVolumeNode = this.audioContext.createGain();\n    this.analyserNode = this.audioContext.createAnalyser();\n  }\n  addTrack = (data: any) => {\n    this.tracks.push({\n      decodedBuffer: data.buffer,\n      peaks: null,\n      volume: data.vol,\n      panning: 0,\n      muted: false,\n      solo: false,\n      sampleNode: null,\n      volumeNode: null,\n    });\n  };\n  loadBuffer = async (data: any) => {\n    const song = this;\n    await this.audioContext.decodeAudioData(\n      data.buffer,\n      (buffer) => {\n        if (!buffer) {\n          Promise.reject(\"error decoding file data: \");\n        }\n        this.decodedAudioBuffers = [...this.decodedAudioBuffers, buffer];\n        this.addTrack({ buffer, vol: data.vol });\n        Promise.resolve(song);\n      },\n      (error) => Promise.reject(error)\n    );\n  };\n  buildGraph = () => {\n    var sources = [];\n    for (var i = 0; i < this.decodedAudioBuffers.length; i++) {\n      var sample = this.decodedAudioBuffers[i];\n      sources[i] = this.audioContext.createBufferSource();\n      sources[i].buffer = sample;\n      this.trackVolumeNodes[i] = this.audioContext.createGain();\n      if (this.trackVolumeNodes[i]) {\n        this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n      }\n      sources[i].connect(this.trackVolumeNodes[i]);\n      this.trackVolumeNodes[i].connect(this.masterVolumeNode);\n      this.masterVolumeNode.connect(this.analyserNode);\n      this.analyserNode.connect(this.audioContext.destination);\n    }\n    this.sampleNodes = sources;\n  };\n  play = (startTime: number) => {\n    this.buildGraph();\n    this.setTrackVolumesDependingOnMuteSoloStatus();\n    this.elapsedTimeSinceStart = startTime;\n    this.sampleNodes.forEach((s) => {\n      s.start(0, startTime);\n    });\n    this.paused = false;\n  };\n  stop = () => {\n    if (this.paused === true) return;\n    this.sampleNodes.forEach((s) => {\n      s.stop(0);\n    });\n    this.paused = true;\n  };\n  pause = () => {\n    if (!this.paused) {\n      this.stop();\n    } else {\n      this.play(this.elapsedTimeSinceStart);\n    }\n  };\n  setVolume = (value: number) => {\n    this.volume = value;\n    this.masterVolumeNode.gain.value = value;\n  };\n  setMasterVolume = (val: number) => {\n    var fraction;\n    if (val === undefined) {\n      fraction = 0.75;\n    } else {\n      fraction = val;\n    }\n    this.setVolume(fraction * fraction);\n  };\n  setVolumeOfTrack = (value: number, trackNumber: number) => {\n    if (this.trackVolumeNodes[trackNumber] !== undefined) {\n      this.trackVolumeNodes[trackNumber].gain.value = value;\n      this.tracks[trackNumber].volume = value;\n    }\n  };\n  getUrlsOfTracks = () => {\n    var urls: string[] = [];\n    this.tracks.forEach((track) => {\n      urls.push(track.url);\n    });\n    return urls;\n  };\n  getDuration = () => {\n    if (this.decodedAudioBuffers !== undefined) {\n      let dur = 0;\n      for (let i = 0; i < this.decodedAudioBuffers.length; i++) {\n        if (dur < this.decodedAudioBuffers[i].duration)\n          dur = this.decodedAudioBuffers[i].duration;\n      }\n      return dur;\n    }\n    return undefined;\n  };\n  getNbTracks = () => {\n    return this.tracks.length;\n  };\n  toggleLoopMode = () => {\n    this.loopMode = !this.loopMode;\n  };\n  toggleMute = () => {\n    this.muted = !this.muted;\n    if (this.muted) {\n      this.masterVolumeNode.gain.value = 0;\n    } else {\n      this.masterVolumeNode.gain.value = this.volume;\n    }\n  };\n  togglePause = () => {\n    this.paused = !this.paused;\n  };\n  setTrackVolumesDependingOnMuteSoloStatus = () => {\n    var thereIsSolo = false;\n    var nbTracks = this.getNbTracks();\n    for (var i = 0; i < nbTracks; i++) {\n      if (this.tracks[i].solo) {\n        thereIsSolo = true;\n        break;\n      }\n    }\n    if (thereIsSolo) {\n      for (let i = 0; i < nbTracks; i++) {\n        if (this.tracks[i].solo) {\n          this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n        } else {\n          this.trackVolumeNodes[i].gain.value = 0;\n        }\n      }\n      return;\n    }\n    for (let i = 0; i < nbTracks; i++) {\n      if (this.trackVolumeNodes[i] !== undefined) {\n        if (this.tracks[i].muted) {\n          this.trackVolumeNodes[i].gain.value = 0;\n        } else {\n          this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n        }\n      }\n    }\n  };\n}\n","import { IQueue, IEnvelope, ISetup } from \"../../_types/player.types\";\r\n\r\nexport class WebAudioFontChannel {\r\n  audioContext: AudioContext;\r\n  input: any;\r\n  band32: any;\r\n  band64: any;\r\n  band128: any;\r\n  band256: any;\r\n  band512: any;\r\n  band1k: any;\r\n  band2k: any;\r\n  band4k: any;\r\n  band8k: any;\r\n  band16k: any;\r\n  output: any;\r\n  constructor(audioContext: AudioContext) {\r\n    console.log(\"WebAudioFont Channel v1.04\");\r\n    this.audioContext = audioContext;\r\n    this.input = this.audioContext.createDynamicsCompressor();\r\n    this.input.threshold.setValueAtTime(-3, 0); // = -3; //-50\r\n    this.input.knee.setValueAtTime(30, 0); //40\r\n    this.input.ratio.setValueAtTime(12, 0); //12\r\n    this.input.attack.setValueAtTime(0.05, 0); //0\r\n    this.input.release.setValueAtTime(0.08, 0); //0.25\r\n    this.band32 = this.bandEqualizer(this.input, 32);\r\n    this.band64 = this.bandEqualizer(this.band32, 64);\r\n    this.band128 = this.bandEqualizer(this.band64, 128);\r\n    this.band256 = this.bandEqualizer(this.band128, 256);\r\n    this.band512 = this.bandEqualizer(this.band256, 512);\r\n    this.band1k = this.bandEqualizer(this.band512, 1024);\r\n    this.band2k = this.bandEqualizer(this.band1k, 2048);\r\n    this.band4k = this.bandEqualizer(this.band2k, 4096);\r\n    this.band8k = this.bandEqualizer(this.band4k, 8192);\r\n    this.band16k = this.bandEqualizer(this.band8k, 16384);\r\n    this.output = audioContext.createGain();\r\n    this.band16k.connect(this.output);\r\n  }\r\n  bandEqualizer = (from: any, frequency: any) => {\r\n    var filter = this.audioContext.createBiquadFilter();\r\n    filter.frequency.setTargetAtTime(frequency, 0, 0.0001);\r\n    filter.type = \"peaking\";\r\n    filter.gain.setTargetAtTime(0, 0, 0.0001);\r\n    filter.Q.setTargetAtTime(1.0, 0, 0.0001);\r\n    from.connect(filter);\r\n    return filter;\r\n  };\r\n}\r\nexport class WebAudioFontLoader {\r\n  player: any;\r\n  cached: { filePath: any; variableName: any }[];\r\n  choosenInfos?: [number, number][];\r\n  drumKeyArray?: string[];\r\n  drumNamesArray?: string[];\r\n  instrumentKeyArray?: string[];\r\n  instrumentNamesArray?: string[];\r\n  constructor(player: WebAudioFontPlayer) {\r\n    console.log(\"WebAudioFont Loader v1.27\");\r\n    this.player = player;\r\n    this.cached = [];\r\n  }\r\n  startLoad = (filePath: string, variableName: any) => {\r\n    if (window[variableName]) {\r\n      return;\r\n    }\r\n    for (var i = 0; i < this.cached.length; i++) {\r\n      if (this.cached[i].variableName === variableName) {\r\n        return;\r\n      }\r\n    }\r\n    this.cached.push({\r\n      filePath: filePath,\r\n      variableName: variableName,\r\n    });\r\n    var r = document.createElement(\"script\");\r\n    r.setAttribute(\"type\", \"text/javascript\");\r\n    r.setAttribute(\"src\", filePath);\r\n    document.getElementsByTagName(\"head\")[0].appendChild(r);\r\n    this.decodeAfterLoading(variableName);\r\n  };\r\n  decodeAfterLoading = (variableName: any) => {\r\n    this.waitOrFinish(variableName, () => {\r\n      this.player.adjustPreset(window[variableName]);\r\n    });\r\n  };\r\n  waitOrFinish = (variableName: any, onFinish: () => void) => {\r\n    if (window[variableName]) {\r\n      onFinish();\r\n    } else {\r\n      var me = this;\r\n      setTimeout(function () {\r\n        me.waitOrFinish(variableName, onFinish);\r\n      }, 111);\r\n    }\r\n  };\r\n  loaded = (variableName: any) => {\r\n    if (!window[variableName]) {\r\n      return false;\r\n    }\r\n    var preset = window[variableName];\r\n    for (var i = 0; i < preset.zones.length; i++) {\r\n      if (!preset.zones[i].buffer) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n  progress = () => {\r\n    if (this.cached.length > 0) {\r\n      for (var k = 0; k < this.cached.length; k++) {\r\n        if (!this.loaded(this.cached[k].variableName)) {\r\n          return k / this.cached.length;\r\n        }\r\n      }\r\n      return 1;\r\n    } else {\r\n      return 1;\r\n    }\r\n  };\r\n  waitLoad = (onFinish: () => void) => {\r\n    var me = this;\r\n    if (this.progress() >= 1) {\r\n      onFinish();\r\n    } else {\r\n      setTimeout(function () {\r\n        me.waitLoad(onFinish);\r\n      }, 333);\r\n    }\r\n  };\r\n  instrumentTitles = () => {\r\n    if (!this.instrumentNamesArray) {\r\n      var insNames = [];\r\n      insNames[0] = \"Acoustic Grand Piano: Piano\";\r\n      insNames[1] = \"Bright Acoustic Piano: Piano\";\r\n      insNames[2] = \"Electric Grand Piano: Piano\";\r\n      insNames[3] = \"Honky-tonk Piano: Piano\";\r\n      insNames[4] = \"Electric Piano 1: Piano\";\r\n      insNames[5] = \"Electric Piano 2: Piano\";\r\n      insNames[6] = \"Harpsichord: Piano\";\r\n      insNames[7] = \"Clavinet: Piano\";\r\n      insNames[8] = \"Celesta: Chromatic Percussion\";\r\n      insNames[9] = \"Glockenspiel: Chromatic Percussion\";\r\n      insNames[10] = \"Music Box: Chromatic Percussion\";\r\n      insNames[11] = \"Vibraphone: Chromatic Percussion\";\r\n      insNames[12] = \"Marimba: Chromatic Percussion\";\r\n      insNames[13] = \"Xylophone: Chromatic Percussion\";\r\n      insNames[14] = \"Tubular Bells: Chromatic Percussion\";\r\n      insNames[15] = \"Dulcimer: Chromatic Percussion\";\r\n      insNames[16] = \"Drawbar Organ: Organ\";\r\n      insNames[17] = \"Percussive Organ: Organ\";\r\n      insNames[18] = \"Rock Organ: Organ\";\r\n      insNames[19] = \"Church Organ: Organ\";\r\n      insNames[20] = \"Reed Organ: Organ\";\r\n      insNames[21] = \"Accordion: Organ\";\r\n      insNames[22] = \"Harmonica: Organ\";\r\n      insNames[23] = \"Tango Accordion: Organ\";\r\n      insNames[24] = \"Acoustic Guitar (nylon): Guitar\";\r\n      insNames[25] = \"Acoustic Guitar (steel): Guitar\";\r\n      insNames[26] = \"Electric Guitar (jazz): Guitar\";\r\n      insNames[27] = \"Electric Guitar (clean): Guitar\";\r\n      insNames[28] = \"Electric Guitar (muted): Guitar\";\r\n      insNames[29] = \"Overdriven Guitar: Guitar\";\r\n      insNames[30] = \"Distortion Guitar: Guitar\";\r\n      insNames[31] = \"Guitar Harmonics: Guitar\";\r\n      insNames[32] = \"Acoustic Bass: Bass\";\r\n      insNames[33] = \"Electric Bass (finger): Bass\";\r\n      insNames[34] = \"Electric Bass (pick): Bass\";\r\n      insNames[35] = \"Fretless Bass: Bass\";\r\n      insNames[36] = \"Slap Bass 1: Bass\";\r\n      insNames[37] = \"Slap Bass 2: Bass\";\r\n      insNames[38] = \"Synth Bass 1: Bass\";\r\n      insNames[39] = \"Synth Bass 2: Bass\";\r\n      insNames[40] = \"Violin: Strings\";\r\n      insNames[41] = \"Viola: Strings\";\r\n      insNames[42] = \"Cello: Strings\";\r\n      insNames[43] = \"Contrabass: Strings\";\r\n      insNames[44] = \"Tremolo Strings: Strings\";\r\n      insNames[45] = \"Pizzicato Strings: Strings\";\r\n      insNames[46] = \"Orchestral Harp: Strings\";\r\n      insNames[47] = \"Timpani: Strings\";\r\n      insNames[48] = \"String Ensemble 1: Ensemble\";\r\n      insNames[49] = \"String Ensemble 2: Ensemble\";\r\n      insNames[50] = \"Synth Strings 1: Ensemble\";\r\n      this.instrumentNamesArray = insNames;\r\n    }\r\n    return this.instrumentNamesArray;\r\n  };\r\n  instrumentKeys = () => {\r\n    if (!this.instrumentKeyArray) {\r\n      this.instrumentKeyArray = [\r\n        \"0000_Aspirin_sf2_file\",\r\n        \"0001_FluidR3_GM_sf2_file\",\r\n        \"0002_GeneralUserGS_sf2_file\",\r\n        \"0003_GeneralUserGS_sf2_file\",\r\n        \"0010_Aspirin_sf2_file\",\r\n        \"0011_Aspirin_sf2_file\",\r\n        \"0012_GeneralUserGS_sf2_file\",\r\n        \"0020_Aspirin_sf2_file\",\r\n        \"0021_Aspirin_sf2_file\",\r\n        \"0022_Aspirin_sf2_file\",\r\n        \"0030_Aspirin_sf2_file\",\r\n        \"0031_Aspirin_sf2_file\",\r\n        \"0040_Aspirin_sf2_file\",\r\n        \"0041_FluidR3_GM_sf2_file\",\r\n        \"0042_GeneralUserGS_sf2_file\",\r\n        \"0043_GeneralUserGS_sf2_file\",\r\n        \"0044_GeneralUserGS_sf2_file\",\r\n        \"0045_GeneralUserGS_sf2_file\",\r\n        \"0046_GeneralUserGS_sf2_file\",\r\n        \"0050_Aspirin_sf2_file\",\r\n        \"0051_FluidR3_GM_sf2_file\",\r\n        \"0052_GeneralUserGS_sf2_file\",\r\n        \"0053_GeneralUserGS_sf2_file\",\r\n        \"0054_GeneralUserGS_sf2_file\",\r\n        \"0060_Aspirin_sf2_file\",\r\n        \"0061_Aspirin_sf2_file\",\r\n        \"0062_GeneralUserGS_sf2_file\",\r\n        \"0070_Aspirin_sf2_file\",\r\n        \"0071_GeneralUserGS_sf2_file\",\r\n        \"0080_Aspirin_sf2_file\",\r\n        \"0080_Chaos_sf2_file\",\r\n        \"0081_FluidR3_GM_sf2_file\",\r\n        \"0090_Aspirin_sf2_file\",\r\n        \"0091_SoundBlasterOld_sf2\",\r\n        \"0100_Aspirin_sf2_file\",\r\n        \"0101_GeneralUserGS_sf2_file\",\r\n        \"0110_Aspirin_sf2_file\",\r\n        \"0111_FluidR3_GM_sf2_file\",\r\n        \"0120_Aspirin_sf2_file\",\r\n        \"0121_FluidR3_GM_sf2_file\",\r\n        \"0130_Aspirin_sf2_file\",\r\n        \"0131_FluidR3_GM_sf2_file\",\r\n        \"0140_Aspirin_sf2_file\",\r\n        \"0141_FluidR3_GM_sf2_file\",\r\n        \"0142_GeneralUserGS_sf2_file\",\r\n        \"0143_GeneralUserGS_sf2_file\",\r\n        \"0150_Aspirin_sf2_file\",\r\n        \"0151_FluidR3_GM_sf2_file\",\r\n        \"0160_Aspirin_sf2_file\",\r\n        \"0161_Aspirin_sf2_file\",\r\n        \"0170_Aspirin_sf2_file\",\r\n        \"0171_FluidR3_GM_sf2_file\",\r\n        \"0172_FluidR3_GM_sf2_file\",\r\n        \"0180_Aspirin_sf2_file\",\r\n        \"0181_Aspirin_sf2_file\",\r\n        \"0190_Aspirin_sf2_file\",\r\n        \"0191_Aspirin_sf2_file\",\r\n        \"0200_Aspirin_sf2_file\",\r\n        \"0201_Aspirin_sf2_file\",\r\n        \"0210_Aspirin_sf2_file\",\r\n        \"0211_Aspirin_sf2_file\",\r\n        \"0212_GeneralUserGS_sf2_file\",\r\n        \"0220_Aspirin_sf2_file\",\r\n        \"0221_FluidR3_GM_sf2_file\",\r\n        \"0230_Aspirin_sf2_file\",\r\n        \"0231_FluidR3_GM_sf2_file\",\r\n        \"0232_FluidR3_GM_sf2_file\",\r\n        \"0233_FluidR3_GM_sf2_file\",\r\n        \"0240_Aspirin_sf2_file\",\r\n        \"0241_GeneralUserGS_sf2_file\",\r\n        \"0241_JCLive_sf2_file\",\r\n        \"0242_JCLive_sf2_file\",\r\n        \"0243_JCLive_sf2_file\",\r\n        \"0253_Acoustic_Guitar_sf2_file\",\r\n        \"0250_Aspirin_sf2_file\",\r\n        \"0251_Acoustic_Guitar_sf2_file\",\r\n        \"0252_Acoustic_Guitar_sf2_file\",\r\n        \"0253_Acoustic_Guitar_sf2_file\",\r\n        \"0254_Acoustic_Guitar_sf2_file\",\r\n        \"0255_GeneralUserGS_sf2_file\",\r\n        \"0260_Aspirin_sf2_file\",\r\n        \"0261_GeneralUserGS_sf2_file\",\r\n        \"0262_Stratocaster_sf2_file\",\r\n        \"0270_Aspirin_sf2_file\",\r\n        \"0271_GeneralUserGS_sf2_file\",\r\n        \"0280_Aspirin_sf2_file\",\r\n        \"0281_Aspirin_sf2_file\",\r\n        \"0282_FluidR3_GM_sf2_file\",\r\n        \"0283_GeneralUserGS_sf2_file\",\r\n        \"0290_Aspirin_sf2_file\",\r\n        \"0291_Aspirin_sf2_file\",\r\n        \"0292_Aspirin_sf2_file\",\r\n        \"0300_Aspirin_sf2_file\",\r\n        \"0301_Aspirin_sf2_file\",\r\n        \"0302_Aspirin_sf2_file\",\r\n        \"0303_Aspirin_sf2_file\",\r\n        \"0304_Aspirin_sf2_file\",\r\n        \"0310_Aspirin_sf2_file\",\r\n        \"0311_FluidR3_GM_sf2_file\",\r\n        \"0320_Aspirin_sf2_file\",\r\n        \"0321_GeneralUserGS_sf2_file\",\r\n        \"0322_GeneralUserGS_sf2_file\",\r\n        \"0330_Aspirin_sf2_file\",\r\n        \"0331_GeneralUserGS_sf2_file\",\r\n        \"0332_GeneralUserGS_sf2_file\",\r\n        \"0340_Aspirin_sf2_file\",\r\n        \"0341_Aspirin_sf2_file\",\r\n        \"0350_Aspirin_sf2_file\",\r\n        \"0351_GeneralUserGS_sf2_file\",\r\n        \"0360_Aspirin_sf2_file\",\r\n        \"0361_GeneralUserGS_sf2_file\",\r\n        \"0370_Aspirin_sf2_file\",\r\n        \"0371_GeneralUserGS_sf2_file\",\r\n        \"0372_GeneralUserGS_sf2_file\",\r\n        \"0380_Aspirin_sf2_file\",\r\n        \"0381_FluidR3_GM_sf2_file\",\r\n        \"0382_FluidR3_GM_sf2_file\",\r\n        \"0383_GeneralUserGS_sf2_file\",\r\n        \"0384_GeneralUserGS_sf2_file\",\r\n        \"0385_GeneralUserGS_sf2_file\",\r\n        \"0386_GeneralUserGS_sf2_file\",\r\n        \"0387_GeneralUserGS_sf2_file\",\r\n        \"0390_Aspirin_sf2_file\",\r\n        \"0391_FluidR3_GM_sf2_file\",\r\n        \"0392_FluidR3_GM_sf2_file\",\r\n        \"0393_GeneralUserGS_sf2_file\",\r\n        \"0400_Aspirin_sf2_file\",\r\n        \"0401_Aspirin_sf2_file\",\r\n        \"0402_GeneralUserGS_sf2_file\",\r\n        \"0410_Aspirin_sf2_file\",\r\n        \"0410_Chaos_sf2_file\",\r\n        \"0411_FluidR3_GM_sf2_file\",\r\n        \"0420_Aspirin_sf2_file\",\r\n        \"0421_FluidR3_GM_sf2_file\",\r\n        \"0430_Aspirin_sf2_file\",\r\n        \"0431_FluidR3_GM_sf2_file\",\r\n        \"0440_Aspirin_sf2_file\",\r\n        \"0441_GeneralUserGS_sf2_file\",\r\n        \"0442_GeneralUserGS_sf2_file\",\r\n        \"0450_Aspirin_sf2_file\",\r\n        \"0451_FluidR3_GM_sf2_file\",\r\n        \"0460_Aspirin_sf2_file\",\r\n        \"0461_FluidR3_GM_sf2_file\",\r\n        \"0470_Aspirin_sf2_file\",\r\n        \"0471_FluidR3_GM_sf2_file\",\r\n        \"0480_Aspirin_sf2_file\",\r\n        \"0480_SoundBlasterOld_sf2\",\r\n        \"04810_GeneralUserGS_sf2_file\",\r\n        \"0481_Aspirin_sf2_file\",\r\n        \"0481_FluidR3_GM_sf2_file\",\r\n        \"0481_GeneralUserGS_sf2_file\",\r\n        \"0482_Aspirin_sf2_file\",\r\n        \"0482_GeneralUserGS_sf2_file\",\r\n        \"0483_GeneralUserGS_sf2_file\",\r\n        \"0484_GeneralUserGS_sf2_file\",\r\n        \"0485_GeneralUserGS_sf2_file\",\r\n        \"0486_GeneralUserGS_sf2_file\",\r\n        \"0487_GeneralUserGS_sf2_file\",\r\n        \"0488_GeneralUserGS_sf2_file\",\r\n        \"0489_GeneralUserGS_sf2_file\",\r\n        \"0490_Aspirin_sf2_file\",\r\n        \"0490_GeneralUserGS_sf2_file\",\r\n        \"0491_GeneralUserGS_sf2_file\",\r\n        \"0492_GeneralUserGS_sf2_file\",\r\n        \"0500_Aspirin_sf2_file\",\r\n      ];\r\n    }\r\n    return this.instrumentKeyArray;\r\n  };\r\n  instrumentInfo = (n: number) => {\r\n    var key = this.instrumentKeys()[n];\r\n    var p = 1 * Number(key.substr(0, 3));\r\n    return {\r\n      variable: \"_tone_\" + key,\r\n      url: \"https://surikov.github.io/webaudiofontdata/sound/\" + key + \".js\",\r\n      title: this.instrumentTitles()[p],\r\n    };\r\n  };\r\n  findInstrument = (program: number) => {\r\n    if (!this.choosenInfos) {\r\n      this.choosenInfos = [\r\n        [1, 2], //Accoustic Grand Piano\r\n        [2, 14], //Bright Accoustic Piano\r\n        [3, 25], //Electric Grand Piano\r\n        [4, 37], //Honky-Tonk Piano\r\n        [5, 48], //Electric Pino 1\r\n        [6, 58], //Electric Piano 2\r\n        [7, 70], //HarpsiChord Piano\r\n        [8, 83], //Cravinet\r\n        [9, 91], //Celesta\r\n        [10, 99], //Glockenspiel\r\n        [11, 107], //Music Box\r\n        [12, 118], //Vibraphone\r\n        [13, 127], // Marimba\r\n        [14, 136], // Xylophone\r\n        [15, 144], // Tubular Bells\r\n        [16, 152], // Dulcimer\r\n        [17, 164], // Drawbar Organ\r\n        [18, 170], // Percussive Organ\r\n        [19, 183], //Rock Organ\r\n        [20, 194], // Church Organ\r\n        [21, 205], //Reed Organ\r\n        [22, 215], //Accordion\r\n        [23, 228], //\r\n        [24, 241], //\r\n        [25, 254], //\r\n        [26, 263], //\r\n        [27, 277], //\r\n        [28, 296], //\r\n        [29, 308], //\r\n        [30, 319], //\r\n        [31, 350], //\r\n        [32, 356], //\r\n        [33, 369], //\r\n        [34, 379], //\r\n        [35, 385], //\r\n        [36, 399], // Fretless Bass\r\n        [37, 403], // Slap Bass 1\r\n        [38, 412], // Slap Bass 2\r\n        [39, 421], // Synth Bass 1\r\n        [40, 438], // Synth Bass 2\r\n        [41, 452], // Violin\r\n        [42, 461], // Viola\r\n        [43, 467], // Cello\r\n        [44, 477], // Contrabass\r\n        [45, 488], // Tremolo Strings\r\n        [46, 493], // Pizzicato Strings\r\n        [47, 501], // Orchestral Harp\r\n        [48, 511], // Timpani\r\n        [49, 518], // String Ensemble 1\r\n        [50, 547], //String Ensemble 2\r\n      ];\r\n    }\r\n    for (var i = 0; i < this.instrumentKeys().length; i++) {\r\n      if (program === 1 * Number(this.instrumentKeys()[i].substring(0, 3))) {\r\n        return i;\r\n      }\r\n    }\r\n    console.log(\"program\", program, \"not found\");\r\n    return 0;\r\n  };\r\n  drumTitles = () => {\r\n    if (!this.drumNamesArray) {\r\n      var drumNames = [];\r\n      drumNames[35] = \"Bass Drum 2\";\r\n      drumNames[36] = \"Bass Drum 1\";\r\n      drumNames[37] = \"Side Stick/Rimshot\";\r\n      drumNames[38] = \"Snare Drum 1\";\r\n      drumNames[39] = \"Hand Clap\";\r\n      drumNames[40] = \"Snare Drum 2\";\r\n      drumNames[41] = \"Low Tom 2\";\r\n      drumNames[42] = \"Closed Hi-hat\";\r\n      drumNames[43] = \"Low Tom 1\";\r\n      drumNames[44] = \"Pedal Hi-hat\";\r\n      drumNames[45] = \"Mid Tom 2\";\r\n      drumNames[46] = \"Open Hi-hat\";\r\n      drumNames[47] = \"Mid Tom 1\";\r\n      drumNames[48] = \"High Tom 2\";\r\n      drumNames[49] = \"Crash Cymbal 1\";\r\n      drumNames[50] = \"High Tom 1\";\r\n      drumNames[51] = \"Ride Cymbal 1\";\r\n      drumNames[52] = \"Chinese Cymbal\";\r\n      drumNames[53] = \"Ride Bell\";\r\n      drumNames[54] = \"Tambourine\";\r\n      drumNames[55] = \"Splash Cymbal\";\r\n      drumNames[56] = \"Cowbell\";\r\n      drumNames[57] = \"Crash Cymbal 2\";\r\n      drumNames[58] = \"Vibra Slap\";\r\n      drumNames[59] = \"Ride Cymbal 2\";\r\n      drumNames[60] = \"High Bongo\";\r\n      drumNames[61] = \"Low Bongo\";\r\n      drumNames[62] = \"Mute High Conga\";\r\n      drumNames[63] = \"Open High Conga\";\r\n      drumNames[64] = \"Low Conga\";\r\n      drumNames[65] = \"High Timbale\";\r\n      drumNames[66] = \"Low Timbale\";\r\n      drumNames[67] = \"High Agogo\";\r\n      drumNames[68] = \"Low Agogo\";\r\n      drumNames[69] = \"Cabasa\";\r\n      drumNames[70] = \"Maracas\";\r\n      drumNames[71] = \"Short Whistle\";\r\n      drumNames[72] = \"Long Whistle\";\r\n      drumNames[73] = \"Short Guiro\";\r\n      drumNames[74] = \"Long Guiro\";\r\n      drumNames[75] = \"Claves\";\r\n      drumNames[76] = \"High Wood Block\";\r\n      drumNames[77] = \"Low Wood Block\";\r\n      drumNames[78] = \"Mute Cuica\";\r\n      drumNames[79] = \"Open Cuica\";\r\n      drumNames[80] = \"Mute Triangle\";\r\n      drumNames[81] = \"Open Triangle\";\r\n      this.drumNamesArray = drumNames;\r\n    }\r\n    return this.drumNamesArray;\r\n  };\r\n  drumKeys = () => {\r\n    if (!this.drumKeyArray) {\r\n      this.drumKeyArray = [\r\n        \"35_0_SBLive_sf2\",\r\n        \"36_0_SBLive_sf2\",\r\n        \"37_0_SBLive_sf2\",\r\n        \"38_0_SBLive_sf2\",\r\n        \"39_0_SBLive_sf2\",\r\n        \"40_0_SBLive_sf2\",\r\n        \"41_0_SBLive_sf2\",\r\n        \"42_0_SBLive_sf2\",\r\n        \"43_0_SBLive_sf2\",\r\n        \"44_0_SBLive_sf2\",\r\n        \"45_0_SBLive_sf2\",\r\n        \"46_0_SBLive_sf2\",\r\n        \"47_0_SBLive_sf2\",\r\n        \"48_0_SBLive_sf2\",\r\n        \"49_0_SBLive_sf2\",\r\n        \"50_0_SBLive_sf2\",\r\n        \"51_0_SBLive_sf2\",\r\n        \"52_0_SBLive_sf2\",\r\n        \"53_0_SBLive_sf2\",\r\n        \"54_0_SBLive_sf2\",\r\n        \"55_0_SBLive_sf2\",\r\n        \"56_0_SBLive_sf2\",\r\n        \"57_0_SBLive_sf2\",\r\n        \"58_0_SBLive_sf2\",\r\n        \"59_0_SBLive_sf2\",\r\n        \"60_0_SBLive_sf2\",\r\n        \"61_0_SBLive_sf2\",\r\n        \"62_0_SBLive_sf2\",\r\n        \"63_0_SBLive_sf2\",\r\n        \"64_0_SBLive_sf2\",\r\n        \"65_0_SBLive_sf2\",\r\n        \"66_0_SBLive_sf2\",\r\n        \"67_0_SBLive_sf2\",\r\n        \"68_0_SBLive_sf2\",\r\n        \"69_0_SBLive_sf2\",\r\n        \"70_0_SBLive_sf2\",\r\n        \"71_0_SBLive_sf2\",\r\n        \"72_0_SBLive_sf2\",\r\n        \"73_0_SBLive_sf2\",\r\n        \"74_0_SBLive_sf2\",\r\n        \"75_0_SBLive_sf2\",\r\n        \"76_0_SBLive_sf2\",\r\n        \"77_0_SBLive_sf2\",\r\n        \"78_0_SBLive_sf2\",\r\n        \"79_0_SBLive_sf2\",\r\n        \"80_0_SBLive_sf2\",\r\n        \"81_0_SBLive_sf2\",\r\n      ];\r\n    }\r\n    return this.drumKeyArray;\r\n  };\r\n  drumInfo = (n: number) => {\r\n    var key = this.drumKeys()[n];\r\n    var p = 1 * Number(key.substr(0, 2));\r\n    return {\r\n      variable: \"_drum_\" + key,\r\n      url: \"https://surikov.github.io/webaudiofontdata/sound/128\" + key + \".js\",\r\n      pitch: p,\r\n      title: this.drumTitles()[p],\r\n    };\r\n  };\r\n  findDrum = (nn: number) => {\r\n    for (var i = 0; i < this.drumKeys().length; i++) {\r\n      if (nn === 1 * Number(this.drumKeys()[i].substring(0, 2))) {\r\n        return i;\r\n      }\r\n    }\r\n    return 0;\r\n  };\r\n}\r\nexport class WebAudioFontPlayer {\r\n  audioContext: AudioContext;\r\n  envelopes: any[];\r\n  loader: any;\r\n  onCacheFinish: any;\r\n  onCacheProgress: any;\r\n  afterTime: number;\r\n  nearZero: number;\r\n  constructor(audioContext: AudioContext) {\r\n    this.audioContext = audioContext;\r\n    this.envelopes = [];\r\n    this.loader = new WebAudioFontLoader(this);\r\n    this.onCacheFinish = null;\r\n    this.onCacheProgress = null;\r\n    this.afterTime = 0.05;\r\n    this.nearZero = 0.000001;\r\n  }\r\n  createChannel = () => {\r\n    return new WebAudioFontChannel(this.audioContext);\r\n  };\r\n  createReverberator = () => {\r\n    return new WebAudioFontReverberator(this.audioContext);\r\n  };\r\n  limitVolume = (volume: number) => {\r\n    if (volume) {\r\n      volume = 1.0 * volume;\r\n    } else {\r\n      volume = 0.5;\r\n    }\r\n    return volume;\r\n  };\r\n  queueChord = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides,\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    for (var i = 0; i < pitches.length; i++) {\r\n      this.queueWaveTable({\r\n        target,\r\n        preset,\r\n        when,\r\n        pitches: pitches[i],\r\n        duration,\r\n        volume: volume - Math.random() * 0.01,\r\n        slides,\r\n      });\r\n    }\r\n  };\r\n  queueStrumUp = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides,\r\n  }: IQueue) => {\r\n    pitches.sort((a: number, b: number) => a - b);\r\n    this.queueStrum({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides,\r\n    });\r\n  };\r\n  queueStrumDown = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides,\r\n  }: IQueue) => {\r\n    pitches.sort((a: number, b: number) => a - b);\r\n    this.queueStrum({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides,\r\n    });\r\n  };\r\n  queueStrum = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides,\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    if (when < this.audioContext.currentTime) {\r\n      when = this.audioContext.currentTime;\r\n    }\r\n    for (var i = 0; i < pitches.length; i++) {\r\n      this.queueWaveTable({\r\n        target,\r\n        preset,\r\n        when: when + i * 0.01,\r\n        pitches: pitches[i],\r\n        duration,\r\n        volume: volume - Math.random() * 0.01,\r\n        slides,\r\n      });\r\n      volume = 0.9 * volume;\r\n    }\r\n  };\r\n  queueSnap = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides,\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    volume = 1.5 * (volume || 1.0);\r\n    duration = 0.05;\r\n    this.queueChord({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides,\r\n    });\r\n  };\r\n  queueWaveTable = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches: pitch,\r\n    duration,\r\n    volume,\r\n    slides,\r\n  }: IQueue) => {\r\n    if (this.audioContext.state === \"suspended\") {\r\n      console.log(\"audioContext.resume\");\r\n      this.audioContext.resume();\r\n    }\r\n    volume = this.limitVolume(volume);\r\n    var zone = this.findZone(preset, pitch);\r\n    if (!zone.buffer) {\r\n      console.log(\"empty buffer \", zone);\r\n      return;\r\n    }\r\n    var baseDetune =\r\n      zone.originalPitch - 100.0 * zone.coarseTune - zone.fineTune;\r\n    var playbackRate = 1.0 * Math.pow(2, (100.0 * pitch - baseDetune) / 1200.0);\r\n    // var sampleRatio = zone.sampleRate / audioContext.sampleRate;\r\n    var startWhen = when;\r\n    if (startWhen < this.audioContext.currentTime) {\r\n      startWhen = this.audioContext.currentTime;\r\n    }\r\n    var waveDuration = duration + this.afterTime;\r\n    var loop = true;\r\n    if (zone.loopStart < 1 || zone.loopStart >= zone.loopEnd) {\r\n      loop = false;\r\n    }\r\n    if (!loop) {\r\n      if (waveDuration > zone.buffer.duration / playbackRate) {\r\n        waveDuration = zone.buffer.duration / playbackRate;\r\n      }\r\n    }\r\n    var envelope = this.findEnvelope({\r\n      target,\r\n      when: startWhen,\r\n      duration: waveDuration,\r\n    });\r\n    this.setupEnvelope({\r\n      envelope,\r\n      zone,\r\n      volume,\r\n      startWhen,\r\n      waveDuration,\r\n      duration,\r\n    });\r\n    envelope.audioBufferSourceNode = this.audioContext.createBufferSource();\r\n    envelope.audioBufferSourceNode.playbackRate.setValueAtTime(playbackRate, 0);\r\n    if (slides) {\r\n      if (slides.length > 0) {\r\n        envelope.audioBufferSourceNode.playbackRate.setValueAtTime(\r\n          playbackRate,\r\n          when\r\n        );\r\n        for (var i = 0; i < slides.length; i++) {\r\n          var newPlaybackRate =\r\n            1.0 * Math.pow(2, (100.0 * slides[i].pitch - baseDetune) / 1200.0);\r\n          var newWhen = when + slides[i].when;\r\n          envelope.audioBufferSourceNode.playbackRate.linearRampToValueAtTime(\r\n            newPlaybackRate,\r\n            newWhen\r\n          );\r\n        }\r\n      }\r\n    }\r\n    envelope.audioBufferSourceNode.buffer = zone.buffer;\r\n    if (loop) {\r\n      envelope.audioBufferSourceNode.loop = true;\r\n      envelope.audioBufferSourceNode.loopStart =\r\n        zone.loopStart / zone.sampleRate + zone.delay;\r\n      envelope.audioBufferSourceNode.loopEnd =\r\n        zone.loopEnd / zone.sampleRate + zone.delay;\r\n    } else {\r\n      envelope.audioBufferSourceNode.loop = false;\r\n    }\r\n    envelope.audioBufferSourceNode.connect(envelope);\r\n    envelope.audioBufferSourceNode.start(startWhen, zone.delay);\r\n    envelope.audioBufferSourceNode.stop(startWhen + waveDuration);\r\n    envelope.when = startWhen;\r\n    envelope.duration = waveDuration;\r\n    envelope.pitch = pitch;\r\n    envelope.preset = preset;\r\n    return envelope;\r\n  };\r\n  noZeroVolume = (n: number) => {\r\n    if (n > this.nearZero) {\r\n      return n;\r\n    } else {\r\n      return this.nearZero;\r\n    }\r\n  };\r\n  setupEnvelope = ({\r\n    envelope,\r\n    zone,\r\n    volume,\r\n    startWhen: when,\r\n    waveDuration: sampleDuration,\r\n    duration,\r\n  }: IEnvelope) => {\r\n    envelope.gain.setValueAtTime(\r\n      this.noZeroVolume(0),\r\n      this.audioContext.currentTime\r\n    );\r\n    var lastTime = 0;\r\n    var lastVolume = 0;\r\n    var ahdsr = zone.ahdsr;\r\n    if (sampleDuration < duration + this.afterTime) {\r\n      duration = sampleDuration - this.afterTime;\r\n    }\r\n    if (ahdsr) {\r\n      if (!(ahdsr.length > 0)) {\r\n        ahdsr = [\r\n          {\r\n            duration: 0,\r\n            volume: 1,\r\n          },\r\n          {\r\n            duration: 0.5,\r\n            volume: 1,\r\n          },\r\n          {\r\n            duration: 1.5,\r\n            volume: 0.5,\r\n          },\r\n          {\r\n            duration: 3,\r\n            volume: 0,\r\n          },\r\n        ];\r\n      }\r\n    } else {\r\n      ahdsr = [\r\n        {\r\n          duration: 0,\r\n          volume: 1,\r\n        },\r\n        {\r\n          duration: duration,\r\n          volume: 1,\r\n        },\r\n      ];\r\n    }\r\n    envelope.gain.cancelScheduledValues(when);\r\n    envelope.gain.setValueAtTime(\r\n      this.noZeroVolume(ahdsr[0].volume * volume),\r\n      when\r\n    );\r\n    for (var i = 0; i < ahdsr.length; i++) {\r\n      if (ahdsr[i].duration > 0) {\r\n        if (ahdsr[i].duration + lastTime > duration) {\r\n          var r =\r\n            1 - (ahdsr[i].duration + lastTime - duration) / ahdsr[i].duration;\r\n          var n = lastVolume - r * (lastVolume - ahdsr[i].volume);\r\n          envelope.gain.linearRampToValueAtTime(\r\n            this.noZeroVolume(volume * n),\r\n            when + duration\r\n          );\r\n          break;\r\n        }\r\n        lastTime = lastTime + ahdsr[i].duration;\r\n        lastVolume = ahdsr[i].volume;\r\n        envelope.gain.linearRampToValueAtTime(\r\n          this.noZeroVolume(volume * lastVolume),\r\n          when + lastTime\r\n        );\r\n      }\r\n    }\r\n    envelope.gain.linearRampToValueAtTime(\r\n      this.noZeroVolume(0),\r\n      when + duration + this.afterTime\r\n    );\r\n  };\r\n  numValue = (aValue: number, defValue: number) => {\r\n    if (typeof aValue === \"number\") {\r\n      return aValue;\r\n    } else {\r\n      return defValue;\r\n    }\r\n  };\r\n  findEnvelope = ({ target, when, duration }: ISetup) => {\r\n    var envelope: any = null;\r\n    for (var i = 0; i < this.envelopes.length; i++) {\r\n      var e = this.envelopes[i];\r\n      if (\r\n        e.target === target &&\r\n        this.audioContext.currentTime > e.when + e.duration + 0.001\r\n      ) {\r\n        try {\r\n          e.audioBufferSourceNode.disconnect();\r\n          e.audioBufferSourceNode.stop(0);\r\n          e.audioBufferSourceNode = null;\r\n        } catch (x) {\r\n          //audioBufferSourceNode is dead already\r\n        }\r\n        envelope = e;\r\n        break;\r\n      }\r\n    }\r\n    if (!envelope) {\r\n      envelope = this.audioContext.createGain();\r\n      envelope.target = target;\r\n      envelope.connect(target);\r\n      envelope.cancel = () => {\r\n        if (envelope.when + envelope.duration > this.audioContext.currentTime) {\r\n          envelope.gain.cancelScheduledValues(0);\r\n          envelope.gain.setTargetAtTime(\r\n            0.00001,\r\n            this.audioContext.currentTime,\r\n            0.1\r\n          );\r\n          envelope.when = this.audioContext.currentTime + 0.00001;\r\n          envelope.duration = 0;\r\n        }\r\n      };\r\n      this.envelopes.push(envelope);\r\n    }\r\n    return envelope;\r\n  };\r\n  adjustPreset = (preset: any) => {\r\n    for (var i = 0; i < preset.zones.length; i++) {\r\n      this.adjustZone(preset.zones[i]);\r\n    }\r\n  };\r\n  adjustZone = (zone: any) => {\r\n    if (zone.buffer) {\r\n      //\r\n    } else {\r\n      zone.delay = 0;\r\n      if (zone.sample) {\r\n        let decoded = atob(zone.sample);\r\n        zone.buffer = this.audioContext.createBuffer(\r\n          1,\r\n          decoded.length / 2,\r\n          zone.sampleRate\r\n        );\r\n        var float32Array = zone.buffer.getChannelData(0);\r\n        var b1, b2, n;\r\n        for (var i = 0; i < decoded.length / 2; i++) {\r\n          b1 = decoded.charCodeAt(i * 2);\r\n          b2 = decoded.charCodeAt(i * 2 + 1);\r\n          if (b1 < 0) {\r\n            b1 = 256 + b1;\r\n          }\r\n          if (b2 < 0) {\r\n            b2 = 256 + b2;\r\n          }\r\n          n = b2 * 256 + b1;\r\n          if (n >= 65536 / 2) {\r\n            n = n - 65536;\r\n          }\r\n          float32Array[i] = n / 65536.0;\r\n        }\r\n      } else {\r\n        if (zone.file) {\r\n          var datalen = zone.file.length;\r\n          var arraybuffer = new ArrayBuffer(datalen);\r\n          var view = new Uint8Array(arraybuffer);\r\n          let decoded = atob(zone.file);\r\n          var b;\r\n          for (let i = 0; i < decoded.length; i++) {\r\n            b = decoded.charCodeAt(i);\r\n            view[i] = b;\r\n          }\r\n          this.audioContext.decodeAudioData(\r\n            arraybuffer,\r\n            function (audioBuffer) {\r\n              zone.buffer = audioBuffer;\r\n            }\r\n          );\r\n        }\r\n      }\r\n      zone.loopStart = this.numValue(zone.loopStart, 0);\r\n      zone.loopEnd = this.numValue(zone.loopEnd, 0);\r\n      zone.coarseTune = this.numValue(zone.coarseTune, 0);\r\n      zone.fineTune = this.numValue(zone.fineTune, 0);\r\n      zone.originalPitch = this.numValue(zone.originalPitch, 6000);\r\n      zone.sampleRate = this.numValue(zone.sampleRate, 44100);\r\n      zone.sustain = this.numValue(zone.originalPitch, 0);\r\n    }\r\n  };\r\n  findZone = (preset: any, pitch: any) => {\r\n    var zone = null;\r\n    for (var i = preset.zones.length - 1; i >= 0; i--) {\r\n      zone = preset.zones[i];\r\n      if (zone.keyRangeLow <= pitch && zone.keyRangeHigh + 1 >= pitch) {\r\n        break;\r\n      }\r\n    }\r\n    try {\r\n      this.adjustZone(zone);\r\n    } catch (ex) {\r\n      console.log(\"adjustZone\", ex);\r\n    }\r\n    return zone;\r\n  };\r\n  cancelQueue = () => {\r\n    for (var i = 0; i < this.envelopes.length; i++) {\r\n      var e = this.envelopes[i];\r\n      e.gain.cancelScheduledValues(0);\r\n      e.gain.setValueAtTime(this.nearZero, this.audioContext.currentTime);\r\n      e.when = -1;\r\n      try {\r\n        e.audioBufferSourceNode.disconnect();\r\n      } catch (ex) {\r\n        console.log(ex);\r\n      }\r\n    }\r\n  };\r\n}\r\nexport class WebAudioFontReverberator {\r\n  audioContext: AudioContext;\r\n  input: any;\r\n  convolver: any;\r\n  dry: any;\r\n  wet: any;\r\n  irrArrayBuffer: any;\r\n  output: any;\r\n  constructor(audioContext: AudioContext) {\r\n    console.log(\"WebAudioFont Reverberator v1.08\");\r\n    this.audioContext = audioContext;\r\n    this.input = this.audioContext.createBiquadFilter();\r\n    this.input.type = \"lowpass\";\r\n    this.input.frequency.setTargetAtTime(18000, 0, 0.0001);\r\n    this.convolver = null;\r\n    this.output = audioContext.createGain();\r\n    this.dry = audioContext.createGain();\r\n    this.dry.gain.setTargetAtTime(0.9, 0, 0.0001);\r\n    this.dry.connect(this.output);\r\n    this.wet = audioContext.createGain();\r\n    this.wet.gain.setTargetAtTime(0.5, 0, 0.0001);\r\n    this.input.connect(this.dry);\r\n    this.input.connect(this.wet);\r\n    import(\"./Reverbrator\").then(({ reverbrator }) => {\r\n      var irr = reverbrator;\r\n      var datalen = irr.length / 2;\r\n      this.irrArrayBuffer = new ArrayBuffer(datalen);\r\n      var view = new Uint8Array(this.irrArrayBuffer);\r\n      var decoded = atob(irr);\r\n      var b;\r\n      for (var i = 0; i < decoded.length; i++) {\r\n        b = decoded.charCodeAt(i);\r\n        view[i] = b;\r\n      }\r\n      this.audioContext.decodeAudioData(this.irrArrayBuffer, (audioBuffer) => {\r\n        this.convolver = audioContext.createConvolver();\r\n        this.convolver.buffer = audioBuffer;\r\n        this.wet.connect(this.convolver);\r\n        this.convolver.connect(this.output);\r\n        console.log(\"convolver audioBuffer\", audioBuffer);\r\n      });\r\n    });\r\n  }\r\n}\r\n","import Song from \"../plugin/Melodition/Song\";\r\nimport {\r\n  WebAudioFontChannel,\r\n  WebAudioFontPlayer,\r\n  WebAudioFontReverberator,\r\n} from \"../plugin/Melodition/WebAudio\";\r\nimport { ICardDetail } from \"../_types\";\r\nimport { INeededLine, INeededNote, INeededTrack } from \"../_types/player.types\";\r\n\r\nconst AudioContextFunc = window.AudioContext || window.webkitAudioContext;\r\n\r\nconst audioContext = new AudioContextFunc();\r\nconst fontPlayer = new WebAudioFontPlayer(audioContext);\r\nconst master = new WebAudioFontChannel(audioContext);\r\n\r\nif (typeof window.orientation === \"undefined\") {\r\n  console.log(\"Melo WebAudioFontReverberator\");\r\n  const reverberator = new WebAudioFontReverberator(audioContext);\r\n  reverberator.output.connect(audioContext.destination);\r\n  master.output.connect(reverberator.input);\r\n} else {\r\n  console.log(\"skip WebAudioFontReverberator\");\r\n  master.output.connect(audioContext.destination);\r\n}\r\n\r\nexport class ResetPlayer {\r\n  player = fontPlayer;\r\n  master = master;\r\n  song?: Song;\r\n  songDetails: IDetails;\r\n  loading = true;\r\n  onAir = false;\r\n  loaded = false;\r\n  playMode = false;\r\n  sL = 16;\r\n  bpm = 4;\r\n  rythm = 16;\r\n  TrackID = 0;\r\n  tempo = 120;\r\n  neededLines: INeededLine;\r\n  neededTracks: INeededTrack[] = [];\r\n  fingerNotes: INeededNote = { length: 0 };\r\n  storeFingers: any[] = [];\r\n  storeTracks: any[] = [];\r\n  storeDrums: any[] = [];\r\n  metronomeInfo: any[] = [];\r\n  trackInfo: any[] = [];\r\n  drumInfo: any[] = [];\r\n  seekValue = 0;\r\n  songs: { id: number; vol: number }[] = [];\r\n  songLength = 272;\r\n  tapSize = 32;\r\n  equalizer: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n  drumVolumes: number[] = [70, 70, 70, 70, 70, 70, 70, 70];\r\n  constructor(options?: Partial<any>) {\r\n    Object.assign(this, options);\r\n    this.master.band32.gain.setValueAtTime(this.equalizer[0], 0);\r\n    this.master.band64.gain.setValueAtTime(this.equalizer[1], 0);\r\n    this.master.band128.gain.setValueAtTime(this.equalizer[2], 0);\r\n    this.master.band256.gain.setValueAtTime(this.equalizer[3], 0);\r\n    this.master.band512.gain.setValueAtTime(this.equalizer[4], 0);\r\n    this.master.band1k.gain.setValueAtTime(this.equalizer[5], 0);\r\n    this.master.band2k.gain.setValueAtTime(this.equalizer[6], 0);\r\n    this.master.band4k.gain.setValueAtTime(this.equalizer[7], 0);\r\n    this.master.band8k.gain.setValueAtTime(this.equalizer[8], 0);\r\n    this.master.band16k.gain.setValueAtTime(this.equalizer[9], 0);\r\n  }\r\n}\r\ninterface IDetails {\r\n  title: string;\r\n  id: number;\r\n}\r\nexport const lessonCompiler = async (\r\n  info: ICardDetail\r\n): Promise<ResetPlayer | undefined> => {\r\n  const Melo = new ResetPlayer();\r\n  const content = JSON.parse(info.content);\r\n  Melo.songDetails = { id: info.id, title: info.title };\r\n  const dataString = content.song.content;\r\n  const fingers = content.fingers;\r\n  let neededInst: number[] = [];\r\n  let neededDrums: number[] = [];\r\n  try {\r\n    Melo.TrackID = content.track.id;\r\n    const strings = dataString.split(\"-\");\r\n    Melo.tempo = parseInt(strings[0], 16);\r\n    Melo.sL = parseInt(strings[1]) + 1;\r\n    Melo.bpm = parseInt(strings[2]);\r\n    Melo.rythm = Melo.bpm * 4;\r\n    if (fingers) {\r\n      let storeFingers = storedFingersFunc(fingers, Melo.rythm);\r\n      Melo.storeFingers = { ...storeFingers };\r\n    }\r\n    for (let i = 0; i < 10; i++) {\r\n      let t = strings[5].substring(i * 2, i * 2 + 2);\r\n      Melo.equalizer[i] = parseInt(t, 16) - 10;\r\n    }\r\n    const cntD = strings[6].length / 7;\r\n    let storeDrums = storeDrumsFunc(cntD, strings[6], Melo.rythm);\r\n    storeDrums.forEach((drm, index, self) => {\r\n      if (index === self.findIndex((t) => t.drum === drm.drum))\r\n        neededDrums.push(drm.drum);\r\n      Melo.storeDrums.push({\r\n        drum: drm.drum,\r\n        beat: drm.beat,\r\n      });\r\n    });\r\n    const cntT = strings[7].length / 10;\r\n    let storeTracks = storeTracksFunc(cntT, strings[7], Melo.rythm);\r\n    let up = 24;\r\n    let down = 24;\r\n    let length = 0;\r\n    storeTracks.forEach((trc, index, self) => {\r\n      if (index === self.findIndex((t) => t.track === trc.track))\r\n        neededInst.push(trc.track);\r\n      Melo.storeTracks.push({\r\n        ...trc,\r\n        beat: trc.beat,\r\n      });\r\n      let beat = trc.beat - (Melo.rythm - Melo.bpm);\r\n      if (trc.track === Melo.TrackID) {\r\n        Melo.neededTracks.push({\r\n          ...trc,\r\n          beat,\r\n        });\r\n        if (trc.pitch > up) {\r\n          up = trc.pitch;\r\n        }\r\n        if (trc.pitch < down) {\r\n          down = trc.pitch;\r\n        }\r\n        beat = trc.beat;\r\n        if (!Melo.fingerNotes[beat]) {\r\n          Melo.fingerNotes.length = ++length;\r\n          Melo.fingerNotes[beat] = [];\r\n        }\r\n        Melo.fingerNotes[beat].push({ pitch: trc.pitch, length: trc.length });\r\n      }\r\n    });\r\n    Melo.neededLines = {\r\n      up: up + 36,\r\n      number: up - down,\r\n      down: down + 36,\r\n      notes: Melo.fingerNotes.length,\r\n    };\r\n    neededDrums.forEach((id, i) => {\r\n      let drum = {\r\n        audioNode: audioContext.createGain(),\r\n        id: id,\r\n        replacement: parseInt(strings[8].substring(id * 3, id * 3 + 3), 16),\r\n        sound: null,\r\n        info: \"\",\r\n        volume: 70,\r\n      };\r\n      if (drum.replacement) {\r\n        let info = Melo.player.loader.drumInfo(drum.replacement - 1);\r\n        console.log(info);\r\n        Melo.player.loader.startLoad(info.url, info.variable);\r\n        drum.info = info;\r\n      }\r\n      import(`../assets/sounds/default_drum_0${id}`).then((drm) => {\r\n        drum = { ...drum, ...drm.default };\r\n        drum.volume = 10 * parseInt(strings[4].substring(id, id + 1), 16);\r\n        drum.audioNode.connect(Melo.master.input);\r\n        Melo.player.adjustPreset(drum.sound);\r\n        Melo.drumInfo.push(drum);\r\n      });\r\n    });\r\n    import(\"../assets/sounds/default_metronome\").then((default_metronome) => {\r\n      default_metronome.default.forEach((mtr) => {\r\n        (mtr as any).audioNode = audioContext.createGain();\r\n        (mtr as any).audioNode.connect(Melo.master.input);\r\n        Melo.player.adjustPreset(mtr.sound);\r\n        Melo.metronomeInfo.push(mtr);\r\n      });\r\n    });\r\n    neededInst.forEach((id, i) => {\r\n      let track = {\r\n        audioNode: audioContext.createGain(),\r\n        nn: id,\r\n        replacement: parseInt(\r\n          strings[9].substring((7 - id) * 3, (7 - id) * 3 + 3),\r\n          16\r\n        ),\r\n        sound: null,\r\n        info: \"\",\r\n        volume: 70,\r\n      };\r\n      if (track.replacement) {\r\n        let info = Melo.player.loader.instrumentInfo(track.replacement - 1);\r\n        console.log(info);\r\n        Melo.player.loader.startLoad(info.url, info.variable);\r\n        track.info = info;\r\n      }\r\n      import(`../assets/sounds/default_tone_0${id}`).then((trc) => {\r\n        track = { ...track, ...trc.default };\r\n        track.volume = 10 * parseInt(strings[3].substring(id, id + 1), 16);\r\n        track.audioNode.connect(Melo.master.input);\r\n        Melo.player.adjustPreset(track.sound);\r\n        Melo.trackInfo.push(track);\r\n      });\r\n    });\r\n    let songs = [];\r\n    if (strings[10] && strings[10] !== \"000a\") {\r\n      let cnt = strings[10].length / 4;\r\n      for (let i = 0; i < cnt; i++) {\r\n        let track = parseInt(strings[10].substring(i * 4, i * 4 + 3), 32);\r\n        let vol =\r\n          parseInt(strings[10].substring(i * 4 + 3, i * 4 + 4), 16) / 10;\r\n        songs.push({ id: track, vol: vol });\r\n      }\r\n    }\r\n    if (songs.length > 0) {\r\n      Melo.song = new Song(audioContext);\r\n    }\r\n    Melo.songs = songs;\r\n  } catch (ex) {\r\n    Promise.reject(ex);\r\n  } finally {\r\n    return Melo;\r\n  }\r\n};\r\n\r\nconst storedFingersFunc = (fingers: string[], gap: number) => {\r\n  let storeFingers = {} as any;\r\n  for (const p in fingers) {\r\n    const strings = fingers[p].split(\"-\");\r\n    storeFingers[p] = {};\r\n    for (let l = 0; l < strings.length - 1; l++) {\r\n      const main = strings[l].split(\"+\");\r\n      const beat = Number(main[0]) + gap;\r\n      var cnt = main[1].length / 5;\r\n      for (let i = 0; i < cnt; i++) {\r\n        const k = main[1].substring(i * 5, i * 5 + 2);\r\n        const f = main[1].substring(i * 5 + 2, i * 5 + 4);\r\n        const s = main[1].substring(i * 5 + 4, i * 5 + 5);\r\n        if (s !== \"e\") {\r\n          if (!storeFingers[p][f]) {\r\n            storeFingers[p][f] = {};\r\n          }\r\n          if (!storeFingers[p][f][beat]) {\r\n            storeFingers[p][f][beat] = [];\r\n          }\r\n          storeFingers[p][f][beat].push(k);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return storeFingers;\r\n};\r\nconst storeDrumsFunc = (cntD: number, strings: string, gap: number) => {\r\n  let storeDrums = [];\r\n  for (var i = 0; i < cntD; i++) {\r\n    var drum = parseInt(strings.substring(i * 7, i * 7 + 1));\r\n    var key = parseInt(strings.substring(i * 7 + 1, i * 7 + 3), 32);\r\n    var data = parseInt(strings.substring(i * 7 + 3, i * 7 + 7), 32);\r\n    var i32 = key & parseInt(\"1111111\", 2);\r\n    if ((data | parseInt(\"0000000000000001\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 0 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000000000010\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 1 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000000000100\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 2 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000000001000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 3 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000000010000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 4 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000000100000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 5 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000001000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 6 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000010000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 7 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000000100000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 8 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000001000000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 9 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000010000000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 10 + gap,\r\n      });\r\n    if ((data | parseInt(\"0000100000000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 11 + gap,\r\n      });\r\n    if ((data | parseInt(\"0001000000000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 12 + gap,\r\n      });\r\n    if ((data | parseInt(\"0010000000000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 13 + gap,\r\n      });\r\n    if ((data | parseInt(\"0100000000000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 14 + gap,\r\n      });\r\n    if ((data | parseInt(\"1000000000000000\", 2)) === data)\r\n      storeDrums.push({\r\n        drum: drum,\r\n        beat: i32 * 16 + 15 + gap,\r\n      });\r\n  }\r\n  return storeDrums;\r\n};\r\nconst storeTracksFunc = (cntT: number, strings: string, gap: number) => {\r\n  let storeTracks = [];\r\n  for (let i = 0; i < cntT; i++) {\r\n    var beat = parseInt(strings.substring(i * 10, i * 10 + 3), 32);\r\n    var track = parseInt(strings.substring(i * 10 + 3, i * 10 + 3 + 1), 32);\r\n    var length = parseInt(strings.substring(i * 10 + 4, i * 10 + 4 + 2), 32);\r\n    var pitch = parseInt(strings.substring(i * 10 + 6, i * 10 + 6 + 2), 32);\r\n    var shift =\r\n      parseInt(strings.substring(i * 10 + 8, i * 10 + 8 + 2), 32) - 64;\r\n    storeTracks.push({\r\n      track: track,\r\n      beat: beat + gap,\r\n      length: length,\r\n      shift: shift,\r\n      pitch: pitch,\r\n    });\r\n  }\r\n  return storeTracks;\r\n};\r\n"],"sourceRoot":""}