{"version":3,"sources":["assets/img/melodition.jpg","assets/sounds lazy /^/default_drum_0.*$/ groupOptions: {} namespace object","assets/sounds lazy /^/default_tone_0.*$/ groupOptions: {} namespace object","_helpers/constants.ts","_reducers/user.reducer.ts","_types/user.types.ts","_types/profile.types.ts","_reducers/profile.reducer.ts","_types/favorite.types.ts","_reducers/favorite.reducer.ts","_reducers/snackbar.reducer.ts","_types/snackbar.types.ts","_reducers/player.reducer.ts","_types/player.types.ts","_reducers/post.reducer.ts","_types/post.types.ts","_reducers/guide.reducer.ts","_types/guide.types.ts","_reducers/lesson.reducer.ts","_types/lesson.types.ts","_reducers/course.reducer.ts","_types/course.types.ts","_reducers/exercise.reducer.ts","_types/exercise.types.ts","_reducers/index.ts","_store/store.config.ts","router/ProtectedRoute.tsx","components/Layout/SnackBar/alert.tsx","components/InfoPages/About.tsx","_actions/user.actions.ts","_helpers/api.ts","_actions/post.actions.ts","components/PostPages/PostCard.tsx","components/PostPages/PostList.tsx","components/Layout/Captcha/ReCaptcha.tsx","components/Layout/Captcha/Captcha.tsx","components/AuthPages/LoginPage.tsx","components/AuthPages/LostPage.tsx","components/AuthPages/RegisterPage.tsx","_actions/profile.actions.ts","components/ProfilePages/Dashboard/LatestSongs.js","components/ProfilePages/ProfilePage.tsx","_actions/lesson.actions.ts","_actions/course.actions.ts","_actions/exercise.actions.ts","_actions/guide.actions.ts","components/LearningPages/Guide/GuideCard.tsx","components/LearningPages/Guide/GuideList.tsx","components/LearningPages/Lesson/LessonCard.tsx","components/LearningPages/Lesson/LessonList.tsx","components/LearningPages/Course/CourseCard.tsx","components/LearningPages/Course/CourseList.tsx","components/LearningPages/Favorite/FavoriteCard.tsx","_actions/favorite.actions.ts","components/LearningPages/Favorite/FavoriteList.tsx","components/LearningPages/Exercise/ExerciseCard.tsx","components/LearningPages/Exercise/ExerciseList.tsx","components/LearningPages/LearningPage.tsx","components/PostPages/Post.tsx","components/LearningPages/Guide/GuideItems.tsx","components/LearningPages/Guide/Guide.tsx","components/LearningPages/Course/CourseItems.tsx","components/LearningPages/Course/Course.tsx","plugin/Melodition/Song.ts","plugin/Melodition/WebAudio.ts","_helpers/playerApi.ts","_actions/player.actions.ts","_helpers/midiContext.ts","plugin/Game/Canvas.ts","plugin/Game/Game.ts","plugin/Melodition/Melodition.ts","_helpers/pianoSizes.ts","components/LearningPages/Lesson/SongListSelector.tsx","components/Layout/Player/PlayerSides.tsx","components/Layout/Instruments/Finger/Fingers.tsx","components/Layout/Instruments/Finger/SvgKeys.ts","components/Layout/Instruments/Piano/Piano.tsx","components/Layout/Player/Buttons.tsx","components/LearningPages/Lesson/Lesson.tsx","components/LearningPages/Exercise/Exercise.tsx","router/index.tsx","components/Layout/Instruments/Piano/BackCanvas.tsx","components/Layout/Instruments/Piano/FrontCanvas.tsx","components/Layout/Instruments/Piano/SvgLine.tsx","components/Layout/Instruments/Piano/PianoCanvas.tsx","components/PlayMode/PlayerHeader.tsx","components/PlayMode/LessonPlayMode.tsx","plugin/Themes/GlobalTheme.ts","plugin/Themes/DarkTheme.ts","plugin/Themes/LightTheme.ts","components/Layout/Breadcrumbs.tsx","components/Layout/Header/Links.tsx","components/Layout/Header/MiniDrawer.tsx","components/Layout/Header/LinkConst.tsx","components/Layout/Header/MobileMenu.tsx","components/Layout/Header/MenuRender.tsx","components/Layout/Header/LeftIcons.tsx","components/Layout/Header/SearchInput.tsx","components/Layout/Header/MainAppBar.tsx","components/Layout/Header/HeaderReducer.ts","components/Layout/Header/Header.tsx","_actions/snackbar.actions.ts","components/Layout/SnackBar/Notifier.ts","App.tsx","index.tsx"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","pathFinder","path","pathSplit","split","compiledPath","length","Number","typeSplit","type1Split","type2Split","getTheTime","minutes","d","Date","t","getTime","ms","UniqId","Math","random","toString","thumbnailsFinder","img","image","fallImg","medium","user","key","item","localStorage","getItem","JSON","parse","undefined","getUserLocal","theme","initialState","loggedIn","loading","authReducer","state","action","type","setItem","profileReducerDefaultState","profileReducer","profile","userData","error","favoriteReducerDefaultState","data","nextLoad","favoriteReducer","payload","snackbarReducerDefaultState","snackbars","snackbarReducer","snackbar","dismissAll","dismissed","filter","defaultPlayer","playMode","onAir","fingerLoading","pianoLoading","gameLoading","octave","tapSize","playerReducer","canvasSize","postsReducerDefaultState","postsReducer","postReducerDefaultState","postReducer","guidesReducerDefaultState","guidesReducer","match","every","_","guideReducerDefaultState","guideReducer","lessonsReducerDefaultState","lessonsReducer","lessonReducerDefaultState","lessonReducer","coursesReducerDefaultState","coursesReducer","courseReducerDefaultState","courseReducer","exercisesReducerDefaultState","exercisesReducer","exerciseReducerDefaultState","exerciseReducer","rootReducer","history","combineReducers","router","connectRouter","single","post","guide","course","lesson","exercise","bank","posts","guides","courses","lessons","exercises","melodition","favorites","auth","createBrowserHistory","store","preloadingState","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","createRootReducer","applyMiddleware","routerMiddleware","thunk","configureStore","connect","props","redirectPath","authenticationPath","isAllowed","restrictedPath","component","to","pathname","render","errorHandler","err","target","response","message","dispatch","snackBarMaker","variant","replace","options","TransitionComponent","Slide","direction","anchorOrigin","horizontal","vertical","autoHideDuration","IconButton","style","borderRadius","color","size","aria-label","onClick","Close","About","useState","input","setInput","onChange","value","handleChange","Button","loginRequest","API","res","stringify","defaults","headers","common","Authorization","token","goBack","user_display_name","catch","changeTheme","logoutRequest","removeItem","go","registerRequest","push","lostRequest","Axios","create","baseURL","localUser","authHeader","interceptors","use","console","log","status","test","reject","AudioApi","method","responseType","requestAllPost","getState","postState","resetTime","get","requestPost","found","find","useStyles","makeStyles","createStyles","root","maxWidth","maxHeight","margin","spacing","cardAction","justifyContent","content","minHeight","PostCard","classes","title","featured_img","excerpt","author","clickHandler","Card","className","CardActionArea","CardMedia","height","alt","CardContent","Typography","gutterBottom","CardActions","PostList","this","header","Chip","chip","label","Grid","container","justify","cardList","CircularProgress","autoMargin","Component","ownProps","bindActionCreators","withStyles","padding","position","right","top","ReCaptcha","script","loadScript","captchaOnLoad","onLoad","document","createElement","src","url","async","defer","body","appendChild","callback","grecaptcha","sitekey","ready","setState","removeChild","onError","LinearProgress","captchaWarning","captcha","React","zIndex","border","Captcha","form","setFieldValue","errors","touched","name","field","useCallback","event","recaptcha","LoginPage","Container","paddingTop","CssBaseline","textAlign","Avatar","initialValues","username","password","validationSchema","Yup","shape","max","required","onSubmit","resetForm","login","Box","mb","align","fullWidth","disabled","mt","my","TextField","placeholder","xs","Link","RouterLink","logout","LostPage","user_login","RegisterPage","email","firstname","lastname","confirm_password","policy","oneOf","values","dir","alignItems","display","ml","Checkbox","checked","underline","Boolean","FormHelperText","profileRequest","userInfo","parseToken","userID","info","base64","jsonPayload","decodeURIComponent","atob","c","charCodeAt","slice","join","resJson","expire","exp","issued","iat","before","nbf","useStyles1","flexShrink","marginLeft","TablePaginationActions","useTheme","count","page","rowsPerPage","onChangePage","LastPage","FirstPage","KeyboardArrowRight","KeyboardArrowLeft","ceil","useStyles2","table","minWidth","toolbar","flexFlow","breakpoints","only","LatestSongs","setPage","setRowsPerPage","emptyRows","min","sel","dateChanger","date","time","clsx","CardHeader","Divider","Table","TableHead","TableRow","TableCell","TableBody","row","song","progress","colSpan","TableFooter","TablePagination","rowsPerPageOptions","lower","low","average","high","higher","SelectProps","inputProps","native","newPage","onChangeRowsPerPage","parseInt","ActionsComponent","ProfilePage","getProfile","lg","md","xl","meta","playtime","requestAllLesson","lessonState","requestLesson","requestGuide","requestCourse","requestAllCourse","courseState","newPath","compiler","Compiler","course_select","requestExercise","select","genre","requestAllExercise","exerciseState","requestAllGuide","guideState","addCourses","guide_select","addExercises","added","GuideCard","thumbnails","description","teacher","GuideList","LessonCard","LessonList","CourseCard","CourseList","FavoriteCard","favorite","requestAllFavorite","favoriteState","FavoriteList","ExerciseCard","ExerciseList","pages","link","icon","LibraryMusic","child","QueueMusic","MusicNote","EmojiSymbols","Favorite","pageName","num","pageNumber","obj","indexOf","width","tabControl","down","tabPanel","LearningPage","pathName","location","setValue","useEffect","matches","useMediaQuery","AppBar","Paper","square","Tabs","newValue","indicatorColor","textColor","scrollButtons","i","Tab","aria-controls","role","hidden","aria-labelledby","Post","dangerouslySetInnerHTML","__html","backgroundColor","palette","background","paper","secondary","main","fontWeight","rightChip","cursor","leftChip","CourseItem","index","courseItem","grade","ExerciseItem","exerciseItem","season","Guide","counter","k","List","ListItem","ListItemAvatar","ListItemText","primary","exercise_description","guideItem","course_description","typer","sm","Course","text","opacity","Song","audioContext","tracks","volume","elapsedTimeSinceStart","paused","muted","loopMode","loopStartTime","loopEndTime","decodedAudioBuffers","masterVolumeNode","trackVolumeNodes","analyserNode","sampleNodes","addTrack","decodedBuffer","buffer","peaks","vol","panning","solo","sampleNode","volumeNode","loadBuffer","a","decodeAudioData","buildGraph","sources","sample","createBufferSource","createGain","gain","destination","play","startTime","setTrackVolumesDependingOnMuteSoloStatus","forEach","s","start","stop","pause","setVolume","setMasterVolume","val","fraction","setVolumeOfTrack","trackNumber","getUrlsOfTracks","urls","track","getDuration","dur","duration","getNbTracks","toggleLoopMode","toggleMute","togglePause","thereIsSolo","nbTracks","createAnalyser","WebAudioFontChannel","band32","band64","band128","band256","band512","band1k","band2k","band4k","band8k","band16k","output","bandEqualizer","from","frequency","createBiquadFilter","setTargetAtTime","Q","createDynamicsCompressor","threshold","setValueAtTime","knee","ratio","attack","release","WebAudioFontLoader","player","cached","choosenInfos","drumKeyArray","drumNamesArray","instrumentKeyArray","instrumentNamesArray","startLoad","filePath","variableName","r","setAttribute","getElementsByTagName","decodeAfterLoading","waitOrFinish","adjustPreset","onFinish","me","setTimeout","loaded","preset","zones","waitLoad","instrumentTitles","insNames","instrumentKeys","instrumentInfo","n","p","substr","variable","findInstrument","program","substring","drumTitles","drumNames","drumKeys","drumInfo","pitch","findDrum","nn","WebAudioFontReverberator","convolver","dry","wet","irrArrayBuffer","irr","reverbrator","datalen","ArrayBuffer","b","view","Uint8Array","decoded","audioBuffer","createConvolver","zarib","AudioContext","webkitAudioContext","master","fontPlayer","envelopes","loader","onCacheFinish","onCacheProgress","afterTime","nearZero","createChannel","createReverberator","limitVolume","queueChord","when","pitches","slides","queueWaveTable","queueStrumUp","sort","queueStrum","queueStrumDown","currentTime","queueSnap","resume","zone","findZone","baseDetune","originalPitch","coarseTune","fineTune","playbackRate","pow","startWhen","waveDuration","loop","loopStart","loopEnd","envelope","findEnvelope","setupEnvelope","audioBufferSourceNode","newPlaybackRate","newWhen","linearRampToValueAtTime","sampleRate","delay","noZeroVolume","sampleDuration","lastTime","lastVolume","ahdsr","cancelScheduledValues","numValue","aValue","defValue","disconnect","x","cancel","adjustZone","createBuffer","b1","b2","float32Array","getChannelData","file","arraybuffer","sustain","keyRangeLow","keyRangeHigh","ex","cancelQueue","orientation","reverberator","Melo","ResetPlayer","currentSong","sL","TrackID","tempo","zaribTempo","storeFingers","storeTracks","storeDrums","trackInfo","seekValue","songs","songLength","fingerNotes","equalizer","drumVolumes","assign","lessonCompiler","dataString","fingers","neededTracks","neededDrums","strings","l","beat","cnt","f","step","cntD","drum","i32","drm","self","findIndex","cntT","shift","trc","audioNode","replacement","sound","default","MidiState","touchedKeys","score","FingersClass","note","len","hand","finger","timer","bColor","end","children","back","fill","BackMover","y","yPos","update","ctx","drawImage","floor","MusicLine","lw","draw","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","Note","gap","beg","mover","lineColor","crash","hit","move","lineCap","arc","PI","fillStyle","font","textBaseline","fillText","Game","canvas","notes","myObstacles","backMover","fullSongCanvas","context","assigner","playGame","clear","updateBacks","updateNotes","clearRect","pitchName","firstLine","myLine","getContext","save","Array","v","toDataURL","onload","drawNote","showTrack","notePos","tap","m","yy","cc","center","le","drawBack","pushNote","g","splice","touch","updateFullSong","Image","Melodition","game","handRefs","seekBar","keyRefs","pianoSize","firstDelay","tickID","currentBeat","tickerDelay","tickerStep","animeFrame","nextWhen","nextBeat","anime","sentWhen","measures","midiKeys","drawGame","startPlay","resetNodeValues","beatDur","playAllTracks","queueNextBeats","requestAnimationFrame","moveSVG","moveFingers","stopPlay","fin","hide","clearTimeout","stopAllTracks","cancelAnimationFrame","rakeMouseWheel","sH","deltaY","seekY","seekMove","seekSVG","beat16duration","pieceLen16","sendNextBeats","wait","showFingers","startBeat","endBeat","beatLen","channel","findDrumInfoHand","volumeRatio","n1","n2","currentTrack","inChordCount","findTrackInfoHand","inChordDelay","nBeat","handArr","getAttribute","show","order","changeSeeker","c16","diff","midiNoteOn","velocity","midiNoteOff","elem","cColor","notePitch","requestPlayer","Melodi","bufferError","urlError","drawPiano","getBoundingClientRect","keyXPos","pianoLeft","padLeft","rect","w","centerX","classList","contains","left","sizeCalculator","drawFinger","resizePlayer","resetPlayer","changeMode","mode","SongListSelector","linkGenerator","handleNext","currentTarget","tabIndex","lessonIndex","selectedLesson","steps","selected","stepers","lessonId","Stepper","activeStep","Step","StepLabel","StepContent","button","marginTop","marginRight","playMain","flexWrap","doubleGrid","centerText","sideStyle","PlayerRightSide","playModeChanger","ArrowBackIos","PlayerLeftSide","drawer","setDrawer","useRef","rest","disableList","Slider","defaultValue","FormatListNumberedRtl","Drawer","anchor","open","onClose","connectedFinger","themer","xmlns","viewBox","ref","SvgKeys","front","LastKey","flexDirection","connectedPiano","isDown","playedKey","emulatedKeys","z","h","j","q","2","3","4","6","7","u","9","0","firstkey","KeysArray","keyboardUp","hasOwnProperty","keyboardDown","mouseUpReset","addEventListener","removeEventListener","octSize","mouseDown","preventDefault","mouseOver","mouseLeave","mouseUp","svgWidth","setKeyRef","pianoSizes","innerHeight","detectSize","baseLine","onMouseDown","onMouseUp","onMouseLeave","onMouseOver","points","PlayButton","setOnAir","playHandler","stopPlayer","startPlayer","PauseCircleOutline","fontSize","PlayCircleOutline","Lesson","changeContent","fullContent","nextProps","connectedLesson","overflow","Exercise","AppRouter","exact","LostPassPage","BackCanvas","backCtx","drawBackContext","FrontCanvas","drawFrontContext","SvgLine","bottom","strokeDasharray","strokeDashoffset","animation","x1","y1","x2","y2","strokeWidth","connectedPianoCanvas","boxShadow","flexGrow","menuButton","divider","MenuAppBar","modeChanger","anchorEl","Toolbar","edge","ArrowForward","flexItem","LessonPlayerMode","toggleDrawer","list","playmodeChanger","updateDimensions","globalStyle","createMuiTheme","typography","fontFamily","overrides","MuiBreadcrumbs","ol","overflowX","scrollbarWidth","whiteSpace","MuiCardActions","MuiCssBaseline","scrollbarColor","MuiIconButton","colorSecondary","DarkTheme","blue","red","pink","faIR","LightTheme","bracrumbs","AllInbox","conectedBreadcrumb","linkPath","setLinkPath","trigger","setTrigger","linkArray","handleClick","disableGutters","Breadcrumbs","href","sideLink","in","SettingsApplications","AccountBox","out","links","Home","FileCopy","Info","drawerPaper","drawerHeader","mixins","MiniDrawer","handleDrawerClose","botLinks","menuIsOpen","Brightness7","Brightness4","ChevronLeft","ChevronRight","ListItemIcon","up","linkKeeper","lineHeight","LinkConst","openStatus","Collapse","MobileMenu","mobileMenuId","mobileMoreAnchor","mobileMenuIsOpen","handleMobileMenu","keepMounted","transformOrigin","MenuItem","Badge","badgeContent","Stars","Notifications","aria-haspopup","AccountCircle","MenuRender","profileMoreAnchor","menuId","profileMenuIsOpen","sectionDesktop","sectionMobile","IconController","profileMenuOpen","Fragment","Star","MoreHoriz","SearchInput","handleOnInputChange","query","fetchSearchResult","results","search","searchIcon","InputBase","inputRoot","inputInput","fade","white","pointerEvents","paddingLeft","transition","transitions","appBar","easing","sharp","leavingScreen","appBarShift","enteringScreen","MainAppBar","sessionStorage","process","HeaderReducer","fieldName","useReducer","snackbarRemove","displayed","removeSnack","useSnackbar","enqueueSnackbar","closeSnackbar","includes","reason","myKey","onExited","String","jss","plugins","jssPreset","jssRTL","app","mainBody","overflowY","conectedApp","currentTheme","responsTheme","responsiveFontSizes","listen","StylesProvider","ThemeProvider","mountOnEnter","unmountOnExit","elevation","getElementById"],"mappings":"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AAM,qBACfA,EAAS,IAAM,kBACfA,EAAS,IAAM,iBACfA,EAAS,IAAM,iBACfA,EAAS,IAAM,sBACfA,EAAS,IAAM,2BACfA,EAAS,IAAM,6BACfA,EAAS,IAAM,2BACfA,EAAS,IAAM,mBACfA,EAAS,IAAM,8BACfA,EAAS,IAAM,8BACfA,EAAS,IAAM,4BACf,EAAKlB,qBAAuBkB,EAE9B,OAAO,EAAKlB,sBAjI0B,KAmIxCmB,eAAiB,WA0Kf,OAzKK,EAAKpB,qBACR,EAAKA,mBAAqB,CACxB,wBACA,2BACA,8BACA,8BACA,wBACA,wBACA,8BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,2BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,2BACA,8BACA,8BACA,8BACA,wBACA,wBACA,8BACA,wBACA,8BACA,wBACA,sBACA,2BACA,wBACA,2BACA,wBACA,8BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,8BACA,8BACA,wBACA,2BACA,wBACA,wBACA,wBACA,2BACA,2BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,8BACA,wBACA,2BACA,wBACA,2BACA,2BACA,2BACA,wBACA,8BACA,uBACA,uBACA,uBACA,gCACA,wBACA,gCACA,gCACA,gCACA,gCACA,8BACA,wBACA,8BACA,6BACA,wBACA,8BACA,wBACA,wBACA,2BACA,8BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,2BACA,wBACA,8BACA,8BACA,wBACA,8BACA,8BACA,wBACA,wBACA,wBACA,8BACA,wBACA,8BACA,wBACA,8BACA,8BACA,wBACA,2BACA,2BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,2BACA,2BACA,8BACA,wBACA,wBACA,8BACA,wBACA,sBACA,2BACA,wBACA,2BACA,wBACA,2BACA,wBACA,8BACA,8BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,+BACA,wBACA,2BACA,8BACA,wBACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,8BACA,8BACA,8BACA,0BAGG,EAAKA,oBA7S0B,KA+SxCqB,eAAiB,SAACC,GAChB,IAAItnB,EAAM,EAAKonB,iBAAiBE,GAC5BC,EAAI,EAAI5oB,OAAOqB,EAAIwnB,OAAO,EAAG,IACjC,MAAO,CACLC,SAAU,SAAWznB,EACrBkP,IAAK,oDAAsDlP,EAAM,MACjEuM,MAAO,EAAK2a,mBAAmBK,KArTK,KAwTxCG,eAAiB,SAACC,GACX,EAAK9B,eACR,EAAKA,aAAe,CAClB,CAAC,EAAG,GACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,GAAI,IACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,KACL,CAAC,GAAI,OAGT,IAAK,IAAInI,EAAI,EAAGA,EAAI,EAAK0J,iBAAiB1oB,OAAQgf,IAChD,GAAIiK,IAAY,EAAIhpB,OAAO,EAAKyoB,iBAAiB1J,GAAGkK,UAAU,EAAG,IAC/D,OAAOlK,EAIX,OADAjT,QAAQC,IAAI,UAAWid,EAAS,aACzB,GArX+B,KAuXxCE,WAAa,WACX,IAAK,EAAK9B,eAAgB,CACxB,IAAI+B,EAAY,GAChBA,EAAU,IAAM,cAChBA,EAAU,IAAM,cAChBA,EAAU,IAAM,qBAChBA,EAAU,IAAM,eAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,eAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,gBAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,eAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,cAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,iBAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,gBAChBA,EAAU,IAAM,iBAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,gBAChBA,EAAU,IAAM,UAChBA,EAAU,IAAM,iBAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,gBAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,kBAChBA,EAAU,IAAM,kBAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,eAChBA,EAAU,IAAM,cAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,YAChBA,EAAU,IAAM,SAChBA,EAAU,IAAM,UAChBA,EAAU,IAAM,gBAChBA,EAAU,IAAM,eAChBA,EAAU,IAAM,cAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,SAChBA,EAAU,IAAM,kBAChBA,EAAU,IAAM,iBAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,aAChBA,EAAU,IAAM,gBAChBA,EAAU,IAAM,gBAChB,EAAK/B,eAAiB+B,EAExB,OAAO,EAAK/B,gBA3a0B,KA6axCgC,SAAW,WAoDT,OAnDK,EAAKjC,eACR,EAAKA,aAAe,CAClB,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,kBACA,oBAGG,EAAKA,cAje0B,KAmexCkC,SAAW,SAACV,GACV,IAAItnB,EAAM,EAAK+nB,WAAWT,GACtBC,EAAI,EAAI5oB,OAAOqB,EAAIwnB,OAAO,EAAG,IACjC,MAAO,CACLC,SAAU,SAAWznB,EACrBkP,IAAK,uDAAyDlP,EAAM,MACpEioB,MAAOV,EACPhb,MAAO,EAAKsb,aAAaN,KA1eW,KA6exCW,SAAW,SAACC,GACV,IAAK,IAAIzK,EAAI,EAAGA,EAAI,EAAKqK,WAAWrpB,OAAQgf,IAC1C,GAAIyK,IAAO,EAAIxpB,OAAO,EAAKopB,WAAWrK,GAAGkK,UAAU,EAAG,IACpD,OAAOlK,EAGX,OAAO,GAlfPjT,QAAQC,IAAI,6BACZ6C,KAAKoY,OAASA,EACdpY,KAAKqY,OAAS,IAk7BLwC,GAQX,WAAY/H,GAA6B,IAAD,iCAPxCA,kBAOwC,OANxC5X,WAMwC,OALxC4f,eAKwC,OAJxCC,SAIwC,OAHxCC,SAGwC,OAFxCC,oBAEwC,OADxC5D,YACwC,EACtCna,QAAQC,IAAI,mCACZ6C,KAAK8S,aAAeA,EACpB9S,KAAK9E,MAAQ8E,KAAK8S,aAAa2E,qBAC/BzX,KAAK9E,MAAM1H,KAAO,UAClBwM,KAAK9E,MAAMsc,UAAUE,gBAAgB,KAAO,EAAG,MAC/C1X,KAAK8a,UAAY,KACjB9a,KAAKqX,OAASvE,EAAa8B,aAC3B5U,KAAK+a,IAAMjI,EAAa8B,aACxB5U,KAAK+a,IAAIlG,KAAK6C,gBAAgB,GAAK,EAAG,MACtC1X,KAAK+a,IAAIliB,QAAQmH,KAAKqX,QACtBrX,KAAKgb,IAAMlI,EAAa8B,aACxB5U,KAAKgb,IAAInG,KAAK6C,gBAAgB,GAAK,EAAG,MACtC1X,KAAK9E,MAAMrC,QAAQmH,KAAK+a,KACxB/a,KAAK9E,MAAMrC,QAAQmH,KAAKgb,KACxB,+BAAwB1qB,MAAK,YAAsB,IAC7C4qB,EAD4C,EAAlBC,YAE1BC,EAAUF,EAAI/pB,OAAS,EAC3B,EAAK8pB,eAAiB,IAAII,YAAYD,GAItC,IAHA,IAEIE,EAFAC,EAAO,IAAIC,WAAW,EAAKP,gBAC3BQ,EAAUzU,KAAKkU,GAEV/K,EAAI,EAAGA,EAAIsL,EAAQtqB,OAAQgf,IAClCmL,EAAIG,EAAQvU,WAAWiJ,GACvBoL,EAAKpL,GAAKmL,EAEZ,EAAKxI,aAAayB,gBAAgB,EAAK0G,gBAAgB,SAACS,GACtD,EAAKZ,UAAYhI,EAAa6I,kBAC9B,EAAKb,UAAUhH,OAAS4H,EACxB,EAAKV,IAAIniB,QAAQ,EAAKiiB,WACtB,EAAKA,UAAUjiB,QAAQ,EAAKwe,QAC5Bna,QAAQC,IAAI,wBAAyBue,UChhCvCE,GAAQ,CAAC,EAAG,IAAM,GAAK,IAAM,EAAG,KAAM,IAAK,KAAM,GAIjD9I,GAAe,IAFI1a,OAAOyjB,cAAgBzjB,OAAO0jB,oBAGjDC,GAAS,IAAIrF,GAAoB5D,IACjCkJ,GAAa,ID4iBjB,WAAYlJ,GAA6B,IAAD,iCAPxCA,kBAOwC,OANxCmJ,eAMwC,OALxCC,YAKwC,OAJxCC,mBAIwC,OAHxCC,qBAGwC,OAFxCC,eAEwC,OADxCC,cACwC,OASxCC,cAAgB,WACd,OAAO,IAAI7F,GAAoB,EAAK5D,eAVE,KAYxC0J,mBAAqB,WACnB,OAAO,IAAI3B,GAAyB,EAAK/H,eAbH,KAexC2J,YAAc,SAACzJ,GAMb,OALIA,EACFA,GAAS,EAETA,EAAS,GAEJA,GArB+B,KAuBxC0J,WAAa,YAQE,IAPbjjB,EAOY,EAPZA,OACA+f,EAMY,EANZA,OACAmD,EAKY,EALZA,KACAC,EAIY,EAJZA,QACA1G,EAGY,EAHZA,SACAlD,EAEY,EAFZA,OACA6J,EACY,EADZA,OAEA7J,EAAS,EAAKyJ,YAAYzJ,GAC1B,IAAK,IAAI7C,EAAI,EAAGA,EAAIyM,EAAQzrB,OAAQgf,IAClC,EAAK2M,eAAe,CAClBrjB,SACA+f,SACAmD,OACAC,QAASA,EAAQzM,GACjB+F,WACAlD,OAAQA,EAAyB,IAAhBhhB,KAAKC,SACtB4qB,YAzCkC,KA6CxCE,aAAe,YAQA,IAPbtjB,EAOY,EAPZA,OACA+f,EAMY,EANZA,OACAmD,EAKY,EALZA,KACAC,EAIY,EAJZA,QACA1G,EAGY,EAHZA,SACAlD,EAEY,EAFZA,OACA6J,EACY,EADZA,OAEAD,EAAQI,MAAK,SAAC1I,EAAWgH,GAAZ,OAA0BhH,EAAIgH,KAC3C,EAAK2B,WAAW,CACdxjB,SACA+f,SACAmD,OACAC,UACA1G,WACAlD,SACA6J,YA9DoC,KAiExCK,eAAiB,YAQF,IAPbzjB,EAOY,EAPZA,OACA+f,EAMY,EANZA,OACAmD,EAKY,EALZA,KACAC,EAIY,EAJZA,QACA1G,EAGY,EAHZA,SACAlD,EAEY,EAFZA,OACA6J,EACY,EADZA,OAEAD,EAAQI,MAAK,SAAC1I,EAAWgH,GAAZ,OAA0BhH,EAAIgH,KAC3C,EAAK2B,WAAW,CACdxjB,SACA+f,SACAmD,OACAC,UACA1G,WACAlD,SACA6J,YAlFoC,KAqFxCI,WAAa,YAQE,IAPbxjB,EAOY,EAPZA,OACA+f,EAMY,EANZA,OACAmD,EAKY,EALZA,KACAC,EAIY,EAJZA,QACA1G,EAGY,EAHZA,SACAlD,EAEY,EAFZA,OACA6J,EACY,EADZA,OAEA7J,EAAS,EAAKyJ,YAAYzJ,GACtB2J,EAAO,EAAK7J,aAAaqK,cAC3BR,EAAO,EAAK7J,aAAaqK,aAE3B,IAAK,IAAIhN,EAAI,EAAGA,EAAIyM,EAAQzrB,OAAQgf,IAClC,EAAK2M,eAAe,CAClBrjB,SACA+f,SACAmD,KAAMA,EAAW,IAAJxM,EACbyM,QAASA,EAAQzM,GACjB+F,WACAlD,OAAQA,EAAyB,IAAhBhhB,KAAKC,SACtB4qB,WAEF7J,GAAS,IA5G2B,KA+GxCoK,UAAY,YAQG,IAPb3jB,EAOY,EAPZA,OACA+f,EAMY,EANZA,OACAmD,EAKY,EALZA,KACAC,EAIY,EAJZA,QAEA5J,GAEY,EAHZkD,SAGY,EAFZlD,QACA6J,EACY,EADZA,OAGA7J,EAAS,MADTA,EAAS,EAAKyJ,YAAYzJ,KACA,GAE1B,EAAK0J,WAAW,CACdjjB,SACA+f,SACAmD,OACAC,UACA1G,SANS,IAOTlD,SACA6J,YAlIoC,KAqIxCC,eAAiB,YAQF,IAPbrjB,EAOY,EAPZA,OACA+f,EAMY,EANZA,OACAmD,EAKY,EALZA,KACSjC,EAIG,EAJZkC,QACA1G,EAGY,EAHZA,SACAlD,EAEY,EAFZA,OACA6J,EACY,EADZA,OAEgC,cAA5B,EAAK/J,aAAaxf,QACpB4J,QAAQC,IAAI,uBACZ,EAAK2V,aAAauK,UAEpBrK,EAAS,EAAKyJ,YAAYzJ,GAC1B,IAAIsK,EAAO,EAAKC,SAAS/D,EAAQkB,GACjC,GAAK4C,EAAKxJ,OAAV,CAIA,IAAI0J,EACFF,EAAKG,cAAgB,IAAQH,EAAKI,WAAaJ,EAAKK,SAClDC,EAAe,EAAM5rB,KAAK6rB,IAAI,GAAI,IAAQnD,EAAQ8C,GAAc,MAEhEM,EAAYnB,EACZmB,EAAY,EAAKhL,aAAaqK,cAChCW,EAAY,EAAKhL,aAAaqK,aAEhC,IAAIY,EAAe7H,EAAW,EAAKmG,UAC/B2B,GAAO,GACPV,EAAKW,UAAY,GAAKX,EAAKW,WAAaX,EAAKY,WAC/CF,GAAO,GAEJA,GACCD,EAAeT,EAAKxJ,OAAOoC,SAAW0H,IACxCG,EAAeT,EAAKxJ,OAAOoC,SAAW0H,GAG1C,IAAIO,EAAW,EAAKC,aAAa,CAC/B3kB,SACAkjB,KAAMmB,EACN5H,SAAU6H,IAYZ,GAVA,EAAKM,cAAc,CACjBF,WACAb,OACAtK,SACA8K,YACAC,eACA7H,aAEFiI,EAASG,sBAAwB,EAAKxL,aAAa6B,qBACnDwJ,EAASG,sBAAsBV,aAAa9F,eAAe8F,EAAc,GACrEf,GACEA,EAAO1rB,OAAS,EAAG,CACrBgtB,EAASG,sBAAsBV,aAAa9F,eAC1C8F,EACAjB,GAEF,IAAK,IAAIxM,EAAI,EAAGA,EAAI0M,EAAO1rB,OAAQgf,IAAK,CACtC,IAAIoO,EACF,EAAMvsB,KAAK6rB,IAAI,GAAI,IAAQhB,EAAO1M,GAAGuK,MAAQ8C,GAAc,MACzDgB,EAAU7B,EAAOE,EAAO1M,GAAGwM,KAC/BwB,EAASG,sBAAsBV,aAAaa,wBAC1CF,EACAC,IAsBR,OAjBAL,EAASG,sBAAsBxK,OAASwJ,EAAKxJ,OACzCkK,GACFG,EAASG,sBAAsBN,MAAO,EACtCG,EAASG,sBAAsBL,UAC7BX,EAAKW,UAAYX,EAAKoB,WAAapB,EAAKqB,MAC1CR,EAASG,sBAAsBJ,QAC7BZ,EAAKY,QAAUZ,EAAKoB,WAAapB,EAAKqB,OAExCR,EAASG,sBAAsBN,MAAO,EAExCG,EAASG,sBAAsBzlB,QAAQslB,GACvCA,EAASG,sBAAsBlJ,MAAM0I,EAAWR,EAAKqB,OACrDR,EAASG,sBAAsBjJ,KAAKyI,EAAYC,GAChDI,EAASxB,KAAOmB,EAChBK,EAASjI,SAAW6H,EACpBI,EAASzD,MAAQA,EACjByD,EAAS3E,OAASA,EACX2E,EAtELjhB,QAAQC,IAAI,gBAAiBmgB,IArJO,KA6NxCsB,aAAe,SAAC7E,GACd,OAAIA,EAAI,EAAKuC,SACJvC,EAEA,EAAKuC,UAjOwB,KAoOxC+B,cAAgB,YAOE,IANhBF,EAMe,EANfA,SACAb,EAKe,EALfA,KACAtK,EAIe,EAJfA,OACW2J,EAGI,EAHfmB,UACce,EAEC,EAFfd,aACA7H,EACe,EADfA,SAEAiI,EAAStJ,KAAKiD,eACZ,EAAK8G,aAAa,GAClB,EAAK9L,aAAaqK,aAEpB,IAAI2B,EAAW,EACXC,EAAa,EACbC,EAAQ1B,EAAK0B,MACbH,EAAiB3I,EAAW,EAAKmG,YACnCnG,EAAW2I,EAAiB,EAAKxC,WAE/B2C,EACIA,EAAM7tB,OAAS,IACnB6tB,EAAQ,CACN,CACE9I,SAAU,EACVlD,OAAQ,GAEV,CACEkD,SAAU,GACVlD,OAAQ,GAEV,CACEkD,SAAU,IACVlD,OAAQ,IAEV,CACEkD,SAAU,EACVlD,OAAQ,KAKdgM,EAAQ,CACN,CACE9I,SAAU,EACVlD,OAAQ,GAEV,CACEkD,SAAUA,EACVlD,OAAQ,IAIdmL,EAAStJ,KAAKoK,sBAAsBtC,GACpCwB,EAAStJ,KAAKiD,eACZ,EAAK8G,aAAaI,EAAM,GAAGhM,OAASA,GACpC2J,GAEF,IAAK,IAAIxM,EAAI,EAAGA,EAAI6O,EAAM7tB,OAAQgf,IAChC,GAAI6O,EAAM7O,GAAG+F,SAAW,EAAG,CACzB,GAAI8I,EAAM7O,GAAG+F,SAAW4I,EAAW5I,EAAU,CAC3C,IAEI6D,EAAIgF,GADN,GAAKC,EAAM7O,GAAG+F,SAAW4I,EAAW5I,GAAY8I,EAAM7O,GAAG+F,WACjC6I,EAAaC,EAAM7O,GAAG6C,QAChDmL,EAAStJ,KAAK4J,wBACZ,EAAKG,aAAa5L,EAAS+G,GAC3B4C,EAAOzG,GAET,MAEF4I,GAAsBE,EAAM7O,GAAG+F,SAC/B6I,EAAaC,EAAM7O,GAAG6C,OACtBmL,EAAStJ,KAAK4J,wBACZ,EAAKG,aAAa5L,EAAS+L,GAC3BpC,EAAOmC,GAIbX,EAAStJ,KAAK4J,wBACZ,EAAKG,aAAa,GAClBjC,EAAOzG,EAAW,EAAKmG,YAlTa,KAqTxC6C,SAAW,SAACC,EAAgBC,GAC1B,MAAsB,kBAAXD,EACFA,EAEAC,GAzT6B,KA4TxChB,aAAe,YAEb,IAFsD,IAAtC3kB,EAAqC,EAArCA,OACZ0kB,GADiD,EAA7BxB,KAA6B,EAAvBzG,SACV,MACX/F,EAAI,EAAGA,EAAI,EAAK8L,UAAU9qB,OAAQgf,IAAK,CAC9C,IAAI5f,EAAI,EAAK0rB,UAAU9L,GACvB,GACE5f,EAAEkJ,SAAWA,GACb,EAAKqZ,aAAaqK,YAAc5sB,EAAEosB,KAAOpsB,EAAE2lB,SAAW,KACtD,CACA,IACE3lB,EAAE+tB,sBAAsBe,aACxB9uB,EAAE+tB,sBAAsBjJ,KAAK,GAC7B9kB,EAAE+tB,sBAAwB,KAC1B,MAAOgB,IAGTnB,EAAW5tB,EACX,OAiBJ,OAdK4tB,KACHA,EAAW,EAAKrL,aAAa8B,cACpBnb,OAASA,EAClB0kB,EAAStlB,QAAQY,GACjB0kB,EAASoB,OAAS,WACZpB,EAASxB,KAAOwB,EAASjI,SAAW,EAAKpD,aAAaqK,cACxDgB,EAAStJ,KAAKoK,sBAAsB,GACpCd,EAAStJ,KAAK6C,gBAAgB,KAAS,EAAK5E,aAAaqK,YAAa,IACtEgB,EAASxB,KAAO,EAAK7J,aAAaqK,YAAc,KAChDgB,EAASjI,SAAW,IAGxB,EAAK+F,UAAUxf,KAAK0hB,IAEfA,GA7V+B,KA+VxChF,aAAe,SAACK,GACd,IAAK,IAAIrJ,EAAI,EAAGA,EAAIqJ,EAAOC,MAAMtoB,OAAQgf,IACvC,EAAKqP,WAAWhG,EAAOC,MAAMtJ,KAjWO,KAoWxCqP,WAAa,SAAClC,GACZ,GAAIA,EAAKxJ,YAEF,CAEL,GADAwJ,EAAKqB,MAAQ,EACTrB,EAAK5I,OAAQ,CACf,IAAI+G,EAAUzU,KAAKsW,EAAK5I,QACxB4I,EAAKxJ,OAAS,EAAKhB,aAAa2M,aAC9B,EACAhE,EAAQtqB,OAAS,EACjBmsB,EAAKoB,YAIP,IAFA,IACIgB,EAAIC,EAAI5F,EADR6F,EAAetC,EAAKxJ,OAAO+L,eAAe,GAErC1P,EAAI,EAAGA,EAAIsL,EAAQtqB,OAAS,EAAGgf,KACtCuP,EAAKjE,EAAQvU,WAAe,EAAJiJ,IAEf,IACPuP,EAAK,IAAMA,IAFbC,EAAKlE,EAAQvU,WAAe,EAAJiJ,EAAQ,IAIvB,IACPwP,EAAK,IAAMA,IAEb5F,EAAS,IAAL4F,EAAWD,IACN,QACP3F,GAAQ,OAEV6F,EAAazP,GAAK4J,EAAI,WAGxB,GAAIuD,EAAKwC,KAAM,CAMb,IALA,IAIIxE,EAJAF,EAAUkC,EAAKwC,KAAK3uB,OACpB4uB,EAAc,IAAI1E,YAAYD,GAC9BG,EAAO,IAAIC,WAAWuE,GACtBtE,EAAUzU,KAAKsW,EAAKwC,MAEf3P,EAAI,EAAGA,EAAIsL,EAAQtqB,OAAQgf,IAClCmL,EAAIG,EAAQvU,WAAWiJ,GACvBoL,EAAKpL,GAAKmL,EAEZ,EAAKxI,aAAayB,gBAAgBwL,GAAa,SAAUrE,GACvD4B,EAAKxJ,OAAS4H,KAIpB4B,EAAKW,UAAY,EAAKiB,SAAS5B,EAAKW,UAAW,GAC/CX,EAAKY,QAAU,EAAKgB,SAAS5B,EAAKY,QAAS,GAC3CZ,EAAKI,WAAa,EAAKwB,SAAS5B,EAAKI,WAAY,GACjDJ,EAAKK,SAAW,EAAKuB,SAAS5B,EAAKK,SAAU,GAC7CL,EAAKG,cAAgB,EAAKyB,SAAS5B,EAAKG,cAAe,KACvDH,EAAKoB,WAAa,EAAKQ,SAAS5B,EAAKoB,WAAY,OACjDpB,EAAK0C,QAAU,EAAKd,SAAS5B,EAAKG,cAAe,KAvZb,KA0ZxCF,SAAW,SAAC/D,EAAakB,GAEvB,IADA,IAAI4C,EAAO,KACFnN,EAAIqJ,EAAOC,MAAMtoB,OAAS,EAAGgf,GAAK,MACzCmN,EAAO9D,EAAOC,MAAMtJ,IACX8P,aAAevF,GAAS4C,EAAK4C,aAAe,GAAKxF,GAFdvK,KAM9C,IACE,EAAKqP,WAAWlC,GAChB,MAAO6C,GACPjjB,QAAQC,IAAI,aAAcgjB,GAE5B,OAAO7C,GAva+B,KAyaxC8C,YAAc,WACZ,IAAK,IAAIjQ,EAAI,EAAGA,EAAI,EAAK8L,UAAU9qB,OAAQgf,IAAK,CAC9C,IAAI5f,EAAI,EAAK0rB,UAAU9L,GACvB5f,EAAEskB,KAAKoK,sBAAsB,GAC7B1uB,EAAEskB,KAAKiD,eAAe,EAAKwE,SAAU,EAAKxJ,aAAaqK,aACvD5sB,EAAEosB,MAAQ,EACV,IACEpsB,EAAE+tB,sBAAsBe,aACxB,MAAOc,GACPjjB,QAAQC,IAAIgjB,MAjbhBngB,KAAK8S,aAAeA,EACpB9S,KAAKic,UAAY,GACjBjc,KAAKkc,OAAS,IAAI/D,GAAmBnY,MACrCA,KAAKmc,cAAgB,KACrBnc,KAAKoc,gBAAkB,KACvBpc,KAAKqc,UAAY,IACjBrc,KAAKsc,SAAW,KCnjBD,CAAuBxJ,IAC1C,GAAkC,qBAAvB1a,OAAOioB,YAA6B,CAC3CnjB,QAAQC,IAAI,iCACZ,IAAMmjB,GAAe,IAAIzF,GAAyB/H,IAClDwN,GAAajJ,OAAOxe,QAAQia,GAAagC,aACzCiH,GAAO1E,OAAOxe,QAAQynB,GAAaplB,YAEnCgC,QAAQC,IAAI,iCACZ4e,GAAO1E,OAAOxe,QAAQia,GAAagC,aAGhC,ICFHyL,GDESC,GAwBT,WAAYxmB,GAAyB,0BAvBrCoe,OAAS4D,GAuB2B,KAtBpCD,OAASA,GAsB2B,KArBpC0E,iBAqBoC,OApBpCrtB,SAAU,EAoB0B,KAnBpCyB,OAAQ,EAmB4B,KAlBpC0kB,QAAS,EAkB2B,KAjBpC3kB,UAAW,EAiByB,KAhBpC8rB,GAAK,GAgB+B,KAfpCC,QAAU,EAe0B,KAdpCC,MAAQ,IAc4B,KAbpCC,WAAa,EAauB,KAZpCC,aAAsB,GAYc,KAXpCC,YAAqB,GAWe,KAVpCC,WAAoB,GAUgB,KATpCC,UAAmB,GASiB,KARpCxG,SAAkB,GAQkB,KAPpCyG,UAAY,EAOwB,KANpCC,MAAuC,GAMH,KALpCC,WAAa,IAKuB,KAJpClsB,QAAU,GAI0B,KAHpCmsB,YAAmB,GAGiB,KAFpCC,UAAsB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAEd,KADpCC,YAAwB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAEjD1wB,OAAO2wB,OAAOxhB,KAAMhG,GACpBgG,KAAK+b,OAAOpF,OAAO9B,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC1DthB,KAAK+b,OAAOnF,OAAO/B,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC1DthB,KAAK+b,OAAOlF,QAAQhC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC3DthB,KAAK+b,OAAOjF,QAAQjC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC3DthB,KAAK+b,OAAOhF,QAAQlC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC3DthB,KAAK+b,OAAO/E,OAAOnC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC1DthB,KAAK+b,OAAO9E,OAAOpC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC1DthB,KAAK+b,OAAO7E,OAAOrC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC1DthB,KAAK+b,OAAO5E,OAAOtC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,GAC1DthB,KAAK+b,OAAO3E,QAAQvC,KAAKiD,eAAe9X,KAAKshB,UAAU,GAAI,IAKtDG,GAAc,yCAAG,WAAO7iB,GAAP,4FAAA0V,EAAA,sDAStB,GAREiM,EAAO,IAAIC,GACXkB,EAAa9iB,EAAQuL,KAAKvL,QAC1B+iB,EAAU/iB,EAAQ+iB,QACpBC,EAAyB,GACzBC,EAAwB,GALF,SAOtBtB,EAAKI,QAAU/hB,EAAQmX,MAAMplB,GACzBmwB,EAAe,GACfa,EAAS,CACT,IAAW3H,KAAK2H,EAGZ,IAFMG,EAAUH,EAAQ3H,GAAG/oB,MAAM,KACjC6vB,EAAa9G,GAAK,GACT+H,EAAI,EAAGA,EAAID,EAAQ3wB,OAAS,EAAG4wB,IAIpC,IAHM9Q,EAAO6Q,EAAQC,GAAG9wB,MAAM,KACxB+wB,EAAO5wB,OAAO6f,EAAK,IAAM,GAC3BgR,EAAMhR,EAAK,GAAG9f,OAAS,EAClBgf,EAAI,EAAGA,EAAI8R,EAAK9R,IACf4B,EAAId,EAAK,GAAGoJ,UAAc,EAAJlK,EAAW,EAAJA,EAAQ,GACrC+R,EAAIjR,EAAK,GAAGoJ,UAAc,EAAJlK,EAAQ,EAAO,EAAJA,EAAQ,GAErC,MADAc,EAAK,GAAGoJ,UAAc,EAAJlK,EAAQ,EAAO,EAAJA,EAAQ,KAEtC2Q,EAAa9G,GAAGkI,KACjBpB,EAAa9G,GAAGkI,GAAK,IAEpBpB,EAAa9G,GAAGkI,GAAGF,KACpBlB,EAAa9G,GAAGkI,GAAGF,GAAQ,IAE/BlB,EAAa9G,GAAGkI,GAAGF,GAAMvlB,KAAKsV,IAK9CwO,EAAKO,aAAL,eAAyBA,GAO7B,IALMgB,EAAUJ,EAAWzwB,MAAM,KACjCsvB,EAAKK,MAAQzV,SAAS2W,EAAQ,GAAI,IAClCvB,EAAKG,GAAKvV,SAAS2W,EAAQ,IAAM,EAC3BK,EAAOhX,SAAS2W,EAAQ,IAC9BvB,EAAKM,WAAajF,GAAMuG,GACfhS,EAAI,EAAGA,EAAI,GAAIA,IAChBve,EAAIkwB,EAAQ,GAAGzH,UAAc,EAAJlK,EAAW,EAAJA,EAAQ,GAC5CoQ,EAAKe,UAAUnR,GAAKhF,SAASvZ,EAAG,IAAM,GAI1C,IAFIovB,EAAa,GACXoB,EAAON,EAAQ,GAAG3wB,OAAS,EACxBgf,EAAI,EAAGA,EAAIiS,EAAMjS,IAClBkS,EAAOlX,SAAS2W,EAAQ,GAAGzH,UAAc,EAAJlK,EAAW,EAAJA,EAAQ,IACpD1d,EAAM0Y,SAAS2W,EAAQ,GAAGzH,UAAc,EAAJlK,EAAQ,EAAO,EAAJA,EAAQ,GAAI,IAC3Dnc,EAAOmX,SAAS2W,EAAQ,GAAGzH,UAAc,EAAJlK,EAAQ,EAAO,EAAJA,EAAQ,GAAI,IAC5DmS,EAAM7vB,EAAM0Y,SAAS,UAAW,IAC/BnX,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,MAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,MAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,MAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,MAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,MAEpBtuB,EAAOmX,SAAS,mBAAoB,MAAQnX,GAC7CgtB,EAAWvkB,KAAK,CACZ4lB,KAAMA,EACNL,KAAY,GAANM,EAAW,KAc7B,IAXAtB,EAAW9L,SAAQ,SAACqN,EAAKhR,EAAOiR,GACxBjR,IAAUiR,EAAKC,WAAU,SAAC7wB,GAAD,OACzBA,EAAEywB,OAASE,EAAIF,SACfR,EAAYplB,KAAK8lB,EAAIF,MACzB9B,EAAKS,WAAWvkB,KAAK,CACjB4lB,KAAME,EAAIF,KACVL,KAAMO,EAAIP,KAAO,QAGrBjB,EAAc,GACZ2B,EAAOZ,EAAQ,GAAG3wB,OAAS,GACxBgf,EAAI,EAAGA,EAAIuS,EAAMvS,IAClB6R,EAAO7W,SAAS2W,EAAQ,GAAGzH,UAAc,GAAJlK,EAAY,GAAJA,EAAS,GAAI,IAC1D4F,EAAQ5K,SACR2W,EAAQ,GAAGzH,UAAc,GAAJlK,EAAS,EAAO,GAAJA,EAAS,EAAI,GAAI,IAElDhf,EAASga,SACT2W,EAAQ,GAAGzH,UAAc,GAAJlK,EAAS,EAAO,GAAJA,EAAS,EAAI,GAAI,IAElDuK,EAAQvP,SACR2W,EAAQ,GAAGzH,UAAc,GAAJlK,EAAS,EAAO,GAAJA,EAAS,EAAI,GAAI,IAElDwS,EACAxX,SAAS2W,EAAQ,GAAGzH,UAAc,GAAJlK,EAAS,EAAO,GAAJA,EAAS,EAAI,GAAI,IAAM,GACrE4Q,EAAYtkB,KAAK,CACbsZ,MAAOA,EACPiM,KAAMA,EACN7wB,OAAQA,EACRwxB,MAAOA,EACPjI,MAAOA,IAmFf,GAhFA6F,EAAKQ,YAAc,GACnBA,EAAY7L,SAAQ,SAAC0N,EAAKrR,EAAOiR,GAW7B,GAVIjR,IAAUiR,EAAKC,WAAU,SAAC7wB,GAAD,OACzBA,EAAEmkB,QAAU6M,EAAI7M,UAChB6L,EAAanlB,KAAKmmB,EAAI7M,OAC1BwK,EAAKQ,YAAYtkB,KAAK,CAClBulB,KAAMY,EAAIZ,KAAO,GACjBtH,MAAOkI,EAAIlI,MACX3E,MAAO6M,EAAI7M,MACX4M,MAAOC,EAAID,MACXxxB,OAAQyxB,EAAIzxB,SAEZyxB,EAAI7M,QAAUwK,EAAKI,QAAS,CAC5B,IAAMqB,EAAOY,EAAIZ,KACbzB,EAAKc,YAAYW,EAAO,MAGxBzB,EAAKc,YAAYW,EAAO,IAAM,IAF9BzB,EAAKc,YAAYW,EAAO,IAAIvlB,KAAK,CAAEie,MAAOkI,EAAIlI,MAAOvpB,OAAQyxB,EAAIzxB,aAO7E0wB,EAAY3M,SAAQ,SAACvkB,EAAIwf,GACrB,IAAIkS,EAAO,CACPQ,UAAW/P,GAAa8B,aACxBjkB,GAAIA,EACJmyB,YAAa3X,SAAS2W,EAAQ,GAAGzH,UAAc,EAAJlK,EAAW,EAAJA,EAAQ,GAAI,IAC9D4S,MAAO,KACPnc,KAAM,GACNoM,OAAQ,IAEZ,GAAIqP,EAAKS,YAAa,CAClB,IAAIlc,EAAO2Z,EAAKnI,OAAO8D,OAAOzB,SAC1B4H,EAAKS,YAAc,GAEvB5lB,QAAQC,IAAIyJ,GACZ2Z,EAAKnI,OAAO8D,OAAOvD,UACf/R,EAAKjF,IACLiF,EAAKsT,UAETmI,EAAKzb,KAAOA,EAEhB,OAAO,0BAAkCjW,IAAML,MAAK,SAACiyB,IACjDF,EAAI,2BAAQA,GAASE,EAAIS,UACpBhQ,OAAS,GAAK7H,SAAS2W,EAAQ,GAAGzH,UAAU1pB,EAAIA,EAAK,GAAI,IAC9D0xB,EAAKQ,UAAUhqB,QAAQ0nB,EAAKxE,OAAO7gB,OACnCqlB,EAAKnI,OAAOe,aAAakJ,EAAKU,OAC9BxC,EAAK9F,SAAShe,KAAK4lB,SAG3BT,EAAa1M,SAAQ,SAACvkB,EAAIwf,GACtB,IAAI4F,EAAQ,CACR8M,UAAW/P,GAAa8B,aACxBgG,GAAIjqB,EACJmyB,YAAa3X,SAAS2W,EAAQ,GAAGzH,UAAc,EAAJlK,EAAW,EAAJA,EAAQ,GAAI,IAC9D4S,MAAO,KACPnc,KAAM,GACNoM,OAAQ,IAEZ,GAAI+C,EAAM+M,YAAa,CACnB,IAAIlc,EAAO2Z,EAAKnI,OAAO8D,OAAOpC,eAC1B/D,EAAM+M,YAAc,GAExB5lB,QAAQC,IAAIyJ,GACZ2Z,EAAKnI,OAAO8D,OAAOvD,UACf7F,GACAlM,EAAKjF,IACLiF,EAAKsT,UAETnE,EAAMnP,KAAOA,EAEjB,OAAO,0BAAkCjW,IAAML,MAAK,SAACsyB,IACjD7M,EAAK,2BAAQA,GAAU6M,EAAII,UACrBhQ,OAAS,GAAK7H,SAAS2W,EAAQ,GAAGzH,UAAU1pB,EAAIA,EAAK,GAAI,IAC/DolB,EAAM8M,UAAUhqB,QAAQ0nB,EAAKxE,OAAO7gB,OACpCqlB,EAAKnI,OAAOe,aAAapD,EAAMgN,OAC/BxC,EAAKU,UAAUxkB,KAAKsZ,SAGxBoL,EAAQ,GACRW,EAAQ,KAAuB,SAAhBA,EAAQ,IAEvB,IADIG,EAAMH,EAAQ,IAAI3wB,OAAS,EACtBgf,EAAI,EAAGA,EAAI8R,EAAK9R,IACjB4F,EAAQ5K,SAAS2W,EAAQ,IAAIzH,UAAc,EAAJlK,EAAW,EAAJA,EAAQ,GAAI,IAC1D6D,EAAM7I,SAAS2W,EAAQ,IAAIzH,UAAc,EAAJlK,EAAQ,EAAO,EAAJA,EAAQ,GAAI,IAAM,GACtEgR,EAAM1kB,KAAK,CAAE9L,GAAIolB,EAAO/B,IAAKA,IAGjCmN,EAAMhwB,OAAS,IACfovB,EAAKE,YAAc,IAAI5N,GAAKC,KAEhCyN,EAAKY,MAAQA,EA/PS,kDAiQtB/wB,QAAQkN,OAAR,MAjQsB,2CAmQfijB,GAnQe,gEAAH,sDEvDZ0C,GAFG,IAJlB,uCACIC,YAAqB,GADzB,KAEIC,MAAa,ICKJC,GAAb,WASE,cAAuD,IAAzCC,EAAwC,EAAxCA,KAAMC,EAAkC,EAAlCA,IAAKC,EAA6B,EAA7BA,KAAMvB,EAAuB,EAAvBA,KAAuB,0BARtDsB,SAQsD,OAPtDD,UAOsD,OANtDG,YAMsD,OALtDC,WAKsD,OAJtDF,UAIsD,OAHtD5oB,WAGsD,OAFtD+oB,YAEsD,OADtDC,SACsD,EACpD3jB,KAAKsjB,IAAMA,EACXtjB,KAAKqjB,KAAOA,EACZrjB,KAAK2jB,IAAM3jB,KAAKsjB,IAAM,EAAItB,EACtBhiB,KAAK2jB,KAAO3B,IACdhiB,KAAK2jB,IAAM3B,EAAO,GAEpBhiB,KAAKyjB,MAAQ,KACbzjB,KAAKujB,KAAOA,EAAKA,KACjBvjB,KAAKwjB,OAASD,EAAKC,OACnBxjB,KAAK0jB,OAASL,EAAK1yB,GACD,UAAdqP,KAAKujB,KACPvjB,KAAKrF,MAAQ,SAEbqF,KAAKrF,MAAQ,UAvBnB,oDA2BIqF,KAAKqjB,KAAKO,SAASC,KAAK9K,aAAa,OAAQ/Y,KAAKrF,OAClDqF,KAAKwjB,OAAOzK,aAAa,OAAQ/Y,KAAKrF,SA5B1C,6BA+BIqF,KAAKqjB,KAAKO,SAASC,KAAK9K,aAAa,OAAQ/Y,KAAK0jB,QAClD1jB,KAAKqjB,KAAKO,SAASC,KAAKppB,MAAMqpB,KAAO,GACrC9jB,KAAKwjB,OAAOzK,aAAa,OAAQ,8BAjCrC,KAoCagL,GAKX,WAAY/B,EAAcviB,EAAgBjB,GAAiB,IAAD,iCAJnDwlB,OAImD,OAHnDL,SAGmD,OAFlDM,UAEkD,OADnDzlB,YACmD,OAM1D0lB,OAAS,SAACC,EAA+B/xB,GACvC+xB,EAAIC,UAAUhyB,EAAK,EAAGJ,KAAKqyB,MAAM,EAAKL,EAAI,EAAKC,KAAO,EAAKzlB,UAN3DwB,KAAKgkB,EAAI,EACThkB,KAAKxB,OAASA,EACdwB,KAAKikB,KAAOjC,EAAOviB,EACnBO,KAAK2jB,IAAM3jB,KAAKikB,KAAOxkB,EAASjB,GAavB8lB,GAMX,cAAqD,IAAD,OAAtCtV,EAAsC,EAAtCA,MAAOrU,EAA+B,EAA/BA,MAAO2kB,EAAwB,EAAxBA,EAAG0E,EAAqB,EAArBA,EAAGO,EAAkB,EAAlBA,GAAkB,0BAL5CjF,OAK4C,OAJ5C0E,OAI4C,OAH5CO,QAG4C,OAF5C5pB,WAE4C,OAD5CqU,WAC4C,OAOpDwV,KAAO,SAACL,GACNA,EAAIM,YACJN,EAAIO,OAAO,EAAG,EAAKV,GACnBG,EAAIQ,OAAO,EAAK3V,MAAO,EAAKgV,GAC5BG,EAAIS,UAAY,EAAKL,GACrBJ,EAAIU,YAAc,EAAKlqB,MACvBwpB,EAAIW,SACJX,EAAIL,QAbJ9jB,KAAKsf,EAAIA,EACTtf,KAAKgkB,EAAIA,EACThkB,KAAKgP,MAAQA,EACbhP,KAAKrF,MAAQA,EACbqF,KAAKukB,GAAKA,GAwBDQ,GAkBX,cAAmF,IAAD,OAApE/V,EAAoE,EAApEA,MAAOvP,EAA6D,EAA7DA,OAAQ9E,EAAqD,EAArDA,MAAO2kB,EAA8C,EAA9CA,EAAG0E,EAA2C,EAA3CA,EAAGL,EAAwC,EAAxCA,IAAKN,EAAmC,EAAnCA,KAAM1Q,EAA6B,EAA7BA,KAAMqS,EAAuB,EAAvBA,IAAK9vB,EAAkB,EAAlBA,QAAkB,0BAjBlF8uB,OAiBkF,OAhBlF1E,OAgBkF,OAflFxG,OAekF,OAdlFkM,SAckF,OAblFC,SAakF,OAZlFtB,SAYkF,OAXlFvO,WAWkF,OAVlF3V,YAUkF,OATlFuP,WASkF,OARlFkW,WAQkF,OAPlF7B,UAOkF,OANlFnuB,aAMkF,OALlFyd,UAKkF,OAJlFhY,WAIkF,OAHlFwqB,eAGkF,OAFlFC,WAEkF,OADlFC,SACkF,OAkBlFC,KAAO,WACL,EAAKF,OAAQ,EACb,EAAKF,MAAQ,EAAKlB,EAAI,EAAKgB,IACvB,EAAKE,OAAS,EAAKzlB,SACrB,EAAKylB,OAAS,EAAKzlB,SAtB2D,KAyBlFykB,OAAS,SAACC,GACRA,EAAIM,YACJN,EAAIO,OAAO,EAAKpF,EAAG,EAAK0E,EAAI,EAAK5O,OACjC+O,EAAIQ,OAAO,EAAKrF,EAAG,EAAK0E,EAAI,EAAKvkB,QACjC0kB,EAAIS,UAAyB,IAAb,EAAK5V,MACrBmV,EAAIU,YAAc,QAClBV,EAAIoB,QAAU,QACdpB,EAAIW,SACJX,EAAIM,YACJN,EAAIO,OAAO,EAAKpF,EAAG,EAAK0E,EAAI,EAAK5O,OACjC+O,EAAIQ,OAAO,EAAKrF,EAAG,EAAK0E,EAAI,EAAKvkB,QACjC0kB,EAAIS,UAAyB,GAAb,EAAK5V,MACrBmV,EAAIU,YAAc,QAClBV,EAAIW,SACA,EAAKM,QACPjB,EAAIM,YACJN,EAAIO,OAAO,EAAKpF,EAAG,EAAK0E,EAAI,EAAK5O,OACjC+O,EAAIQ,OAAO,EAAKrF,EAAG,EAAK0E,EAAI,EAAKkB,OACjCf,EAAIS,UAAyB,GAAb,EAAK5V,MACrBmV,EAAIU,YAAc,MAClBV,EAAIW,UAEF,EAAKO,MACPlB,EAAIM,YACJN,EAAIO,OAAO,EAAKpF,EAAG,EAAK0E,EAAI,EAAK5O,OACjC+O,EAAIQ,OAAO,EAAKrF,EAAG,EAAK0E,EAAI,EAAKqB,KACjClB,EAAIS,UAAyB,IAAb,EAAK5V,MACrBmV,EAAIU,YAAc,EAAKlqB,MACvBwpB,EAAIW,UAEF,EAAKM,QAAU,EAAKC,MACtB,EAAK1qB,MAAQ,OAEfwpB,EAAIM,YACJN,EAAIqB,IAAI,EAAKlG,EAAG,EAAK0E,EAAI,EAAK5O,MAAgB,IAAT,EAAK0D,EAAS,EAAG,EAAI9mB,KAAKyzB,IAC/DtB,EAAIuB,UAAY,QAChBvB,EAAIL,OACJK,EAAIM,YACJN,EAAIqB,IAAI,EAAKlG,EAAG,EAAK0E,EAAI,EAAK5O,MAAO,EAAK0D,EAAG,EAAG,EAAI9mB,KAAKyzB,IACzDtB,EAAIuB,UAAY,EAAK/qB,MACrBwpB,EAAIL,OACJK,EAAIwB,KAAO,QAAmB,IAAT,EAAK7M,EAAU,WACpCqL,EAAIxgB,UAAY,SAChBwgB,EAAIyB,aAAe,SACnBzB,EAAIuB,UAAY,QAChBvB,EAAI0B,SAAS,EAAKlT,KAAM,EAAK2M,EAAG,EAAK0E,EAAI,EAAK5O,MAAQ,IArEtDpV,KAAKgkB,EAAIA,EACThkB,KAAKoV,OAAS4O,EACdhkB,KAAK9K,QAAUA,EACf8K,KAAKglB,IAAMA,EACXhlB,KAAKilB,IAAMjB,EAAIgB,EACfhlB,KAAK2jB,IAAMA,EACX3jB,KAAKqjB,KAAOA,EACZrjB,KAAKP,QAAUA,EACfO,KAAKsf,EAAIA,EACTtf,KAAK2S,KAAOA,EACZ3S,KAAKgP,MAAQA,EACbhP,KAAK8Y,EAAI9J,EAAQ,EACjBhP,KAAKrF,MAAQA,EACbqF,KAAKmlB,UAAY,QACjBnlB,KAAKklB,MAAQzlB,EACbO,KAAKolB,OAAQ,GClIIU,GAcnB,WAAYC,GAA4B,IAAD,iCAbhCjU,QAAU,EAasB,KAZhC5c,QAAkB,GAYc,KAXhCksB,WAAqB,GAWW,KAV/B4D,IAAc,IAUiB,KAT/BxmB,OAAiB,IASc,KAR/BwQ,WAQ+B,OAP/BvP,YAO+B,OAN/BumB,MAAgB,GAMe,KAL/B3zB,WAK+B,OAJ/B4zB,YAAwB,GAIO,KAH/BC,UAAyB,GAGM,KAF/BC,eAAyB,GAEM,KAD/BC,aAC+B,OAMvCC,SAAW,SAACrsB,GACVnJ,OAAO2wB,OAAO,EAAMxnB,IAPiB,KASvCssB,SAAW,SAACtC,GACV,EAAKuC,QACL,EAAKC,YAAYxC,GACjB,EAAKyC,YAAYzC,IAZoB,KAcvCuC,MAAQ,WACN,EAAKH,QAAQM,UAAU,EAAG,EAAG,EAAK1X,MAAO,EAAKvP,SAfT,KAiBvCknB,UAAY,SAACjM,GACX,IAAIX,EAAIW,EAAQ,GACZ9oB,EAAI,IAkCR,OAjCU,IAANmoB,IACFnoB,EAAI,MAEI,IAANmoB,IACFnoB,EAAI,KAEI,IAANmoB,IACFnoB,EAAI,MAEI,IAANmoB,IACFnoB,EAAI,KAEI,IAANmoB,IACFnoB,EAAI,KAEI,IAANmoB,IACFnoB,EAAI,MAEI,IAANmoB,IACFnoB,EAAI,KAEI,IAANmoB,IACFnoB,EAAI,MAEI,IAANmoB,IACFnoB,EAAI,KAEI,KAANmoB,IACFnoB,EAAI,MAEI,KAANmoB,IACFnoB,EAAI,KAEC,GAAKA,GArDyB,KAuDvCwyB,UAAY,WACV,IAoCIwC,EApCEC,EAASrlB,SAASC,cAAc,UAAUqlB,WAAW,MAC3DD,EAAOd,OAAO/W,MAAQ,EAAKA,MAC3B6X,EAAOd,OAAOtmB,OAAS,EAAKA,OAC5BonB,EAAOE,OACPC,MAAMzP,KAAKyP,MAAM,KAAK,SAACnxB,EAAGsa,GAAJ,OAAUA,KAAG+E,SAAQ,SAACrf,EAAGoxB,GAC7C,IAAMrC,EACJqC,EAAI,KAAO,EACP,IACAA,EAAI,IAAM,EACR,IACAA,EAAI,IAAM,EACR,EACAA,EAAI,IAAM,EACR,GACA,GACNpC,EACJoC,EAAI,KAAO,GAEPA,EAAI,IAAM,EADV,QAGEA,EAAI,IAAM,GAERA,EAAI,IAAM,EADV,kBAGE,kBACNhD,EAAOgD,EAAI,EAAK/xB,QACT,IAAIovB,GAAU,CACzBtV,MAAO,EAAKA,MACZrU,MAAOkqB,EACPvF,EAAG,EACH0E,EAAGC,EACHM,GAAIK,IAEDJ,KAAKqC,MAEZ,EAAKx0B,MAAMqP,IAAMmlB,EAAOd,OAAOmB,UAAU,aAEzC,EAAK70B,MAAM80B,OAAS,WACbP,IACHA,EAAY,IAAI7C,GAAU,EAAG,EAAKtkB,OAAQ,EAAKjB,SACrC0lB,OAAO,EAAKkC,QAAS,EAAK/zB,SAhGH,KAoGvC+0B,SAAW,SAACC,EAAkBC,GAC5B,IAAMC,EAAM,EAAKryB,QACjB8xB,MAAMzP,KAAKyP,MAAM,EAAK5F,aAAa,SAACvrB,EAAGsa,GAAJ,OAAUA,KAAG+E,SAAQ,SAACrf,EAAG2xB,GAC1D,IAAM1O,EAAIwO,EAAQ,GAAGtY,MACfgV,EAAIuD,GAAO,GAAKC,GACtB,EAAKvB,YAAYuB,GAAK,GACtBH,EAAUnS,SAAQ,SAAC8E,GACjB,GAAIA,EAAEgI,MAAY,GAAJwF,GACRxN,EAAEgI,KAAiB,IAATwF,EAAI,GAAS,CACzB,IAAMC,EAAKzD,EAAIuD,GAAOvN,EAAEgI,KAAO,IACzB0F,EAAKJ,EAAQtN,EAAEU,OAAOiN,OACtBC,EAAKH,EAAKF,EAAMvN,EAAE7oB,OAClBkyB,EAAO,IAAI0B,GAAK,CACpB/V,MAAO8J,EACPrZ,OAAQmoB,EACRjtB,MAAO,SACP2kB,EAAGoI,EACH1D,EAAGyD,EACH9D,IAAKiE,EAAmB,EAAd,EAAKnoB,OACfkT,KAAM,EAAKgU,UAAU3M,EAAEU,OACvB2I,KAAMrJ,EAAEU,MAAQ,GAChBsK,IAAK,EAAKA,IACV9vB,QAAS,EAAKA,UAEhB,EAAK+wB,YAAYuB,GAAG/qB,KAAK4mB,GACzB,EAAK8C,eAAe1pB,KAAK4mB,WA7HI,KAmIvCwE,SAAW,WACT,EAAK3B,UAAY,GACjB,IAAK,IAAI/V,EAAI,EAAGA,EAAI,EAAGA,IACrB,EAAK+V,UAAUzpB,KAAK,IAAIsnB,GAAU5T,EAAG,EAAK1Q,OAAQ,EAAKjB,UAtIpB,KAyIvCspB,SAAW,SAAClZ,GACNA,IAAK,EAAKkD,QAAUlD,GAEtB,EAAKqX,YAAY,EAAKnU,UACtB,EAAKmU,YAAY,EAAKnU,SAAS3gB,OAAS,GAExC,EAAK80B,YAAY,EAAKnU,SAASoD,SAAQ,SAAC6S,GACtC,EAAK/B,MAAMvpB,KAAKsrB,MAGpB,EAAKjW,UACL,EAAKoU,UAAUzpB,KAAK,IAAIsnB,GAAU,EAAKjS,QAAU,EAAG,EAAKrS,OAAQ,EAAKjB,UApJjC,KAsJvCioB,YAAc,SAACzC,GACb,EAAKgC,MAAM9Q,SAAQ,SAACmO,EAAMlT,GAUtB,IAAIkV,GATNhC,EAAKW,EAAIA,EACTX,EAAKa,OAAO,EAAKkC,SACb/C,EAAKM,IAAMK,GACb,EAAKgC,MAAMgC,OAAO7X,EAAG,GAKnB,EAAK6U,IAAM3B,EAAKW,GAAKX,EAAKjO,SAE5B6N,GAAUC,YAAYhO,SAAQ,SAAC+S,GACzB5E,EAAKA,OAAS4E,EAAM5E,MAEpB4E,EAAMjE,EAAIX,EAAK4B,IAAM,EAAK/vB,SAC1B+yB,EAAMjE,EAAIX,EAAK4B,IAAM,EAAK/vB,UAE1BmuB,EAAKgC,IAAMrB,EAAI,EAAKgB,IAAqB,GAAf,EAAK9vB,QAE7B+yB,EAAMjE,EAAmB,GAAf,EAAK9uB,SAAiBmuB,EAAK4B,KACrCgD,EAAMjE,EAAmB,GAAf,EAAK9uB,SAAiBmuB,EAAK4B,KAErCI,EAAM,UACNhC,EAAK1oB,MAAQ,SACJstB,EAAMjE,EAAIX,EAAK4B,KACxBI,EAAM,OACNhC,EAAK1oB,MAAQ,UACJstB,EAAMjE,EAAIX,EAAK4B,MACxBI,EAAM,QACNhC,EAAK1oB,MAAQ,UAEVstB,EAAM5C,MACT4C,EAAK,IAAU5C,EACfpC,GAAUE,MAAM1mB,KAAK,CAAC4mB,EAAKA,KAAM4E,EAAM5C,MACvCnoB,QAAQC,IAAI8lB,GAAUE,YAK9BE,EAAKiC,YA9L4B,KAkMvCkB,YAAc,SAACxC,GACb,EAAKkC,UAAUhR,SAAQ,SAAC2O,EAAM1T,GAC5B0T,EAAKG,EAAIA,EACTH,EAAKK,OAAO,EAAKkC,QAAS,EAAK/zB,OAC3BwxB,EAAKG,EAAIH,EAAKF,KAChB,EAAKuC,UAAU8B,OAAO7X,EAAG,OAvMQ,KA2MvC+X,eAAiB,SAAClE,GAChB,EAAKuC,QACLS,MAAMzP,KAAKyP,MAAM,EAAK5F,aAAa,SAACvrB,EAAGsa,GAAJ,OAAUA,KAAG+E,SAAQ,SAACrf,EAAG2xB,GAC1D,EAAKpB,QAAQhC,UAAU,EAAK/xB,MAAO,EAAGL,KAAKqyB,MAAML,EAAIwD,EAAI,EAAKn1B,MAAMoN,OAAwB,EAAf,EAAKvK,aAEpF,EAAKixB,eAAejR,SAAQ,SAAAmO,GAC1BA,EAAKW,EAAIA,EACTX,EAAKa,OAAO,EAAKkC,aAjNnBpmB,KAAK3N,MAAQ,IAAI81B,MACjBnoB,KAAKgP,MAAQ+W,EAAO/W,MACpBhP,KAAKP,OAASsmB,EAAOtmB,OACrBO,KAAKomB,QAAUL,EAAOe,WAAW,OCfxBsB,GAAb,WA4CI,WAAYpuB,GAAwB,IAAD,iCA3C5BquB,UA2C4B,OA1C5BtM,YA0C4B,OAzC5B3D,YAyC4B,OAxC5BqI,iBAwC4B,OAvC5BlH,QAAkB,EAuCU,KAtC5B1kB,OAAiB,EAsCW,KArC5BsuB,MAAe,GAqCa,KApC5BmF,SAAgB,GAoCY,KAnC5BC,aAmC4B,OAlC5BC,QAAyB,GAkCG,KAjC5BpzB,gBAiC4B,OAhC5BqzB,eAgC4B,OA/B5BvH,UAAoB,EA+BQ,KA9B5BE,WAAa,IA8Be,KA7B5BlsB,QAAU,GA6BkB,KA5B5B9B,SAAU,EA4BkB,KA3B5BwB,UAAW,EA2BiB,KA1B5B8rB,GAAK,GA0BuB,KAzB5BC,QAAU,EAyBkB,KAxB5BC,MAAQ,IAwBoB,KAvB5BC,WAAa,EAuBe,KAtB5BC,aAAsB,GAsBM,KArB5BC,YAAqB,GAqBO,KApB5BC,WAAoB,GAoBQ,KAnB5BC,UAAmB,GAmBS,KAlB5BxG,SAAkB,GAkBU,KAjB5B4G,YAAmB,GAiBS,KAhB5BC,UAAsB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAgBtB,KAf5BC,YAAwB,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAezB,KAd3BmH,gBAc2B,OAb3BC,YAa2B,OAZ3BC,YAAsB,EAYK,KAX3BC,YAAsB,EAWK,KAV3BC,WAAqB,EAUM,KAT3BC,WAAqB,EASM,KAR3BC,SAAmB,EAQQ,KAP3BC,SAAmB,EAOQ,KAN3BC,MAAkB,GAMS,KAL3BjF,KAAe,EAKY,KAJ3BkF,SAAmB,EAIQ,KAH3BC,SAAmB,GAGQ,KAF3B5F,OAAyB,GAEE,KAD3B6F,SAAkB,GACS,KAOnCC,SAAW,SAACvD,GACR,EAAKsC,KAAO,IAAIvC,GAAKC,GACrB,EAAKsC,KAAKhC,SAAS,CACfnxB,QAAS,EAAKA,QACdksB,WAAY,EAAKV,GACjBsE,IAAoB,GAAf,EAAK9vB,QACVsJ,OAAuB,EAAf,EAAKtJ,UAEjB,IAAMmyB,EAKA,GACN,EAAKtG,YAAY7L,SAAQ,SAAA8E,GACjBA,EAAEjE,QAAU,EAAK4K,SACjB0G,EAAU5qB,KAAK,CACXulB,KAAMhI,EAAEgI,KAAO,GACftH,MAAOV,EAAEU,MACTiI,MAAO3I,EAAE2I,MACTxxB,OAAQ6oB,EAAE7oB,YAItB,EAAKk3B,KAAK9B,QACV,EAAK8B,KAAKjE,YACN,EAAKqE,WACL,EAAKJ,KAAKjB,SAASC,EAAW,EAAKoB,YAlCR,KAqCnCc,UAAY,WAAO,IAAD,IACd,IAAI,EAAK10B,OAAU,EAAK0kB,OAAxB,CASsD,IAAD,EAArD,GALA,EAAK4J,MAAQ,GACb,EAAKqG,kBACL,EAAKP,SAAW,EAChB,EAAKD,SAAW,EAChB,YAAKX,YAAL,SAAWhC,SAAS,CAAEvU,QAAS,IACS,eAApC,YAAKsG,cAAL,eAAatF,aAAaxf,OAC1B4J,QAAQC,IAAI,uBACZ,YAAKib,cAAL,SAAatF,aAAauK,SAE9B,EAAKxoB,OAAQ,EACb,IAKmB,IALb40B,EAAY,KAAW,EAAK7I,MAAQ,EAAKC,YAAe,IAK9D,GAJA,EAAK6H,WAAapP,YAAW,WACzB,EAAKoQ,cAAc,OACpBD,GACH,EAAKE,iBACD,EAAK/0B,SACL,YAAKyzB,YAAL,SAAWR,WACX,YAAKQ,YAAL,SAAWP,WACX,EAAKiB,WAAaa,sBAAsB,EAAKC,cAE7C,EAAKd,WAAaa,sBAAsB,EAAKE,aAEjD,EAAKj1B,OAAQ,OAzBTqI,QAAQC,IAAI,mBAvCe,KAkEnC4sB,SAAW,WAAO,IAAD,EACR,EAAKl1B,OAAU,EAAK0kB,QAIzB,EAAKiK,OAAOtO,SAAQ,SAAC8U,EAAK7Z,GACtB6Z,EAAIC,UAER,EAAK/I,UAAY,EAAK0H,YAAc,EACpC,EAAK/zB,OAAQ,EACb,EAAKq0B,MAAQ,GACb,EAAK1F,OAAS,GACd0G,aAAa,EAAKxB,YAClB,EAAKyB,gBACLC,qBAAqB,EAAKrB,YAC1BmB,aAAa,EAAKvB,QAClB,YAAKvQ,cAAL,SAAagI,cACb,EAAKvrB,OAAQ,GAfTqI,QAAQC,IAAI,mBApEe,KAqFnCgtB,cAAgB,WACR,EAAK1J,cACL,EAAKA,YAAYpL,OACjB,EAAKoL,YAAYxN,sBAAwB,IAxFd,KA2FnCyW,cAAgB,SAAC1U,GACb,GAAI,EAAKyL,YAAa,CAClB,EAAKA,YAAYjL,gBAAgB,KACjC,EAAKiL,YAAY1L,KAAKC,GACtB,IAAK,IAAI7E,EAAI,EAAGA,EAAI,EAAKsQ,YAAYtK,cAAehG,QA/FzB,KAkGnCka,eAAiB,SAAC95B,GACd,IAAM+5B,EAAe,GAAV,EAAK5J,GAChB,EAAKQ,UAAY,EAAKA,WAAa3wB,EAAEg6B,OAAS,GAAK,EAAI,GACvD,EAAKrJ,UAAY,EAAKA,UAAY,EAAI,EAClC,EAAKA,UAAYoJ,EAAKA,EAAK,EAAKpJ,UACpC,IAAMsJ,EAAQ,EAAKtJ,UAAY,EAAKhsB,QACpC,EAAKu1B,SAAS,EAAKvJ,WACnB,EAAKwJ,QAAQF,IAzGkB,KA2GnCE,QAAU,SAAC1G,GACW,IAAD,EAAZ,EAAKnvB,QACN,YAAKwzB,YAAL,SAAWH,eAAelE,KA7GC,KAgHnCwF,gBAAkB,WACd,IADqB,IAAD,oBACXrZ,EAAI,EAAGA,EAAI,EAAK8Q,UAAU9vB,OAAQgf,IACvC,EAAK8Q,UAAU9Q,GAAG0S,UAAUhO,KAAKiD,eAC7B,EAAKmJ,UAAU9Q,GAAG6C,OAAS,IAC3B,GAGR,IAAK,IAAI7C,EAAI,EAAGA,EAAI,EAAKsK,SAAStpB,OAAQgf,IACtC,EAAKsK,SAAStK,GAAG0S,UAAUhO,KAAKiD,eAC5B,EAAKyJ,YAAYpR,GAAK,IACtB,GAGR,YAAK4L,cAAL,SAAapF,OAAO9B,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC3D,YAAKvF,cAAL,SAAanF,OAAO/B,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC3D,YAAKvF,cAAL,SAAalF,QAAQhC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC5D,YAAKvF,cAAL,SAAajF,QAAQjC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC5D,YAAKvF,cAAL,SAAahF,QAAQlC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC5D,YAAKvF,cAAL,SAAa/E,OAAOnC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC3D,YAAKvF,cAAL,SAAa9E,OAAOpC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC3D,YAAKvF,cAAL,SAAa7E,OAAOrC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC3D,YAAKvF,cAAL,SAAa5E,OAAOtC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,GAC3D,YAAKvF,cAAL,SAAa3E,QAAQvC,KAAKiD,eAAe,EAAKwJ,UAAU,GAAI,IAtI7B,KAwInCqI,eAAiB,WACb,GAAI,EAAK90B,MAAO,CAAC,IAAD,EACR81B,EAAkB,KAAW,EAAK/J,MAAQ,EAAKC,YAAc,GAC7D+J,EAAa,EAAKxJ,WAAa,EAC/BxvB,EAAC,UAAG,EAAKwmB,cAAR,aAAG,EAAatF,aAAaqK,YAKlC,IAJIvrB,GAAK,EAAKo3B,SAAWp3B,IACrB,EAAKo3B,SAAWp3B,GAGb,EAAKu3B,SAAWv3B,EAAI+4B,GAAgB,CAIe,IAAD,EAArD,GAHA,EAAKE,cAAc,EAAK7B,SAAU,EAAKC,SAAU,EAAKA,UACtD,EAAKD,SAAW,EAAKG,SAAWwB,EAChC,EAAK1B,SAAW,EAAKA,SAAW,EAC5B,EAAKr0B,UAAa,EAAKq0B,SAAW,GAAM,IAAM,EAC9C,YAAKZ,YAAL,SAAWP,WAEX,EAAKmB,SAAW2B,GAChB,EAAKb,WAIb,IAAIe,EAAO,KAAc,EAAK9B,SAAWp3B,GACzC,EAAKk3B,aACD,EAAKA,YAAc,EAAKD,cACxB,EAAKC,WAAa,GAEtB,EAAKH,OAASrP,YAAW,WACrB,EAAKmR,SAAS,EAAKxB,UACnB,EAAKU,iBACA,EAAK/0B,UAAU,EAAKm2B,gBAC1BD,KAtKwB,KAyKnCD,cAAgB,SAAClO,EAAcqO,EAAmBC,GAC9C,EAAK9B,SAAWxM,EAChB,IACIuO,EAAW,EAAI,IADV,KAAW,EAAKtK,MAAQ,EAAKC,aAEtC,EAAK+H,YAAcoC,EACnB,EAAKhK,WAAW9L,SAAQ,SAACmQ,GACrB,GAAIA,EAAIrD,MAAQgJ,GAAa3F,EAAIrD,MAAQiJ,EAAS,CAAC,IAAD,EAC1CE,EAAU,EAAKC,iBAAiB/F,EAAIhD,MACpC5I,EAAQ0R,EAAQpI,MAChBoI,EAAQvkB,MAAQxO,OAAO+yB,EAAQvkB,KAAKsT,YACpCT,EAAQrhB,OAAO+yB,EAAQvkB,KAAKsT,WAEhC,IAAIpB,EAAI,EAAsB,GAAhB9mB,KAAKC,SACnB,YAAKmmB,cAAL,SAAa0E,eAAe,CACxBrjB,OAAQ0xB,EAAQtI,UAChBrJ,OAAQC,EACRkD,KAAMA,EAAOuO,GAAW7F,EAAIrD,KAAOgJ,GACnCpO,QAASuO,EAAQzQ,MACjBxE,SAAUiV,EAAQh6B,OAClB6hB,OAAQ8F,EAAIqS,EAAQE,kBAKhC,IADA,IAAIrF,EAAQ,GACH7V,EAAI,EAAGA,EAAI,EAAK4Q,YAAY5vB,OAAQgf,IAAK,CAC9C,IAAIkT,EAAO,EAAKtC,YAAY5Q,GACxBkT,EAAKrB,MAAQgJ,GAAa3H,EAAKrB,MAAQiJ,GACvCjF,EAAMvpB,KAAK4mB,GAGnB2C,EAAMhJ,MAAK,SAAUsO,EAAIC,GACrB,IAAIzS,EAAI,KAAQwS,EAAGtJ,KAAOuJ,EAAGvJ,MAAQ,KAAUsJ,EAAGvV,MAAQwV,EAAGxV,OAI7D,OAHIuV,EAAGtJ,OAASuJ,EAAGvJ,OACflJ,GAASwS,EAAG5Q,MAAQ6Q,EAAG7Q,OAEpB5B,KAEX,IAAI8P,GAAe,EACf4C,GAAgB,EAChBC,EAAe,EACnBzF,EAAM9Q,SAAQ,SAAAmO,GAAS,IAAD,EACd8H,EAAU,EAAKlK,UAAUhjB,MAAK,SAAA2kB,GAAG,OAAIA,EAAIhI,KAAOyI,EAAKtN,SACrDsN,EAAKrB,OAAS4G,GAAevF,EAAKtN,QAAUyV,IAC5C5C,EAAcvF,EAAKrB,KACnBwJ,EAAenI,EAAKtN,MACpB0V,EAAe,EACXpI,EAAKtN,QAAU,EAAK2V,oBAAoB9Q,IACxC,EAAKsO,MAAMzsB,KAAK4mB,EAAKrB,OAG7B,IAAIvI,EAAQ0R,EAAQpI,MAChBoI,EAAQvkB,MAAQxO,OAAO+yB,EAAQvkB,KAAKsT,YACpCT,EAAQrhB,OAAO+yB,EAAQvkB,KAAKsT,WAEhC,IAAIyI,EAAQ,CACR,CACIhG,KAAM0G,EAAKlyB,OAAS+5B,EACpBxQ,MAAO2I,EAAKV,MAAyB,GAAjBwI,EAAQl2B,OAAcouB,EAAK3I,QAGnD5B,EAAI,GAAsB,GAAhB9mB,KAAKC,SACnB,YAAKmmB,cAAL,SAAa0E,eAAe,CACxBrjB,OAAQ0xB,EAAQtI,UAChBrJ,OAAQC,EACRkD,KACIA,EACAuO,GAAW7H,EAAKrB,KAAOgJ,GACvBS,EAAeN,EAAQQ,aAC3B/O,QAA0B,GAAjBuO,EAAQl2B,OAAcouB,EAAK3I,MACpCxE,SAAU,KAAQmN,EAAKlyB,OAAS+5B,EAChClY,OAAQ8F,EAAIqS,EAAQE,YACpBxO,OAAQ8F,IAEZ8I,QAlP2B,KAqPnCV,YAAc,WACV,IAAMpJ,EAAU,EAAKb,aAAa,EAAKH,SACb,IAAtB,EAAKuI,MAAM/3B,QACX,EAAK+3B,MAAMhU,SAAQ,SAAC0W,GAChB,IAAM5J,EAAO,EAAKX,YAAYuK,GAC9B,GAAI5J,EAAM,CACN,IAAI6J,EAAe,GACnB,IAAK,IAAI7B,KAAOrI,EACZ,GAAIA,EAAQqI,GAAK4B,GAAQ,CACrB,IAAMrI,EAAO,EAAK+E,SAAS0B,GACrBv3B,EAAMkvB,EAAQqI,GAAK4B,GACzBC,EAAQp5B,GAAO,CAAE+wB,OAAQD,EAAMA,KAAMA,EAAKuI,aAAa,UAG/D9J,EAAK9M,SAAQ,SAACoG,GACV,IAAMgI,EAAMhI,EAAEnqB,OACRupB,EAAQY,EAAEZ,MAAQ,GAClB2I,EAAO,EAAKmF,QAAQ9N,GACtBmR,EAAQnR,IACR,EAAK8I,OAAO/mB,KAAK,IAAI2mB,GAAa,CAC9BC,KAAMA,EACNC,IAAKA,EACLC,KAAMsI,EAAQnR,GACdsH,KAAM,EAAK4G,kBAK3B,EAAKM,MAAQ,EAAKA,MAAMx0B,QAAO,SAAChC,GAAD,OAAUA,IAASk5B,SAjR3B,KAqRnC9B,YAAc,WACN,EAAKj1B,QACL,EAAK2uB,OAAOtO,SAAQ,SAAC8U,EAAK7Z,GAClB,EAAKyY,aAAeoB,EAAIrG,KACxBqG,EAAIC,OACJ,EAAKzG,OAAOwE,OAAO7X,EAAG,IAEtB6Z,EAAI+B,UAGZnC,sBAAsB,EAAKE,eA/RA,KAkSnC4B,kBAAoB,WAChB,IAAI3V,EAAQ,KAMZ,OALA,EAAKkL,UAAU/L,SAAQ,SAAA0N,GACfA,EAAIhI,KAAO,EAAK+F,UAChB5K,EAAQ6M,MAGT7M,GAzSwB,KA2SnCqV,iBAAmB,SAACY,GAChB,IAAI3J,EAAO,KAMX,OALA,EAAK5H,SAASvF,SAAQ,SAAAqN,GACdA,EAAI5xB,KAAOq7B,IACX3J,EAAOE,MAGRF,GAlTwB,KAqTnCoI,SAAW,SAACpvB,GACJA,EAAQ,EAAK+lB,YACT,EAAKmH,SAAS,EAAKA,QAAQ0D,aAAa,KAAM5wB,IAvTvB,KAyTnCwuB,QAAU,WACN,GAAI,EAAKxB,MAAQ,EAAKxzB,MAAO,CAQzB,IAR0B,IAAD,EAEnBq2B,EAAW,EAAI,IADV,KAAW,EAAKtK,MAAQ,EAAKC,aAElCqL,EAAM,GAAK,EAAK9C,SAClB+C,EACA,EAAKlD,WAEJ,YAAK7Q,cAAL,eAAatF,aAAaqK,aAAc,EAAK6L,UAAYkC,EACvDiB,EAAO,GACVA,GAAcD,EAEdC,EAAO,EAAK/K,WAAa,IACzB+K,EAAO,EAAK/K,WAAa,GAEzB,EAAKiH,KAAKvW,QAAU,GAAKqa,EAAO,MAAKA,EAAO,GAChD,IAAInI,EAAIhyB,KAAKqyB,MAAM8H,EAAO,EAAKj3B,SAC/B,EAAK+uB,KAAOD,EACZ,EAAKqE,KAAK/B,SAAStC,GACnB4F,sBAAsB,EAAKC,WA5UA,KA+UnCuC,WAAa,SAAC1R,GAAgC,IAApB2R,EAAmB,uDAAR,GACjC,GAAiB,IAAbA,EACA,EAAKC,YAAY5R,OACd,CACH,EAAK4R,YAAY5R,GACb,EAAK7lB,OAAOouB,GAAUC,YAAYzmB,KAAK,CAAE4mB,KAAM3I,EAAOsJ,EAAG,EAAKC,OAClE,IAAIkH,EAAU,EAAKO,oBACnB,GAAIP,EAAS,CAAC,IAAD,EACL1R,EAAQ0R,EAAQpI,MAYpB,GAXIoI,EAAQvkB,MAAQxO,OAAO+yB,EAAQvkB,KAAKsT,YACpCT,EAAQrhB,OAAO+yB,EAAQvkB,KAAKsT,WAEhC,EAAKmP,SAAS3O,GAAd,UAAuB,EAAKtC,cAA5B,aAAuB,EAAa0E,eAAe,CAC/CrjB,OAAQ0xB,EAAQtI,UAChBrJ,OAAQC,EACRkD,KAAM,EACNC,QAASlC,EACTxE,SAAU,GACVlD,OAAQqZ,IAER,EAAK7D,QAAQ9N,GAAQ,CACrB,IAAM6R,EAAY,EAAK/D,QAAQ9N,GACzB8R,EAASD,EAAK3I,SAASC,KAAKiI,aAAa,QAC3CpI,EAAS,MACE,UAAX8I,GAAiC,UAAXA,IAAoB9I,EAAS,SACvD6I,EAAK3I,SAASC,KAAKppB,MAAMqpB,KAAOJ,MAxWb,KA6WnC4I,YAAc,SAAC5R,GAQX,GAPI,EAAK2O,SAAS3O,KACd,EAAK2O,SAAS3O,GAAO6E,SACrB0D,GAAUC,YAAYhO,SAAQ,SAACoK,EAAGnP,GAC9B,IAAMsc,EAAYxJ,GAAUC,YAAY/S,GAAGkT,KACvC3I,IAAU+R,GAAWxJ,GAAUC,YAAY8E,OAAO7X,EAAG,OAG7D,EAAKqY,QAAQ9N,GAAQ,CACrB,IAAM6R,EAAY,EAAK/D,QAAQ9N,GAC3B6R,IACAA,EAAK3I,SAASC,KAAKppB,MAAMqpB,KAAO,MAvXxCjzB,OAAO2wB,OAAOxhB,KAAMhG,GA7C5B,sDA+CaA,GACLkD,QAAQC,IAAInD,GACZnJ,OAAO2wB,OAAOxhB,KAAMhG,OAjD5B,KJca0yB,GAAgB,SAAC9lB,GAAD,OACzB,SAAChN,GACG6nB,GAAe7a,GAAMtW,MAAK,SAACq8B,GACnBA,IACIA,EAAOxL,MAAMhwB,OAAS,EACtBw7B,EAAOxL,MAAMjM,SAAQ,SAAC/K,EAAMoH,GAAP,OACjB9V,GAAIqC,IAAJ,mBAAoBqM,EAAKxZ,KAAML,MAAK,gBAAG0D,EAAH,EAAGA,KAAH,OAChCuJ,GAASvJ,GAAM1D,MAAK,SAACoL,GAAS,IAAD,EACzB,UAAAixB,EAAOlM,mBAAP,SAAoBpM,WAAW,CAAEP,OAAQpY,EAAI1H,KAAMggB,IAAK7J,EAAK6J,MACxD1jB,MAAK,WACEq8B,EAAOxL,MAAMhwB,SAAWogB,EAAQ,IAChCob,EAAOpT,QAAS,EAChBgH,GAAO,IAAI6H,GAAWuE,GACtB/yB,EAAS,CACLpG,KrDjClB,iBqDkCkBW,QAASw4B,WAI1BxwB,OAAM,SAACywB,GAAD,OAAiB1vB,QAAQC,IAAIyvB,SACxCzwB,OAAM,SAAC0wB,GAAD,OAAc3vB,QAAQC,IAAI0vB,UAGtCF,EAAOpT,QAAS,EAChBgH,GAAO,IAAI6H,GAAWuE,GACtB/yB,EAAS,CAAEpG,KrD5CD,iBqD4CuBW,QAASw4B,SAGnDxwB,OAAM,SAAA3C,GAAG,OAAI0D,QAAQC,IAAI3D,QAIvBszB,GAAY,SAACtE,EAAwBpzB,EAAsBF,GAA/C,OACrB,SAAC0E,GACG,GAAIxE,GAAcF,EAAS,CAAC,IAAD,EACjBuzB,EKtDY,SAACD,EAAwBC,GACnD,IAAM7D,EACF4D,EAAQ,IAAIuE,wBAAwBzN,GACnCkJ,EAAQ,IAAIuE,wBAAwBzN,EACjCkJ,EAAQ,IAAIuE,wBAAwB/d,OACtCge,EAAUvE,EAAUwE,UACpBC,EAAUF,GAAoB,IAC9B1F,EAAyB,GAC/B,IAAK,IAAIvV,KAAKyW,EAAS,CACnB,IAAM/1B,EAAM+1B,EAAQzW,GACdob,EAAO16B,EAAIs6B,wBACXzN,EAAI6N,EAAK7N,EAAI4N,EACbE,EAAID,EAAKne,MACTqe,EAAU/N,EAAI8N,EAAI,EACpB36B,EAAI66B,UAAUC,SAAS,MAAQ96B,EAAI66B,UAAUC,SAAS,KACtDjG,EAAQ7qB,KAAK,CAAE+wB,KAAMlO,EAAGqI,OAAQ0F,EAAsB,IAAZzI,EAAiB5V,MAAOoe,EAAG36B,IAAK,OACnEA,EAAI66B,UAAUC,SAAS,QAC9BjG,EAAQ7qB,KAAK,CAAE+wB,KAAMlO,EAAGqI,OAAQ0F,EAASre,MAAOoe,EAAG36B,IAAK,SACtC,UAAXA,EAAI9B,GACX22B,EAAQ7qB,KAAK,CAAE+wB,KAAMlO,EAAGqI,OAAQ0F,EAASre,MAAOoe,EAAG36B,IAAK,UACjDA,EAAI66B,UAAUC,SAAS,MAAQ96B,EAAI66B,UAAUC,SAAS,KAC7DjG,EAAQ7qB,KAAK,CAAE+wB,KAAMlO,EAAGqI,OAAQ0F,EAAsB,IAAZzI,EAAiB5V,MAAOoe,EAAG36B,IAAK,OACrEA,EAAI66B,UAAUC,SAAS,KAC5BjG,EAAQ7qB,KAAK,CAAE+wB,KAAMlO,EAAGqI,OAAQ0F,EAAsB,IAAZzI,EAAiB5V,MAAOoe,EAAG36B,IAAK,MACrEA,EAAI66B,UAAUC,SAAS,KAC5BjG,EAAQ7qB,KAAK,CAAE+wB,KAAMlO,EAAGqI,OAAQ0F,EAAsB,IAAZzI,EAAiB5V,MAAOoe,EAAG36B,IAAK,MACzE60B,EAAQ7qB,KAAK,CAAE+wB,KAAMlO,EAAGqI,OAAQ0F,EAASre,MAAOoe,EAAG36B,IAAK,UAGjE,OADA60B,EAAQ7qB,KAAK,CAAE+wB,MAAO,IAAK7F,OAAQ,EAAG3Y,MAAO4V,EAAWnyB,IAAK,cACtD60B,ELyBmBmG,CAAejF,EAASpzB,GACtC,QAAJ,EAAAmrB,UAAA,SAAM8F,SAAS,CAAEoC,YAAWD,UAASpzB,aAAYF,YACjD0E,EAAS,CAAEpG,KrD/CG,aqD+CeW,QAAS,CAAEs0B,YAAWrzB,aAAYF,iBAC5D,CAAC,IAAD,EACC,QAAJ,EAAAqrB,UAAA,SAAM8F,SAAS,CAAEmC,YACjB5uB,EAAS,CAAEpG,KrDlDG,kBqDsDbk6B,GAAa,SAACv5B,GAAD,OACtB,SAACyF,GAAoC,IAAD,EAC5B,QAAJ,EAAA2mB,UAAA,SAAM8F,SAASlyB,GACfyF,EAAS,CAAEpG,KrD1DQ,kBqD6Dd81B,GAAW,SAACn1B,GAAD,OACpB,SAACyF,GAAoC,IAAD,EAC5B,QAAJ,EAAA2mB,UAAA,SAAM+I,SAASn1B,GACfyF,EAAS,CAAEpG,KrD9DM,gBqDiEZm6B,GAAe,kBACxB,SAAC/zB,GAAoC,IAAD,EAC5B,QAAJ,EAAA2mB,UAAA,SAAMwJ,WACNnwB,EAAS,CAAEpG,KrD1EU,oBqD6EhBo6B,GAAc,kBACvB,SAACh0B,GAAoC,IAAD,EAC5B,QAAJ,EAAA2mB,UAAA,SAAMwJ,WACNnwB,EAAS,CAAEpG,KrDnFS,mBqDsFfq6B,GAAa,SAACC,GAAD,OACtB,SAACl0B,GAAoC,IAAD,IAC5B,QAAJ,EAAA2mB,UAAA,SAAM8F,SAAS,CAAEzxB,SAAUk5B,IACvB,QAAJ,EAAAvN,UAAA,SAAMwJ,WAEFnwB,EADAk0B,EACS,CAAEt6B,KrDvFO,kBqDyFT,CAAEA,KrDxFM,oBqDkGhB44B,GAAa,SAAC1R,GAAmB,IAAD,EACrC,QAAJ,EAAA6F,UAAA,SAAM6L,WAAW1R,EAAO,KAEf4R,GAAc,SAAC5R,GAAmB,IAAD,EACtC,QAAJ,EAAA6F,UAAA,SAAM+L,YAAY5R,I,gFM1EhBqT,G,oDACJ,WAAYj1B,GAAe,IAAD,+BACxB,cAAMA,IAgCRk1B,cAAgB,SAACr9B,GAEf,OADoB,EAAKmI,MAAMO,SAASpI,MAAM,KAAKkW,MAAM,GAAI,GAC1CC,KAAK,KAAO,WAAazW,GAnCpB,EAsC1Bs9B,WAAa,SAAC5qB,GACZ,IAAMkO,EAAQlO,EAAM6qB,cAAcC,SAClC,EAAK/rB,SAAS,CAAEgsB,YAAa7c,KAxCL,EA2C1B8c,eAAiB,SAAChrB,GAChB,IAAMtS,EAAOD,EAAWuS,EAAM6qB,cAAc70B,UAC5C,EAAKP,MAAMgT,cAAc/a,IA3CzB,EAAKuC,MAAQ,CACX86B,YAAa,EACbh7B,SAAS,EACTk7B,MAAO,GACPC,SAAU,GANY,E,iEASL,IAAD,SAElB,GADaz9B,EAAWkP,KAAKlH,MAAMO,UAC1BjC,UAAL,UAAgB4I,KAAKlH,MAAM1B,cAA3B,aAAgB,EAAmBzG,IAAI,CAAC,IAAD,EACnC+G,EAAO,UAAGsI,KAAKlH,MAAM1B,cAAd,aAAG,EAAmBkV,cACnC,GAAI5U,EAAS,CACX,IACI6Z,EADEid,EAAiB,GAEvB92B,EAAQwd,SAAQ,SAACiN,GACf,IAAIjjB,EAAUijB,EAAKjjB,QACdA,IACHA,EAAU,sBAEZsvB,EAAQ/xB,KAAK,CAAE9L,GAAIwxB,EAAKxxB,GAAIuS,KAAMif,EAAKnjB,MAAOE,QAASA,OAEzDqS,EAAQid,EAAQ/L,WAAU,SAACN,GAAD,OAAUA,EAAKxxB,KAAO,EAAKmI,MAAM21B,YAC3DzuB,KAAKoC,SAAS,CACZksB,MAAOE,EACPp7B,SAAS,EACTg7B,YAAa7c,Q,+BAqBX,IAAD,SACiCvR,KAAK1M,MAArC86B,EADD,EACCA,YAAah7B,EADd,EACcA,QAASk7B,EADvB,EACuBA,MACtBvvB,EAAYiB,KAAKlH,MAAjBiG,QACR,OAAI3L,EACK,oCAGL,yBAAKkM,UAAWP,EAAQV,MACtB,kBAACqwB,GAAA,EAAD,CAASC,WAAYP,EAAa/N,YAAY,YAC3CiO,EAAMv+B,KAAI,SAACqQ,EAAO+P,GAAR,OACT,kBAACye,GAAA,EAAD,CAAMn8B,IAAK2N,EAAMzP,IACf,kBAACk+B,GAAA,EAAD,CAAWV,SAAUhe,EAAGrV,QAAS,EAAKmzB,YACnC7tB,EAAM8C,MAET,kBAAC4rB,GAAA,EAAD,KACE,kBAAClvB,GAAA,EAAD,KAAaQ,EAAMlB,SACnB,kBAAC3D,GAAA,EAAD,CACEpC,UAAW+L,KACXpL,QAAQ,YACRa,MAAM,YACNvB,GAAI,EAAK40B,cAAc5tB,EAAMzP,IAC7B2O,UAAWP,EAAQgwB,OACnBj0B,QAAS,EAAKuzB,gBANhB,oB,GAjEa1tB,aAqFhBG,iBA7GG,SAAC7N,GAAD,MAAmB,CACnCoL,KAAM,CACJ2Q,MAAO,SAET+f,OAAQ,CACNC,UAAW/7B,EAAMwL,QAAQ,GACzBwwB,YAAah8B,EAAMwL,QAAQ,OAuGhBqC,CAAsBitB,ICpG/B7vB,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACX8wB,SAAS,aACPrwB,UAAW,sBACV5L,EAAM8V,YAAYmG,KAAK,MAAQ,CAC9BrQ,UAAW,uBAGfD,QAAS,CACPa,OAAQ,OACRuP,MAAO,OACPmgB,SAAU,UAEZC,WAAY,CACVD,SAAU,SACVngB,MAAO,OACP1Q,SAAU,OACV,UAAW,CACTE,OAAQ,OACRuC,QAAS,EACTtB,OAAQ,SAGZ4vB,WAAY,CACV1rB,UAAW,UAEb2rB,UAAW,CACT7vB,OAAQ,OACRuP,MAAO,OACPmgB,SAAU,eASHI,GAA4C,SAAC,GAEnD,IADLC,EACI,EADJA,gBAEMzwB,EAAUb,KAChB,OACE,kBAACmC,GAAA,EAAD,CACEC,WAAS,EACTnG,UAAU,SACVoG,QAAQ,SACRyF,WAAW,SACX1G,UAAWP,EAAQuwB,WAEnB,kBAAC90B,GAAA,EAAD,CACEG,MAAM,YACNE,aAAW,YACXC,QAAS00B,GAET,kBAACC,GAAA,EAAD,SAaKC,GAA0C,SAAC52B,GAAW,IAAD,EACpCmC,oBAAS,GAD2B,oBACzD00B,EADyD,KACjDC,EADiD,KA+BxD57B,GAhBI67B,iBAAO,MAgBO/2B,EAAlB9E,MAAS87B,EA/B+C,aA+BtCh3B,EA/BsC,UAiC1Di3B,GAAcj3B,EAAM1B,OACpB2H,EAAUb,KAEhB,OACE,kBAACmC,GAAA,EAAD,CACEC,WAAS,EACTnG,UAAU,SACVoG,QAAQ,eACRyF,WAAW,SACX1G,UAAWP,EAAQuwB,WAKnB,kBAACU,GAAA,EAAD,CACEr1B,MAAM,YACN0lB,YAAY,WACZxlB,aAAW,eACXo1B,aAAc,GACdx1B,MAAO,CAAEgF,OAAQ,SAEnB,oCACE,kBAACjF,GAAA,EAAD,CACEG,MAAM,YACNE,aAAW,YACXC,QAAS,SAACvK,GApDG,YAoDgBA,EApDzBiD,MAIRo8B,GADED,IAkDE/qB,SAAUmrB,GAEV,kBAACG,GAAA,EAAD,OAEF,kBAACC,GAAA,EAAD,CAAQC,OAAO,OAAOC,KAAMV,EAAQW,QAAS,kBAAMV,GAAU,KAC3D,kBAAC,GAAD,iBAAsBE,EAAtB,CAA4BrB,SAAUz6B,EAAKrD,UCjCtC4/B,GAFS13B,aATA,SAACvF,GAAD,MAAsB,CAC5CL,MAAOK,EAAMyE,KAAK9E,MAClBstB,KAAMjtB,EAAMuE,eAGa,SAAC+B,GAAD,MAAoD,CAC7E8zB,WAAY7sB,YAAmB6sB,GAAY9zB,MAGrBf,EA5GS,SAAC,GAAiC,IAA/B0nB,EAA8B,EAA9BA,KAAMttB,EAAwB,EAAxBA,MAAOy6B,EAAiB,EAAjBA,WACzC8C,EAAmB,SAAVv9B,EAAmB,EAAI,EAQtC,OACE,yBACEtC,GAAG,UACH8/B,MAAM,6BACNzhB,MAAM,OACNvU,MAAO,CACLmO,SAAU,QACVtK,SAAU,QACV5J,OAAO,UAAD,OAAY87B,EAAZ,MAERE,QAAQ,cACR5M,KAAK,QAEL,uBAAGnzB,GAAG,UAAUggC,IAnBD,SAACA,GACdA,GAAOpQ,EAAKzrB,eACd44B,EAAW,CAAEpF,SAAUqI,EAAI/M,aAkBzB,0BACEtkB,UAAU,QACV3O,GAAG,KACHe,EAAE,2LACFoyB,KAAK,2BAEP,0BACExkB,UAAU,QACV3O,GAAG,KACHe,EAAE,6PACFoyB,KAAK,2BAEP,0BACExkB,UAAU,QACV3O,GAAG,KACHe,EAAE,4SACFoyB,KAAK,2BAEP,0BACExkB,UAAU,QACV3O,GAAG,KACHe,EAAE,uTACFoyB,KAAK,2BAEP,0BACExkB,UAAU,QACV3O,GAAG,KACHe,EAAE,qMACFoyB,KAAK,2BAEP,0BACExkB,UAAU,OACV3O,GAAG,KACHe,EAAE,2LACFoyB,KAAK,2BAEP,0BACExkB,UAAU,OACV3O,GAAG,KACHe,EAAE,6PACFoyB,KAAK,2BAEP,0BACExkB,UAAU,OACV3O,GAAG,KACHe,EAAE,4SACFoyB,KAAK,2BAEP,0BACExkB,UAAU,OACV3O,GAAG,KACHe,EAAE,uTACFoyB,KAAK,2BAEP,0BACExkB,UAAU,OACV3O,GAAG,KACHe,EAAE,8LACFoyB,KAAK,4BAGT,uBAAGnzB,GAAG,SACJ,0BACEA,GAAG,aACHe,EAAE,qjFACFoyB,KAAK,UAEP,0BACEnzB,GAAG,YACHe,EAAE,8hFACFoyB,KAAK,eCzCA8M,GA9DC,CAAC,CACfjgC,GAAI,QACJ0yB,KAAM,IACNwN,MAAO,4IACPhN,KAAM,+1BACL,CACDR,KAAM,KACN1yB,GAAI,QACJkgC,MAAO,iFACPhN,KAAM,4DACL,CACDlzB,GAAI,QACJ0yB,KAAM,IACNwN,MAAO,kMACPhN,KAAM,ujBACL,CACDR,KAAM,KACN1yB,GAAI,QACJkgC,MAAO,wFACPhN,KAAM,qEACL,CACDR,KAAM,IACN1yB,GAAI,QACJkgC,MAAO,0JACPhN,KAAM,gHACL,CACDR,KAAM,IACN1yB,GAAI,QACJkgC,MAAO,0JACPhN,KAAM,gGACL,CACDR,KAAM,KACN1yB,GAAI,QACJkgC,MAAO,wFACPhN,KAAM,qEACL,CACDR,KAAM,IACN1yB,GAAI,QACJkgC,MAAO,wMACPhN,KAAM,i1BACL,CACDR,KAAM,KACN1yB,GAAI,QACJkgC,MAAO,wFACPhN,KAAM,qEACL,CACDR,KAAM,IACN1yB,GAAI,QACJkgC,MAAO,wMACPhN,KAAM,sKACL,CACDR,KAAM,KACN1yB,GAAI,QACJkgC,MAAO,wFACPhN,KAAM,qEACL,CACDR,KAAM,IACN1yB,GAAI,QACJkgC,MAAO,0JACPhN,KAAM,kzBAKKiN,GAGJ,4GAHIA,GAIL,41BCtDF5yB,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACXC,KAAM,CACJ4H,QAAS,OACT8qB,cAAe,cACfpyB,eAAgB,SAChBwwB,SAAU,SACV3wB,OAAQ,SACRoK,SAAU,QACVoG,MAAO,QAET6U,KAAM,CACJrlB,OAAQvL,EAAMwL,QAAQ,EAAG,SAoRhBuyB,GAFQn4B,aATC,SAACvF,GAAD,MAAsB,CAC5CL,MAAOK,EAAMyE,KAAK9E,MAClBstB,KAAMjtB,EAAMuE,eAGa,SAAC+B,GAAD,MAAoD,CAC7EkzB,UAAWjsB,YAAmBisB,GAAWlzB,MAGpBf,EA1QQ,SAACC,GAAW,IACjC7F,EAA2B6F,EAA3B7F,MAAOstB,EAAoBznB,EAApBynB,KAAMuM,EAAch0B,EAAdg0B,UAEjBmE,GAAS,EACTC,EAAiB,KACfC,EAAe,CACnBC,EAAG,GACHjc,EAAG,GACHmK,EAAG,GACH5tB,EAAG,GACHuV,EAAG,GACHggB,EAAG,GACHc,EAAG,GACHzM,EAAG,GACH+V,EAAG,GACHtX,EAAG,GACHuX,EAAG,GACH9J,EAAG,GACH,IAAK,GACLzF,EAAG,GACH,IAAK,GACL,IAAK,GACL,IAAK,GACLwP,EAAG,GACHC,EAAG,GACHpE,EAAG,GACHqE,EAAG,GACHlhC,EAAG,GACHmhC,EAAG,GACH5Y,EAAG,GACHlnB,EAAG,GACH+/B,EAAG,GACH3N,EAAG,GACH4N,EAAG,GACHC,EAAG,GACH1hB,EAAG,GACH2hB,EAAG,GACH3hC,EAAG,GACH4hC,EAAG,GACH/X,EAAG,GACH,IAAK,GACL,IAAK,GACL,IAAK,IAEHlI,EAAU,GACVkgB,EAAW,GACTC,EAAY,GAEZC,EAAa,SAAC3hC,GAClB,IAAMkC,EAAMlC,EAAEkC,IACd,GAAI0+B,EAAagB,eAAe1/B,GAAM,CACpC,IAAM4wB,EAAO8N,EAAa1+B,GAC1B65B,GAAYjJ,GACZ6N,EAAY,OAGVkB,EAAe,SAAC7hC,GACpB,IAAMkC,EAAMlC,EAAEkC,IACd,GAAI0+B,EAAagB,eAAe1/B,IAC1BA,IAAQy+B,EAAW,CACrB,IAAM7N,EAAO8N,EAAa1+B,GAC1B25B,GAAW/I,GACX6N,EAAYz+B,IAKZ4/B,EAAe,WACnBpB,GAAS,GAGXzhB,qBAAU,WAIR,OAHAhO,SAAS8wB,iBAAiB,UAAWF,GACrC5wB,SAAS8wB,iBAAiB,QAASJ,GACnC1wB,SAAS8wB,iBAAiB,UAAWD,GAC9B,WACL7wB,SAAS+wB,oBAAoB,UAAWH,GACxC5wB,SAAS+wB,oBAAoB,QAASL,OAI1C,IAwCyBM,EAxCnBzzB,EAAUb,KAEVu0B,EAAY,SAACliC,GACjBA,EAAEmiC,iBACF,IACMrP,EADmB9yB,EAAE29B,cACVC,SACjB8C,GAAS,EACTC,EAAY7N,EACZ+I,GAAW/I,IAEPsP,EAAY,SAACpiC,GACjBA,EAAEmiC,iBACF,IACMrP,EADmB9yB,EAAE29B,cACVC,SACb8C,GAAU5N,IAAS6N,IACrBA,EAAY7N,EACZ+I,GAAW/I,KAGTuP,EAAa,SAACriC,GAClBA,EAAEmiC,iBACF,IACMrP,EADmB9yB,EAAE29B,cACVC,SACb8C,IACF3E,GAAYjJ,GACZ6N,EAAY,OAGV2B,EAAU,SAACtiC,GACfA,EAAEmiC,iBACF,IACMrP,EADmB9yB,EAAE29B,cACVC,SACjB8C,GAAS,EACT3E,GAAYjJ,GACZ6N,EAAY,MAER4B,EAAW,SAAC3iB,GAEhB,OADkB,IAANA,EAAU,IAAM,KA+BxB4iB,EAAY,SAACpC,GACjB,GAAIA,EAAK,CACP,IAAMl+B,EAAMk+B,EAAIxC,SAChB8D,EAAUx/B,GAAOk+B,IAmBfqC,EAAa,SACjBxK,EACApzB,EACAF,GAEA43B,EAAUtE,EAASpzB,EAAYF,IAE3Bs7B,EAAmB,SAAVv9B,EAAmB,EAAI,EAEtC,OA3DyBu/B,EA0DTjS,EAAKtrB,QAzDL,GACZ6c,EAAU,GACVkgB,EAAW,IACFQ,EAAU,GACnB1gB,EAAU,GACVkgB,EAAW,IACFQ,EAAU,GACnB1gB,EAAU,GACVkgB,EAAW,KAEXlgB,EAAU,GACVkgB,EAAW,IAgDb,yBACErB,IA3BW,SAACA,GACd,GAAIA,GAAOpQ,EAAKxrB,aACd,GAAIwrB,EAAK3rB,SAAU,CACjB,IAAM6zB,EAAYkI,EAAI5D,wBAChB/d,EAAQyZ,EAAUzZ,MAClBvP,EAASzN,KAAKqyB,MAAMjsB,OAAO66B,aAAexK,EAAUhpB,OAAS,KAC7DvK,EAzBO,SAACuK,GAClB,OACSA,EAAS,GAuBEyzB,CAAWzzB,GACrB0zB,EAAqB,EAAVj+B,EAAc,EACzB+3B,EAAYxE,EAAU+E,KAE5BwF,EAAWf,EADI,CAAEjjB,QAAOvP,SAAQ0zB,WAAUlG,aACZ/3B,QAE9B89B,EAAWf,IAgBb3yB,UAAWP,EAAQV,KACnB5D,MAAO,CAAE/F,OAAO,UAAD,OAAY87B,EAAZ,OAEdxJ,MAAMzP,KAAKyP,MAAMzG,EAAKtrB,SAAS,SAACY,EAAGsa,GAAJ,MAAU,OAASA,EAAI,MAAIpgB,KACzD,SAAC0C,EAAK0d,GAAN,OACE,yBACEsgB,MAAM,6BACN9/B,GAAI8B,EACJA,IAAKA,EACLuc,MAAO8jB,EAASvS,EAAKtrB,OAASkb,GAC9B1Q,OAAO,OACPixB,QAAO,cAASoC,EAASvS,EAAKtrB,OAASkb,GAAhC,QACP2T,KAAK,OACLrpB,MACE0V,IAAMoQ,EAAKtrB,OAAS,EAChB,CAAEg6B,YAAa,EAAI1O,EAAKtrB,aACxBlC,GAGL69B,GAAQ7gC,KAAI,SAACgiB,GAAD,OACX,uBACEtf,IAAKA,EAAM,IAAMsf,EAAEsR,KACnB1yB,GAAIohB,EAAEphB,GACNw9B,WAAYrc,EACZshB,YAAaX,EACbY,UAAWR,EACXS,aAAcV,EACdW,YAAaZ,EACbrzB,UAAWwS,IAAYkgB,EAAW,QAAUjgB,EAAEsR,KAC9CsN,IAAKoC,GAEL,0BACEpiC,GAAG,OACHe,EAAGqgB,EAAE8e,MACL/M,KAAM/R,EAAEphB,GACRm0B,OAAiB,UAAT/S,EAAEphB,GAAiB,eAAYoC,IAEzC,0BACEpC,GAAG,QACHe,EAAGqgB,EAAE8R,KACLC,KAAe,UAAT/R,EAAEphB,GAAiB,QAAU,2BAExB,KAAZmhB,EACC,6BAAS0hB,OAAQ,uBAAwB1P,KAAM,UAC7C,SAGPvD,EAAKtrB,OAASkb,IAAM,EACnB,uBACExf,GAAG,IACH2O,UAAU,OACV6uB,WAAYrc,EACZshB,YAAaX,EACbY,UAAWR,EACXS,aAAcV,EACdW,YAAaZ,EACbhC,IAAKoC,GAEL,0BACEpiC,GAAG,OACHe,EAAGo/B,GACHhN,KAAK,QACLgB,OAAO,YAET,0BAAMn0B,GAAG,QAAQe,EAAGo/B,GAAchN,KAAK,WAEvC,a,oBClRH2P,GAAmC,SAAC,GAAc,IAAZlT,EAAW,EAAXA,KAAW,EAClCtlB,oBAAS,GADyB,oBACrDpG,EADqD,KAC9C6+B,EAD8C,KAGtDC,EAAc,WACd9+B,IX0FkB,WAAO,IAAD,EACxB,QAAJ,EAAA0rB,UAAA,SAAMwJ,WW1FJ6J,GACAF,GAAS,KAETA,GAAS,GXmFY,WAAO,IAAD,EACzB,QAAJ,EAAAnT,UAAA,SAAMgJ,YWnFJsK,KAGE3B,EAAa,SAAC3hC,GACH,UAAXA,EAAEE,MAAqB8vB,EAAKntB,SAC9BugC,KASJ,OANAnkB,qBAAU,WAER,OADAhO,SAAS8wB,iBAAiB,QAASJ,GAC5B,WACL1wB,SAAS+wB,oBAAoB,QAASL,OAIxC,kBAAC13B,GAAA,EAAD,CAAYG,MAAM,YAAYE,aAAW,YAAYC,QAAS64B,GAC3D9+B,EACC,kBAACi/B,GAAA,EAAD,CAAoBr5B,MAAO,CAAEs5B,SAAU,WAEvC,kBAACC,GAAA,EAAD,CAAmBv5B,MAAO,CAAEs5B,SAAU,aCqDxCE,G,+MAuBJC,cAAgB,SAACC,GACf,IAAMv1B,EAAU/L,KAAKC,MAAMqhC,GAC3B,EAAKr7B,MAAM4zB,cAAc9tB,I,EAG3Bk0B,SAAW,SAAC3iB,GAEV,OADkB,IAANA,EAAU,IAAM,K,EAI9Bqf,gBAAkB,WAChB,EAAK12B,MAAM+0B,YAAW,I,qEAjCFuG,GAAmB,IAAD,EAItC,OAHIA,EAAUpgC,OAAQ,UAAAgM,KAAKlH,MAAM9E,YAAX,eAAiBrD,MAAOyjC,EAAUpgC,KAAKrD,IAC3DqP,KAAKk0B,cAAcE,EAAUpgC,KAAK4K,UAE7B,I,0CAEY,IAAD,EAClB1B,QAAQC,IAAI,WACZ,IAAMpM,EAAOD,EAAWkP,KAAKlH,MAAMO,UACnC2G,KAAKlH,MAAMgT,cAAc/a,IACrB,UAAAiP,KAAKlH,MAAM9E,YAAX,eAAiBrD,MAAOI,EAAKsG,QAC/B2I,KAAKk0B,cAAcl0B,KAAKlH,MAAM9E,KAAM4K,W,6CAItC1B,QAAQC,IAAI,YACZ6C,KAAKlH,MAAM80B,cACX5tB,KAAKoC,SAAW,e,+BAmBR,IAAD,EACsDpC,KAAKlH,MAAnDiG,GADR,EACC9L,MADD,EACQ8L,SAAS/K,EADjB,EACiBA,KAAM6D,EADvB,EACuBA,WAAY/D,EADnC,EACmCA,MAAUg8B,EAD7C,gEAEP,OACE,yBAAKxwB,UAAWP,EAAQV,MACrBxG,EAAWzE,SAAWyE,EAAWjD,SAChC,kBAAC6L,GAAA,EAAD,CAAkB9F,MAAM,YAAY2E,UAAWP,EAAQ2B,aACrD1M,EACF,kBAACqM,GAAA,EAAD,CAAMC,WAAS,EAAChB,UAAWP,EAAQkS,MACjC,kBAAC5Q,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,GACb,kBAAC,GAAD,iBAAoB6qB,EAApB,CAA0B97B,KAAMA,MAElC,kBAACqM,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,IACb,kBAAC5E,GAAA,EAAD,CACEC,WAAS,EACTnG,UAAU,SACVoG,QAAQ,SACRyF,WAAW,SACX1G,UAAWP,EAAQH,SAEnB,kBAACyB,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,EAAG3F,UAAWP,EAAQqwB,YACnC,kBAAC/uB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAASyF,WAAW,UAC1C,kBAAC3F,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,GACb,kBAACrF,GAAA,EAAD,CAAY9F,QAAQ,MAAM9F,EAAKgL,QAEjC,kBAACqB,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,EAAG3F,UAAWP,EAAQswB,YACnC,kBAAC,GAAD,CAAY9O,KAAM1oB,OAIxB,kBAACwI,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,EAAG3F,UAAWP,EAAQqwB,YACnC,kBAAC/uB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAASyF,WAAW,UAC1C,kBAAC3F,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,IACb,kBAAC,GAAD,SAIN,kBAAC5E,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,EAAG3F,UAAWP,EAAQqwB,YACnC,kBAAC/uB,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAQ,SAASyF,WAAW,UAC1C,kBAAC3F,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,GACb,kBAACrF,GAAA,EAAD,KAAa5L,EAAKkL,UAEpB,kBAACmB,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,EAAG3F,UAAWP,EAAQswB,YACnC,kBAAC,GAAD,WAMV,kBAAChvB,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,GACb,kBAAC,GAAD,CAAiBuqB,gBAAiBxvB,KAAKwvB,oBAI3C,kBAAC5vB,GAAA,EAAD,CAAYzG,UAAU,MAAMmG,UAAWP,EAAQ2B,YAC5C5M,Q,GA3FQ6M,aAwHN0zB,GALSx7B,aAhBA,SAACvF,EAAiBsN,GAAlB,mBAAC,eACpBtN,EAAM2D,OAAOI,QADM,IAEtBQ,WAAYvE,EAAMuE,WAClB5E,MAAOK,EAAMyE,KAAK9E,MAClB8L,QAAS6B,EAAS7B,QAClB3H,OAAQ9D,EAAM2D,OAAOG,OAAOpD,KAC5BqF,SAAU/F,EAAMyD,OAAOuY,SAASjW,cAGP,SAACO,GAAD,MAAoD,CAC7Ei0B,WAAYhtB,YAAmBgtB,GAAYj0B,GAC3CkS,cAAejL,YAAmBiL,GAAelS,GACjD8yB,cAAe7rB,YAAmB6rB,GAAe9yB,GACjDg0B,YAAa/sB,YAAmB+sB,GAAah0B,MAGvBf,CAGtBiI,cA9KgB,SAAC7N,GAAD,eAChBmL,aAAa,CACXC,MAAI,GACF2Q,MAAO,QACPnQ,UAAW,sBACXy1B,SAAU,UAHR,cAIDrhC,EAAM8V,YAAYmG,KAAK,MAAQ,CAC9BrQ,UAAW,wBALX,wBAOO,QAPP,GASJ6B,WAAY,CACVlC,OAAQ,QAEVyS,MAAI,GACFjC,MAAO,QACPnQ,UAAW,sBACXy1B,SAAU,UAHR,cAIDrhC,EAAM8V,YAAYmG,KAAK,MAAQ,CAC9BrQ,UAAW,wBALX,wBAOO,QAPP,GASJD,QAAS,CACPa,OAAQ,OACRuP,MAAO,OACPmgB,SAAU,UAEZC,WAAY,CACVD,SAAU,SACVngB,MAAO,OACP1Q,SAAU,OACV,UAAW,CACTE,OAAQ,OACRuC,QAAS,EACTtB,OAAQ,SAGZ4vB,WAAY,CACV1rB,UAAW,cAuIf7C,CAAsBmzB,KC3JlBM,G,sLAEF,IAAMxjC,EAAOD,EAAWkP,KAAKlH,MAAMO,UACnC2G,KAAKlH,MAAMyT,gBAAgBxb,K,+BAGnB,IAAD,EACmCiP,KAAKlH,MAAvCiG,EADD,EACCA,QAAS/K,EADV,EACUA,KAAMZ,EADhB,EACgBA,QAASU,EADzB,EACyBA,MAChC,OACE,kBAAC0P,GAAA,EAAD,CAAWlE,UAAWP,EAAQV,MAC3BjL,EACC,kBAACqN,GAAA,EAAD,CAAkB9F,MAAM,YAAY2E,UAAWP,EAAQ2B,aACrD1M,EACF,yBACEsL,UAAWP,EAAQH,QACnB8R,wBAAyB,CAAEC,OAAQ3c,EAAK4K,WAG1C,kBAACgB,GAAA,EAAD,CAAYzG,UAAU,MAAMmG,UAAWP,EAAQ2B,YAC5C5M,Q,GAnBU6M,aA2CR9H,gBAZS,SAACvF,EAAiBsN,GAAlB,oBACtBvH,SAAU/F,EAAMyD,OAAOuY,SAASjW,SAChC0F,QAAS6B,EAAS7B,SACfzL,EAAM2D,OAAOK,aAGS,SACzBsC,GADyB,MAEF,CACvB2S,gBAAiB1L,YAAmB0L,GAAiB3S,MAGxCf,CAGbiI,cAhFgB,SAAC7N,GAAD,aAChBmL,aAAa,CACXC,MAAI,GACF2Q,MAAO,OACPnQ,UAAW,uBAFT,cAGD5L,EAAM8V,YAAYmG,KAAK,MAAQ,CAC9BrQ,UAAW,sBACXkC,QAAS9N,EAAMwL,QAAQ,KALvB,wBAOOxL,EAAMwL,QAAQ,IAPrB,wBAQO,QARP,8BASa,UATb,GAWJiC,WAAY,CACVlC,OAAQ,QAEVI,QAAS,CACP+E,UAAW,SACXqL,MAAO,OACPjO,QAAS,GACT6P,gBAAiB3d,EAAM4d,QAAQC,WAAWC,MAC1CnO,OAAO,aAAD,OAAe3P,EAAM4d,QAAQG,UAAUC,WA2DjDnQ,CAAsByzB,KC5BTC,GArDG,kBAChB,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAUC,OAAK,EAAC1jC,KAAK,IAAIqI,GAAG,UAC5B,kBAAC,KAAD,CAAOq7B,OAAK,EAAC1jC,KAAK,QAAQoI,UAAW4G,KACrC,kBAAC,KAAD,CAAO00B,OAAK,EAAC1jC,KAAK,YAAYoI,UAAWiW,KACzC,kBAAC,KAAD,CACEqlB,OAAK,EACL1jC,KAAM,CAAC,SAAU,UAAW,YAAa,YAAa,WACtDoI,UAAWiW,KAEb,kBAAC,KAAD,CAAOqlB,OAAK,EAAC1jC,KAAK,YAAYoI,UAAWsX,KACzC,kBAAC,KAAD,CAAOgkB,OAAK,EAAC1jC,KAAK,aAAaoI,UAAW0Y,KAC1C,kBAAC,KAAD,CAAO4iB,OAAK,EAAC1jC,KAAK,aAAaoI,UAAW0Y,KAC1C,kBAAC,KAAD,CACE4iB,OAAK,EACL1jC,KAAM,CAAC,cAAe,yBACtBoI,UAAWuZ,KAEb,kBAAC,KAAD,CACE+hB,OAAK,EACL1jC,KAAM,CACJ,cACA,yBACA,wBACA,oCAEFoI,UAAW86B,KAEb,kBAAC,KAAD,CACEQ,OAAK,EACL1jC,KAAM,CACJ,gBACA,2BACA,0BACA,sCAEFoI,UAAWo7B,KAEb,kBAAC,KAAD,CAAOE,OAAK,EAAC1jC,KAAK,SAASoI,UAAWoK,KACtC,kBAAC,KAAD,CAAOkxB,OAAK,EAAC1jC,KAAK,YAAYoI,UAAWoM,KACzC,kBAAC,KAAD,CAAOkvB,OAAK,EAAC1jC,KAAK,gBAAgBoI,UAAWu7B,KAC7C,kBAAC,GAAD,CACED,OAAK,EACL1jC,KAAK,WACLoI,UAAWkS,GACXpS,WAAW,EACXC,eAAe,WACfF,mBAAmB,WAErB,kBAAC,KAAD,CAAOy7B,OAAK,EAAC1jC,KAAK,SAASoI,UAAW6B,O,iDCnB3B25B,GAzC2B,SAAC,GAAc,IAAD,IAAXpU,EAAW,EAAXA,KAgC3C,OACE,4BACEoQ,IAAK,SAACA,GAAD,OAjCe,SAACA,GACvB,GAAIA,GAAOpQ,EAAKnrB,YAAcmrB,EAAKvrB,YAAa,CAC9C,IAAM4/B,EAAUjE,EAAI7J,WAAW,MAC/B8N,EAAQlO,UAAU,EAAG,EAAGnG,EAAKnrB,WAAW4Z,MAAOuR,EAAKnrB,WAAWqK,QAC/D,IAAM+oB,EAAUjI,EAAKkI,UACft3B,EAASq3B,EAAUA,EAAQr3B,OAAS,EAAI,GACxCyzB,EAAY4D,EAAUA,EAAQr3B,GAAQ6d,MAAQ,GAC9CqiB,EAAI9Q,EAAKnrB,WAAWqK,OACnB,OAAP+oB,QAAO,IAAPA,KAAStT,SAAQ,SAACiY,EAAMhd,GACtBykB,EAAQnQ,YACR,IAAMnF,EAAI6N,EAAKK,KACE,OAAbL,EAAK16B,KAMe,SAAb06B,EAAK16B,KALdmiC,EAAQlQ,OAAOpF,EAAG,GAClBsV,EAAQjQ,OAAOrF,EAAG+R,GAClBuD,EAAQhQ,UAAYA,EACpBgQ,EAAQ/P,YAAc,qBACtB+P,EAAQ9P,UAOc,UAAbqI,EAAK16B,MACdmiC,EAAQzH,KAAK7N,EAAG,EAAG6N,EAAKne,MAAOqiB,GAC/BuD,EAAQlP,UAAY,kBACpBkP,EAAQ9Q,YAOE+Q,CAAgBlE,IAC9B3hB,MAAK,UAAEuR,EAAKnrB,kBAAP,aAAE,EAAiB4Z,MACxBvP,OAAM,UAAE8gB,EAAKnrB,kBAAP,aAAE,EAAiBqK,OACzBhF,MAAO,CAAEkI,OAAQ,MCrBRmyB,GAhB4B,SAAC,GAAwB,IAAD,IAArBvU,EAAqB,EAArBA,KAAM+I,EAAe,EAAfA,SAMlD,OACE,4BACEqH,IAAK,SAACA,GAAD,OAPgB,SAACA,GACpBA,GAAOpQ,EAAKvrB,aAAeurB,EAAKnrB,YAClCk0B,EAASqH,GAKKoE,CAAiBpE,IAC/B3hB,MAAK,UAAEuR,EAAKnrB,kBAAP,aAAE,EAAiB4Z,MACxBvP,OAAM,UAAE8gB,EAAKnrB,kBAAP,aAAE,EAAiBqK,OACzBhF,MAAO,CAAEuG,SAAU,WAAYE,IAAK,EAAGssB,KAAM,EAAG7qB,OAAQ,MCiB/CqyB,GAhCoB,SAAC,GAAyB,IAAvBhmB,EAAsB,EAAtBA,MAAOmkB,EAAe,EAAfA,SAC3C,OACE,yBACEnkB,MAAOA,EAAQ,EACfvP,OAAQ0zB,EAER14B,MAAO,CACLw6B,OAAQ,EACRzH,MAAO,EACP7qB,OAAQ,EACR3B,SAAU,WACVtM,OAAQ,gDAGV,+BAAQ,4CACR,6BAAS8+B,OAAQ,gBAAiB1P,KAAM,QACxC,0BACErpB,MAAO,CACLy6B,gBAAiBlmB,EAAQ,EACzBmmB,iBAAkBnmB,EAAQ,EAC1BomB,UAAW,2BAEbC,GAAI,EACJC,GAAI,EACJC,GAAIvmB,EAAQ,EACZwmB,GAAI,EACJC,YAAa,IACb3Q,OAAQ,UCeD4Q,GALc78B,aARL,SAACvF,GAAD,MAAsB,CAC5CitB,KAAMjtB,EAAMuE,eAGa,SAAC+B,GAAD,MAAoD,CAC7E0vB,SAAUzoB,YAAmByoB,GAAU1vB,MAGZf,EAxBQ,SAAC,GAAwB,IAAD,IAArB0nB,EAAqB,EAArBA,KAAM+I,EAAe,EAAfA,SAC5C,OACE,yBACE7uB,MAAO,CACLuU,MAAK,UAAEuR,EAAKnrB,kBAAP,aAAE,EAAiB4Z,MACxBvP,OAAM,UAAE8gB,EAAKnrB,kBAAP,aAAE,EAAiBqK,OACzBuB,SAAU,WACV20B,UAAW,8BAGb,kBAAC,GAAD,CAAapV,KAAMA,EAAM+I,SAAUA,IACnC,kBAAC,GAAD,CAAY/I,KAAMA,IACjBA,EAAKnrB,YAAc,kBAAC,GAAYmrB,EAAKnrB,gB,oBChBtC8I,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACXC,KAAM,CACJu3B,SAAU,GAEZC,WAAY,CACV5G,YAAah8B,EAAMwL,QAAQ,IAE7BO,MAAO,CACL42B,SAAU,GAEZE,QAAS,CACPt3B,OAAQvL,EAAMwL,QAAQ,EAAG,SAQhB,SAASs3B,GAAT,GAA6C,IAAvBC,EAAsB,EAAtBA,YAC7Bj3B,EAAUb,KADyC,EAEzBwE,IAAMzH,SAA6B,MAFV,oBAElDg7B,EAFkD,UAG5C3vB,QAAQ2vB,GAUrB,OACE,kBAACtmB,GAAA,EAAD,CAAQ3O,SAAS,SAASrG,MAAM,UAAU2E,UAAWP,EAAQV,MAC3D,kBAAC63B,GAAA,EAAD,KACE,kBAAC17B,GAAA,EAAD,CACE27B,KAAK,QACLx7B,MAAM,UACNE,aAAW,OACXC,QAASk7B,GAET,kBAACI,GAAA,EAAD,OAEF,kBAACxsB,GAAA,EAAD,CAASyW,YAAY,WAAWgW,UAAQ,EAAC/2B,UAAWP,EAAQ+2B,UAC5D,kBAACl2B,GAAA,EAAD,CAAY9F,QAAQ,KAAKa,MAAM,UAAU2E,UAAWP,EAAQC,OAA5D,iFC3BR,IAwDMs3B,G,oDACJ,WAAYx9B,GAAe,IAAD,+BACxB,cAAMA,IAMRg6B,SAAW,SAAC3iB,GAEV,OADkB,IAANA,EAAU,IAAM,KARJ,EAY1BomB,aAAe,SAAClzB,GACK,YAAfA,EAAM7P,OAGN,EAAKF,MAAMkjC,KACb,EAAKp0B,SAAS,CAAEo0B,MAAM,IAEtB,EAAKp0B,SAAS,CAAEo0B,MAAM,MAnBA,EAsB1BC,gBAAkB,WAChB,EAAK39B,MAAM+0B,YAAW,IAvBE,EA+B1B6I,iBAAmB,WACZ,EAAK59B,MAAMjB,WAAW9C,cACzB,EAAK+D,MAAM60B,gBA/Bb,EAAKr6B,MAAQ,CACXkjC,MAAM,GAHgB,E,iEA0BxBp+B,OAAOk6B,iBAAiB,SAAUtyB,KAAK02B,oB,6CAGvCt+B,OAAOm6B,oBAAoB,SAAUvyB,KAAK02B,oB,+BAOlC,IAAD,EACyB12B,KAAKlH,MAA7BiG,EADD,EACCA,QAASlH,EADV,EACUA,WACjB,OACE,yBAAKyH,UAAWP,EAAQV,MACtB,kBAAC,GAAD,CAAc23B,YAAah2B,KAAKy2B,kBAChC,kBAACp2B,GAAA,EAAD,CAAMC,WAAS,EAAChB,UAAWP,EAAQkS,MACjC,kBAAC5Q,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,GACb,kBAAC5E,GAAA,EAAD,CACEC,WAAS,EACTnG,UAAU,SACVoG,QAAQ,SACRyF,WAAW,SACX1G,UAAWP,EAAQH,SAEnB,kBAAC,GAAD,CAAY2hB,KAAM1oB,MAGtB,kBAACwI,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,IACb,kBAAC5E,GAAA,EAAD,CACEC,WAAS,EACTnG,UAAU,SACVoG,QAAQ,SACRyF,WAAW,SACX1G,UAAWP,EAAQH,SAEnB,kBAACyB,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,IACZpN,EAAW9C,aACV,yBAAKuK,UAAWP,EAAQ3L,SACtB,kBAACqN,GAAA,EAAD,CACE9F,MAAM,YACNF,MAAO,CAAE+D,OAAQ,WAIrB,kBAAC,GAAD,MAEF,kBAAC,GAAD,SAIN,kBAAC6B,GAAA,EAAD,CAAM3N,MAAI,EAACuS,GAAI,GACb,kBAAC5E,GAAA,EAAD,CACEC,WAAS,EACTnG,UAAU,SACVoG,QAAQ,eACRyF,WAAW,SACX1G,UAAWP,EAAQH,SAEnB,kBAACoxB,GAAA,EAAD,CACEr1B,MAAM,YACN0lB,YAAY,WACZxlB,aAAW,eACXo1B,aAAc,GACdx1B,MAAO,CACLgF,OAAQ,SAGZ,kBAACjF,GAAA,EAAD,CAAYG,MAAM,YAAYE,aAAW,aACvC,kBAAC40B,GAAA,EAAD,e,GA/Fe9uB,aA4Hf9H,gBAnBQ,SACtBvF,EACAsN,GAFsB,MAGK,CAC3B/J,QAASvD,EAAMyD,OAAOuY,SAASjW,SAC/B0F,QAAS6B,EAAS7B,QAClBlH,WAAYvE,EAAMuE,WAClB5E,MAAOK,EAAMyE,KAAK9E,MAClBoE,OAAQ/D,EAAM2D,OAAOI,OAAOrD,KAC5BoD,OAAQ9D,EAAM2D,OAAOG,OAAOpD,SAGH,SAAC4F,GAAD,MAAoD,CAC7Ei0B,WAAYhtB,YAAmBgtB,GAAYj0B,GAC3C0vB,SAAUzoB,YAAmByoB,GAAU1vB,GACvCkzB,UAAWjsB,YAAmBisB,GAAWlzB,GACzC+zB,aAAc9sB,YAAmB8sB,GAAc/zB,MAGjCf,CAGdiI,cAvLgB,SAAC7N,GAAD,aAChBmL,aAAa,CACXC,KAAM,CACJ2Q,MAAO,QACPvP,OAAQ,QACR60B,SAAU,SACV1jB,gBAAiB3d,EAAM4d,QAAQC,WAAWC,OAE5CE,MAAI,GACFjC,MAAO,QACPslB,SAAU,SACVz1B,UAAW,sBAHT,cAID5L,EAAM8V,YAAYmG,KAAK,MAAQ,CAC9BrQ,UAAW,uBALX,wBAOO,QAPP,GASJD,QAAS,CACPa,OAAQ,OACRuP,MAAO,OACPmgB,SAAU,UAEZC,WAAY,CACVD,SAAU,SACVngB,MAAO,OACP1Q,SAAU,OACV,UAAW,CACTE,OAAQ,OACRuC,QAAS,EACTtB,OAAQ,SAGZ4vB,WAAY,CACV1rB,UAAW,UAEbvQ,QAAS,CACP6S,QAAS,OACTxG,OAAQ,MACRk2B,UAAW,iCAiJf70B,CAAsBw1B,K,kDCnNXK,GAAcC,aACvB,CACIz8B,UAAW,MACX08B,WAAY,CACRC,WAAY,SAEhBC,UAAW,CACPC,eAAgB,CACZ34B,KAAM,CACF2Q,MAAO,sBAEXioB,GAAI,CACA9H,SAAU,SACV+H,UAAW,SACXC,eAAgB,OAChBC,WAAY,SACZ,uBAAwB,CACpBnxB,QAAS,UAIrBoxB,eAAgB,CACZh5B,KAAM,CACF0C,aAAShO,IAGjBukC,eAAgB,CACZ,UAAW,CACP,IAAK,CACDH,eAAgB,OAChBI,eAAgB,yBAEpB,uBAAwB,CACpBvoB,MAAO,QAEX,6BAA8B,CAC1B,wBAAyB,OACzBtU,aAAc,OAElB,6BAA8B,CAC1B,wBAAyB,OACzBA,aAAc,OACdoW,WAAY,mBAEhB,6CAA8C,CAC1CA,WAAY,qBAIxB0mB,cAAe,CACXC,eAAgB,CACZ,UAAW,CACP7mB,gBAAiB,+BCjD5B8mB,GAAYd,aAAe,2BAE7BD,IAF4B,IAG/B9lB,QAAS,CACLrd,KAAM,OACN4e,QAASulB,KACT7jC,MAAO8jC,KACP5mB,UAAW,CACPC,KAAM4mB,KAAK,SAIvBC,SCZSC,GAAanB,aAAe,2BAElCD,IAFiC,IAGpC9lB,QAAS,CACP/c,MAAO8jC,QAGXE,S,oBCeI55B,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACX45B,UAAW,CACTj3B,QAAS9N,EAAMwL,QAAQ,EAAG,EAAG,EAAG,GAChC,cAAe,CACbsC,QAAS9N,EAAMwL,QAAQ,EAAG,MAG9BolB,KAAM,CACJrlB,OAAQvL,EAAMwL,QAAQ,EAAG,SAKzByP,GAAa,CACjBhX,KAAM,kBAAC+gC,GAAA,EAAD,MACN9gC,MAAO,kBAACkX,GAAA,EAAD,MACPjX,OAAQ,kBAACmX,GAAA,EAAD,MACRlX,OAAQ,kBAACmX,GAAA,EAAD,MACRlX,SAAU,kBAACmX,GAAA,EAAD,MACVb,SAAU,kBAACc,GAAA,EAAD,OAkHGwpB,GALYr/B,aAfH,SAACvF,EAAiBsN,GAExC,MAAO,CACLvH,SAFmB/F,EAAMyD,OAAOuY,SAA1BjW,SAGNpC,OAAQ3D,EAAM2D,WAIS,SACzB2C,GADyB,MAEF,CACvB6C,KAAMoE,YAAmBpE,KAAM7C,GAC/BiqB,KAAMhjB,YAAmB5E,KAAQrC,MAGRf,EA9FR,SAACC,GAAkB,IAC5B7B,EAAiC6B,EAAjC7B,OAAQoC,EAAyBP,EAAzBO,SAAUoD,EAAe3D,EAAf2D,KAAMonB,EAAS/qB,EAAT+qB,KADG,EAGH5oB,mBAAS,IAHN,oBAG5Bk9B,EAH4B,KAGlBC,EAHkB,OAKLn9B,oBAAS,GALJ,oBAK5Bo9B,EAL4B,KAKnBC,EALmB,KAO7Bv5B,EAAUb,KAEhBsR,qBAAU,WACR,IAAMze,EAAOD,EAAWuI,GAClBzI,EAAOC,OAAOD,KAAKG,GACnBwnC,EAAmB,GAiBzB,OAhBA3nC,EAAKskB,SAAQ,SAACziB,EAAK0d,GAAO,IAAD,EACjBjZ,EAAOD,EAAOrG,EAAKuf,EAAI,IACvBnR,EAAK,OAAG9H,QAAH,IAAGA,GAAH,UAAGA,EAAMlD,YAAT,aAAG,EAAYgL,MACtBkE,EAAa,IAANiN,EAAUjC,GAAMzb,GAAOuM,GAAgB,MAClDu5B,EAAUpoB,GAAK,CACbxO,IAAKtI,EACFpI,MAAM,KACNkW,MAAM,EAAGgJ,EAAI,GACb/I,KAAK,KACRlE,KAAMA,MAGNnS,EAAKI,OAAS,IAChBmnC,GAAW,GACXF,EAAYG,IAEP,WACLD,GAAW,MAEZ,CAACj/B,EAAUpC,IAEd,IAAMuhC,EAAc,SAClBn1B,GAEAA,EAAMqvB,iBACNj2B,EAAK4G,EAAM6qB,cAAc70B,WAG3B,OAAOg/B,EACL,kBAAC1oB,GAAA,EAAD,CAAQ3O,SAAS,UACf,kBAAC4O,GAAA,EAAD,CAAOC,QAAM,EAACpV,MAAO,CAAE65B,SAAU,WAC/B,kBAAC4B,GAAA,EAAD,CAASuC,gBAAc,GACrB,kBAACj+B,GAAA,EAAD,CACE27B,KAAK,QACLx7B,MAAM,UACNE,aAAW,OACXC,QAAS+oB,EACTvkB,UAAWP,EAAQ8kB,MAEnB,kBAACuS,GAAA,EAAD,OAEF,kBAACxsB,GAAA,EAAD,CAASyW,YAAY,WAAWgW,UAAQ,IACxC,kBAACqC,GAAA,EAAD,CAAa79B,aAAW,aAAayE,UAAWP,EAAQi5B,WACrDG,EAASpoC,KAAI,SAACoe,EAAMgC,GAAP,OACZ,kBAACjL,GAAA,EAAD,CACEzS,IAAK0d,EAAIhC,EAAKjL,KACdy1B,KAAMxqB,EAAKxM,IACXhH,MAAM,UACNE,aAAYsT,EAAKjL,KACjBpI,QAAS09B,GAERrqB,EAAKjL,aAOhB,Q,yHC5HO01B,GAAW,CACtBC,GAAI,CACF,CAAE31B,KAAM,6CAAW9J,GAAI,WAAYgV,KAAM,kBAAC0qB,GAAA,EAAD,OACzC,CAAE51B,KAAM,8CAAY9J,GAAI,aAAcgV,KAAM,kBAAC2qB,GAAA,EAAD,QAE9CC,IAAK,CACH,CAAE91B,KAAM,2BAAQ9J,GAAI,SAAUgV,KAAM,kBAAC2qB,GAAA,EAAD,OACpC,CAAE71B,KAAM,wCAAW9J,GAAI,YAAagV,KAAM,kBAAC2qB,GAAA,EAAD,SAGjCE,GAAQ,CACnB,CAAE7/B,GAAI,IAAK4F,MAAO,iCAASoP,KAAM,kBAAC8qB,GAAA,EAAD,OACjC,CAAE9/B,GAAI,YAAa4F,MAAO,wCAAWoP,KAAM,kBAAC+qB,GAAA,EAAD,OAC3C,CAAE//B,GAAI,SAAU4F,MAAO,6CAAWoP,KAAM,kBAACgrB,GAAA,EAAD,QCMpCl7B,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACXC,KAAM,CACJ4H,QAAS,QAEXgkB,KAAM,CACJhkB,QAAS,QAEX0pB,OAAQ,CACN3gB,MAXc,IAYdnH,WAAY,GAEdwxB,YAAa,CACXrqB,MAfc,KAiBhBsqB,aAAa,yBACXrzB,QAAS,OACTD,WAAY,SACZjF,QAAS9N,EAAMwL,QAAQ,EAAG,IAEvBxL,EAAMsmC,OAAO1wB,SALN,IAMVlK,eAAgB,eAElBkK,QAAQ,aACN5C,QAAS,OACTD,WAAY,SACZrH,eAAgB,gBAChBoC,QAAS9N,EAAMwL,QAAQ,EAAG,EAAG,EAAG,IAE7BxL,EAAMsmC,OAAO1wB,cAKP,SAAS2wB,GAAT,GAMM,IALnBlmC,EAKkB,EALlBA,MACAH,EAIkB,EAJlBA,SACAF,EAGkB,EAHlBA,MACAmJ,EAEkB,EAFlBA,YACAxC,EACkB,EADlBA,SAEMmF,EAAUb,KACR/D,EAAc6N,eAAd7N,UACFs/B,EAAoB,WACxB7/B,EAAS,CAAEpG,KAAM,iBAQbkmC,EAAWvmC,EAAWylC,GAASC,GAAKD,GAASI,IACnD,OACE,yBAAK15B,UAAWP,EAAQV,MACtB,kBAACqF,GAAA,EAAD,MACA,kBAACysB,GAAA,EAAD,CACE7wB,UAAWP,EAAQ4wB,OACnB71B,QAAQ,YACRs2B,OAAsB,QAAdj2B,EAAsB,QAAU,OACxCk2B,KAAM/8B,EAAMqmC,WACZrJ,QAASmJ,EACT16B,QAAS,CACPgS,MAAOhS,EAAQs6B,cAGjB,yBAAK/5B,UAAWP,EAAQ8J,SACtB,kBAACrO,GAAA,EAAD,CACEG,MAAM,UACNE,aAAW,cACXC,QAvBiB,WACFsB,EAAT,UAAVnJ,EAA+B,OAClB,UAsBTkjC,KAAK,SAEM,UAAVljC,EAAoB,kBAAC2mC,GAAA,EAAD,MAAkB,kBAACC,GAAA,EAAD,OAEzC,kBAACr/B,GAAA,EAAD,CAAYM,QAAS2+B,GACJ,QAAdt/B,EAAsB,kBAAC2/B,GAAA,EAAD,MAAkB,kBAACC,GAAA,EAAD,QAG7C,kBAACnwB,GAAA,EAAD,MACA,kBAACoI,GAAA,EAAD,KACGinB,GAAMlpC,KAAI,SAAC4iB,EAAMpB,GAAP,OACT,kBAACrM,GAAA,EAAD,CACE9L,GAAIuZ,EAAKvZ,GACT3G,IAAK,YAAc8e,EACnBzW,QAAS2+B,EACTtgC,UAAWgM,KACXxK,MAAM,aAEN,kBAACsX,GAAA,EAAD,CAAU8c,QAAM,GACd,kBAACiL,GAAA,EAAD,KAAernB,EAAKvE,MACpB,kBAAC+D,GAAA,EAAD,CAAcC,QAASO,EAAK3T,cAKpC,kBAAC4K,GAAA,EAAD,MACA,kBAACoI,GAAA,EAAD,KACG0nB,EAAS3pC,KAAI,SAAC2C,EAAM6e,GAAP,OACZ,kBAACrM,GAAA,EAAD,CACE9L,GAAI1G,EAAK0G,GACT3G,IAAK,YAAc8e,EACnBzW,QAAS2+B,EACTtgC,UAAWgM,KACXxK,MAAM,aAEN,kBAACsX,GAAA,EAAD,CAAU8c,QAAM,GACd,kBAACiL,GAAA,EAAD,KAAetnC,EAAK0b,MACpB,kBAAC+D,GAAA,EAAD,CAAcC,QAAS1f,EAAKwQ,e,cCjItChF,GAAYC,cAAW,SAAClL,GAAD,aAC3BmL,aAAa,CACXC,MAAI,GACF4H,QAAS,QADP,cAEDhT,EAAM8V,YAAYkxB,GAAG,KAAO,CAC3BnyB,WAAY7U,EAAMwL,QAAQ,GAC1BwH,QAAS,iBAJT,cAMDhT,EAAM8V,YAAYkxB,GAAG,MAAQ,CAC5BnyB,WAAY7U,EAAMwL,QAAQ,GAC1BwH,QAAS,iBART,cAUDhT,EAAM8V,YAAYkxB,GAAG,MAAQ,CAC5BnyB,WAAY7U,EAAMwL,QAAQ,GAC1BwH,QAAS,iBAZT,cAcDhT,EAAM8V,YAAYkxB,GAAG,MAAQ,CAC5BnyB,WAAY7U,EAAMwL,QAAQ,GAC1BwH,QAAS,iBAhBT,GAmBJi0B,WAAY,CACV5F,SAAU,SACV70B,OAAQ,QACR06B,WAAY,SAEdlB,MAAO,CACLt1B,UAAW,SACXiyB,SAAU,QA6BDwE,GApBG,SAAC,GAAoC,IAAlCC,EAAiC,EAAjCA,WACbt7B,EAAUb,KAChB,OACE,kBAACo8B,GAAA,EAAD,CAAUzB,IAAKwB,EAAY/6B,UAAWP,EAAQk6B,OAC5C,yBAAK35B,UAAWP,EAAQm7B,YACrBjB,GAAMlpC,KAAI,SAACoe,EAAMgC,GAAP,OACT,kBAACjL,GAAA,EAAD,CACEzS,IAAK,QAAU0d,EACf/W,GAAI+U,EAAK/U,GACTkG,UAAWP,EAAQV,KACnBlF,UAAWgM,KACXxK,MAAM,aAELwT,EAAKnP,a,4DCqDHu7B,GAvGI,SAACzhC,GAA4B,IAAD,EACFA,EAAMxF,MAAzCknC,EADqC,EACrCA,aAAcC,EADuB,EACvBA,iBAChBC,EAAmBp0B,QAAQm0B,GAM3BE,EAAmB,WACvB7hC,EAAMc,SAAS,CAAEpG,KAAM,kBAMzB,OAAOsF,EAAM3F,SACX,kBAAC,KAAD,CACE8iC,SAAUwE,EACVrgC,aAAc,CAAEE,SAAU,MAAOD,WAAY,SAC7C1J,GAAI6pC,EACJI,aAAW,EACXC,gBAAiB,CAAEvgC,SAAU,MAAOD,WAAY,SAChDg2B,KAAMqK,EACNpK,QAASqK,GAET,kBAACG,GAAA,EAAD,KACE,kBAACtgC,GAAA,EAAD,CAAYK,aAAW,mBAAmBF,MAAM,WAC9C,kBAACogC,GAAA,EAAD,CAAOC,aAAc,EAAGrgC,MAAM,aAC5B,kBAACsgC,GAAA,EAAD,QAGJ,wCAEF,kBAACH,GAAA,EAAD,KACE,kBAACtgC,GAAA,EAAD,CAAYK,aAAW,qBAAqBF,MAAM,WAChD,kBAACogC,GAAA,EAAD,CAAOC,aAAc,GAAIrgC,MAAM,aAC7B,kBAACugC,GAAA,EAAD,QAGJ,4CAEF,kBAACJ,GAAA,EAAD,CAAUhgC,QAtCY,SACxBuI,GAEAvK,EAAMc,SAAS,CAAEpG,KAAM,iBAAkBW,QAASkP,EAAM6qB,kBAoCpD,kBAAC1zB,GAAA,EAAD,CACEK,aAAW,0BACXwV,gBAAc,8BACd8qB,gBAAc,OACdxgC,MAAM,WAEN,kBAACygC,GAAA,EAAD,OAEF,uCAEF,kBAACN,GAAA,EAAD,CAAUhgC,QAzCQ,WACpB6/B,IACI7hC,EAAMsM,QAAQtM,EAAMsM,WAwCpB,kBAAC5K,GAAA,EAAD,CACEK,aAAW,0BACXwV,gBAAc,8BACd8qB,gBAAc,OACdxgC,MAAM,WAEN,kBAACygC,GAAA,EAAD,OAEF,yCAIJ,kBAAC,KAAD,CACEnF,SAAUwE,EACVrgC,aAAc,CAAEE,SAAU,MAAOD,WAAY,SAC7C1J,GAAI6pC,EACJI,aAAW,EACXC,gBAAiB,CAAEvgC,SAAU,MAAOD,WAAY,SAChDg2B,KAAMqK,EACNpK,QAASqK,GAET,kBAACz1B,GAAA,EAAD,CAAM9L,GAAG,SAASD,UAAWgM,KAAYxK,MAAM,aAC7C,kBAACmgC,GAAA,EAAD,CAAUhgC,QAAS6/B,GACjB,kBAACngC,GAAA,EAAD,CACEK,aAAW,0BACXwV,gBAAc,8BACd8qB,gBAAc,OACdxgC,MAAM,WAEN,kBAACygC,GAAA,EAAD,OAEF,yDAGJ,kBAACl2B,GAAA,EAAD,CAAM9L,GAAG,YAAYD,UAAWgM,KAAYxK,MAAM,aAChD,kBAACmgC,GAAA,EAAD,CAAUhgC,QAAS6/B,GACjB,kBAACngC,GAAA,EAAD,CACEK,aAAW,0BACXwV,gBAAc,8BACd8qB,gBAAc,OACdxgC,MAAM,WAEN,kBAACygC,GAAA,EAAD,OAEF,wEC3DKC,GArCI,SAACviC,GAA4B,IACtC3F,EAAsC2F,EAAtC3F,SAAUG,EAA4BwF,EAA5BxF,MAAO8R,EAAqBtM,EAArBsM,OAAQxL,EAAad,EAAbc,SACzB0hC,EAA8BhoC,EAA9BgoC,kBAAmBC,EAAWjoC,EAAXioC,OACrBC,EAAoBl1B,QAAQg1B,GAK5B7B,EAAoB,WACxB7/B,EAAS,CAAEpG,KAAM,mBAEbkmC,EAAWvmC,EAAWylC,GAASC,GAAKD,GAASI,IACnD,OACE,kBAAC,KAAD,CACE/C,SAAUqF,EACVlhC,aAAc,CAAEE,SAAU,MAAOD,WAAY,SAC7C1J,GAAI4qC,EACJX,aAAW,EACXC,gBAAiB,CAAEvgC,SAAU,MAAOD,WAAY,SAChDg2B,KAAMmL,EACNlL,QAASmJ,GAERC,EAAS3pC,KAAI,SAAC2C,EAAM6e,GAAP,OACZ,kBAACrM,GAAA,EAAD,CACE9L,GAAI1G,EAAK0G,GACT3G,IAAK,YAAc8e,EACnBzW,QAAS2+B,EACTtgC,UAAWgM,KACXxK,MAAM,aAEN,kBAACmgC,GAAA,EAAD,CAAUhgC,QAAS2+B,GAAoB/mC,EAAKwQ,UAG/C/P,GAAY,kBAAC2nC,GAAA,EAAD,CAAUhgC,QA7BL,WAChBsK,GAAQA,IACZq0B,MA2Be,8B,oBC7Bbv7B,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACXq9B,eAAe,aACbx1B,QAAS,QACRhT,EAAM8V,YAAYkxB,GAAG,MAAQ,CAC5Bh0B,QAAS,SAGby1B,cAAc,aACZz1B,QAAS,QACRhT,EAAM8V,YAAYkxB,GAAG,MAAQ,CAC5Bh0B,QAAS,cAgEF01B,GA1DQ,SAAC7iC,GACtB,IAAMiG,EAAUb,KADiC,EAEhBpF,EAAMxF,MAA/BioC,EAFyC,EAEzCA,OAAQf,EAFiC,EAEjCA,aACVoB,EAAkB,SAACv4B,GACvBvK,EAAMc,SAAS,CAAEpG,KAAM,iBAAkBW,QAASkP,EAAM6qB,iBAK1D,OAAOp1B,EAAM3F,SACX,kBAAC,IAAM0oC,SAAP,KACE,yBAAKv8B,UAAWP,EAAQ08B,gBACtB,kBAACjhC,GAAA,EAAD,CAAYK,aAAW,mBAAmBF,MAAM,WAC9C,kBAACogC,GAAA,EAAD,CAAOC,aAAc,EAAGrgC,MAAM,aAC5B,kBAACmhC,GAAA,EAAD,QAGJ,kBAACthC,GAAA,EAAD,CAAYK,aAAW,qBAAqBF,MAAM,WAChD,kBAACogC,GAAA,EAAD,CAAOC,aAAc,GAAIrgC,MAAM,aAC7B,kBAACugC,GAAA,EAAD,QAGJ,kBAAC1gC,GAAA,EAAD,CACE27B,KAAK,MACLt7B,aAAW,0BACXwV,gBAAekrB,EACfJ,gBAAc,OACdrgC,QAAS8gC,EACTjhC,MAAM,WAEN,kBAACygC,GAAA,EAAD,QAGJ,yBAAK97B,UAAWP,EAAQ28B,eACtB,kBAAClhC,GAAA,EAAD,CACEK,aAAW,YACXwV,gBAAemqB,EACfW,gBAAc,OACdrgC,QAhCe,SAACuI,GACtBvK,EAAMc,SAAS,CAAEpG,KAAM,gBAAiBW,QAASkP,EAAM6qB,iBAgCjDvzB,MAAM,WAEN,kBAACohC,GAAA,EAAD,SAKN,kBAACvhC,GAAA,EAAD,CACE27B,KAAK,MACLt7B,aAAW,0BACXwV,gBAAekrB,EACfJ,gBAAc,OACdrgC,QAAS8gC,EACTjhC,MAAM,WAEN,kBAACygC,GAAA,EAAD,Q,wCCjBAY,G,oDACJ,WAAYljC,GAAqB,IAAD,+BAC9B,cAAMA,IASRmjC,oBAAsB,SACpB54B,GAEA,IAAM64B,EAAQ74B,EAAM5J,OAAO4B,MAC3B,EAAK+G,SAAS,CAAE85B,QAAO9oC,SAAS,KAdF,EAiBhC+oC,kBAAoB,aAdlB,EAAK7oC,MAAQ,CACX4oC,MAAO,GACPE,QAAS,GACThpC,SAAS,EACTuG,QAAS,IAPmB,E,sDAmBtB,IAAD,OACCoF,EAAYiB,KAAKlH,MAAjBiG,QACAm9B,EAAUl8B,KAAK1M,MAAf4oC,MACR,OACE,yBAAK58B,UAAWP,EAAQs9B,QACtB,yBAAK/8B,UAAWP,EAAQu9B,YACtB,kBAAC,KAAD,OAEF,kBAACC,GAAA,EAAD,CACEv3B,YAAY,oCACZjG,QAAS,CACPV,KAAMU,EAAQy9B,UACdthC,MAAO6D,EAAQ09B,YAEjB1xB,WAAY,CAAE,aAAc,UAC5BvX,KAAK,OACL6H,MAAO6gC,EACP9gC,SAAU,SAACiI,GAAD,OAAW,EAAK44B,oBAAoB54B,W,GArC9BX,IAAM/B,WA2CjBG,iBAlGA,SAAC7N,GAAD,aACbmL,aAAa,CACXi+B,OAAO,aACLr7B,SAAU,WACVtG,aAAczH,EAAMiR,MAAMxJ,aAC1BkW,gBAAiB8rB,aAAKzpC,EAAM4d,QAAQ/U,OAAO6gC,MAAO,KAClD,UAAW,CACT/rB,gBAAiB8rB,aAAKzpC,EAAM4d,QAAQ/U,OAAO6gC,MAAO,MAEpD3tB,MAAO,OACPlH,WAAY7U,EAAMwL,QAAQ,IACzBxL,EAAM8V,YAAYkxB,GAAG,KAAO,CAC3BjrB,MAAO,SAGXstB,WAAY,CACVv7B,QAAS9N,EAAMwL,QAAQ,EAAG,GAC1BgB,OAAQ,OACRuB,SAAU,WACVE,IAAK,EACL07B,cAAe,OACf32B,QAAS,OACTD,WAAY,SACZrH,eAAgB,SAChByS,OAAQ,WAEVorB,UAAW,CACT7hC,MAAO,WAET8hC,YAAU,GACR17B,QAAS9N,EAAMwL,QAAQ,EAAG,EAAG,EAAG,GAEhCo+B,YAAY,cAAD,OAAgB5pC,EAAMwL,QAAQ,GAA9B,OACXq+B,WAAY7pC,EAAM8pC,YAAYngC,OAAO,SACrCoS,MAAO,IACP,UAAW,CACTA,MAAO,SAPD,cASP/b,EAAM8V,YAAYmG,KAAK,KAAO,CAC7BF,MAAO,QAVD,cAYP/b,EAAM8V,YAAYmG,KAAK,KAAO,CAC7BF,MAAO,MAbD,OAqEClO,CAAmBk7B,ICxF5B99B,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACX4+B,OAAQ,CACNr6B,OAAQ1P,EAAM0P,OAAOgtB,OAAS,EAC9BmN,WAAY7pC,EAAM8pC,YAAYngC,OAAO,CAAC,QAAS,UAAW,CACxDqgC,OAAQhqC,EAAM8pC,YAAYE,OAAOC,MACjChnB,SAAUjjB,EAAM8pC,YAAY7mB,SAASinB,iBAGzCC,YAAa,CACXt1B,WAbc,IAcdkH,MAAM,eAAD,OAdS,IAcT,OACL8tB,WAAY7pC,EAAM8pC,YAAYngC,OAAO,CAAC,QAAS,UAAW,CACxDqgC,OAAQhqC,EAAM8pC,YAAYE,OAAOC,MACjChnB,SAAUjjB,EAAM8pC,YAAY7mB,SAASmnB,kBAGzCpT,KAAM,CACJhkB,QAAS,QAEX4vB,WAAY,CACV5G,YAAah8B,EAAMwL,QAAQ,SAsDlB6+B,GA3CI,SAACxkC,GAClB,IAAMiG,EAAUb,KAERy7B,EAAe7gC,EAAMxF,MAArBqmC,WAMR,OACE,kBAAChqB,GAAA,EAAD,CACEhV,MAAO,UACPqG,SAAS,WACT1B,UAAWoK,aAAK3K,EAAQi+B,OAAT,eACZj+B,EAAQq+B,YAAczD,KAGzB,kBAACzD,GAAA,EAAD,KACE,kBAAC17B,GAAA,EAAD,CACEG,MAAM,UACNE,aAAW,cACXC,QAhBiB,WACvBhC,EAAMc,SAAS,CAAEpG,KAAM,iBAgBjB2iC,KAAK,QACL72B,UAAWoK,aAAK3K,EAAQ82B,WAAT,eACZ92B,EAAQkrB,KAAO0P,KAGlB,kBAAC,KAAD,OAEF,kBAACz0B,GAAA,EAAD,CAAM/L,UAAWgM,KAAYxK,MAAM,YAAYvB,GAAG,KAAlD,8CAGA,uBAAG0B,QAAS,kBAAMyiC,eAAehX,UAAjC,IAlEQiX,QAkER,KACA,kBAAC,GAAD,CAAWnD,WAAYV,IACvB,kBAAC,GAAD,MACA,kBAAC,GAAmB7gC,IAEtB,kBAAC0gC,GAAe1gC,GAChB,kBAAC,GAAeA,GAChB,kBAAC,GAAeA,KCpFT5F,GAA4B,CACrCqoC,OAAQ,8BACRf,aAAc,qCACdc,kBAAmB,KACnBb,iBAAkB,KAClBd,YAAY,GAUD,SAAS8D,GAAcnqC,EAAoBC,GACtD,OAAQA,EAAOC,MACX,IAAK,QACD,OAAO,2BACAF,GADP,kBAEKC,EAAOmqC,UAAYnqC,EAAOY,UAGnC,IAAK,cACD,OAAO,2BACAb,GADP,IAEIqmC,YAAarmC,EAAMqmC,aAG3B,IAAK,gBACD,OAAO,2BACArmC,GADP,IAEIgoC,kBAAmB,OAG3B,IAAK,eACD,OAAO,2BACAhoC,GADP,IAEImnC,iBAAkB,OAG1B,IAAK,gBACD,OAAO,2BACAnnC,GADP,IAEImnC,iBAAkBlnC,EAAOY,UAGjC,IAAK,iBACD,OAAO,2BACAb,GADP,IAEIgoC,kBAAmB/nC,EAAOY,UAGlC,QACI,OAAOb,GC7CnB,IAuBgBuF,gBAZQ,SAACvF,GAA+B,IAAD,EACzBA,EAAMyE,KAClC,MAAO,CAAE5E,SAF4C,EAC7CA,SACWF,MAFkC,EACnCA,UAIO,SACzB2G,GADyB,MAEF,CACvBwL,OAAQvE,YAAmBxE,GAAezC,GAC1CwC,YAAayE,YAAmBzE,GAAaxC,MAG/Bf,EAvBuB,SAAC,GAAiB,IAAZi3B,EAAW,sBAC5B6N,qBAAWF,GAAevqC,IADE,oBAC/CI,EAD+C,KACxCsG,EADwC,KAGtD,OAAO,kBAAC,GAAD,eAAYtG,MAAOA,EAAOsG,SAAUA,GAAck2B,OCP9C8N,GAAiB,SAACnrC,GAAD,MAAkB,CAAEe,K1FRnB,kB0FQ0Cf,QCJrEorC,GAAsB,GAgEXhlC,gBAbS,SAACvF,GAEvB,MAAO,CACLe,UAFmBf,EAAbiB,SAEcF,cAIG,SACzBuF,GADyB,MAEF,CACvBkkC,YAAaj9B,YAAmB+8B,GAAgBhkC,MAGnCf,EAxDE,SAAC,GAA6C,IAA3CxE,EAA0C,EAA1CA,UAAWypC,EAA+B,EAA/BA,YAA+B,EACjBC,cAAnCC,EADoD,EACpDA,gBAAiBC,EADmC,EACnCA,cAoCzB,OA1BAzuB,qBAAU,WACC,OAATnb,QAAS,IAATA,KAAW6gB,SACT,YAAgE,IAV5CvkB,EAUjB8B,EAA4D,EAA5DA,IAAKkH,EAAuD,EAAvDA,QAAuD,IAA9CK,eAA8C,MAApC,GAAoC,MAAhCvF,eAAgC,SAE3DwpC,EAAcxrC,GAGZorC,GAAUK,SAASzrC,KACvBurC,EAAgBrkC,EAAD,YAAC,aACdlH,OACGuH,GAFU,IAGbs2B,QAAS,SAACjtB,EAAO86B,EAAQC,GACnBpkC,EAAQs2B,SACVt2B,EAAQs2B,QAAQjtB,EAAO86B,EAAQC,IAGnCC,SAAU,SAACh7B,EAAO+6B,GApBF,IAACztC,EAqBXmtC,GAAaA,EAAYQ,OAAOF,IArBrBztC,EAsBC2tC,OAAOF,GArB/BP,GAAS,YAAOA,GAAUnpC,QAAO,SAACjC,GAAD,OAAS9B,IAAO8B,UAL3B9B,EA6BH8B,EA5BnBorC,GAAS,sBAAOA,IAAP,CAAkBltC,UA+B1B,CAAC0D,EAAW4pC,EAAeD,EAAiBF,IAExC,QCvBHS,GAAM3hC,YAAO,CAAE4hC,QAAQ,GAAD,mBAAMC,eAAYD,SAAlB,CAA2BE,UAEjDxgC,GAAYC,cAAW,SAAClL,GAAD,OAC3BmL,aAAa,CACXugC,IAAK,CACH3vB,MAAO,QACPvP,OAAQ,QACRy3B,UAAW,SACXjxB,QAAS,OACT8qB,cAAe,SACfuD,SAAU,UAEZsK,SAAU,CACRn/B,OAAQ,UACRy3B,UAAW,SACX2H,UAAW,QAEb9tB,MAAO,CACLpO,OAAQ,OACR3B,SAAU,iBA+DD89B,GAFKjmC,aAZI,SAACvF,GAGvB,MAAO,CAAEL,MAFSK,EAAMyE,KAAhB9E,MAEQ2B,SADKtB,EAAMuE,WAAnBjD,aAIiB,SACzBgF,GADyB,MAEF,CACvBi0B,WAAYhtB,YAAmBgtB,GAAYj0B,MAGzBf,EAlDR,SAAC,GAA4C,IAA1C5F,EAAyC,EAAzCA,MAAO2B,EAAkC,EAAlCA,SAAUi5B,EAAwB,EAAxBA,WACxB9uB,EAAUb,KACV6gC,EAAyB,UAAV9rC,EAAoB8kC,GAAaL,GAChDsH,EAAeC,aAAoBF,GAMzC,OALAloC,GAAQqoC,QAAO,WACTtqC,GACFi5B,GAAW,MAIb,kBAAC,IAAD,CAAiBh3B,QAASA,IACxB,kBAACsoC,GAAA,EAAD,CAAgBZ,IAAKA,IACnB,kBAACa,GAAA,EAAD,CAAensC,MAAO+rC,GACpB,kBAAC,IAAD,KACE,kBAAC9kC,GAAA,EAAD,CAAOC,UAAU,QAAQ0+B,GAAIjkC,EAAUyqC,cAAY,EAACC,eAAa,GAC/D,kBAAC1vB,GAAA,EAAD,CAAO2vB,UAAW,EAAGjgC,UAAWP,EAAQgS,OACtC,kBAAC,GAAD,QAGJ,kBAACvM,GAAA,EAAD,CAAKlF,UAAWP,EAAQ4/B,KACtB,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAACn6B,GAAA,EAAD,CAAK7T,GAAG,YAAY2O,UAAWP,EAAQ6/B,UACrC,kBAAC,GAAD,e,SC/EhBtlC,kBACE,kBAAC,IAAD,CAAUrB,MAAOA,IACf,kBAAC,GAAD,OAEFuJ,SAASg+B,eAAe,W","file":"static/js/main.0128a8ed.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/melodition.7fdc0c11.jpg\";","var map = {\n\t\"./default_drum_00\": [\n\t\t194,\n\t\t0\n\t],\n\t\"./default_drum_00.ts\": [\n\t\t194,\n\t\t0\n\t],\n\t\"./default_drum_01\": [\n\t\t195,\n\t\t1\n\t],\n\t\"./default_drum_01.ts\": [\n\t\t195,\n\t\t1\n\t],\n\t\"./default_drum_02\": [\n\t\t196,\n\t\t2\n\t],\n\t\"./default_drum_02.ts\": [\n\t\t196,\n\t\t2\n\t],\n\t\"./default_drum_03\": [\n\t\t197,\n\t\t3\n\t],\n\t\"./default_drum_03.ts\": [\n\t\t197,\n\t\t3\n\t],\n\t\"./default_drum_04\": [\n\t\t198,\n\t\t4\n\t],\n\t\"./default_drum_04.ts\": [\n\t\t198,\n\t\t4\n\t],\n\t\"./default_drum_05\": [\n\t\t199,\n\t\t5\n\t],\n\t\"./default_drum_05.ts\": [\n\t\t199,\n\t\t5\n\t],\n\t\"./default_drum_06\": [\n\t\t200,\n\t\t6\n\t],\n\t\"./default_drum_06.ts\": [\n\t\t200,\n\t\t6\n\t],\n\t\"./default_drum_07\": [\n\t\t201,\n\t\t7\n\t],\n\t\"./default_drum_07.ts\": [\n\t\t201,\n\t\t7\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 256;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./default_tone_00\": [\n\t\t202,\n\t\t8\n\t],\n\t\"./default_tone_00.ts\": [\n\t\t202,\n\t\t8\n\t],\n\t\"./default_tone_01\": [\n\t\t203,\n\t\t9\n\t],\n\t\"./default_tone_01.ts\": [\n\t\t203,\n\t\t9\n\t],\n\t\"./default_tone_02\": [\n\t\t204,\n\t\t10\n\t],\n\t\"./default_tone_02.ts\": [\n\t\t204,\n\t\t10\n\t],\n\t\"./default_tone_03\": [\n\t\t205,\n\t\t11\n\t],\n\t\"./default_tone_03.ts\": [\n\t\t205,\n\t\t11\n\t],\n\t\"./default_tone_04\": [\n\t\t206,\n\t\t12\n\t],\n\t\"./default_tone_04.ts\": [\n\t\t206,\n\t\t12\n\t],\n\t\"./default_tone_05\": [\n\t\t207,\n\t\t13\n\t],\n\t\"./default_tone_05.ts\": [\n\t\t207,\n\t\t13\n\t],\n\t\"./default_tone_06\": [\n\t\t208,\n\t\t14\n\t],\n\t\"./default_tone_06.ts\": [\n\t\t208,\n\t\t14\n\t],\n\t\"./default_tone_07\": [\n\t\t209,\n\t\t15\n\t],\n\t\"./default_tone_07.ts\": [\n\t\t209,\n\t\t15\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 257;\nmodule.exports = webpackAsyncContext;","import { useCallback, useRef } from \"react\";\r\nimport { LoginResponse } from \"../_types/user.types\";\r\nimport fallImg from \"../assets/img/melodition.jpg\";\r\n\r\nexport const useCallbackRef = (rawCallback: any) => {\r\n  const cleanupRef = useRef(null);\r\n  const callback = useCallback(\r\n    (node) => {\r\n      if (cleanupRef.current) {\r\n        // cleanupRef.current();\r\n        cleanupRef.current = null;\r\n      }\r\n      if (node) {\r\n        cleanupRef.current = rawCallback(node);\r\n      }\r\n    },\r\n    [rawCallback]\r\n  );\r\n\r\n  return callback;\r\n};\r\n\r\nexport interface PathFinder {\r\n  post?: number;\r\n  guide?: number;\r\n  course?: number;\r\n  lesson?: number;\r\n  exercise?: number;\r\n  length: number;\r\n}\r\nexport const pathFinder = (path: string): PathFinder => {\r\n  const pathSplit = path.split(\"/\");\r\n  let compiledPath: PathFinder = { length: 0 };\r\n  if (pathSplit.length === 3) {\r\n    compiledPath = {\r\n      [pathSplit[1]]: Number(pathSplit[2]),\r\n      length: 1,\r\n    };\r\n  } else if (pathSplit.length === 4) {\r\n    const typeSplit = pathSplit[3].split(\"=\");\r\n    compiledPath = {\r\n      [pathSplit[1]]: Number(pathSplit[2]),\r\n      [typeSplit[0]]: Number(typeSplit[1]),\r\n      length: 2,\r\n    };\r\n  } else if (pathSplit.length === 5) {\r\n    const type1Split = pathSplit[3].split(\"=\");\r\n    const type2Split = pathSplit[4].split(\"=\");\r\n    compiledPath = {\r\n      [pathSplit[1]]: Number(pathSplit[2]),\r\n      [type1Split[0]]: Number(type1Split[1]),\r\n      [type2Split[0]]: Number(type2Split[1]),\r\n      length: 3,\r\n    };\r\n  }\r\n  return compiledPath;\r\n};\r\n\r\nexport const getUserLocal = (key: string): LoginResponse => {\r\n  const item = localStorage.getItem(key);\r\n  return item !== null ? JSON.parse(item) : undefined;\r\n};\r\n\r\nexport const getTheTime = (minutes: number = 0): number => {\r\n  var d = new Date();\r\n  var t = d.getTime();\r\n  const ms = minutes * 60000;\r\n  return t + ms;\r\n};\r\n\r\nexport const UniqId = (): string => {\r\n  return getTheTime(Math.random()).toString(36);\r\n};\r\n\r\nexport const thumbnailsFinder = (\r\n  img: string | { medium: string } | null\r\n): string => {\r\n  let image = fallImg;\r\n  if (img) {\r\n    if (typeof img === \"object\") image = img.medium;\r\n    else if (typeof img === \"string\") image = img;\r\n  }\r\n  return image;\r\n};\r\n","import {\r\n  LOST_FAILURE,\r\n  LOST_REQUEST,\r\n  LOST_SUCCESS,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  REGISTER_FAILURE,\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  USER_LOGOUT,\r\n  CHANGE_THEME,\r\n  UserActionTypes,\r\n  DefaultUserState,\r\n} from \"../_types/user.types\";\r\nimport { getUserLocal } from \"../_helpers/constants\";\r\n\r\nconst user = getUserLocal(\"user\");\r\nconst storedTheme = localStorage.getItem(\"theme\");\r\nconst theme = storedTheme === \"dark\" ? \"dark\" : \"light\"\r\n\r\nconst initialState: DefaultUserState = user\r\n  ? { loggedIn: true, loading: false, user, theme }\r\n  : { loggedIn: false, loading: false, theme };\r\n\r\nexport function authReducer(\r\n  state = initialState,\r\n  action: UserActionTypes\r\n): DefaultUserState {\r\n  switch (action.type) {\r\n    case LOGIN_REQUEST:\r\n      return { ...state, loading: true };\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loggedIn: true,\r\n        loading: false,\r\n        user: action.user,\r\n      };\r\n    case LOGIN_FAILURE:\r\n      return { ...state, loading: false };\r\n    case REGISTER_REQUEST:\r\n      return { ...state, loggedIn: false, loading: true };\r\n    case REGISTER_SUCCESS:\r\n      return { ...state, loading: false };\r\n    case REGISTER_FAILURE:\r\n      return { ...state, loading: false };\r\n    case LOST_REQUEST:\r\n      return { ...state, loggedIn: false, loading: true };\r\n    case LOST_SUCCESS:\r\n      return { ...state, loading: false };\r\n    case LOST_FAILURE:\r\n      return { ...state, loading: false };\r\n    case USER_LOGOUT:\r\n      return { ...state, loggedIn: false, loading: false };\r\n    case CHANGE_THEME:\r\n      localStorage.setItem(\"theme\", action.theme);\r\n      return { ...state, theme: action.theme };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const REGISTER_REQUEST = \"USER_REGISTER_REQUEST\";\r\nexport const REGISTER_SUCCESS = \"USER_REGISTER_SUCCESS\";\r\nexport const REGISTER_FAILURE = \"USER_REGISTER_FAILURE\";\r\n\r\nexport const LOGIN_REQUEST = \"USER_LOGIN_REQUEST\";\r\nexport const LOGIN_SUCCESS = \"USER_LOGIN_SUCCESS\";\r\nexport const LOGIN_FAILURE = \"USER_LOGIN_FAILURE\";\r\n\r\nexport const USER_LOGOUT = \"USER_LOGOUT\";\r\n\r\nexport const LOST_REQUEST = \"USER_LOST_REQUEST\";\r\nexport const LOST_SUCCESS = \"USER_LOST_SUCCESS\";\r\nexport const LOST_FAILURE = \"USER_LOST_FAILURE\";\r\n\r\nexport const CHANGE_THEME = \"CHANGE_THEME\";\r\n\r\nexport interface DefaultUserState {\r\n  loggedIn: boolean;\r\n  loading: boolean;\r\n  user?: LoginResponse;\r\n  error?: string;\r\n  theme: \"light\" | \"dark\";\r\n}\r\nexport type ILost = {\r\n  user_login: string;\r\n};\r\nexport type IUser = {\r\n  username: string;\r\n  password: string;\r\n};\r\nexport type IRegister = {\r\n  username: string;\r\n  password: string;\r\n  firstname: string;\r\n  lastname: string;\r\n  email: string;\r\n};\r\nexport type LoginResponse = {\r\n  user_display_name: string;\r\n  token: string;\r\n  user_email: string;\r\n  user_nicename: string;\r\n};\r\n\r\nexport interface LoginRequestAction {\r\n  type: typeof LOGIN_REQUEST;\r\n}\r\nexport interface LoginSuccessAction {\r\n  type: typeof LOGIN_SUCCESS;\r\n  user: LoginResponse;\r\n}\r\nexport interface LoginFailureAction {\r\n  type: typeof LOGIN_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface RegisterRequestAction {\r\n  type: typeof REGISTER_REQUEST;\r\n}\r\nexport interface RegisterSuccessAction {\r\n  type: typeof REGISTER_SUCCESS;\r\n  user: string;\r\n}\r\nexport interface RegisterFailureAction {\r\n  type: typeof REGISTER_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface LogoutAction {\r\n  type: typeof USER_LOGOUT;\r\n}\r\n\r\nexport interface LostRequestAction {\r\n  type: typeof LOST_REQUEST;\r\n}\r\nexport interface LostSuccessAction {\r\n  type: typeof LOST_SUCCESS;\r\n  message: string;\r\n}\r\nexport interface LostFailureAction {\r\n  type: typeof LOST_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface ChangeThemeAction {\r\n  type: typeof CHANGE_THEME;\r\n  theme: \"light\" | \"dark\";\r\n}\r\n\r\nexport type UserActionTypes =\r\n  | RegisterRequestAction\r\n  | RegisterSuccessAction\r\n  | RegisterFailureAction\r\n  | LostRequestAction\r\n  | LostSuccessAction\r\n  | LostFailureAction\r\n  | LogoutAction\r\n  | LoginRequestAction\r\n  | LoginSuccessAction\r\n  | LoginFailureAction\r\n  | ChangeThemeAction\r\n","export const INFO_REQUEST = \"PROFILE_INFO_REQUEST\";\r\nexport const INFO_SUCCESS = \"PROFILE_INFO_SUCCESS\";\r\nexport const INFO_FAILURE = \"PROFILE_INFO_FAILURE\";\r\n\r\nexport const ADD_REQUEST = \"PROFILE_ADD_REQUEST\";\r\nexport const ADD_SUCCESS = \"PROFILE_ADD_SUCCESS\";\r\nexport const ADD_FAILURE = \"PROFILE_ADD_FAILURE\";\r\n\r\nexport const REMOVE_REQUEST = \"PROFILE_REMOVE_REQUEST\";\r\nexport const REMOVE_SUCCESS = \"PROFILE_REMOVE_SUCCESS\";\r\nexport const REMOVE_FAILURE = \"PROFILE_REMOVE_FAILURE\";\r\n\r\nexport const SAVE_PROFILE = \"SAVE_PROFILE\";\r\nexport const DELETE_PROFILE = \"DELETE_PROFILE\";\r\n\r\nexport interface DefaultProfileState {\r\n  error?: string;\r\n  loading: boolean;\r\n  profile?: IProfile;\r\n}\r\nexport type IProfile = {\r\n  id: string;\r\n  name: string;\r\n  slug: string;\r\n  meta: {\r\n    playtime: Playtime[];\r\n  };\r\n  title: { rendered: string };\r\n  score: { rendered: string };\r\n  favorite: favorite[];\r\n  info?: UserInfo;\r\n};\r\nexport type UserInfo = {\r\n  userID: string;\r\n  expire: number;\r\n  issued: number;\r\n  before: number;\r\n};\r\ntype Playtime = {\r\n  song: {\r\n    name: string;\r\n    id: number;\r\n    notes: number;\r\n  };\r\n  time: string;\r\n  score: string;\r\n  date: string;\r\n  progress: string;\r\n};\r\ninterface favorite {\r\n  id: string;\r\n}\r\n\r\nexport interface SaveProfileInfoAction {\r\n  type: typeof SAVE_PROFILE;\r\n  userData: any;\r\n}\r\nexport interface DeleteProfileInfoAction {\r\n  type: typeof DELETE_PROFILE;\r\n}\r\n\r\nexport interface ProfileInfoRequestAction {\r\n  type: typeof INFO_REQUEST;\r\n}\r\nexport interface ProfileInfoSuccessAction {\r\n  type: typeof INFO_SUCCESS;\r\n  profile: IProfile;\r\n}\r\nexport interface ProfileInfoFailureAction {\r\n  type: typeof INFO_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface ProfileAddRequestAction {\r\n  type: typeof ADD_REQUEST;\r\n}\r\nexport interface ProfileAddSuccessAction {\r\n  type: typeof ADD_SUCCESS;\r\n  items: IProfile;\r\n}\r\nexport interface ProfileAddFailureAction {\r\n  type: typeof ADD_FAILURE;\r\n  items: IProfile;\r\n}\r\n\r\nexport interface ProfileRemoveRequestAction {\r\n  type: typeof REMOVE_REQUEST;\r\n  id: number;\r\n}\r\nexport interface ProfileRemoveSuccessAction {\r\n  type: typeof REMOVE_SUCCESS;\r\n  id: number;\r\n}\r\nexport interface ProfileRemoveFailureAction {\r\n  type: typeof REMOVE_FAILURE;\r\n  error: boolean;\r\n  id: number;\r\n}\r\n\r\nexport type ProfileActionTypes =\r\n  | SaveProfileInfoAction\r\n  | DeleteProfileInfoAction\r\n  | ProfileInfoRequestAction\r\n  | ProfileInfoSuccessAction\r\n  | ProfileInfoFailureAction\r\n  | ProfileAddRequestAction\r\n  | ProfileAddSuccessAction\r\n  | ProfileAddFailureAction\r\n  | ProfileRemoveRequestAction\r\n  | ProfileRemoveSuccessAction\r\n  | ProfileRemoveFailureAction;\r\n","import {\r\n  // ADD_REQUEST,\r\n  // ADD_SUCCESS,\r\n  // ADD_FAILURE,\r\n  INFO_REQUEST,\r\n  INFO_FAILURE,\r\n  INFO_SUCCESS,\r\n  // REMOVE_REQUEST,\r\n  // REMOVE_SUCCESS,\r\n  // REMOVE_FAILURE,\r\n  ProfileActionTypes,\r\n  SAVE_PROFILE,\r\n  DefaultProfileState,\r\n} from \"../_types/profile.types\";\r\n\r\nconst profileReducerDefaultState: DefaultProfileState = {\r\n  loading: true,\r\n};\r\n\r\nexport function profileReducer(\r\n  state = profileReducerDefaultState,\r\n  action: ProfileActionTypes\r\n): DefaultProfileState {\r\n  switch (action.type) {\r\n    case SAVE_PROFILE:\r\n      return {\r\n        loading: true,\r\n        profile: action.userData,\r\n      };\r\n    case INFO_REQUEST:\r\n      return state;\r\n    case INFO_SUCCESS:\r\n      return {\r\n        loading: false,\r\n        profile: action.profile,\r\n      };\r\n    case INFO_FAILURE:\r\n      return {\r\n        loading: false,\r\n        error: action.error,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const REQUEST_FAVORITES = \"REQUEST_FAVORITES\";\r\nexport const SUCCESS_FAVORITES = \"SUCCESS_FAVORITES\";\r\nexport const FAILURE_FAVORITES = \"FAILURE_FAVORITES\";\r\n\r\nexport interface DefaultFavoritesState {\r\n  data: IFavorite[];\r\n  error: string;\r\n  loading: boolean;\r\n  nextLoad: number;\r\n}\r\n\r\nexport interface IFavorite {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  author: string;\r\n  excerpt: string;\r\n  featured_img: string;\r\n  slug: string;\r\n  info: FavoriteInfo;\r\n}\r\ntype FavoriteInfo = {\r\n  series: string[];\r\n  instrument: string;\r\n  grade: string[];\r\n  genre: string[];\r\n  img: string[];\r\n  tags: string[];\r\n};\r\n\r\nexport interface RequestFavorites {\r\n  type: typeof REQUEST_FAVORITES;\r\n}\r\nexport interface SeccessFavorites {\r\n  type: typeof SUCCESS_FAVORITES;\r\n  payload: {\r\n    data: IFavorite[];\r\n    nextLoad: number;\r\n  }\r\n}\r\nexport interface FailureFavorites {\r\n  type: typeof FAILURE_FAVORITES;\r\n  error: string;\r\n}\r\n\r\nexport type FavoriteActionTypes =\r\n  | RequestFavorites\r\n  | SeccessFavorites\r\n  | FailureFavorites;\r\n","import {\r\n  REQUEST_FAVORITES,\r\n  SUCCESS_FAVORITES,\r\n  FAILURE_FAVORITES,\r\n  FavoriteActionTypes,\r\n  DefaultFavoritesState,\r\n} from \"../_types/favorite.types\";\r\n\r\nconst favoriteReducerDefaultState: DefaultFavoritesState = {\r\n  data: [],\r\n  loading: true,\r\n  error: 'Not Found',\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const favoriteReducer = (\r\n  state = favoriteReducerDefaultState,\r\n  action: FavoriteActionTypes\r\n): DefaultFavoritesState => {\r\n  switch (action.type) {\r\n    case REQUEST_FAVORITES:\r\n      return state;\r\n    case SUCCESS_FAVORITES:\r\n      return {\r\n        ...state,\r\n        nextLoad: action.payload.nextLoad,\r\n        data: action.payload.data,\r\n        loading: false,\r\n      };\r\n    case FAILURE_FAVORITES:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  DefaultSnackState,\r\n  CLEAR_SNACKBAR,\r\n  SHOW_SNACKBAR,\r\n  SnackActionTypes,\r\n  REMOVE_SNACKBAR,\r\n} from \"../_types/snackbar.types\";\r\n\r\nconst snackbarReducerDefaultState: DefaultSnackState = {\r\n  snackbars: [],\r\n};\r\n\r\nexport const snackbarReducer = (\r\n  state = snackbarReducerDefaultState,\r\n  action: SnackActionTypes\r\n): DefaultSnackState => {\r\n  switch (action.type) {\r\n    case SHOW_SNACKBAR:\r\n      return {\r\n        ...state,\r\n        snackbars: [\r\n          ...state.snackbars,\r\n          {\r\n            ...action.snackbar,\r\n          },\r\n        ],\r\n      };\r\n    case CLEAR_SNACKBAR:\r\n      return {\r\n        ...state,\r\n        snackbars: state.snackbars?.map((snackbar) =>\r\n          action.dismissAll || snackbar.key === action.key\r\n            ? { ...snackbar, dismissed: true }\r\n            : { ...snackbar }\r\n        ),\r\n      };\r\n    case REMOVE_SNACKBAR:\r\n      return {\r\n        ...state,\r\n        snackbars: state.snackbars?.filter(\r\n          (snackbar) => snackbar.key !== action.key\r\n        ),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { TransitionProps } from \"@material-ui/core/transitions/transition\";\r\nimport { TransitionHandler, VariantType, TransitionCloseHandler, SnackbarOrigin } from \"notistack/dist\";\r\n\r\nexport const SHOW_SNACKBAR = \"SHOW_SNACKBAR\";\r\nexport const CLEAR_SNACKBAR = \"CLEAR_SNACKBAR\";\r\nexport const REMOVE_SNACKBAR = \"REMOVE_SNACKBAR\";\r\n\r\nexport interface DefaultSnackState {\r\n  type?: string;\r\n  snackbars?: ISnack[];\r\n}\r\nexport type ISnack = {\r\n  message: string;\r\n  key: string;\r\n  dismissed?: boolean;\r\n  options: SnackOption;\r\n};\r\ninterface SnackOption {\r\n  TransitionComponent?: (props: TransitionProps) => JSX.Element;\r\n  autoHideDuration?: number | null;\r\n  anchorOrigin?: SnackbarOrigin;\r\n  variant?: VariantType;\r\n  action?: (key: string) => JSX.Element;\r\n  onClose?: TransitionCloseHandler\r\n  onExited?: TransitionHandler;\r\n}\r\nexport interface SeccessSnackAction {\r\n  type: typeof SHOW_SNACKBAR;\r\n  snackbar: ISnack;\r\n}\r\nexport interface ClearSnackAction {\r\n  type: typeof CLEAR_SNACKBAR;\r\n  dismissAll?: boolean;\r\n  key?: string;\r\n}\r\nexport interface RemoveSnackAction {\r\n  type: typeof REMOVE_SNACKBAR;\r\n  key: string;\r\n}\r\n\r\nexport type SnackActionTypes =\r\n  | SeccessSnackAction\r\n  | ClearSnackAction\r\n  | RemoveSnackAction;\r\n","import {\r\n  PlayerActionTypes,\r\n  REQUEST_PLAYER,\r\n  RESET_PLAYER,\r\n  ENTER_PLAYMODE,\r\n  EXIT_PLAYMODE,\r\n  START_PLAYER,\r\n  STOP_PLAYER,\r\n  DRAW_PIANO,\r\n  IMelodition,\r\n  DRAW_GAME,\r\n  DRAW_FINGER,\r\n  RESIZE_PLAYER\r\n} from \"../_types/player.types\";\r\n\r\nconst defaultPlayer: IMelodition = {\r\n  playMode: false,\r\n  loading: true,\r\n  onAir: false,\r\n  fingerLoading: true,\r\n  pianoLoading: true,\r\n  gameLoading: true,\r\n  octave: 5,\r\n  tapSize: 32,\r\n};\r\n\r\nexport const playerReducer = (\r\n  state = defaultPlayer,\r\n  action: PlayerActionTypes\r\n): IMelodition => {\r\n  switch (action.type) {\r\n    case REQUEST_PLAYER:\r\n      return { ...state, loading: false };\r\n    case DRAW_PIANO:\r\n      return { ...state, ...action.payload, pianoLoading: false };\r\n    case DRAW_GAME:\r\n      return { ...state, gameLoading: false };\r\n    case DRAW_FINGER:\r\n      return { ...state, fingerLoading: false };\r\n    case ENTER_PLAYMODE:\r\n      return {\r\n        ...state,\r\n        onAir: false,\r\n        playMode: true,\r\n        gameLoading: true,\r\n        pianoLoading: true,\r\n        canvasSize: undefined\r\n      };\r\n    case EXIT_PLAYMODE:\r\n      return {\r\n        ...state,\r\n        onAir: false,\r\n        playMode: false,\r\n        gameLoading: true,\r\n        pianoLoading: true,\r\n        fingerLoading: true,\r\n        canvasSize: undefined\r\n      };\r\n    case START_PLAYER:\r\n      return { ...state, onAir: true };\r\n    case STOP_PLAYER:\r\n      return { ...state, onAir: false };\r\n    case RESIZE_PLAYER:\r\n      return { ...state, onAir: false, pianoLoading: true, gameLoading: true };\r\n    case RESET_PLAYER:\r\n      return { ...state, loading: true, onAir: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { ResetPlayer } from \"../_helpers/playerApi\";\r\n\r\nexport const REQUEST_PLAYER = \"REQUEST_PLAYER\";\r\nexport const RESET_PLAYER = \"RESET_PLAYER\";\r\nexport const START_PLAYER = \"START_PLAYER\";\r\nexport const STOP_PLAYER = \"STOP_PLAYER\";\r\nexport const RESIZE_PLAYER = \"RESIZE_PLAYER\";\r\nexport const ENTER_PLAYMODE = \"ENTER_PLAYMODE\";\r\nexport const EXIT_PLAYMODE = \"EXIT_PLAYMODE\";\r\n\r\nexport const DRAW_FINGER = \"DRAW_FINGER\"\r\nexport const DRAW_PIANO = \"DRAW_PIANO\"\r\nexport const DRAW_GAME = \"DRAW_GAME\"\r\n\r\nexport interface IMelodition {\r\n  playMode: boolean,\r\n  loading: boolean,\r\n  octave: number,\r\n  onAir: boolean,\r\n  tapSize: number,\r\n  fingerLoading: boolean,\r\n  pianoLoading: boolean,\r\n  gameLoading: boolean,\r\n  canvasSize?: ICanvas,\r\n  pianoSize?: IPianoSizes[],\r\n  handRefs?: HTMLCollection\r\n}\r\n\r\nexport interface PlayerDataInfo {\r\n  fingers: string[];\r\n  song: {\r\n    content: string;\r\n    edited: string;\r\n    id: number;\r\n    name: string;\r\n  }\r\n  track: {\r\n    id: number;\r\n    name: string;\r\n  }\r\n}\r\nexport interface IQueue {\r\n  target: any,\r\n  preset: any,\r\n  when: any,\r\n  pitches: any,\r\n  duration: any,\r\n  volume: any,\r\n  slides?: any\r\n}\r\nexport interface IEnvelope {\r\n  envelope: any,\r\n  zone: any,\r\n  volume: any,\r\n  startWhen: any,\r\n  waveDuration: any,\r\n  duration: any\r\n}\r\nexport interface ISetup {\r\n  target: any,\r\n  when: any,\r\n  duration: any\r\n}\r\nexport interface IPianoSizes {\r\n  left: number,\r\n  center: number,\r\n  width: number\r\n  key: string\r\n}\r\nexport interface ICanvas {\r\n  width: number;\r\n  height: number;\r\n  baseLine: number;\r\n  pianoLeft: number;\r\n}\r\nexport interface DrawPiano {\r\n  type: typeof DRAW_PIANO;\r\n  payload?: {\r\n    pianoSize: IPianoSizes[]\r\n    canvasSize: ICanvas\r\n    tapSize: number\r\n  }\r\n}\r\nexport interface DrawGame {\r\n  type: typeof DRAW_GAME;\r\n}\r\nexport interface DrawFinger {\r\n  type: typeof DRAW_FINGER;\r\n}\r\n\r\nexport interface StartPlayers {\r\n  type: typeof START_PLAYER;\r\n}\r\nexport interface StopPlayers {\r\n  type: typeof STOP_PLAYER;\r\n}\r\nexport interface ResizePlayers {\r\n  type: typeof RESIZE_PLAYER;\r\n}\r\n\r\nexport interface ResetPlayers {\r\n  type: typeof RESET_PLAYER;\r\n}\r\nexport interface RequestPlayers {\r\n  type: typeof REQUEST_PLAYER;\r\n  payload: ResetPlayer;\r\n}\r\nexport interface EnterPlayModeAction {\r\n  type: typeof ENTER_PLAYMODE;\r\n}\r\nexport interface ExitPlayModeAction {\r\n  type: typeof EXIT_PLAYMODE;\r\n}\r\n\r\nexport type PlayerActionTypes =\r\n  | DrawFinger\r\n  | DrawPiano\r\n  | DrawGame\r\n  | ResizePlayers\r\n  | RequestPlayers\r\n  | StartPlayers\r\n  | StopPlayers\r\n  | ResetPlayers\r\n  | EnterPlayModeAction\r\n  | ExitPlayModeAction;\r\n","import {\r\n  REQUEST_POST,\r\n  SUCCESS_POST,\r\n  FAILURE_POST,\r\n  REQUEST_POSTS,\r\n  SUCCESS_POSTS,\r\n  FAILURE_POSTS,\r\n  PostActionTypes,\r\n  DefaultPostState,\r\n  DefaultPostsState,\r\n} from \"../_types/post.types\";\r\n\r\nconst postsReducerDefaultState: DefaultPostsState = {\r\n  data: [],\r\n  loading: true,\r\n  error: 'Not Found',\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const postsReducer = (\r\n  state = postsReducerDefaultState,\r\n  action: PostActionTypes\r\n): DefaultPostsState => {\r\n  switch (action.type) {\r\n    case REQUEST_POSTS:\r\n      return state;\r\n    case SUCCESS_POSTS:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case FAILURE_POSTS:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst postReducerDefaultState: DefaultPostState = {\r\n  loading: true,\r\n  error: 'Not Found'\r\n};\r\n\r\nexport const postReducer = (\r\n  state = postReducerDefaultState,\r\n  action: PostActionTypes\r\n): DefaultPostState => {\r\n  switch (action.type) {\r\n    case REQUEST_POST:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_POST:\r\n      if (action.data === undefined) {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };\r\n      }\r\n    case FAILURE_POST:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const REQUEST_POSTS = \"REQUEST_POSTS\";\r\nexport const SUCCESS_POSTS = \"SUCCESS_POSTS\";\r\nexport const FAILURE_POSTS = \"FAILURE_POSTS\";\r\n\r\nexport const REQUEST_POST = \"REQUEST_POST\";\r\nexport const SUCCESS_POST = \"SUCCESS_POST\";\r\nexport const FAILURE_POST = \"FAILURE_POST\";\r\n\r\nexport interface DefaultPostsState {\r\n  data: IPost[];\r\n  error: string;\r\n  loading: boolean;\r\n  nextLoad: number;\r\n}\r\nexport interface DefaultPostState {\r\n  data?: IPost;\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\nexport interface IPost {\r\n  id: number,\r\n  title: string,\r\n  content: string,\r\n  slug: string,\r\n  excerpt: string,\r\n  date: string,\r\n  author: string,\r\n  featured_img: string,\r\n  categories: string[]\r\n  tags: string[]\r\n}\r\n\r\nexport interface RequestPosts {\r\n  type: typeof REQUEST_POSTS;\r\n}\r\nexport interface SeccessPosts {\r\n  type: typeof SUCCESS_POSTS;\r\n  payload: {\r\n    data: IPost[];\r\n    nextLoad: number;\r\n  }\r\n}\r\nexport interface FailurePosts {\r\n  type: typeof FAILURE_POSTS;\r\n  error: string;\r\n}\r\n\r\nexport interface RequestPost {\r\n  type: typeof REQUEST_POST;\r\n}\r\nexport interface SeccessPost {\r\n  type: typeof SUCCESS_POST;\r\n  data: IPost;\r\n}\r\nexport interface FailurePost {\r\n  type: typeof FAILURE_POST;\r\n  error: string;\r\n}\r\n\r\nexport type PostActionTypes =\r\n  | RequestPosts\r\n  | SeccessPosts\r\n  | FailurePosts\r\n  | RequestPost\r\n  | SeccessPost\r\n  | FailurePost;\r\n","import {\r\n  SAVE_GUIDES,\r\n  REQUEST_GUIDE,\r\n  SUCCESS_GUIDE,\r\n  FAILURE_GUIDE,\r\n  REQUEST_GUIDES,\r\n  SUCCESS_GUIDES,\r\n  FAILURE_GUIDES,\r\n  GuideActionTypes,\r\n  DefaultGuideState,\r\n  DefaultGuidesState,\r\n} from \"../_types/guide.types\";\r\n\r\nconst guidesReducerDefaultState: DefaultGuidesState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const guidesReducer = (\r\n  state = guidesReducerDefaultState,\r\n  action: GuideActionTypes\r\n): DefaultGuidesState => {\r\n  switch (action.type) {\r\n    case REQUEST_GUIDES:\r\n      return state;\r\n    case SUCCESS_GUIDES:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_GUIDES:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_GUIDES:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst guideReducerDefaultState: DefaultGuideState = {\r\n  loading: true,\r\n  error: \"Not Found\",\r\n};\r\n\r\nexport const guideReducer = (\r\n  state = guideReducerDefaultState,\r\n  action: GuideActionTypes\r\n): DefaultGuideState => {\r\n  switch (action.type) {\r\n    case REQUEST_GUIDE:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_GUIDE:\r\n      return {\r\n        ...state,\r\n        data: action.data,\r\n        loading: false,\r\n      };\r\n    case FAILURE_GUIDE:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { ICourse } from \"./course.types\";\r\nimport { ILesson } from \"./lesson.types\";\r\n\r\nexport const REQUEST_GUIDES = \"REQUEST_GUIDES\";\r\nexport const SUCCESS_GUIDES = \"SUCCESS_GUIDES\";\r\nexport const FAILURE_GUIDES = \"FAILURE_GUIDES\";\r\n\r\nexport const SAVE_GUIDES = \"SAVE_GUIDES\";\r\n\r\nexport const REQUEST_GUIDE = \"REQUEST_GUIDE\";\r\nexport const SUCCESS_GUIDE = \"SUCCESS_GUIDE\";\r\nexport const FAILURE_GUIDE = \"FAILURE_GUIDE\";\r\n\r\nexport interface DefaultGuidesState {\r\n    data: IGuide[];\r\n    error: string;\r\n    loading: boolean;\r\n    nextLoad: number;\r\n}\r\nexport interface DefaultGuideState {\r\n    data?: IGuide;\r\n    error: string;\r\n    loading: boolean;\r\n}\r\n\r\nexport interface IGuide {\r\n    title: string;\r\n    id: number;\r\n    slug: string;\r\n    teacher: string;\r\n    description: string;\r\n    instrument_id: number;\r\n    instrument_name: string;\r\n    color: string;\r\n    thumbnails: ThumbnailsInfo;\r\n    guide_select: GuideSelect[];\r\n}\r\nexport type GuideSelect = {\r\n    exercise_description: string;\r\n    exercise: ILesson[];\r\n    course_description: string;\r\n    course: ICourse[];\r\n}\r\ntype ThumbnailsInfo = {\r\n    thumbnail: string;\r\n    medium: string;\r\n    medium_large: string;\r\n    large: string;\r\n    '1536x1536': string;\r\n    '2048x2048': string;\r\n};\r\n\r\nexport interface RequestGuides {\r\n    type: typeof REQUEST_GUIDES;\r\n}\r\nexport interface SeccessGuides {\r\n    type: typeof SUCCESS_GUIDES;\r\n    payload: {\r\n        data: IGuide[];\r\n        nextLoad: number;\r\n    }\r\n}\r\n\r\nexport interface SaveGuides {\r\n    type: typeof SAVE_GUIDES;\r\n    data: IGuide[];\r\n}\r\n\r\nexport interface FailureGuides {\r\n    type: typeof FAILURE_GUIDES;\r\n    error: string;\r\n}\r\n\r\nexport interface RequestGuide {\r\n    type: typeof REQUEST_GUIDE;\r\n}\r\nexport interface SeccessGuide {\r\n    type: typeof SUCCESS_GUIDE;\r\n    data: IGuide;\r\n}\r\nexport interface FailureGuide {\r\n    type: typeof FAILURE_GUIDE;\r\n    error: string;\r\n}\r\n\r\nexport type GuideActionTypes =\r\n    | RequestGuides\r\n    | SeccessGuides\r\n    | FailureGuides\r\n    | RequestGuide\r\n    | SeccessGuide\r\n    | FailureGuide\r\n    | SaveGuides;\r\n","import {\r\n  SAVE_LESSONS,\r\n  REQUEST_LESSON,\r\n  SUCCESS_LESSON,\r\n  FAILURE_LESSON,\r\n  REQUEST_LESSONS,\r\n  SUCCESS_LESSONS,\r\n  FAILURE_LESSONS,\r\n  LessonActionTypes,\r\n  DefaultLessonState,\r\n  DefaultLessonsState,\r\n} from \"../_types/lesson.types\";\r\n\r\nconst lessonsReducerDefaultState: DefaultLessonsState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const lessonsReducer = (\r\n  state = lessonsReducerDefaultState,\r\n  action: LessonActionTypes\r\n): DefaultLessonsState => {\r\n  switch (action.type) {\r\n    case REQUEST_LESSONS:\r\n      return state;\r\n    case SUCCESS_LESSONS:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_LESSONS:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_LESSONS:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst lessonReducerDefaultState: DefaultLessonState = {\r\n  loading: true,\r\n  error: \"Not Found\",\r\n};\r\n\r\nexport const lessonReducer = (\r\n  state = lessonReducerDefaultState,\r\n  action: LessonActionTypes\r\n): DefaultLessonState => {\r\n  switch (action.type) {\r\n    case REQUEST_LESSON:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_LESSON:\r\n      return {\r\n        ...state,\r\n        data: action.data,\r\n        loading: false,\r\n      };\r\n    case FAILURE_LESSON:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","export const REQUEST_LESSONS = \"REQUEST_LESSONS\";\r\nexport const SUCCESS_LESSONS = \"SUCCESS_LESSONS\";\r\nexport const FAILURE_LESSONS = \"FAILURE_LESSONS\";\r\n\r\nexport const SAVE_LESSONS = \"SAVE_LESSONS\";\r\n\r\nexport const REQUEST_LESSON = \"REQUEST_LESSON\";\r\nexport const SUCCESS_LESSON = \"SUCCESS_LESSON\";\r\nexport const FAILURE_LESSON = \"FAILURE_LESSON\";\r\n\r\nexport interface DefaultLessonsState {\r\n  data: ILesson[];\r\n  error: string;\r\n  loading: boolean;\r\n  nextLoad: number;\r\n}\r\nexport interface DefaultLessonState {\r\n  data?: ILesson;\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\nexport interface ILesson {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  author: string;\r\n  excerpt: string;\r\n  featured_img: string;\r\n  slug: string;\r\n  info: LessonInfo;\r\n}\r\nexport type LessonInfo = {\r\n  series: infoDetails;\r\n  instrument: infoDetails;\r\n  grade: infoDetails;\r\n  genre: infoDetails;\r\n};\r\n\r\ntype infoDetails = {\r\n  name: string,\r\n  id: number,\r\n  img: string,\r\n  color: string,\r\n  description: string\r\n}\r\n\r\nexport interface RequestLessons {\r\n  type: typeof REQUEST_LESSONS;\r\n}\r\nexport interface SeccessLessons {\r\n  type: typeof SUCCESS_LESSONS;\r\n  payload: {\r\n    data: ILesson[];\r\n    nextLoad: number;\r\n  }\r\n}\r\nexport interface FailureLessons {\r\n  type: typeof FAILURE_LESSONS;\r\n  error: string;\r\n}\r\n\r\nexport interface SaveLessons {\r\n  type: typeof SAVE_LESSONS;\r\n  data: ILesson[];\r\n}\r\n\r\nexport interface RequestLesson {\r\n  type: typeof REQUEST_LESSON;\r\n}\r\nexport interface SeccessLesson {\r\n  type: typeof SUCCESS_LESSON;\r\n  data: ILesson;\r\n}\r\nexport interface FailureLesson {\r\n  type: typeof FAILURE_LESSON;\r\n  error: string;\r\n}\r\n\r\n\r\nexport type LessonActionTypes =\r\n  | RequestLessons\r\n  | SeccessLessons\r\n  | FailureLessons\r\n  | RequestLesson\r\n  | SeccessLesson\r\n  | FailureLesson\r\n  | SaveLessons;\r\n","import {\r\n  SAVE_COURSES,\r\n  REQUEST_COURSE,\r\n  SUCCESS_COURSE,\r\n  FAILURE_COURSE,\r\n  REQUEST_COURSES,\r\n  SUCCESS_COURSES,\r\n  FAILURE_COURSES,\r\n  CourseActionTypes,\r\n  DefaultCourseState,\r\n  DefaultCoursesState,\r\n} from \"../_types/course.types\";\r\n\r\nconst coursesReducerDefaultState: DefaultCoursesState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const coursesReducer = (\r\n  state = coursesReducerDefaultState,\r\n  action: CourseActionTypes\r\n): DefaultCoursesState => {\r\n  switch (action.type) {\r\n    case REQUEST_COURSES:\r\n      return state;\r\n    case SUCCESS_COURSES:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_COURSES:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_COURSES:\r\n      return {\r\n        data: [],\r\n        nextLoad: 0,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst courseReducerDefaultState: DefaultCourseState = {\r\n  loading: true,\r\n  error: 'Not Found',\r\n};\r\n\r\nexport const courseReducer = (\r\n  state = courseReducerDefaultState,\r\n  action: CourseActionTypes\r\n): DefaultCourseState => {\r\n  switch (action.type) {\r\n    case REQUEST_COURSE:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_COURSE:\r\n      if (action.data === undefined) {\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };\r\n      }\r\n    case FAILURE_COURSE:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { ILesson } from \"./lesson.types\";\r\n\r\nexport const REQUEST_COURSES = \"REQUEST_COURSES\";\r\nexport const SUCCESS_COURSES = \"SUCCESS_COURSES\";\r\nexport const FAILURE_COURSES = \"FAILURE_COURSES\";\r\n\r\nexport const SAVE_COURSES = \"SAVE_COURSES\";\r\n\r\nexport const REQUEST_COURSE = \"REQUEST_COURSE\";\r\nexport const SUCCESS_COURSE = \"SUCCESS_COURSE\";\r\nexport const FAILURE_COURSE = \"FAILURE_COURSE\";\r\n\r\nexport interface DefaultCoursesState {\r\n    data: ICourse[];\r\n    error: string;\r\n    loading: boolean;\r\n    nextLoad: number;\r\n}\r\n\r\nexport interface DefaultCourseState {\r\n    data?: ICourse;\r\n    error: string;\r\n    loading: boolean;\r\n}\r\n\r\nexport interface ICourse {\r\n    title: string;\r\n    id: number;\r\n    slug: string;\r\n    content: string;\r\n    teacher: string;\r\n    description: string;\r\n    instrument_id: number,\r\n    instrument_name: string,\r\n    genre_id: number,\r\n    genre_name: string,\r\n    grade: string,\r\n    color: string,\r\n    thumbnails: ThumbnailsInfo;\r\n    course_select: ILesson[];\r\n}\r\n\r\ntype ThumbnailsInfo = {\r\n    thumbnail: string;\r\n    medium: string;\r\n    medium_large: string;\r\n    large: string;\r\n    '1536x1536': string;\r\n    '2048x2048': string;\r\n};\r\n\r\nexport interface RequestCourses {\r\n    type: typeof REQUEST_COURSES;\r\n}\r\nexport interface SeccessCourses {\r\n    type: typeof SUCCESS_COURSES;\r\n    payload: {\r\n        data: ICourse[];\r\n        nextLoad: number;\r\n    }\r\n}\r\nexport interface FailureCourses {\r\n    type: typeof FAILURE_COURSES;\r\n    error: string;\r\n}\r\n\r\nexport interface SaveGuides {\r\n    type: typeof SAVE_COURSES;\r\n    data: ICourse[];\r\n}\r\n\r\nexport interface RequestCourse {\r\n    type: typeof REQUEST_COURSE;\r\n}\r\nexport interface SeccessCourse {\r\n    type: typeof SUCCESS_COURSE;\r\n    data: ICourse;\r\n}\r\nexport interface FailureCourse {\r\n    type: typeof FAILURE_COURSE;\r\n    error: string;\r\n}\r\n\r\nexport type CourseActionTypes =\r\n    | RequestCourses\r\n    | SeccessCourses\r\n    | FailureCourses\r\n    | RequestCourse\r\n    | SeccessCourse\r\n    | FailureCourse\r\n    | SaveGuides;\r\n","import {\r\n  SAVE_EXERCISES,\r\n  REQUEST_EXERCISE,\r\n  SUCCESS_EXERCISE,\r\n  FAILURE_EXERCISE,\r\n  REQUEST_EXERCISES,\r\n  SUCCESS_EXERCISES,\r\n  FAILURE_EXERCISES,\r\n  ExerciseActionTypes,\r\n  DefaultExerciseState,\r\n  DefaultExercisesState,\r\n} from \"../_types/exercise.types\";\r\n\r\nconst exercisesReducerDefaultState: DefaultExercisesState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const exercisesReducer = (\r\n  state = exercisesReducerDefaultState,\r\n  action: ExerciseActionTypes\r\n): DefaultExercisesState => {\r\n  switch (action.type) {\r\n    case REQUEST_EXERCISES:\r\n      return state;\r\n    case SUCCESS_EXERCISES:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_EXERCISES:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_EXERCISES:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst exerciseReducerDefaultState: DefaultExerciseState = {\r\n  loading: true,\r\n  error: \"Not Found\",\r\n};\r\n\r\nexport const exerciseReducer = (\r\n  state = exerciseReducerDefaultState,\r\n  action: ExerciseActionTypes\r\n): DefaultExerciseState => {\r\n  switch (action.type) {\r\n    case REQUEST_EXERCISE:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_EXERCISE:\r\n      if (action.data === undefined) {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };;\r\n      }\r\n    case FAILURE_EXERCISE:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { ILesson } from \"./lesson.types\";\r\n\r\nexport const REQUEST_EXERCISES = \"REQUEST_EXERCISES\";\r\nexport const SUCCESS_EXERCISES = \"SUCCESS_EXERCISES\";\r\nexport const FAILURE_EXERCISES = \"FAILURE_EXERCISES\";\r\n\r\nexport const SAVE_EXERCISES = \"SAVE_EXERCISES\";\r\n\r\nexport const REQUEST_EXERCISE = \"REQUEST_EXERCISE\";\r\nexport const SUCCESS_EXERCISE = \"SUCCESS_EXERCISE\";\r\nexport const FAILURE_EXERCISE = \"FAILURE_EXERCISE\";\r\n\r\nexport interface DefaultExercisesState {\r\n  data: ILesson[];\r\n  error: string;\r\n  loading: boolean;\r\n  nextLoad: number;\r\n}\r\nexport interface DefaultExerciseState {\r\n  data?: ILesson;\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\nexport interface RequestExercises {\r\n  type: typeof REQUEST_EXERCISES;\r\n}\r\nexport interface SeccessExercises {\r\n  type: typeof SUCCESS_EXERCISES;\r\n  payload: {\r\n    data: ILesson[];\r\n    nextLoad: number;\r\n  }\r\n}\r\n\r\nexport interface SaveExercises {\r\n  type: typeof SAVE_EXERCISES;\r\n  data: ILesson[];\r\n}\r\n\r\nexport interface FailureExercises {\r\n  type: typeof FAILURE_EXERCISES;\r\n  error: string;\r\n}\r\n\r\nexport interface RequestExercise {\r\n  type: typeof REQUEST_EXERCISE;\r\n}\r\nexport interface SeccessExercise {\r\n  type: typeof SUCCESS_EXERCISE;\r\n  data: ILesson;\r\n  error?: string;\r\n}\r\nexport interface FailureExercise {\r\n  type: typeof FAILURE_EXERCISE;\r\n  error: string;\r\n}\r\n\r\nexport type ExerciseActionTypes =\r\n  | RequestExercises\r\n  | SeccessExercises\r\n  | FailureExercises\r\n  | RequestExercise\r\n  | SeccessExercise\r\n  | FailureExercise\r\n  | SaveExercises;\r\n","import { History } from 'history';\r\nimport { combineReducers } from \"redux\";\r\nimport { connectRouter } from 'connected-react-router'\r\n\r\nimport { authReducer } from \"./user.reducer\";\r\nimport { profileReducer } from \"./profile.reducer\";\r\nimport { favoriteReducer } from \"./favorite.reducer\";\r\nimport { snackbarReducer } from \"./snackbar.reducer\";\r\nimport { playerReducer } from './player.reducer';\r\nimport { postReducer, postsReducer } from \"./post.reducer\";\r\nimport { guideReducer, guidesReducer } from \"./guide.reducer\";\r\nimport { lessonReducer, lessonsReducer } from \"./lesson.reducer\";\r\nimport { courseReducer, coursesReducer } from \"./course.reducer\";\r\nimport { exerciseReducer, exercisesReducer } from \"./exercise.reducer\";\r\n\r\nconst rootReducer = (history: History) => combineReducers({\r\n    router: connectRouter(history),\r\n    single: combineReducers({\r\n        post: postReducer,\r\n        guide: guideReducer,\r\n        course: courseReducer,\r\n        lesson: lessonReducer,\r\n        exercise: exerciseReducer,\r\n    }),\r\n    bank: combineReducers({\r\n        posts: postsReducer,\r\n        guides: guidesReducer,\r\n        courses: coursesReducer,\r\n        lessons: lessonsReducer,\r\n        exercises: exercisesReducer,\r\n    }),\r\n    melodition: playerReducer,\r\n    user: combineReducers({\r\n        profile: profileReducer,\r\n        favorites: favoriteReducer,\r\n    }),\r\n    snackbar: snackbarReducer,\r\n    auth: authReducer,\r\n});\r\n\r\nexport default rootReducer","import { createBrowserHistory } from 'history'\nimport thunk, { ThunkMiddleware } from \"redux-thunk\";\n\nimport { applyMiddleware, compose, createStore } from 'redux'\nimport { routerMiddleware } from 'connected-react-router'\nimport createRootReducer from '../_reducers'\nimport { AppActions, AppState } from '../_types';\n\nexport const history = createBrowserHistory()\n\nexport const store = configureStore();\n\nexport default function configureStore(preloadingState?: any) {\n  const composeEnhancer: typeof compose = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n  const store = createStore(\n    createRootReducer(history),\n    preloadingState,\n    composeEnhancer(\n      applyMiddleware(\n        routerMiddleware(history),\n        thunk as ThunkMiddleware<AppState, AppActions>,\n      ),\n    ),\n  )\n\n  return store\n}","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Route, RouteProps } from \"react-router\";\r\nimport { AppState } from \"../_types\";\r\n\r\ninterface ProtectedRouteProps extends RouteProps {\r\n  loggedIn?: boolean;\r\n  isAllowed?: boolean;\r\n  restrictedPath: string;\r\n  authenticationPath: string;\r\n}\r\n\r\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = (props) => {\r\n  let redirectPath = \"\";\r\n  if (!props.loggedIn) {\r\n    redirectPath = props.authenticationPath;\r\n  }\r\n  if (props.loggedIn && !props.isAllowed) {\r\n    redirectPath = props.restrictedPath;\r\n  }\r\n\r\n  if (redirectPath) {\r\n    const renderComponent = () => <Redirect to={{ pathname: redirectPath }} />;\r\n    return <Route {...props} component={renderComponent} render={undefined} />;\r\n  } else {\r\n    return <Route {...props} />;\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n  const { auth } = state;\r\n  return {\r\n    loggedIn: auth.loggedIn,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProtectedRoute);\r\n","import React from \"react\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { IconButton, Slide } from \"@material-ui/core\";\r\nimport { TransitionProps } from \"@material-ui/core/transitions/transition\";\r\nimport { UniqId } from \"../../../_helpers/constants\";\r\nimport {\r\n  ISnack,\r\n  CLEAR_SNACKBAR,\r\n  SHOW_SNACKBAR,\r\n} from \"../../../_types/snackbar.types\";\r\nimport { VariantType } from \"notistack\";\r\n\r\nexport const errorHandler = (err: any, target: any): void => {\r\n  const error: string = err.response?.data.message.toString();\r\n  if (error) {\r\n    store.dispatch({ type: target, error });\r\n    store.dispatch({\r\n      type: SHOW_SNACKBAR,\r\n      snackbar: snackBarMaker(error, \"error\"),\r\n    });\r\n  }\r\n};\r\nexport const seccessHandler = (err: any, target: any): void => {\r\n  const error: string = err.response.data.message.toString();\r\n  store.dispatch({ type: target, error });\r\n  store.dispatch({\r\n    type: SHOW_SNACKBAR,\r\n    snackbar: snackBarMaker(error, \"success\"),\r\n  });\r\n};\r\nexport const warningHandler = (err: any, target: any): void => {\r\n  const error: string = err.response.data.message.toString();\r\n  store.dispatch({ type: target, error });\r\n  store.dispatch({\r\n    type: SHOW_SNACKBAR,\r\n    snackbar: snackBarMaker(error, \"warning\"),\r\n  });\r\n};\r\n\r\nexport const snackBarMaker = (\r\n  message: string,\r\n  variant: VariantType\r\n): ISnack => {\r\n  return {\r\n    message: message.replace(/<[^>]+>/g, \"\"),\r\n    key: UniqId(),\r\n    options: {\r\n      TransitionComponent: (props: TransitionProps) => (\r\n        <Slide {...props} direction=\"left\" />\r\n      ),\r\n      anchorOrigin: { horizontal: \"left\", vertical: \"bottom\" },\r\n      variant: variant,\r\n      autoHideDuration: variant === \"error\" ? null : 5000,\r\n      action: (key: string) => (\r\n        <IconButton\r\n          style={{ borderRadius: 5 }}\r\n          color=\"inherit\"\r\n          size=\"small\"\r\n          aria-label=\"close\"\r\n          component=\"span\"\r\n          onClick={() =>\r\n            store.dispatch({\r\n              type: CLEAR_SNACKBAR,\r\n              dismissAll: !key,\r\n              key,\r\n            })\r\n          }\r\n        >\r\n          <Close />\r\n        </IconButton>\r\n      ),\r\n    },\r\n  };\r\n};\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { store } from \"../../_store/store.config\";\r\nimport { SHOW_SNACKBAR, CLEAR_SNACKBAR } from \"../../_types/snackbar.types\";\r\nimport { snackBarMaker } from \"../Layout/SnackBar/alert\";\r\n\r\ninterface AboutProps {}\r\n\r\nconst About: React.FC<AboutProps> = () => {\r\n  const [input, setInput] = useState<string>(\"\");\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    const { value } = e.target;\r\n    setInput(value);\r\n  };\r\n  return (\r\n    <>\r\n      <h1>About</h1>\r\n      <p>\r\n        {\" \"}\r\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque ipsum\r\n        praesentium rem asperiores fuga illo et, architecto doloremque nulla.\r\n        Magni perspiciatis praesentium facere facilis, ullam officiis saepe sunt\r\n        amet nulla?\r\n      </p>\r\n      <input type=\"text\" onChange={(e) => handleChange(e)} value={input} />\r\n      <Button\r\n        onClick={() =>\r\n          store.dispatch({\r\n            type: SHOW_SNACKBAR,\r\n            snackbar: snackBarMaker(input, \"success\"),\r\n          })\r\n        }\r\n      >\r\n        Snack\r\n      </Button>\r\n      <Button\r\n        onClick={() =>\r\n          store.dispatch({\r\n            type: CLEAR_SNACKBAR,\r\n            dismissAll: true,\r\n          })\r\n        }\r\n      >\r\n        Clear\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\nexport default About;\r\n","import { Dispatch } from \"react\";\r\nimport { go, goBack, push } from 'connected-react-router'\r\nimport {\r\n  LOGIN_FAILURE,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  USER_LOGOUT,\r\n  REGISTER_FAILURE,\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  LOST_REQUEST,\r\n  LOST_SUCCESS,\r\n  CHANGE_THEME,\r\n  LOST_FAILURE,\r\n  IRegister,\r\n  IUser,\r\n  ILost,\r\n} from \"../_types/user.types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { SHOW_SNACKBAR } from \"../_types/snackbar.types\";\r\nimport { errorHandler, snackBarMaker } from \"../components/Layout/SnackBar/alert\";\r\nimport { API } from \"../_helpers/api\";\r\n\r\nexport const loginRequest = (user: IUser) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: LOGIN_REQUEST });\r\n    API.post(`/jwt-auth/v1/token`, user)\r\n      .then(res => {\r\n        dispatch({ type: LOGIN_SUCCESS, user: res.data });\r\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n        API.defaults.headers.common = { Authorization: \"Bearer \" + res.data.token };\r\n        dispatch(goBack());\r\n        dispatch({\r\n          type: SHOW_SNACKBAR,\r\n          snackbar: snackBarMaker(\r\n            `${res.data.user_display_name} logged in successfully.`,\r\n            \"success\"\r\n          ),\r\n        });\r\n      })\r\n      .catch(err => errorHandler(err, LOGIN_FAILURE))\r\n  }\r\n)\r\nexport const changeTheme = (theme: \"light\" | \"dark\") => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: CHANGE_THEME, theme });\r\n  }\r\n)\r\n\r\nexport const logoutRequest = () => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    localStorage.removeItem(\"user\");\r\n    API.defaults.headers.common = {};\r\n    dispatch(go(0));\r\n    dispatch({ type: USER_LOGOUT });\r\n  }\r\n)\r\n\r\nexport const registerRequest = (user: IRegister) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: REGISTER_REQUEST });\r\n    API.post(`/jwt-auth/v1/register`, user)\r\n      .then(\r\n        (res) => {\r\n          dispatch({ type: REGISTER_SUCCESS, user: res.data });\r\n          dispatch(push(\"/login\"));\r\n          dispatch({\r\n            type: SHOW_SNACKBAR,\r\n            snackbar: snackBarMaker(res.data.message, \"success\"),\r\n          });\r\n        })\r\n      .catch(err => errorHandler(err, REGISTER_FAILURE))\r\n  }\r\n)\r\n\r\nexport const lostRequest = (user: ILost) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: LOST_REQUEST });\r\n\r\n    API.post(`/jwt-auth/v1/lostpassword`, user)\r\n      .then(\r\n        (res) => {\r\n          const message: string = res.data.message.toString();\r\n          dispatch({ type: LOST_SUCCESS, message });\r\n          dispatch(push(\"/login\"));\r\n          dispatch({\r\n            type: SHOW_SNACKBAR,\r\n            snackbar: snackBarMaker(message, \"success\"),\r\n          });\r\n        })\r\n      .catch(err => {\r\n        errorHandler(err, LOST_FAILURE)\r\n      })\r\n  }\r\n)\r\n","import Axios from \"axios\";\r\nimport { store } from \"../_store/store.config\";\r\nimport { logoutRequest } from \"../_actions/user.actions\";\r\n\r\nexport const authHeader = (): HeadersInit => {\r\n  const localUser = localStorage.getItem(\"user\");\r\n  let user: { token: string } = localUser ? JSON.parse(localUser) : null;\r\n  if (user?.token) {\r\n    return { Authorization: \"Bearer \" + user.token };\r\n  } else {\r\n    return {};\r\n  }\r\n}\r\nexport const API = Axios.create({\r\n  baseURL: \"https://panel.melodition.com/wp-json\",\r\n  headers: authHeader(),\r\n});\r\n\r\nAPI.interceptors.response.use(\r\n  res => {\r\n    return res;\r\n  },\r\n  err => {\r\n    console.log(err)\r\n    if (err.response.status === 403) {\r\n      if (/Expire/.test(err.response.data.code)) {\r\n        store.dispatch(logoutRequest())\r\n      }\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n)\r\nexport const AudioApi = Axios.create({ method: \"get\", responseType: \"arraybuffer\" });\r\n","import { Dispatch } from \"redux\";\r\nimport {\r\n  REQUEST_POSTS,\r\n  SUCCESS_POSTS,\r\n  FAILURE_POSTS,\r\n  REQUEST_POST,\r\n  SUCCESS_POST,\r\n  FAILURE_POST,\r\n} from \"../_types/post.types\";\r\nimport { AppState } from \"../_types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { getTheTime } from \"../_helpers/constants\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { API } from \"../_helpers/api\";\r\n\r\nexport const requestAllPost = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const postState = getState().bank.posts;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - postState.nextLoad;\r\n    if (postState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_POSTS });\r\n    API.get(`/post/v2`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_POSTS, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_POSTS))\r\n  }\r\n)\r\n\r\nexport const requestPost = (id: number) => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const postState = getState().bank.posts.data;\r\n\r\n    const found = postState?.find(post => post.id === id);\r\n    if (found) {\r\n      dispatch({ type: SUCCESS_POST, data: found })\r\n    } else {\r\n      dispatch({ type: REQUEST_POST });\r\n      API.get(`/post/v2?id=${id}`)\r\n        .then((res) => dispatch({ type: SUCCESS_POST, data: res.data[0] }))\r\n        .catch(err => errorHandler(err, FAILURE_POST))\r\n    }\r\n  }\r\n)","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../_store/store.config\";\r\nimport { IPost } from \"../../_types/post.types\";\r\nimport { thumbnailsFinder } from \"../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: \"140px\",\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  post: IPost;\r\n};\r\n\r\nexport const PostCard: React.FC<Props> = ({ post }) => {\r\n  const classes = useStyles();\r\n  const { title, featured_img, excerpt, author } = post;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/post/${post.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          height=\"140\"\r\n          component=\"img\"\r\n          alt={post.title}\r\n          title={post.title}\r\n          image={thumbnailsFinder(featured_img)}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {excerpt}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {author}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AppActions } from \"../../_types\";\r\nimport { IPost } from \"../../_types/post.types\";\r\nimport { AppState } from \"../../_types\";\r\nimport { requestAllPost } from \"../../_actions/post.actions\";\r\nimport { PostCard } from \"./PostCard\";\r\nimport {\r\n  Chip,\r\n  CircularProgress,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: theme.spacing(2, 1, 0, 2),\r\n    },\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 143px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: theme.spacing(1),\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface PostsPorps extends WithStyles<typeof useStyles> {\r\n  data: IPost[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = PostsPorps & LinkDispatchProps;\r\n\r\nexport class PostList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllPost();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <div className={classes.root}>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">پست ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <CircularProgress\r\n              color=\"secondary\"\r\n              className={classes.autoMargin}\r\n            />\r\n          ) : data.length ? (\r\n            data.map((post: IPost) => <PostCard key={post.id} post={post} />)\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllPost: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): PostsPorps => ({\r\n  classes: ownProps.classes,\r\n  ...state.bank.posts,\r\n});\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllPost: bindActionCreators(requestAllPost, dispatch),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(PostList));\r\n","import {\r\n  createStyles,\r\n  LinearProgress,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport { FormikErrors } from \"formik\";\r\nimport * as React from \"react\";\r\n\r\ndeclare global {\r\n  interface Window {\r\n    captchaOnLoad: () => void;\r\n    grecaptcha: ReCaptchaInstance;\r\n    webkitAudioContext: {\r\n      new (contextOptions?: AudioContextOptions | undefined): AudioContext;\r\n      prototype: AudioContext;\r\n    };\r\n    zones: any;\r\n  }\r\n}\r\n\r\ninterface ReCaptchaInstance {\r\n  ready: (cb: () => any) => any;\r\n  execute: (options: ReCaptchaExecuteOptions) => Promise<string>;\r\n  render: (id: string, options: ReCaptchaRenderOptions) => any;\r\n}\r\n\r\ninterface ReCaptchaExecuteOptions {\r\n  action: string;\r\n}\r\n\r\ninterface ReCaptchaRenderOptions {\r\n  callback: () => void;\r\n  sitekey: string;\r\n  size: \"normal\";\r\n  theme: \"dark\" | \"light\";\r\n}\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      position: \"relative\",\r\n      minHeight: 80,\r\n    },\r\n    captcha: {\r\n      zIndex: 2,\r\n      \"& > div:first-child\": {\r\n        margin: \"auto\",\r\n        \"& > div > iframe\": {\r\n          borderRadius: 4,\r\n          border: \"1px solid\",\r\n        },\r\n      },\r\n    },\r\n    captchaWarning: {\r\n      \"& > div:first-child\": {\r\n        margin: \"auto\",\r\n        \"& > div > iframe\": {\r\n          borderRadius: 4,\r\n          border: \"1px solid red\",\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\ninterface Props extends WithStyles<typeof useStyles> {\r\n  action: string;\r\n  theme: \"light\" | \"dark\";\r\n  onError: error;\r\n  onChange: (val: boolean) => void;\r\n}\r\ntype error =\r\n  | string\r\n  | false\r\n  | FormikErrors<any>\r\n  | string[]\r\n  | FormikErrors<any>[]\r\n  | undefined;\r\n\r\ninterface State {\r\n  readonly loading: boolean;\r\n}\r\n\r\nclass ReCaptcha extends React.PureComponent<Props, State> {\r\n  state: State = {\r\n    loading: true,\r\n  };\r\n\r\n  private script!: HTMLScriptElement;\r\n\r\n  componentDidMount(): void {\r\n    this.loadScript();\r\n  }\r\n\r\n  componentWillUnmount(): void {\r\n    document.body.removeChild(this.script);\r\n  }\r\n\r\n  render() {\r\n    const { classes, onError } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {this.state.loading && <LinearProgress color=\"secondary\" />}\r\n        <div\r\n          id=\"g-recaptcha\"\r\n          className={onError ? classes.captchaWarning : classes.captcha}\r\n        />\r\n        <Typography color=\"error\" variant=\"caption\">\r\n          {onError}\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private loadScript = (): void => {\r\n    window.captchaOnLoad = this.onLoad;\r\n\r\n    const url = \"https://www.google.com/recaptcha/api.js\";\r\n    const queryString = \"?onload=captchaOnLoad&render=explicit&hl=fa\";\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"text/javascript\";\r\n    script.src = url + queryString;\r\n    script.async = true;\r\n    script.defer = true;\r\n    this.script = document.body.appendChild(script);\r\n  };\r\n\r\n  private callback = () => {\r\n    this.props.onChange(true);\r\n  };\r\n\r\n  private onLoad = (): void => {\r\n    window.grecaptcha.render(\"g-recaptcha\", {\r\n      callback: this.callback,\r\n      sitekey: \"6Le8wccUAAAAAA0kNONoUC-NKPecGnUGKRY7zMno\",\r\n      size: \"normal\",\r\n      theme: this.props.theme,\r\n    });\r\n\r\n    window.grecaptcha.ready(() => {\r\n      this.setState({ loading: false });\r\n    });\r\n  };\r\n}\r\n\r\nexport default withStyles(useStyles)(ReCaptcha);\r\n","import React, { useCallback } from \"react\";\r\nimport { SwitchProps } from \"formik-material-ui\";\r\nimport ReCaptcha from \"./ReCaptcha\";\r\nimport { store } from \"../../../_store/store.config\";\r\n\r\nexport function Captcha(props: SwitchProps) {\r\n  const {\r\n    form: { setFieldValue, errors, touched },\r\n    field: { name },\r\n  } = props;\r\n\r\n  const theme = store.getState().auth.theme;\r\n  const onChange = useCallback(\r\n    (event) => {\r\n      setFieldValue(name, event ? true : false);\r\n    },\r\n    [setFieldValue, name]\r\n  );\r\n  return (\r\n    <ReCaptcha\r\n      action=\"login\"\r\n      theme={theme}\r\n      onChange={onChange}\r\n      onError={touched.recaptcha && errors.recaptcha}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n  Avatar,\r\n  CssBaseline,\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Link,\r\n  Grid,\r\n  Typography,\r\n  LinearProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../_types\";\r\nimport { AppActions } from \"../../_types\";\r\nimport { IUser } from \"../../_types/user.types\";\r\nimport { Captcha } from \"../Layout/Captcha/Captcha\";\r\nimport { loginRequest, logoutRequest } from \"../../_actions/user.actions\";\r\nimport { push } from \"connected-react-router\";\r\nimport { Path } from \"history\";\r\n\r\ninterface LoginPageProps {\r\n  loading: boolean;\r\n  loggedIn: boolean;\r\n}\r\n\r\ntype Props = LoginPageProps & LinkDispatchProps;\r\n\r\nclass LoginPage extends React.Component<Props> {\r\n  componentDidMount() {\r\n    if (this.props.loggedIn) {\r\n      this.props.push(\"/profile\");\r\n    }\r\n  }\r\n  render() {\r\n    const { loading, loggedIn } = this.props;\r\n    return !loggedIn ? (\r\n      <Container component=\"main\" maxWidth=\"xs\" style={{ paddingTop: \"10px\" }}>\r\n        <CssBaseline />\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Avatar style={{ margin: \"auto\" }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{\r\n              username: \"\",\r\n              password: \"\",\r\n              recaptcha: \"\",\r\n            }}\r\n            validationSchema={Yup.object().shape({\r\n              username: Yup.string()\r\n                .max(255)\r\n                .required(\"Email or Username is required\"),\r\n              password: Yup.string().max(255).required(\"Password is required\"),\r\n              recaptcha: Yup.boolean().required(\"ReCAPTCHA is required\"),\r\n            })}\r\n            onSubmit={(event: IUser, { resetForm }) => {\r\n              if (event.username && event.password) {\r\n                this.props.login({\r\n                  username: event.username,\r\n                  password: event.password,\r\n                });\r\n                resetForm({});\r\n              }\r\n            }}\r\n          >\r\n            <Form>\r\n              <Box mb={3}>\r\n                <Typography\r\n                  color=\"textSecondary\"\r\n                  align=\"center\"\r\n                  gutterBottom\r\n                  variant=\"body2\"\r\n                >\r\n                  Sign in on the internal platform\r\n                </Typography>\r\n              </Box>\r\n              <Grid item>\r\n                <Button\r\n                  fullWidth\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  type=\"submit\"\r\n                  disabled={true}\r\n                >\r\n                  Login with Google\r\n                </Button>\r\n              </Grid>\r\n              <Box mt={3} mb={1}>\r\n                <Typography\r\n                  align=\"center\"\r\n                  color=\"textSecondary\"\r\n                  variant=\"body1\"\r\n                >\r\n                  or login with username / email address\r\n                </Typography>\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={TextField}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Email Address/Username\"\r\n                  margin=\"normal\"\r\n                  name=\"username\"\r\n                  id=\"username\"\r\n                  placeholder=\"John\"\r\n                  type=\"username\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={TextField}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Password\"\r\n                  margin=\"normal\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={Captcha}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Recaptcha\"\r\n                  margin=\"normal\"\r\n                  name=\"recaptcha\"\r\n                  type=\"recaptcha\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              {loading && <LinearProgress color=\"secondary\" />}\r\n              <Box my={1}>\r\n                <Button\r\n                  color=\"secondary\"\r\n                  disabled={loading}\r\n                  fullWidth\r\n                  size=\"large\"\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                >\r\n                  Sign in\r\n                </Button>\r\n              </Box>\r\n              <Grid container style={{ textAlign: \"initial\" }}>\r\n                <Grid item xs>\r\n                  <Link\r\n                    color=\"secondary\"\r\n                    component={RouterLink}\r\n                    to=\"/lostpassword\"\r\n                    variant=\"body2\"\r\n                  >\r\n                    Forgot password?\r\n                  </Link>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Typography color=\"textSecondary\" variant=\"body2\">\r\n                    Don&apos;t have an account?\r\n                    <Link\r\n                      color=\"secondary\"\r\n                      component={RouterLink}\r\n                      to=\"/register\"\r\n                      variant=\"body2\"\r\n                    >\r\n                      Sign up\r\n                    </Link>\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n            </Form>\r\n          </Formik>\r\n        </div>\r\n      </Container>\r\n    ) : null;\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  login: (user: IUser) => void;\r\n  logout: () => void;\r\n  push: (path: Path) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): LoginPageProps => {\r\n  const { loggedIn, loading } = state.auth;\r\n  return {\r\n    loggedIn,\r\n    loading,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  login: bindActionCreators(loginRequest, dispatch),\r\n  logout: bindActionCreators(logoutRequest, dispatch),\r\n  push: bindActionCreators(push, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginPage);\r\n","import React from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n  Avatar,\r\n  CssBaseline,\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Typography,\r\n  LinearProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../_types\";\r\nimport { AppActions } from \"../../_types\";\r\nimport { ILost } from \"../../_types/user.types\";\r\nimport { lostRequest } from \"../../_actions/user.actions\";\r\nimport { Captcha } from \"../Layout/Captcha/Captcha\";\r\nimport { push } from \"connected-react-router\";\r\nimport { Path } from \"history\";\r\n\r\ninterface LostPageProps {\r\n  loading: boolean;\r\n  loggedIn: boolean;\r\n}\r\n\r\ntype Props = LostPageProps & LinkDispatchProps;\r\n\r\nclass LostPage extends React.Component<Props> {\r\n  componentDidMount() {\r\n    if (this.props.loggedIn) {\r\n      this.props.push(\"/\");\r\n    }\r\n  }\r\n  render() {\r\n    const { loading, loggedIn } = this.props;\r\n    return !loggedIn ? (\r\n      <Container component=\"main\" maxWidth=\"xs\" style={{ paddingTop: \"10px\" }}>\r\n        <CssBaseline />\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Avatar style={{ margin: \"auto\" }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Lost Password\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{\r\n              user_login: \"\",\r\n              recaptcha: \"\",\r\n            }}\r\n            validationSchema={Yup.object().shape({\r\n              user_login: Yup.string()\r\n                .max(255)\r\n                .required(\"Email or Username is required\"),\r\n              recaptcha: Yup.boolean().required(\"ReCAPTCHA is required\"),\r\n            })}\r\n            onSubmit={(event: ILost, { resetForm }) => {\r\n              if (event.user_login) {\r\n                this.props.lostRequest(event);\r\n              }\r\n              resetForm({});\r\n            }}\r\n          >\r\n            <Form>\r\n              <Box my={2}>\r\n                <Typography\r\n                  color=\"textSecondary\"\r\n                  align=\"center\"\r\n                  gutterBottom\r\n                  variant=\"body2\"\r\n                >\r\n                  Enter your email or user_login\r\n                </Typography>\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={TextField}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Email Address/Username\"\r\n                  margin=\"normal\"\r\n                  name=\"user_login\"\r\n                  id=\"user_login\"\r\n                  placeholder=\"John\"\r\n                  type=\"user_login\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={Captcha}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Recaptcha\"\r\n                  margin=\"normal\"\r\n                  name=\"recaptcha\"\r\n                  type=\"recaptcha\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              {loading && <LinearProgress color=\"secondary\" />}\r\n              <Box my={1}>\r\n                <Button\r\n                  color=\"secondary\"\r\n                  disabled={loading}\r\n                  fullWidth\r\n                  size=\"large\"\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                >\r\n                  Recover\r\n                </Button>\r\n              </Box>\r\n            </Form>\r\n          </Formik>\r\n        </div>\r\n      </Container>\r\n    ) : null;\r\n  }\r\n}\r\ninterface LinkDispatchProps {\r\n  lostRequest: (user: ILost) => void;\r\n  push: (path: Path) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): LostPageProps => {\r\n  const { loggedIn, loading } = state.auth;\r\n  return {\r\n    loggedIn,\r\n    loading,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>,\r\n  ownProps: LostPageProps\r\n): LinkDispatchProps => ({\r\n  lostRequest: bindActionCreators(lostRequest, dispatch),\r\n  push: bindActionCreators(push, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LostPage);\r\n","import React from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n  Avatar,\r\n  CssBaseline,\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  Container,\r\n  FormHelperText,\r\n  Link,\r\n  Typography,\r\n  LinearProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../_types\";\r\nimport { AppActions } from \"../../_types\";\r\nimport { IRegister } from \"../../_types/user.types\";\r\nimport { Captcha } from \"../Layout/Captcha/Captcha\";\r\nimport { registerRequest } from \"../../_actions/user.actions\";\r\nimport { push } from \"connected-react-router\";\r\nimport { Path } from \"history\";\r\n\r\ninterface RegisterPageProps {\r\n  loading: boolean;\r\n  loggedIn: boolean;\r\n}\r\n\r\ntype Props = RegisterPageProps & LinkDispatchProps;\r\n\r\nclass RegisterPage extends React.Component<Props> {\r\n  componentDidMount() {\r\n    if (this.props.loggedIn) {\r\n      this.props.push(\"/\");\r\n    }\r\n  }\r\n  render() {\r\n    const { loading, loggedIn } = this.props;\r\n    return !loggedIn ? (\r\n      <Container component=\"main\" maxWidth=\"xs\" style={{ paddingTop: \"10px\" }}>\r\n        <CssBaseline />\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Avatar style={{ margin: \"auto\" }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign Up\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{\r\n              email: \"\",\r\n              firstname: \"\",\r\n              lastname: \"\",\r\n              username: \"\",\r\n              password: \"\",\r\n              confirm_password: \"\",\r\n              recaptcha: false,\r\n              policy: false,\r\n            }}\r\n            validationSchema={Yup.object().shape({\r\n              email: Yup.string()\r\n                .email(\"Must be a valid email\")\r\n                .max(255)\r\n                .required(\"Email is required\"),\r\n              firstname: Yup.string()\r\n                .max(255)\r\n                .required(\"First name is required\"),\r\n              lastname: Yup.string().max(255).required(\"Last name is required\"),\r\n              username: Yup.string().max(255).required(\"User name is required\"),\r\n              password: Yup.string().max(255).required(\"Password is required\"),\r\n              confirm_password: Yup.string().oneOf(\r\n                [Yup.ref(\"password\"), \"\"],\r\n                \"Both password need to be the same\"\r\n              ),\r\n              policy: Yup.boolean().oneOf([true], \"This field must be checked\"),\r\n              recaptcha: Yup.boolean().oneOf(\r\n                [true],\r\n                \"This field must be checked\"\r\n              ),\r\n            })}\r\n            onSubmit={(e, { resetForm }) => {\r\n              if (\r\n                e.firstname &&\r\n                e.lastname &&\r\n                e.username &&\r\n                e.email &&\r\n                e.password\r\n              ) {\r\n                this.props.registerRequest({\r\n                  firstname: e.firstname,\r\n                  lastname: e.lastname,\r\n                  username: e.username,\r\n                  password: e.password,\r\n                  email: e.email,\r\n                });\r\n              }\r\n              resetForm({});\r\n            }}\r\n          >\r\n            {({ handleChange, values, touched, errors }) => (\r\n              <Form>\r\n                <Box mb={3}>\r\n                  <Typography\r\n                    color=\"textSecondary\"\r\n                    align=\"center\"\r\n                    gutterBottom\r\n                    variant=\"body2\"\r\n                  >\r\n                    Use your email to create new account\r\n                  </Typography>\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"نام\"\r\n                    margin=\"normal\"\r\n                    name=\"firstname\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"نام خانوادگی\"\r\n                    margin=\"normal\"\r\n                    name=\"lastname\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"نام کاربری\"\r\n                    margin=\"normal\"\r\n                    name=\"username\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"آدرس ایمیل\"\r\n                    margin=\"normal\"\r\n                    name=\"email\"\r\n                    dir=\"ltr\"\r\n                    type=\"email\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"پسورد\"\r\n                    margin=\"normal\"\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"تائید پسورد\"\r\n                    margin=\"normal\"\r\n                    name=\"confirm_password\"\r\n                    type=\"password\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Box alignItems=\"center\" display=\"flex\" ml={-1}>\r\n                    <Checkbox\r\n                      checked={values.policy}\r\n                      name=\"policy\"\r\n                      onChange={handleChange}\r\n                    />\r\n                    <Typography color=\"textSecondary\" variant=\"body1\">\r\n                      I have read the{\" \"}\r\n                      <Link\r\n                        color=\"secondary\"\r\n                        component={RouterLink}\r\n                        to=\"#\"\r\n                        underline=\"always\"\r\n                        variant=\"body1\"\r\n                      >\r\n                        Terms and Conditions{\" \"}\r\n                      </Link>\r\n                    </Typography>\r\n                  </Box>\r\n                  {Boolean(touched.policy && errors.policy) && (\r\n                    <FormHelperText error>{errors.policy}</FormHelperText>\r\n                  )}\r\n                  <Box my={1}>\r\n                    <Field\r\n                      component={Captcha}\r\n                      color=\"secondary\"\r\n                      fullWidth\r\n                      label=\"Recaptcha\"\r\n                      margin=\"normal\"\r\n                      name=\"recaptcha\"\r\n                      type=\"recaptcha\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  {loading && <LinearProgress color=\"secondary\" />}\r\n                  <Box my={2}>\r\n                    <Button\r\n                      color=\"secondary\"\r\n                      disabled={loading}\r\n                      fullWidth\r\n                      size=\"large\"\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                    >\r\n                      Sign up now\r\n                    </Button>\r\n                  </Box>\r\n                  <Typography\r\n                    align=\"center\"\r\n                    color=\"textSecondary\"\r\n                    variant=\"body2\"\r\n                  >\r\n                    Have an account?\r\n                    <Link\r\n                      color=\"secondary\"\r\n                      component={RouterLink}\r\n                      to=\"/login\"\r\n                      variant=\"body2\"\r\n                    >\r\n                      Sign in\r\n                    </Link>\r\n                  </Typography>\r\n                </Box>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </div>\r\n      </Container>\r\n    ) : null;\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  registerRequest: (user: IRegister) => void;\r\n  push: (path: Path) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): RegisterPageProps => {\r\n  const { loggedIn, loading } = state.auth;\r\n  return {\r\n    loggedIn,\r\n    loading,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  registerRequest: bindActionCreators(registerRequest, dispatch),\r\n  push: bindActionCreators(push, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterPage);\r\n","import { Dispatch } from \"react\";\r\nimport { AppActions } from \"../_types\";\r\nimport {\r\n  INFO_FAILURE,\r\n  INFO_REQUEST,\r\n  INFO_SUCCESS,\r\n} from \"../_types/profile.types\";\r\nimport { UserInfo } from \"../_types/profile.types\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { API } from \"../_helpers/api\";\r\n\r\nexport const profileRequest = (token: string) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: INFO_REQUEST });\r\n    const userInfo: UserInfo = parseToken(token);\r\n    const id: string = userInfo.userID;\r\n    API.get(`/wp/v2/users/${id}`)\r\n      .then(res => {\r\n        dispatch({\r\n          type: INFO_SUCCESS,\r\n          profile: { ...res.data, info: userInfo },\r\n        });\r\n      })\r\n      .catch(err => errorHandler(err, INFO_FAILURE))\r\n  }\r\n)\r\n\r\nconst parseToken = (token: string): UserInfo => {\r\n  const base64Url = token.split(\".\")[1];\r\n  const base64 = base64Url.replace(/-/g, \"+\").replace(/_/g, \"/\");\r\n  const jsonPayload = decodeURIComponent(\r\n    atob(base64)\r\n      .split(\"\")\r\n      .map(function (c) {\r\n        return \"%\" + (\"00\" + c.charCodeAt(0).toString(16)).slice(-2);\r\n      })\r\n      .join(\"\")\r\n  );\r\n  const resJson = JSON.parse(jsonPayload);\r\n  const userData = {\r\n    userID: resJson.data.user.id,\r\n    expire: resJson.exp * 1000,\r\n    issued: resJson.iat * 1000,\r\n    before: resJson.nbf * 1000,\r\n  };\r\n  return userData;\r\n};\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardHeader,\r\n  Chip,\r\n  Divider,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableFooter,\r\n  TableRow,\r\n  makeStyles,\r\n  Link,\r\n  useTheme,\r\n  IconButton,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  KeyboardArrowLeft,\r\n  KeyboardArrowRight,\r\n  FirstPage,\r\n  LastPage,\r\n} from \"@material-ui/icons\";\r\nimport { UniqId } from \"../../../_helpers/constants\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nconst useStyles1 = makeStyles((theme) => ({\r\n  root: {\r\n    flexShrink: 0,\r\n    marginLeft: theme.spacing(2.5),\r\n  },\r\n}));\r\n\r\nfunction TablePaginationActions(props) {\r\n  const classes = useStyles1();\r\n  const theme = useTheme();\r\n  const { count, page, rowsPerPage, onChangePage } = props;\r\n  const handleFirstPageButtonClick = (event) => {\r\n    onChangePage(event, 0);\r\n  };\r\n\r\n  const handleBackButtonClick = (event) => {\r\n    onChangePage(event, page - 1);\r\n  };\r\n\r\n  const handleNextButtonClick = (event) => {\r\n    onChangePage(event, page + 1);\r\n  };\r\n\r\n  const handleLastPageButtonClick = (event) => {\r\n    onChangePage(event, Math.max(0, Math.ceil(count / rowsPerPage) - 1));\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <IconButton\r\n        onClick={handleFirstPageButtonClick}\r\n        disabled={page === 0}\r\n        aria-label=\"first page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? <LastPage /> : <FirstPage />}\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleBackButtonClick}\r\n        disabled={page === 0}\r\n        aria-label=\"previous page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? (\r\n          <KeyboardArrowRight />\r\n        ) : (\r\n          <KeyboardArrowLeft />\r\n        )}\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleNextButtonClick}\r\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n        aria-label=\"next page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? (\r\n          <KeyboardArrowLeft />\r\n        ) : (\r\n          <KeyboardArrowRight />\r\n        )}\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleLastPageButtonClick}\r\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n        aria-label=\"last page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? <FirstPage /> : <LastPage />}\r\n      </IconButton>\r\n    </div>\r\n  );\r\n}\r\n\r\nTablePaginationActions.propTypes = {\r\n  count: PropTypes.number.isRequired,\r\n  onChangePage: PropTypes.func.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n  rowsPerPage: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles2 = makeStyles((theme) => ({\r\n  table: {\r\n    minWidth: 300,\r\n  },\r\n  toolbar: {\r\n    \"& div\": {\r\n      flexFlow: \"wrap\",\r\n      justifyContent: \"flex-end\",\r\n      [theme.breakpoints.only(\"xs\")]: {\r\n        justifyContent: \"space-around\",\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function LatestSongs({ res }) {\r\n  const classes = useStyles2();\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(5);\r\n\r\n  const emptyRows =\r\n    rowsPerPage - Math.min(rowsPerPage, res.length - page * rowsPerPage);\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n  const pagination = {\r\n    lower: [{ label: \"همه\", value: -1 }],\r\n    low: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n    average: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"۱۰\", value: 10 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n    high: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"۱۰\", value: 10 },\r\n      { label: \"۲۵\", value: 25 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n    higher: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"۱۰\", value: 10 },\r\n      { label: \"۲۵\", value: 25 },\r\n      { label: \"۵۰\", value: 50 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n  };\r\n  const sel =\r\n    res.length > 500\r\n      ? \"higher\"\r\n      : res.length >= 100\r\n      ? \"high\"\r\n      : res.length >= 30\r\n      ? \"average\"\r\n      : res.length > 5\r\n      ? \"low\"\r\n      : \"lower\";\r\n\r\n  // moment.loadPersian({ usePersianDigits: true });\r\n\r\n  const dateChanger = (d, t) => {\r\n    let date, time;\r\n    if (d) date = d;\r\n    if (t) time = t;\r\n    return date ? date : time;\r\n  };\r\n  return (\r\n    <Card className={clsx(classes.root)}>\r\n      <CardHeader title=\"آخرین آهنگ ها\" />\r\n      <Divider />\r\n      <Box>\r\n        <Table className={classes.table} aria-label=\"custom pagination table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>نام آهنگ</TableCell>\r\n              <TableCell>ساعت</TableCell>\r\n              <TableCell>تاریخ</TableCell>\r\n              <TableCell>دقت</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {(rowsPerPage > 0\r\n              ? res.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n              : res\r\n            ).map((row) => (\r\n              <TableRow key={UniqId()}>\r\n                {row.song.id !== 0 ? (\r\n                  <TableCell>\r\n                    <Link\r\n                      to={`/lesson/${row.song.id}`}\r\n                      color=\"secondary\"\r\n                      component={RouterLink}\r\n                    >\r\n                      {row.song.name}\r\n                    </Link>\r\n                  </TableCell>\r\n                ) : (\r\n                  <TableCell>\r\n                    <Link to=\"/guide\" color=\"secondary\" component={RouterLink}>\r\n                      {row.song.name}\r\n                    </Link>\r\n                  </TableCell>\r\n                )}\r\n                <TableCell>{dateChanger(false, row.time)}</TableCell>\r\n                <TableCell>{dateChanger(row.date)}</TableCell>\r\n                <TableCell>\r\n                  <Chip color=\"secondary\" label={row.progress} size=\"small\" />\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n            {emptyRows > 0 && (\r\n              <TableRow style={{ height: 57 * emptyRows }}>\r\n                <TableCell colSpan={6} />\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n          <TableFooter>\r\n            <TableRow>\r\n              <TablePagination\r\n                className={classes.toolbar}\r\n                rowsPerPageOptions={pagination[sel]}\r\n                colSpan={4}\r\n                count={res.length}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                SelectProps={{\r\n                  inputProps: { \"aria-label\": \"row per page\" },\r\n                  native: true,\r\n                }}\r\n                onChangePage={handleChangePage}\r\n                onChangeRowsPerPage={handleChangeRowsPerPage}\r\n                ActionsComponent={TablePaginationActions}\r\n              />\r\n            </TableRow>\r\n          </TableFooter>\r\n        </Table>\r\n      </Box>\r\n    </Card>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { CircularProgress, Container, Grid } from \"@material-ui/core\";\r\nimport { connect } from \"react-redux\";\r\nimport { profileRequest } from \"../../_actions/profile.actions\";\r\nimport { DefaultProfileState } from \"../../_types/profile.types\";\r\nimport { DefaultUserState } from \"../../_types/user.types\";\r\nimport { AppState } from \"../../_types\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AppActions } from \"../../_types\";\r\nimport LatestSongs from \"./Dashboard/LatestSongs\";\r\n\r\ninterface ProfilePageProps {\r\n  auth: DefaultUserState;\r\n  profile: DefaultProfileState;\r\n}\r\n\r\ntype Props = ProfilePageProps & LinkDispatchProps;\r\n\r\nclass ProfilePage extends React.Component<Props> {\r\n  componentDidMount() {\r\n    const token = this.props.auth.user?.token;\r\n    if (token) this.props.getProfile(token);\r\n  }\r\n\r\n  render() {\r\n    const { profile, loading } = this.props.profile;\r\n    if (loading) {\r\n      return <CircularProgress color=\"secondary\" />;\r\n    }\r\n    if (!profile) {\r\n      return <div>not signed...</div>;\r\n    } else {\r\n      return (\r\n        <Container maxWidth={false} style={{ paddingTop: \"10px\" }}>\r\n          <Grid container spacing={3}>\r\n            <Grid item lg={12} md={12} xl={12} xs={12}>\r\n              <LatestSongs res={profile.meta.playtime} />\r\n            </Grid>\r\n            {/* <Grid item lg={4} md={12} xl={4} xs={12}>\r\n              <InstrumentTraffic />\r\n            </Grid>\r\n            <Grid\r\n              container\r\n              spacing={3}\r\n              item\r\n              lg={8}\r\n              md={12}\r\n              xl={8}\r\n              xs={12}\r\n              style={{ margin: 0, padding: 0 }}\r\n            > */}\r\n            {/* <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <TotalLevel />\r\n              </Grid>\r\n              <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <Budget  />\r\n              </Grid>\r\n              <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <TotalCustomers  />\r\n              </Grid>\r\n              <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <TotalProfit /> */}\r\n            {/* </Grid> */}\r\n            {/* </Grid> */}\r\n          </Grid>\r\n        </Container>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  getProfile: (token: string) => void;\r\n}\r\n\r\nconst mapStateToProps = (\r\n  state: AppState,\r\n  ownProps: Props\r\n): ProfilePageProps => {\r\n  return { profile: state.user.profile, auth: state.auth };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>,\r\n  ownProps: ProfilePageProps\r\n): LinkDispatchProps => ({\r\n  getProfile: bindActionCreators(profileRequest, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfilePage);\r\n","import { Dispatch } from \"react\";\r\nimport {\r\n  FAILURE_LESSON,\r\n  REQUEST_LESSON,\r\n  SUCCESS_LESSON,\r\n  FAILURE_LESSONS,\r\n  REQUEST_LESSONS,\r\n  SUCCESS_LESSONS,\r\n  SAVE_LESSONS,\r\n} from \"../_types/lesson.types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppState } from \"../_types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { requestGuide } from \"./guide.actions\";\r\nimport { requestCourse } from \"./course.actions\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\n\r\nexport const requestAllLesson = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const lessonState = getState().bank.lessons;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - lessonState.nextLoad;\r\n    if (lessonState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_LESSONS });\r\n\r\n    API.get(`/lesson/v2`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_LESSONS, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_LESSONS))\r\n  }\r\n)\r\n\r\nexport const requestLesson = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const found = getState().bank.lessons.data.find(lesson => lesson.id === path.lesson);\r\n\r\n    if (found) {\r\n      dispatch({ type: SUCCESS_LESSON, data: found })\r\n    }\r\n    else if (path.guide) {\r\n      dispatch(requestGuide(path))\r\n    }\r\n    else if (path.course) {\r\n      dispatch(requestCourse(path))\r\n    }\r\n    else if (!found) {\r\n      dispatch({ type: REQUEST_LESSON });\r\n      API.get(`/lesson/v2?id=${path.lesson}`)\r\n        .then(res => {\r\n          dispatch({ type: SUCCESS_LESSON, data: res.data[0] })\r\n          dispatch({ type: SAVE_LESSONS, data: res.data })\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_LESSON))\r\n    }\r\n  }\r\n)\r\n\r\n","import { Dispatch } from \"react\";\r\nimport {\r\n  SAVE_COURSES,\r\n  FAILURE_COURSE,\r\n  REQUEST_COURSE,\r\n  SUCCESS_COURSE,\r\n  FAILURE_COURSES,\r\n  REQUEST_COURSES,\r\n  SUCCESS_COURSES,\r\n} from \"../_types/course.types\";\r\nimport { AppState } from \"../_types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppActions } from \"../_types\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { SAVE_EXERCISES } from \"../_types/exercise.types\";\r\nimport { ILesson, SAVE_LESSONS } from \"../_types/lesson.types\";\r\nimport { requestGuide } from \"./guide.actions\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { requestLesson } from \"./lesson.actions\";\r\nimport { requestExercise } from \"./exercise.actions\";\r\n\r\nexport const requestAllCourse = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const courseState = getState().bank.courses;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - courseState.nextLoad;\r\n    if (courseState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_COURSES });\r\n\r\n    API.get(`/lesson/v2/course`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_COURSES, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_COURSES))\r\n  }\r\n)\r\n\r\nexport const requestCourse = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const found = getState().bank.courses.data.find(course => course.id === path.course);\r\n    const { course, ...newPath } = path;\r\n    if (found) {\r\n\r\n      const compiler = Compiler(found.course_select);\r\n      dispatch({ type: SUCCESS_COURSE, data: found })\r\n      dispatch({ type: SAVE_LESSONS, data: compiler.lessons })\r\n      dispatch({ type: SAVE_EXERCISES, data: compiler.exercises })\r\n      if (path.lesson) dispatch(requestLesson(newPath))\r\n      if (path.exercise) dispatch(requestExercise(newPath))\r\n    }\r\n    else if (path.guide) {\r\n      dispatch(requestGuide(path))\r\n    }\r\n    else if (!found) {\r\n\r\n      dispatch({ type: REQUEST_COURSE });\r\n      API.get(`/lesson/v2/course?id=${path.course}`)\r\n        .then(res => {\r\n          const compiler = Compiler(res.data[0].course_select);\r\n          dispatch({ type: SUCCESS_COURSE, data: res.data[0] })\r\n          dispatch({ type: SAVE_COURSES, data: res.data })\r\n          dispatch({ type: SAVE_LESSONS, data: compiler.lessons })\r\n          dispatch({ type: SAVE_EXERCISES, data: compiler.exercises })\r\n          if (path.lesson) dispatch(requestLesson(newPath))\r\n          if (path.exercise) dispatch(requestExercise(newPath))\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_COURSE))\r\n    }\r\n  }\r\n)\r\n\r\nconst Compiler = (course_select: ILesson[]) => {\r\n  const lessons: ILesson[] = []\r\n  const exercises: ILesson[] = []\r\n  course_select.map(select => select.info.genre.name === \"Exercise\" ? exercises.push(select) : lessons.push(select))\r\n  return { lessons, exercises };\r\n};\r\n","import { Dispatch } from \"react\";\r\nimport {\r\n  FAILURE_EXERCISE,\r\n  REQUEST_EXERCISE,\r\n  SUCCESS_EXERCISE,\r\n  FAILURE_EXERCISES,\r\n  REQUEST_EXERCISES,\r\n  SUCCESS_EXERCISES,\r\n  SAVE_EXERCISES,\r\n} from \"../_types/exercise.types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppState } from \"../_types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { requestGuide } from \"./guide.actions\";\r\nimport { requestCourse } from \"./course.actions\";\r\n\r\nexport const requestAllExercise = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const exerciseState = getState().bank.exercises;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - exerciseState.nextLoad;\r\n    if (exerciseState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_EXERCISES });\r\n\r\n    API.get(`/lesson/v2?course=125`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_EXERCISES, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_EXERCISES))\r\n  }\r\n)\r\n\r\nexport const requestExercise = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const found = getState().bank.exercises.data.find(exercise => exercise.id === path.exercise);\r\n    console.log(path)\r\n    if (found) {\r\n      dispatch({ type: SUCCESS_EXERCISE, data: found })\r\n    }\r\n    else if (path.guide) {\r\n      dispatch(requestGuide(path))\r\n    }\r\n    else if (path.course) {\r\n      dispatch(requestCourse(path))\r\n    }\r\n    else if (!found) {\r\n      dispatch({ type: REQUEST_EXERCISE });\r\n      API.get(`/lesson/v2?id=${path.exercise}`)\r\n        .then(res => {\r\n          dispatch({ type: SUCCESS_EXERCISE, data: res.data[0] })\r\n          dispatch({ type: SAVE_EXERCISES, data: res.data })\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_EXERCISE))\r\n    }\r\n  }\r\n)","import { Dispatch } from \"react\";\r\nimport {\r\n  SAVE_GUIDES,\r\n  FAILURE_GUIDE,\r\n  REQUEST_GUIDE,\r\n  SUCCESS_GUIDE,\r\n  FAILURE_GUIDES,\r\n  REQUEST_GUIDES,\r\n  SUCCESS_GUIDES,\r\n  GuideSelect,\r\n} from \"../_types/guide.types\";\r\nimport { AppState } from \"../_types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppActions } from \"../_types\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { ILesson } from \"../_types/lesson.types\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { SAVE_EXERCISES } from \"../_types/exercise.types\";\r\nimport { ICourse, SAVE_COURSES } from \"../_types/course.types\";\r\nimport { requestExercise } from \"./exercise.actions\";\r\nimport { requestCourse } from \"./course.actions\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\n\r\nexport const requestAllGuide = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const guideState = getState().bank.guides;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - guideState.nextLoad;\r\n    if (guideState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_GUIDES });\r\n\r\n    API.get(`/lesson/v2/guide`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_GUIDES, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_GUIDES))\r\n  }\r\n)\r\n\r\nexport const requestGuide = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const { guide, ...newPath } = path;\r\n    const found = getState().bank.guides.data.find(guide => guide.id === path.guide);\r\n    if (found) {\r\n\r\n      dispatch({ type: SUCCESS_GUIDE, data: found });\r\n      dispatch({ type: SAVE_COURSES, data: addCourses(found.guide_select) });\r\n      dispatch({ type: SAVE_EXERCISES, data: addExercises(found.guide_select) });\r\n      if (path.course) dispatch(requestCourse(newPath));\r\n      if (path.exercise) dispatch(requestExercise(newPath));\r\n    } else {\r\n\r\n      dispatch({ type: REQUEST_GUIDE });\r\n      API.get(`/lesson/v2/guide?id=${path.guide}`)\r\n        .then(res => {\r\n          dispatch({ type: SUCCESS_GUIDE, data: res.data[0] });\r\n          dispatch({ type: SAVE_GUIDES, data: res.data });\r\n          dispatch({ type: SAVE_COURSES, data: addCourses(res.data[0].guide_select) });\r\n          dispatch({ type: SAVE_EXERCISES, data: addExercises(res.data[0].guide_select) });\r\n          if (path.course) dispatch(requestCourse(newPath));\r\n          if (path.exercise) dispatch(requestExercise(newPath));\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_GUIDE));\r\n    }\r\n  }\r\n)\r\n\r\nconst addCourses = (guide_select: GuideSelect[]) => {\r\n  const added: ICourse[] = []\r\n  guide_select.map((course) => course.course?.map(lesson => added.push(lesson)))\r\n  return added;\r\n};\r\nconst addExercises = (guide_select: GuideSelect[]) => {\r\n  const added: ILesson[] = []\r\n  guide_select.map((course) => course.exercise?.map(exercise => added.push(exercise)))\r\n  return added;\r\n}","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { IGuide } from \"../../../_types/guide.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  guide: IGuide;\r\n};\r\n\r\nexport const GuideCard: React.FC<Props> = ({ guide }) => {\r\n  const classes = useStyles();\r\n  const { title, thumbnails, description, teacher } = guide;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/guide/${guide.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(thumbnails)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {description}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {teacher}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  CircularProgress,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { requestAllGuide } from \"../../../_actions/guide.actions\";\r\nimport { IGuide } from \"../../../_types/guide.types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { GuideCard } from \"./GuideCard\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface GuideProps extends WithStyles<typeof useStyles> {\r\n  data: IGuide[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = GuideProps & LinkDispatchProps;\r\n\r\nclass GuideList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllGuide();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">مجموعه ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <CircularProgress\r\n              color=\"secondary\"\r\n              className={classes.autoMargin}\r\n            />\r\n          ) : data.length ? (\r\n            data.map((guide: IGuide) => (\r\n              <GuideCard key={guide.id} guide={guide} />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllGuide: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): GuideProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.bank.guides,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllGuide: bindActionCreators(requestAllGuide, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(GuideList)) as unknown) as ComponentType<unknown>;\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  lesson: ILesson;\r\n};\r\n\r\nexport const LessonCard: React.FC<Props> = ({ lesson }) => {\r\n  const classes = useStyles();\r\n  const { title, featured_img, excerpt, author } = lesson;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/lesson/${lesson.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(featured_img)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {excerpt}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {author}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  Grid,\r\n  Typography,\r\n  CircularProgress,\r\n  Theme,\r\n  createStyles,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { requestAllLesson } from \"../../../_actions/lesson.actions\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { LessonCard } from \"./LessonCard\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface LessonProps extends WithStyles<typeof useStyles> {\r\n  data: ILesson[];\r\n  error?: string;\r\n  loading?: boolean;\r\n}\r\n\r\ntype Props = LessonProps & LinkDispatchProps;\r\n\r\nclass LessonList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllLesson();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">درس ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <CircularProgress\r\n              color=\"secondary\"\r\n              className={classes.autoMargin}\r\n            />\r\n          ) : data.length ? (\r\n            data.map((lesson: ILesson) => (\r\n              <LessonCard key={lesson.id} lesson={lesson} />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllLesson: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): LessonProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.bank.lessons,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllLesson: bindActionCreators(requestAllLesson, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(LessonList)) as unknown) as ComponentType<unknown>;\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  course: ICourse;\r\n};\r\n\r\nexport const CourseCard: React.FC<Props> = ({ course }) => {\r\n  const classes = useStyles();\r\n  const { title, thumbnails, description, teacher } = course;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/course/${course.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(thumbnails)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {description}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {teacher}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  Grid,\r\n  Typography,\r\n  CircularProgress,\r\n  WithStyles,\r\n  createStyles,\r\n  Theme,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { CourseCard } from \"./CourseCard\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport { requestAllCourse } from \"../../../_actions/course.actions\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface CourseProps extends WithStyles<typeof useStyles> {\r\n  data: ICourse[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = CourseProps & LinkDispatchProps;\r\n\r\nclass CourseList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllCourse();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">آموزش ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <CircularProgress\r\n              color=\"secondary\"\r\n              className={classes.autoMargin}\r\n            />\r\n          ) : data.length ? (\r\n            data.map((course: ICourse) => (\r\n              <CourseCard key={course.id} course={course} />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllCourse: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): CourseProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.bank.courses,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllCourse: bindActionCreators(requestAllCourse, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(CourseList)) as unknown) as ComponentType<unknown>;\r\n","import React from \"react\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { IFavorite } from \"../../../_types/favorite.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  favorite: IFavorite;\r\n};\r\n\r\nexport const FavoriteCard: React.FC<Props> = ({ favorite }) => {\r\n  const classes = useStyles();\r\n  const { title, featured_img, excerpt, author } = favorite;\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(featured_img)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {excerpt}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {author}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\">\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import { Dispatch } from \"react\";\r\nimport {\r\n  FAILURE_FAVORITES,\r\n  REQUEST_FAVORITES,\r\n  SUCCESS_FAVORITES,\r\n} from \"../_types/favorite.types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppState } from \"../_types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { getTheTime } from \"../_helpers/constants\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\n\r\nexport const requestAllFavorite = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const favoriteState = getState().user.favorites;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - favoriteState.nextLoad;\r\n    if (favoriteState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_FAVORITES });\r\n\r\n    API.get(`/lesson/v2`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_FAVORITES, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_FAVORITES))\r\n  }\r\n)\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  CircularProgress,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { FavoriteCard } from \"./FavoriteCard\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { IFavorite } from \"../../../_types/favorite.types\";\r\nimport { requestAllFavorite } from \"../../../_actions/favorite.actions\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface FavoriteProps extends WithStyles<typeof useStyles> {\r\n  data: IFavorite[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\ntype Props = FavoriteProps & LinkDispatchProps;\r\n\r\nclass FavoriteList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllFavorite();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">موردعلاقه ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <CircularProgress\r\n              color=\"secondary\"\r\n              className={classes.autoMargin}\r\n            />\r\n          ) : data.length ? (\r\n            data.map((favorite: IFavorite) => (\r\n              <FavoriteCard key={favorite.id} favorite={favorite} />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllFavorite: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): FavoriteProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.user.favorites,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllFavorite: bindActionCreators(requestAllFavorite, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(FavoriteList)) as unknown) as ComponentType<unknown>;\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 345,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  exercise: ILesson;\r\n};\r\n\r\nexport const ExerciseCard: React.FC<Props> = ({ exercise }) => {\r\n  const classes = useStyles();\r\n  const { title, featured_img, excerpt, author } = exercise;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/exercise/${exercise.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(featured_img)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {excerpt}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {author}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  CircularProgress,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { ExerciseCard } from \"./ExerciseCard\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { requestAllExercise } from \"../../../_actions/exercise.actions\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface ExerciseProps extends WithStyles<typeof useStyles> {\r\n  data: ILesson[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = ExerciseProps & LinkDispatchProps;\r\n\r\nclass ExerciseList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllExercise();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">تمرین ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <CircularProgress\r\n              color=\"secondary\"\r\n              className={classes.autoMargin}\r\n            />\r\n          ) : data.length ? (\r\n            data.map((exercise: ILesson) => (\r\n              <ExerciseCard key={exercise.id} exercise={exercise} />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllExercise: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): ExerciseProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.bank.exercises,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllExercise: bindActionCreators(requestAllExercise, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(ExerciseList)) as unknown) as ComponentType<unknown>;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Tab,\r\n  Box,\r\n  Tabs,\r\n  AppBar,\r\n  makeStyles,\r\n  Paper,\r\n  Theme,\r\n  useMediaQuery,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  LibraryMusic,\r\n  QueueMusic,\r\n  MusicNote,\r\n  EmojiSymbols,\r\n  Favorite,\r\n} from \"@material-ui/icons\";\r\n\r\nimport GuideList from \"./Guide/GuideList\";\r\nimport LessonList from \"./Lesson/LessonList\";\r\nimport CourseList from \"./Course/CourseList\";\r\nimport FavoriteList from \"./Favorite/FavoriteList\";\r\nimport ExerciseList from \"./Exercise/ExerciseList\";\r\nimport { store } from \"../../_store/store.config\";\r\nimport { push } from \"connected-react-router\";\r\n\r\nconst pages = [\r\n  {\r\n    link: \"/guide\",\r\n    icon: <LibraryMusic />,\r\n    label: \"GUIDES\",\r\n    child: <GuideList />,\r\n  },\r\n  {\r\n    link: \"/course\",\r\n    icon: <QueueMusic />,\r\n    label: \"COURSES\",\r\n    child: <CourseList />,\r\n  },\r\n  {\r\n    link: \"/lesson\",\r\n    icon: <MusicNote />,\r\n    label: \"LESSONS\",\r\n    child: <LessonList />,\r\n  },\r\n  {\r\n    link: \"/exercise\",\r\n    icon: <EmojiSymbols />,\r\n    label: \"EXERCISES\",\r\n    child: <ExerciseList />,\r\n  },\r\n  {\r\n    link: \"/favorite\",\r\n    icon: <Favorite />,\r\n    label: \"FAVORITES\",\r\n    child: <FavoriteList />,\r\n  },\r\n];\r\n\r\nconst pageName = (num: number) => {\r\n  return pages[num].link;\r\n};\r\nconst pageNumber = (name: string) => {\r\n  const obj = pages.find((page) => page.link === name);\r\n  if (obj) return pages.indexOf(obj);\r\n  return 0;\r\n};\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    width: \"100vw\",\r\n  },\r\n  tabControl: {\r\n    [theme.breakpoints.down(880)]: {\r\n      minWidth: 150,\r\n    },\r\n    [theme.breakpoints.down(830)]: {\r\n      minWidth: 140,\r\n    },\r\n    [theme.breakpoints.down(780)]: {\r\n      minWidth: 120,\r\n    },\r\n    [theme.breakpoints.down(680)]: {\r\n      minWidth: 100,\r\n    },\r\n    [theme.breakpoints.down(500)]: {\r\n      minWidth: 80,\r\n    },\r\n    [theme.breakpoints.down(370)]: {\r\n      minWidth: 65,\r\n    },\r\n    [theme.breakpoints.down(320)]: {\r\n      minWidth: 55,\r\n    },\r\n  },\r\n  tabPanel: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nexport default function LearningPage() {\r\n  const classes = useStyles();\r\n\r\n  const loggedIn = store.getState().auth.loggedIn;\r\n  const pathName = store.getState().router.location.pathname;\r\n\r\n  const [value, setValue] = useState(pageNumber(pathName));\r\n\r\n  useEffect(() => {\r\n    if (pathName === \"/favorite\" && !loggedIn)\r\n      store.dispatch(push(pageName(0)));\r\n    else setValue(pageNumber(pathName));\r\n  }, [pathName, loggedIn]);\r\n\r\n  const matches = useMediaQuery(\"(min-width:500px)\");\r\n\r\n  const handleChange = (event: React.ChangeEvent<{}>, newValue: number) => {\r\n    setValue(newValue);\r\n    store.dispatch(push(pageName(newValue)));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AppBar position=\"static\">\r\n        <Paper square>\r\n          <Tabs\r\n            value={value}\r\n            onChange={handleChange}\r\n            variant=\"scrollable\"\r\n            indicatorColor=\"secondary\"\r\n            textColor=\"secondary\"\r\n            scrollButtons=\"desktop\"\r\n            aria-label=\"icon label tabs\"\r\n          >\r\n            {pages.map((page, i) =>\r\n              i !== 4 ? (\r\n                <Tab\r\n                  className={classes.tabControl}\r\n                  key={page.label}\r\n                  icon={page.icon}\r\n                  label={matches ? page.label : null}\r\n                  id={`full-width-tab-${i}`}\r\n                  aria-controls={`full-width-tabpanel-${i}`}\r\n                />\r\n              ) : (\r\n                loggedIn && (\r\n                  <Tab\r\n                    className={classes.tabControl}\r\n                    key={page.label}\r\n                    icon={page.icon}\r\n                    label={matches ? page.label : null}\r\n                    id={`full-width-tab-${i}`}\r\n                    aria-controls={`full-width-tabpanel-${i}`}\r\n                  />\r\n                )\r\n              )\r\n            )}\r\n          </Tabs>\r\n        </Paper>\r\n      </AppBar>\r\n      {pages.map((page, i) => (\r\n        <div\r\n          key={page.label + i}\r\n          role=\"tabpanel\"\r\n          hidden={value !== i}\r\n          id={`full-width-tabpanel-${i}`}\r\n          aria-labelledby={`full-width-tab-${i}`}\r\n        >\r\n          {value === i && <Box className={classes.tabPanel}>{page.child}</Box>}\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n  CircularProgress,\r\n  Container,\r\n  createStyles,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport { pathFinder } from \"../../_helpers/constants\";\r\nimport { requestPost } from \"../../_actions/post.actions\";\r\nimport { AppActions, AppState } from \"../../_types\";\r\nimport { IPost } from \"../../_types/post.types\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"99vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 112px)\",\r\n        padding: theme.spacing(1),\r\n      },\r\n      padding: theme.spacing(2),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n    bank: {\r\n      textAlign: \"center\",\r\n      width: \"100%\",\r\n      padding: 10,\r\n      backgroundColor: theme.palette.background.paper,\r\n      border: `1px solid ${theme.palette.secondary.main}`,\r\n      \"& > h1\": {\r\n        padding: 10,\r\n        margin: 10,\r\n        fontWeight: 900,\r\n        backgroundColor: theme.palette.secondary.main,\r\n      },\r\n      \"& > h2\": {\r\n        padding: 10,\r\n        margin: 10,\r\n        fontWeight: 800,\r\n      },\r\n      \"& > h3\": {\r\n        padding: 7,\r\n        margin: 7,\r\n        fontWeight: 800,\r\n      },\r\n      \"& > img\": {\r\n        maxWidth: \"100%\",\r\n      },\r\n      \"& > * > img\": {\r\n        maxWidth: \"100%\",\r\n      },\r\n      \"& > h4\": {\r\n        padding: 5,\r\n        margin: 5,\r\n        fontWeight: 800,\r\n      },\r\n      \"& > figure\": {\r\n        margin: \"auto\",\r\n        padding: 10,\r\n        \"& > figcaption\": {\r\n          display: \"none\",\r\n        },\r\n      },\r\n      \"& > * > strong\": {\r\n        fontWeight: 800,\r\n      },\r\n    },\r\n  });\r\n\r\ninterface PostProps extends WithStyles<typeof useStyles> {\r\n  data?: IPost;\r\n  loading: boolean;\r\n  error: string;\r\n  pathname: string;\r\n}\r\n\r\ntype Props = PostProps & LinkDispatchProps;\r\n\r\nclass Post extends Component<Props> {\r\n  componentDidMount() {\r\n    const path = pathFinder(this.props.pathname);\r\n    if (path.post) this.props.requestPost(path.post);\r\n  }\r\n\r\n  render() {\r\n    const { classes, data, loading, error } = this.props;\r\n    return (\r\n      <Container className={classes.root}>\r\n        {loading ? (\r\n          <CircularProgress color=\"secondary\" className={classes.autoMargin} />\r\n        ) : data ? (\r\n          <div\r\n            className={classes.bank}\r\n            dangerouslySetInnerHTML={{ __html: data.content }}\r\n          />\r\n        ) : (\r\n          <Typography component=\"div\" className={classes.autoMargin}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestPost: (id: number) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): PostProps => ({\r\n  pathname: state.router.location.pathname,\r\n  classes: ownProps.classes,\r\n  ...state.single.post,\r\n});\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestPost: bindActionCreators(requestPost, dispatch),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(Post));\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActionArea,\r\n  Chip,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxWidth: 285,\r\n      maxHeight: 260,\r\n      margin: theme.spacing(1),\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 130,\r\n    },\r\n    rightChip: {\r\n      position: \"absolute\",\r\n      cursor: \"pointer\",\r\n      margin: theme.spacing(1),\r\n      backgroundColor: \"green\",\r\n    },\r\n    leftChip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      cursor: \"pointer\",\r\n      margin: theme.spacing(1),\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  courseItem: ICourse;\r\n  index: number;\r\n  type: string;\r\n  path: string;\r\n};\r\n\r\nexport const CourseItem: React.FC<Props> = ({\r\n  index,\r\n  type,\r\n  courseItem,\r\n  path,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { title, id, thumbnails, grade } = courseItem;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(path + \"/\" + type + id));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <Chip label={index + 1} className={classes.rightChip} />\r\n        <Chip label={grade} className={classes.leftChip} color=\"secondary\" />\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"130\"\r\n          image={thumbnailsFinder(thumbnails)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"body1\" component=\"h6\">\r\n            {title}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n};\r\n\r\ntype ExerciseProps = {\r\n  exerciseItem: ILesson;\r\n  index: number;\r\n  type: string;\r\n  path: string;\r\n};\r\n\r\nexport const ExerciseItem: React.FC<ExerciseProps> = ({\r\n  exerciseItem,\r\n  index,\r\n  type,\r\n  path,\r\n}) => {\r\n  const classes = useStyles();\r\n  const { title, id, featured_img, info } = exerciseItem;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(path + \"/\" + type + id));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <Chip label={index + 1} className={classes.rightChip} />\r\n        <Chip\r\n          label={info.grade.name}\r\n          className={classes.leftChip}\r\n          color=\"secondary\"\r\n        />\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"130\"\r\n          image={thumbnailsFinder(featured_img)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"body1\" component=\"h6\">\r\n            {title}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n  CircularProgress,\r\n  Grid,\r\n  createStyles,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n  Divider,\r\n  Chip,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemAvatar,\r\n  Avatar,\r\n} from \"@material-ui/core\";\r\nimport { AppActions, AppState } from \"../../../_types\";\r\nimport { IGuide } from \"../../../_types/guide.types\";\r\nimport { pathFinder, PathFinder } from \"../../../_helpers/constants\";\r\nimport { requestGuide } from \"../../../_actions/guide.actions\";\r\nimport { CourseItem, ExerciseItem } from \"./GuideItems\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"99vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 112px)\",\r\n        padding: theme.spacing(1),\r\n      },\r\n      padding: theme.spacing(2),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\nconst season = [\r\n  \"\",\r\n  \"شروع\",\r\n  \"بخش اول\",\r\n  \"بخش دوم\",\r\n  \"بخش سوم\",\r\n  \"بخش چهارم\",\r\n  \"بخش پنجم\",\r\n  \"بخش ششم\",\r\n  \"بخش هفتم\",\r\n  \"بخش هشتم\",\r\n  \"بخش نهم\",\r\n  \"بخش دهم\",\r\n];\r\n\r\ninterface GuideProps extends WithStyles<typeof useStyles> {\r\n  data?: IGuide;\r\n  loading: boolean;\r\n  error: string;\r\n  pathname: string;\r\n}\r\n\r\ntype Props = GuideProps & LinkDispatchProps;\r\n\r\nclass Guide extends Component<Props> {\r\n  componentDidMount() {\r\n    const path = pathFinder(this.props.pathname);\r\n    if (path.guide) this.props.requestGuide(path);\r\n  }\r\n\r\n  render() {\r\n    const { classes, data, loading, error, pathname } = this.props;\r\n    let counter = 1;\r\n    return (\r\n      <Grid container justify=\"center\" className={classes.root}>\r\n        {loading ? (\r\n          <CircularProgress color=\"secondary\" className={classes.autoMargin} />\r\n        ) : data ? (\r\n          data.guide_select.map((guide, k) => (\r\n            <List key={k}>\r\n              {guide.exercise && (\r\n                <>\r\n                  <ListItem>\r\n                    <ListItemAvatar>\r\n                      <Avatar>\r\n                        <Chip label={counter++} color=\"secondary\" />\r\n                      </Avatar>\r\n                    </ListItemAvatar>\r\n                    <ListItemText\r\n                      primary={season[counter]}\r\n                      secondary={guide.exercise_description}\r\n                    />\r\n                  </ListItem>\r\n                  <Divider variant=\"inset\" component=\"li\" />\r\n                  <Grid container justify=\"center\">\r\n                    {guide.exercise.map((guideItem, i) => (\r\n                      <ExerciseItem\r\n                        key={i}\r\n                        index={i}\r\n                        type={\"exercise=\"}\r\n                        path={pathname}\r\n                        exerciseItem={guideItem}\r\n                      />\r\n                    ))}\r\n                  </Grid>\r\n                </>\r\n              )}\r\n              {guide.course && (\r\n                <>\r\n                  <ListItem>\r\n                    <ListItemAvatar>\r\n                      <Avatar>\r\n                        <Chip label={counter++} color=\"secondary\" />\r\n                      </Avatar>\r\n                    </ListItemAvatar>\r\n                    <ListItemText\r\n                      primary={season[counter]}\r\n                      secondary={guide.course_description}\r\n                    />\r\n                  </ListItem>\r\n                  <Divider variant=\"inset\" component=\"li\" />\r\n                  <Grid container justify=\"center\">\r\n                    {guide.course?.map((guideItem, i) => (\r\n                      <CourseItem\r\n                        key={i}\r\n                        index={i}\r\n                        type={\"course=\"}\r\n                        path={pathname}\r\n                        courseItem={guideItem}\r\n                      />\r\n                    ))}\r\n                  </Grid>\r\n                </>\r\n              )}\r\n            </List>\r\n          ))\r\n        ) : (\r\n          <Typography component=\"div\" className={classes.autoMargin}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestGuide: (path: PathFinder) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): GuideProps => ({\r\n  pathname: state.router.location.pathname,\r\n  classes: ownProps.classes,\r\n  ...state.single.guide,\r\n});\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestGuide: bindActionCreators(requestGuide, dispatch),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(Guide));\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActionArea,\r\n  Chip,\r\n  Grid,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      maxHeight: 280,\r\n      width: \"100%\",\r\n      margin: theme.spacing(1),\r\n    },\r\n    content: {\r\n      minHeight: 130,\r\n    },\r\n    rightChip: {\r\n      position: \"absolute\",\r\n      cursor: \"pointer\",\r\n      margin: theme.spacing(1),\r\n      backgroundColor: \"green\",\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  courseItem: ILesson;\r\n  type: string;\r\n  path: string;\r\n};\r\n\r\nexport const CourseItem: React.FC<Props> = ({ type, courseItem, path }) => {\r\n  const classes = useStyles();\r\n  const { title, id, featured_img, info } = courseItem;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    const typer = type === \"Exercise\" ? \"exercise\" : \"lesson\";\r\n    store.dispatch(push(path + \"/\" + typer + \"=\" + id));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <Grid container>\r\n          <Grid item lg={4} xs={4} sm={4} xl={4}>\r\n            <Chip label={info.grade.name} className={classes.rightChip} />\r\n            <CardMedia\r\n              component=\"img\"\r\n              alt={title}\r\n              height=\"200\"\r\n              image={thumbnailsFinder(featured_img)}\r\n              title={title}\r\n            />\r\n          </Grid>\r\n          <Grid item lg={8} xs={8} sm={8} xl={8}>\r\n            <CardContent className={classes.content}>\r\n              <Typography gutterBottom variant=\"body1\" component=\"h6\">\r\n                {title}\r\n              </Typography>\r\n            </CardContent>\r\n          </Grid>\r\n        </Grid>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n  CircularProgress,\r\n  Grid,\r\n  createStyles,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n  CardMedia,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppActions, AppState } from \"../../../_types\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport {\r\n  PathFinder,\r\n  pathFinder,\r\n  thumbnailsFinder,\r\n} from \"../../../_helpers/constants\";\r\nimport { requestCourse } from \"../../../_actions/course.actions\";\r\nimport { CourseItem } from \"./CourseItems\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"99vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 112px)\",\r\n        padding: theme.spacing(1),\r\n      },\r\n      padding: theme.spacing(2),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"flex-start\",\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n    content: {\r\n      position: \"relative\",\r\n      minHeight: \"calc(100vh - 160px)\",\r\n      [theme.breakpoints.down(\"sm\")]: {\r\n        minHeight: \"100%\",\r\n      },\r\n      border: `1px solid ${theme.palette.secondary.main}`,\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n    },\r\n    text: {\r\n      padding: 20,\r\n    },\r\n    image: {\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      opacity: \"0.3\",\r\n      position: \"absolute\",\r\n    },\r\n  });\r\n\r\ninterface CourseProps extends WithStyles<typeof useStyles> {\r\n  data?: ICourse;\r\n  loading: boolean;\r\n  error: string;\r\n  pathname: string;\r\n}\r\n\r\ntype Props = CourseProps & LinkDispatchProps;\r\n\r\nclass Course extends Component<Props> {\r\n  componentDidMount() {\r\n    const path = pathFinder(this.props.pathname);\r\n    this.props.requestCourse(path);\r\n  }\r\n\r\n  render() {\r\n    const { classes, data, loading, error, pathname } = this.props;\r\n    return (\r\n      <Grid container justify=\"center\" className={classes.root}>\r\n        {loading ? (\r\n          <CircularProgress color=\"secondary\" className={classes.autoMargin} />\r\n        ) : data ? (\r\n          <Grid container spacing={2}>\r\n            <Grid item lg={6} md={6} xl={6} xs={12}>\r\n              <div className={classes.content}>\r\n                <CardMedia\r\n                  image={thumbnailsFinder(data.thumbnails)}\r\n                  className={classes.image}\r\n                />\r\n                <Typography\r\n                  gutterBottom\r\n                  variant=\"body1\"\r\n                  component=\"h6\"\r\n                  className={classes.text}\r\n                >\r\n                  {data.description}\r\n                </Typography>\r\n              </div>\r\n            </Grid>\r\n            <Grid item lg={6} md={6} xl={6} xs={12}>\r\n              <Grid container justify=\"flex-end\">\r\n                {data?.course_select.map((course, k) => (\r\n                  <CourseItem\r\n                    key={k}\r\n                    type={course.info.genre.name}\r\n                    path={pathname}\r\n                    courseItem={course}\r\n                  />\r\n                ))}\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        ) : (\r\n          <Typography component=\"div\" className={classes.autoMargin}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestCourse: (path: PathFinder) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): CourseProps => ({\r\n  classes: ownProps.classes,\r\n  pathname: state.router.location.pathname,\r\n  ...state.single.course,\r\n});\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestCourse: bindActionCreators(requestCourse, dispatch),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(Course));\r\n","export default class Song {\n  audioContext: AudioContext;\n  tracks: any[];\n  volume: number;\n  elapsedTimeSinceStart: any;\n  paused: boolean;\n  muted: boolean;\n  loopMode: boolean\n  loopStartTime: any;\n  loopEndTime: any;\n  decodedAudioBuffers: AudioBuffer[] | [];\n  masterVolumeNode: any;\n  trackVolumeNodes: any[];\n  analyserNode: any;\n  sampleNodes: any[];\n\n  constructor(audioContext: AudioContext) {\n    this.audioContext = audioContext;\n    this.tracks = [];\n    this.volume = 1;\n    this.elapsedTimeSinceStart = null;\n    this.paused = true;\n    this.muted = false;\n    this.loopMode = false;\n    this.loopStartTime = null;\n    this.loopEndTime = null;\n    this.decodedAudioBuffers = [];\n    this.masterVolumeNode = this.audioContext.createGain();\n    this.trackVolumeNodes = [];\n    this.analyserNode = this.audioContext.createAnalyser();\n    this.sampleNodes = [];\n  }\n  addTrack = (data: any) => {\n    this.tracks.push({\n      decodedBuffer: data.buffer,\n      peaks: null,\n      volume: data.vol,\n      panning: 0,\n      muted: false,\n      solo: false,\n      sampleNode: null,\n      volumeNode: null,\n    });\n  };\n  loadBuffer = async (data: any) => {\n    const song = this;\n    await this.audioContext.decodeAudioData(\n      data.buffer,\n      (buffer) => {\n        if (!buffer) {\n          Promise.reject(\"error decoding file data: \");\n        }\n        this.decodedAudioBuffers = [...this.decodedAudioBuffers, buffer];\n        this.addTrack({ buffer, vol: data.vol })\n        Promise.resolve(song);\n      },\n      (error) => Promise.reject(error)\n    );\n  };\n  buildGraph = () => {\n    var sources = [];\n    for (var i = 0; i < this.decodedAudioBuffers.length; i++) {\n      var sample = this.decodedAudioBuffers[i];\n      sources[i] = this.audioContext.createBufferSource();\n      sources[i].buffer = sample;\n      this.trackVolumeNodes[i] = this.audioContext.createGain();\n      if (this.trackVolumeNodes[i]) {\n        this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n      }\n      sources[i].connect(this.trackVolumeNodes[i]);\n      this.trackVolumeNodes[i].connect(this.masterVolumeNode);\n      this.masterVolumeNode.connect(this.analyserNode);\n      this.analyserNode.connect(this.audioContext.destination);\n    }\n    this.sampleNodes = sources;\n  };\n  play = (startTime: number) => {\n    this.buildGraph();\n    this.setTrackVolumesDependingOnMuteSoloStatus();\n    this.elapsedTimeSinceStart = startTime;\n    this.sampleNodes.forEach((s) => {\n      s.start(0, startTime);\n    });\n    this.paused = false;\n  };\n  stop = () => {\n    if (this.paused === true) return;\n    this.sampleNodes.forEach((s) => {\n      s.stop(0);\n    });\n    this.paused = true;\n  };\n  pause = () => {\n    if (!this.paused) {\n      this.stop();\n    } else {\n      this.play(this.elapsedTimeSinceStart);\n    }\n  };\n  setVolume = (value: number) => {\n    this.volume = value;\n    this.masterVolumeNode.gain.value = value;\n  };\n  setMasterVolume = (val: number) => {\n    var fraction;\n    if (val === undefined) {\n      fraction = 80 / 100;\n    } else {\n      fraction = val / 100;\n    }\n    this.setVolume(fraction * fraction);\n  };\n  setVolumeOfTrack = (value: number, trackNumber: number) => {\n    if (this.trackVolumeNodes[trackNumber] !== undefined) {\n      this.trackVolumeNodes[trackNumber].gain.value = value;\n      this.tracks[trackNumber].volume = value;\n    }\n  };\n  getUrlsOfTracks = () => {\n    var urls: string[] = [];\n    this.tracks.forEach((track) => {\n      urls.push(track.url);\n    });\n    return urls;\n  };\n  getDuration = () => {\n    if (this.decodedAudioBuffers !== undefined) {\n      let dur = 0;\n      for (let i = 0; i < this.decodedAudioBuffers.length; i++) {\n        if (dur < this.decodedAudioBuffers[i].duration)\n          dur = this.decodedAudioBuffers[i].duration;\n      }\n      return dur;\n    }\n    return undefined;\n  };\n  getNbTracks = () => {\n    return this.tracks.length;\n  };\n  toggleLoopMode = () => {\n    this.loopMode = !this.loopMode;\n  };\n  toggleMute = () => {\n    this.muted = !this.muted;\n    if (this.muted) {\n      this.masterVolumeNode.gain.value = 0;\n    } else {\n      this.masterVolumeNode.gain.value = this.volume;\n    }\n  };\n  togglePause = () => {\n    this.paused = !this.paused;\n  };\n  setTrackVolumesDependingOnMuteSoloStatus = () => {\n    var thereIsSolo = false;\n    var nbTracks = this.getNbTracks();\n    for (var i = 0; i < nbTracks; i++) {\n      if (this.tracks[i].solo) {\n        thereIsSolo = true;\n        break;\n      }\n    }\n    if (thereIsSolo) {\n      for (let i = 0; i < nbTracks; i++) {\n        if (this.tracks[i].solo) {\n          this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n        } else {\n          this.trackVolumeNodes[i].gain.value = 0;\n        }\n      }\n      return;\n    }\n    for (let i = 0; i < nbTracks; i++) {\n      if (this.trackVolumeNodes[i] !== undefined) {\n        if (this.tracks[i].muted) {\n          this.trackVolumeNodes[i].gain.value = 0;\n        } else {\n          this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n        }\n      }\n    }\n  };\n}","import { IQueue, IEnvelope, ISetup } from \"../../_types/player.types\";\r\n\r\nexport class WebAudioFontChannel {\r\n  audioContext: AudioContext;\r\n  input: any;\r\n  band32: any;\r\n  band64: any;\r\n  band128: any;\r\n  band256: any;\r\n  band512: any;\r\n  band1k: any;\r\n  band2k: any;\r\n  band4k: any;\r\n  band8k: any;\r\n  band16k: any;\r\n  output: any;\r\n  constructor(audioContext: AudioContext) {\r\n    console.log(\"WebAudioFont Channel v1.04\");\r\n    this.audioContext = audioContext;\r\n    this.input = this.audioContext.createDynamicsCompressor();\r\n    this.input.threshold.setValueAtTime(-3, 0); // = -3; //-50\r\n    this.input.knee.setValueAtTime(30, 0); //40\r\n    this.input.ratio.setValueAtTime(12, 0); //12\r\n    this.input.attack.setValueAtTime(0.05, 0); //0\r\n    this.input.release.setValueAtTime(0.08, 0); //0.25\r\n    this.band32 = this.bandEqualizer(this.input, 32);\r\n    this.band64 = this.bandEqualizer(this.band32, 64);\r\n    this.band128 = this.bandEqualizer(this.band64, 128);\r\n    this.band256 = this.bandEqualizer(this.band128, 256);\r\n    this.band512 = this.bandEqualizer(this.band256, 512);\r\n    this.band1k = this.bandEqualizer(this.band512, 1024);\r\n    this.band2k = this.bandEqualizer(this.band1k, 2048);\r\n    this.band4k = this.bandEqualizer(this.band2k, 4096);\r\n    this.band8k = this.bandEqualizer(this.band4k, 8192);\r\n    this.band16k = this.bandEqualizer(this.band8k, 16384);\r\n    this.output = audioContext.createGain();\r\n    this.band16k.connect(this.output);\r\n  }\r\n  bandEqualizer = (from: any, frequency: any) => {\r\n    var filter = this.audioContext.createBiquadFilter();\r\n    filter.frequency.setTargetAtTime(frequency, 0, 0.0001);\r\n    filter.type = \"peaking\";\r\n    filter.gain.setTargetAtTime(0, 0, 0.0001);\r\n    filter.Q.setTargetAtTime(1.0, 0, 0.0001);\r\n    from.connect(filter);\r\n    return filter;\r\n  };\r\n}\r\nexport class WebAudioFontLoader {\r\n  player: any;\r\n  cached: { filePath: any, variableName: any }[];\r\n  choosenInfos?: [number, number][];\r\n  drumKeyArray?: string[];\r\n  drumNamesArray?: string[];\r\n  instrumentKeyArray?: string[];\r\n  instrumentNamesArray?: string[];\r\n  constructor(player: WebAudioFontPlayer) {\r\n    console.log(\"WebAudioFont Loader v1.27\");\r\n    this.player = player;\r\n    this.cached = [];\r\n  }\r\n  startLoad = (filePath: string, variableName: any) => {\r\n    if (window[variableName]) {\r\n      return;\r\n    }\r\n    for (var i = 0; i < this.cached.length; i++) {\r\n      if (this.cached[i].variableName === variableName) {\r\n        return;\r\n      }\r\n    }\r\n    this.cached.push({\r\n      filePath: filePath,\r\n      variableName: variableName,\r\n    });\r\n    var r = document.createElement(\"script\");\r\n    r.setAttribute(\"type\", \"text/javascript\");\r\n    r.setAttribute(\"src\", filePath);\r\n    document.getElementsByTagName(\"head\")[0].appendChild(r);\r\n    this.decodeAfterLoading(variableName);\r\n  };\r\n  decodeAfterLoading = (variableName: any) => {\r\n    this.waitOrFinish(variableName, () => {\r\n      this.player.adjustPreset(window[variableName]);\r\n    });\r\n  };\r\n  waitOrFinish = (variableName: any, onFinish: () => void) => {\r\n    if (window[variableName]) {\r\n      onFinish();\r\n    } else {\r\n      var me = this;\r\n      setTimeout(function () {\r\n        me.waitOrFinish(variableName, onFinish);\r\n      }, 111);\r\n    }\r\n  };\r\n  loaded = (variableName: any) => {\r\n    if (!window[variableName]) {\r\n      return false;\r\n    }\r\n    var preset = window[variableName];\r\n    for (var i = 0; i < preset.zones.length; i++) {\r\n      if (!preset.zones[i].buffer) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n  progress = () => {\r\n    if (this.cached.length > 0) {\r\n      for (var k = 0; k < this.cached.length; k++) {\r\n        if (!this.loaded(this.cached[k].variableName)) {\r\n          return k / this.cached.length;\r\n        }\r\n      }\r\n      return 1;\r\n    } else {\r\n      return 1;\r\n    }\r\n  };\r\n  waitLoad = (onFinish: () => void) => {\r\n    var me = this;\r\n    if (this.progress() >= 1) {\r\n      onFinish();\r\n    } else {\r\n      setTimeout(function () {\r\n        me.waitLoad(onFinish);\r\n      }, 333);\r\n    }\r\n  };\r\n  instrumentTitles = () => {\r\n    if (!this.instrumentNamesArray) {\r\n      var insNames = [];\r\n      insNames[0] = \"Acoustic Grand Piano: Piano\";\r\n      insNames[1] = \"Bright Acoustic Piano: Piano\";\r\n      insNames[2] = \"Electric Grand Piano: Piano\";\r\n      insNames[3] = \"Honky-tonk Piano: Piano\";\r\n      insNames[4] = \"Electric Piano 1: Piano\";\r\n      insNames[5] = \"Electric Piano 2: Piano\";\r\n      insNames[6] = \"Harpsichord: Piano\";\r\n      insNames[7] = \"Clavinet: Piano\";\r\n      insNames[8] = \"Celesta: Chromatic Percussion\";\r\n      insNames[9] = \"Glockenspiel: Chromatic Percussion\";\r\n      insNames[10] = \"Music Box: Chromatic Percussion\";\r\n      insNames[11] = \"Vibraphone: Chromatic Percussion\";\r\n      insNames[12] = \"Marimba: Chromatic Percussion\";\r\n      insNames[13] = \"Xylophone: Chromatic Percussion\";\r\n      insNames[14] = \"Tubular Bells: Chromatic Percussion\";\r\n      insNames[15] = \"Dulcimer: Chromatic Percussion\";\r\n      insNames[16] = \"Drawbar Organ: Organ\";\r\n      insNames[17] = \"Percussive Organ: Organ\";\r\n      insNames[18] = \"Rock Organ: Organ\";\r\n      insNames[19] = \"Church Organ: Organ\";\r\n      insNames[20] = \"Reed Organ: Organ\";\r\n      insNames[21] = \"Accordion: Organ\";\r\n      insNames[22] = \"Harmonica: Organ\";\r\n      insNames[23] = \"Tango Accordion: Organ\";\r\n      insNames[24] = \"Acoustic Guitar (nylon): Guitar\";\r\n      insNames[25] = \"Acoustic Guitar (steel): Guitar\";\r\n      insNames[26] = \"Electric Guitar (jazz): Guitar\";\r\n      insNames[27] = \"Electric Guitar (clean): Guitar\";\r\n      insNames[28] = \"Electric Guitar (muted): Guitar\";\r\n      insNames[29] = \"Overdriven Guitar: Guitar\";\r\n      insNames[30] = \"Distortion Guitar: Guitar\";\r\n      insNames[31] = \"Guitar Harmonics: Guitar\";\r\n      insNames[32] = \"Acoustic Bass: Bass\";\r\n      insNames[33] = \"Electric Bass (finger): Bass\";\r\n      insNames[34] = \"Electric Bass (pick): Bass\";\r\n      insNames[35] = \"Fretless Bass: Bass\";\r\n      insNames[36] = \"Slap Bass 1: Bass\";\r\n      insNames[37] = \"Slap Bass 2: Bass\";\r\n      insNames[38] = \"Synth Bass 1: Bass\";\r\n      insNames[39] = \"Synth Bass 2: Bass\";\r\n      insNames[40] = \"Violin: Strings\";\r\n      insNames[41] = \"Viola: Strings\";\r\n      insNames[42] = \"Cello: Strings\";\r\n      insNames[43] = \"Contrabass: Strings\";\r\n      insNames[44] = \"Tremolo Strings: Strings\";\r\n      insNames[45] = \"Pizzicato Strings: Strings\";\r\n      insNames[46] = \"Orchestral Harp: Strings\";\r\n      insNames[47] = \"Timpani: Strings\";\r\n      insNames[48] = \"String Ensemble 1: Ensemble\";\r\n      insNames[49] = \"String Ensemble 2: Ensemble\";\r\n      insNames[50] = \"Synth Strings 1: Ensemble\";\r\n      this.instrumentNamesArray = insNames;\r\n    }\r\n    return this.instrumentNamesArray;\r\n  };\r\n  instrumentKeys = () => {\r\n    if (!this.instrumentKeyArray) {\r\n      this.instrumentKeyArray = [\r\n        \"0000_Aspirin_sf2_file\",\r\n        \"0001_FluidR3_GM_sf2_file\",\r\n        \"0002_GeneralUserGS_sf2_file\",\r\n        \"0003_GeneralUserGS_sf2_file\",\r\n        \"0010_Aspirin_sf2_file\",\r\n        \"0011_Aspirin_sf2_file\",\r\n        \"0012_GeneralUserGS_sf2_file\",\r\n        \"0020_Aspirin_sf2_file\",\r\n        \"0021_Aspirin_sf2_file\",\r\n        \"0022_Aspirin_sf2_file\",\r\n        \"0030_Aspirin_sf2_file\",\r\n        \"0031_Aspirin_sf2_file\",\r\n        \"0040_Aspirin_sf2_file\",\r\n        \"0041_FluidR3_GM_sf2_file\",\r\n        \"0042_GeneralUserGS_sf2_file\",\r\n        \"0043_GeneralUserGS_sf2_file\",\r\n        \"0044_GeneralUserGS_sf2_file\",\r\n        \"0045_GeneralUserGS_sf2_file\",\r\n        \"0046_GeneralUserGS_sf2_file\",\r\n        \"0050_Aspirin_sf2_file\",\r\n        \"0051_FluidR3_GM_sf2_file\",\r\n        \"0052_GeneralUserGS_sf2_file\",\r\n        \"0053_GeneralUserGS_sf2_file\",\r\n        \"0054_GeneralUserGS_sf2_file\",\r\n        \"0060_Aspirin_sf2_file\",\r\n        \"0061_Aspirin_sf2_file\",\r\n        \"0062_GeneralUserGS_sf2_file\",\r\n        \"0070_Aspirin_sf2_file\",\r\n        \"0071_GeneralUserGS_sf2_file\",\r\n        \"0080_Aspirin_sf2_file\",\r\n        \"0080_Chaos_sf2_file\",\r\n        \"0081_FluidR3_GM_sf2_file\",\r\n        \"0090_Aspirin_sf2_file\",\r\n        \"0091_SoundBlasterOld_sf2\",\r\n        \"0100_Aspirin_sf2_file\",\r\n        \"0101_GeneralUserGS_sf2_file\",\r\n        \"0110_Aspirin_sf2_file\",\r\n        \"0111_FluidR3_GM_sf2_file\",\r\n        \"0120_Aspirin_sf2_file\",\r\n        \"0121_FluidR3_GM_sf2_file\",\r\n        \"0130_Aspirin_sf2_file\",\r\n        \"0131_FluidR3_GM_sf2_file\",\r\n        \"0140_Aspirin_sf2_file\",\r\n        \"0141_FluidR3_GM_sf2_file\",\r\n        \"0142_GeneralUserGS_sf2_file\",\r\n        \"0143_GeneralUserGS_sf2_file\",\r\n        \"0150_Aspirin_sf2_file\",\r\n        \"0151_FluidR3_GM_sf2_file\",\r\n        \"0160_Aspirin_sf2_file\",\r\n        \"0161_Aspirin_sf2_file\",\r\n        \"0170_Aspirin_sf2_file\",\r\n        \"0171_FluidR3_GM_sf2_file\",\r\n        \"0172_FluidR3_GM_sf2_file\",\r\n        \"0180_Aspirin_sf2_file\",\r\n        \"0181_Aspirin_sf2_file\",\r\n        \"0190_Aspirin_sf2_file\",\r\n        \"0191_Aspirin_sf2_file\",\r\n        \"0200_Aspirin_sf2_file\",\r\n        \"0201_Aspirin_sf2_file\",\r\n        \"0210_Aspirin_sf2_file\",\r\n        \"0211_Aspirin_sf2_file\",\r\n        \"0212_GeneralUserGS_sf2_file\",\r\n        \"0220_Aspirin_sf2_file\",\r\n        \"0221_FluidR3_GM_sf2_file\",\r\n        \"0230_Aspirin_sf2_file\",\r\n        \"0231_FluidR3_GM_sf2_file\",\r\n        \"0232_FluidR3_GM_sf2_file\",\r\n        \"0233_FluidR3_GM_sf2_file\",\r\n        \"0240_Aspirin_sf2_file\",\r\n        \"0241_GeneralUserGS_sf2_file\",\r\n        \"0241_JCLive_sf2_file\",\r\n        \"0242_JCLive_sf2_file\",\r\n        \"0243_JCLive_sf2_file\",\r\n        \"0253_Acoustic_Guitar_sf2_file\",\r\n        \"0250_Aspirin_sf2_file\",\r\n        \"0251_Acoustic_Guitar_sf2_file\",\r\n        \"0252_Acoustic_Guitar_sf2_file\",\r\n        \"0253_Acoustic_Guitar_sf2_file\",\r\n        \"0254_Acoustic_Guitar_sf2_file\",\r\n        \"0255_GeneralUserGS_sf2_file\",\r\n        \"0260_Aspirin_sf2_file\",\r\n        \"0261_GeneralUserGS_sf2_file\",\r\n        \"0262_Stratocaster_sf2_file\",\r\n        \"0270_Aspirin_sf2_file\",\r\n        \"0271_GeneralUserGS_sf2_file\",\r\n        \"0280_Aspirin_sf2_file\",\r\n        \"0281_Aspirin_sf2_file\",\r\n        \"0282_FluidR3_GM_sf2_file\",\r\n        \"0283_GeneralUserGS_sf2_file\",\r\n        \"0290_Aspirin_sf2_file\",\r\n        \"0291_Aspirin_sf2_file\",\r\n        \"0292_Aspirin_sf2_file\",\r\n        \"0300_Aspirin_sf2_file\",\r\n        \"0301_Aspirin_sf2_file\",\r\n        \"0302_Aspirin_sf2_file\",\r\n        \"0303_Aspirin_sf2_file\",\r\n        \"0304_Aspirin_sf2_file\",\r\n        \"0310_Aspirin_sf2_file\",\r\n        \"0311_FluidR3_GM_sf2_file\",\r\n        \"0320_Aspirin_sf2_file\",\r\n        \"0321_GeneralUserGS_sf2_file\",\r\n        \"0322_GeneralUserGS_sf2_file\",\r\n        \"0330_Aspirin_sf2_file\",\r\n        \"0331_GeneralUserGS_sf2_file\",\r\n        \"0332_GeneralUserGS_sf2_file\",\r\n        \"0340_Aspirin_sf2_file\",\r\n        \"0341_Aspirin_sf2_file\",\r\n        \"0350_Aspirin_sf2_file\",\r\n        \"0351_GeneralUserGS_sf2_file\",\r\n        \"0360_Aspirin_sf2_file\",\r\n        \"0361_GeneralUserGS_sf2_file\",\r\n        \"0370_Aspirin_sf2_file\",\r\n        \"0371_GeneralUserGS_sf2_file\",\r\n        \"0372_GeneralUserGS_sf2_file\",\r\n        \"0380_Aspirin_sf2_file\",\r\n        \"0381_FluidR3_GM_sf2_file\",\r\n        \"0382_FluidR3_GM_sf2_file\",\r\n        \"0383_GeneralUserGS_sf2_file\",\r\n        \"0384_GeneralUserGS_sf2_file\",\r\n        \"0385_GeneralUserGS_sf2_file\",\r\n        \"0386_GeneralUserGS_sf2_file\",\r\n        \"0387_GeneralUserGS_sf2_file\",\r\n        \"0390_Aspirin_sf2_file\",\r\n        \"0391_FluidR3_GM_sf2_file\",\r\n        \"0392_FluidR3_GM_sf2_file\",\r\n        \"0393_GeneralUserGS_sf2_file\",\r\n        \"0400_Aspirin_sf2_file\",\r\n        \"0401_Aspirin_sf2_file\",\r\n        \"0402_GeneralUserGS_sf2_file\",\r\n        \"0410_Aspirin_sf2_file\",\r\n        \"0410_Chaos_sf2_file\",\r\n        \"0411_FluidR3_GM_sf2_file\",\r\n        \"0420_Aspirin_sf2_file\",\r\n        \"0421_FluidR3_GM_sf2_file\",\r\n        \"0430_Aspirin_sf2_file\",\r\n        \"0431_FluidR3_GM_sf2_file\",\r\n        \"0440_Aspirin_sf2_file\",\r\n        \"0441_GeneralUserGS_sf2_file\",\r\n        \"0442_GeneralUserGS_sf2_file\",\r\n        \"0450_Aspirin_sf2_file\",\r\n        \"0451_FluidR3_GM_sf2_file\",\r\n        \"0460_Aspirin_sf2_file\",\r\n        \"0461_FluidR3_GM_sf2_file\",\r\n        \"0470_Aspirin_sf2_file\",\r\n        \"0471_FluidR3_GM_sf2_file\",\r\n        \"0480_Aspirin_sf2_file\",\r\n        \"0480_SoundBlasterOld_sf2\",\r\n        \"04810_GeneralUserGS_sf2_file\",\r\n        \"0481_Aspirin_sf2_file\",\r\n        \"0481_FluidR3_GM_sf2_file\",\r\n        \"0481_GeneralUserGS_sf2_file\",\r\n        \"0482_Aspirin_sf2_file\",\r\n        \"0482_GeneralUserGS_sf2_file\",\r\n        \"0483_GeneralUserGS_sf2_file\",\r\n        \"0484_GeneralUserGS_sf2_file\",\r\n        \"0485_GeneralUserGS_sf2_file\",\r\n        \"0486_GeneralUserGS_sf2_file\",\r\n        \"0487_GeneralUserGS_sf2_file\",\r\n        \"0488_GeneralUserGS_sf2_file\",\r\n        \"0489_GeneralUserGS_sf2_file\",\r\n        \"0490_Aspirin_sf2_file\",\r\n        \"0490_GeneralUserGS_sf2_file\",\r\n        \"0491_GeneralUserGS_sf2_file\",\r\n        \"0492_GeneralUserGS_sf2_file\",\r\n        \"0500_Aspirin_sf2_file\",\r\n      ];\r\n    }\r\n    return this.instrumentKeyArray;\r\n  };\r\n  instrumentInfo = (n: number) => {\r\n    var key = this.instrumentKeys()[n];\r\n    var p = 1 * Number(key.substr(0, 3));\r\n    return {\r\n      variable: \"_tone_\" + key,\r\n      url: \"https://surikov.github.io/webaudiofontdata/sound/\" + key + \".js\",\r\n      title: this.instrumentTitles()[p],\r\n    };\r\n  };\r\n  findInstrument = (program: number) => {\r\n    if (!this.choosenInfos) {\r\n      this.choosenInfos = [\r\n        [1, 2], //Accoustic Grand Piano\r\n        [2, 14], //Bright Accoustic Piano\r\n        [3, 25], //Electric Grand Piano\r\n        [4, 37], //Honky-Tonk Piano\r\n        [5, 48], //Electric Pino 1\r\n        [6, 58], //Electric Piano 2\r\n        [7, 70], //HarpsiChord Piano\r\n        [8, 83], //Cravinet\r\n        [9, 91], //Celesta\r\n        [10, 99], //Glockenspiel\r\n        [11, 107], //Music Box\r\n        [12, 118], //Vibraphone\r\n        [13, 127], // Marimba\r\n        [14, 136], // Xylophone\r\n        [15, 144], // Tubular Bells\r\n        [16, 152], // Dulcimer\r\n        [17, 164], // Drawbar Organ\r\n        [18, 170], // Percussive Organ\r\n        [19, 183], //Rock Organ\r\n        [20, 194], // Church Organ\r\n        [21, 205], //Reed Organ\r\n        [22, 215], //Accordion\r\n        [23, 228], //\r\n        [24, 241], //\r\n        [25, 254], //\r\n        [26, 263], //\r\n        [27, 277], //\r\n        [28, 296], //\r\n        [29, 308], //\r\n        [30, 319], //\r\n        [31, 350], //\r\n        [32, 356], //\r\n        [33, 369], //\r\n        [34, 379], //\r\n        [35, 385], //\r\n        [36, 399], // Fretless Bass\r\n        [37, 403], // Slap Bass 1\r\n        [38, 412], // Slap Bass 2\r\n        [39, 421], // Synth Bass 1\r\n        [40, 438], // Synth Bass 2\r\n        [41, 452], // Violin\r\n        [42, 461], // Viola\r\n        [43, 467], // Cello\r\n        [44, 477], // Contrabass\r\n        [45, 488], // Tremolo Strings\r\n        [46, 493], // Pizzicato Strings\r\n        [47, 501], // Orchestral Harp\r\n        [48, 511], // Timpani\r\n        [49, 518], // String Ensemble 1\r\n        [50, 547], //String Ensemble 2\r\n      ];\r\n    }\r\n    for (var i = 0; i < this.instrumentKeys().length; i++) {\r\n      if (program === 1 * Number(this.instrumentKeys()[i].substring(0, 3))) {\r\n        return i;\r\n      }\r\n    }\r\n    console.log(\"program\", program, \"not found\");\r\n    return 0;\r\n  };\r\n  drumTitles = () => {\r\n    if (!this.drumNamesArray) {\r\n      var drumNames = [];\r\n      drumNames[35] = \"Bass Drum 2\";\r\n      drumNames[36] = \"Bass Drum 1\";\r\n      drumNames[37] = \"Side Stick/Rimshot\";\r\n      drumNames[38] = \"Snare Drum 1\";\r\n      drumNames[39] = \"Hand Clap\";\r\n      drumNames[40] = \"Snare Drum 2\";\r\n      drumNames[41] = \"Low Tom 2\";\r\n      drumNames[42] = \"Closed Hi-hat\";\r\n      drumNames[43] = \"Low Tom 1\";\r\n      drumNames[44] = \"Pedal Hi-hat\";\r\n      drumNames[45] = \"Mid Tom 2\";\r\n      drumNames[46] = \"Open Hi-hat\";\r\n      drumNames[47] = \"Mid Tom 1\";\r\n      drumNames[48] = \"High Tom 2\";\r\n      drumNames[49] = \"Crash Cymbal 1\";\r\n      drumNames[50] = \"High Tom 1\";\r\n      drumNames[51] = \"Ride Cymbal 1\";\r\n      drumNames[52] = \"Chinese Cymbal\";\r\n      drumNames[53] = \"Ride Bell\";\r\n      drumNames[54] = \"Tambourine\";\r\n      drumNames[55] = \"Splash Cymbal\";\r\n      drumNames[56] = \"Cowbell\";\r\n      drumNames[57] = \"Crash Cymbal 2\";\r\n      drumNames[58] = \"Vibra Slap\";\r\n      drumNames[59] = \"Ride Cymbal 2\";\r\n      drumNames[60] = \"High Bongo\";\r\n      drumNames[61] = \"Low Bongo\";\r\n      drumNames[62] = \"Mute High Conga\";\r\n      drumNames[63] = \"Open High Conga\";\r\n      drumNames[64] = \"Low Conga\";\r\n      drumNames[65] = \"High Timbale\";\r\n      drumNames[66] = \"Low Timbale\";\r\n      drumNames[67] = \"High Agogo\";\r\n      drumNames[68] = \"Low Agogo\";\r\n      drumNames[69] = \"Cabasa\";\r\n      drumNames[70] = \"Maracas\";\r\n      drumNames[71] = \"Short Whistle\";\r\n      drumNames[72] = \"Long Whistle\";\r\n      drumNames[73] = \"Short Guiro\";\r\n      drumNames[74] = \"Long Guiro\";\r\n      drumNames[75] = \"Claves\";\r\n      drumNames[76] = \"High Wood Block\";\r\n      drumNames[77] = \"Low Wood Block\";\r\n      drumNames[78] = \"Mute Cuica\";\r\n      drumNames[79] = \"Open Cuica\";\r\n      drumNames[80] = \"Mute Triangle\";\r\n      drumNames[81] = \"Open Triangle\";\r\n      this.drumNamesArray = drumNames;\r\n    }\r\n    return this.drumNamesArray;\r\n  };\r\n  drumKeys = () => {\r\n    if (!this.drumKeyArray) {\r\n      this.drumKeyArray = [\r\n        \"35_0_SBLive_sf2\",\r\n        \"36_0_SBLive_sf2\",\r\n        \"37_0_SBLive_sf2\",\r\n        \"38_0_SBLive_sf2\",\r\n        \"39_0_SBLive_sf2\",\r\n        \"40_0_SBLive_sf2\",\r\n        \"41_0_SBLive_sf2\",\r\n        \"42_0_SBLive_sf2\",\r\n        \"43_0_SBLive_sf2\",\r\n        \"44_0_SBLive_sf2\",\r\n        \"45_0_SBLive_sf2\",\r\n        \"46_0_SBLive_sf2\",\r\n        \"47_0_SBLive_sf2\",\r\n        \"48_0_SBLive_sf2\",\r\n        \"49_0_SBLive_sf2\",\r\n        \"50_0_SBLive_sf2\",\r\n        \"51_0_SBLive_sf2\",\r\n        \"52_0_SBLive_sf2\",\r\n        \"53_0_SBLive_sf2\",\r\n        \"54_0_SBLive_sf2\",\r\n        \"55_0_SBLive_sf2\",\r\n        \"56_0_SBLive_sf2\",\r\n        \"57_0_SBLive_sf2\",\r\n        \"58_0_SBLive_sf2\",\r\n        \"59_0_SBLive_sf2\",\r\n        \"60_0_SBLive_sf2\",\r\n        \"61_0_SBLive_sf2\",\r\n        \"62_0_SBLive_sf2\",\r\n        \"63_0_SBLive_sf2\",\r\n        \"64_0_SBLive_sf2\",\r\n        \"65_0_SBLive_sf2\",\r\n        \"66_0_SBLive_sf2\",\r\n        \"67_0_SBLive_sf2\",\r\n        \"68_0_SBLive_sf2\",\r\n        \"69_0_SBLive_sf2\",\r\n        \"70_0_SBLive_sf2\",\r\n        \"71_0_SBLive_sf2\",\r\n        \"72_0_SBLive_sf2\",\r\n        \"73_0_SBLive_sf2\",\r\n        \"74_0_SBLive_sf2\",\r\n        \"75_0_SBLive_sf2\",\r\n        \"76_0_SBLive_sf2\",\r\n        \"77_0_SBLive_sf2\",\r\n        \"78_0_SBLive_sf2\",\r\n        \"79_0_SBLive_sf2\",\r\n        \"80_0_SBLive_sf2\",\r\n        \"81_0_SBLive_sf2\",\r\n      ];\r\n    }\r\n    return this.drumKeyArray;\r\n  };\r\n  drumInfo = (n: number) => {\r\n    var key = this.drumKeys()[n];\r\n    var p = 1 * Number(key.substr(0, 2));\r\n    return {\r\n      variable: \"_drum_\" + key,\r\n      url: \"https://surikov.github.io/webaudiofontdata/sound/128\" + key + \".js\",\r\n      pitch: p,\r\n      title: this.drumTitles()[p],\r\n    };\r\n  };\r\n  findDrum = (nn: number) => {\r\n    for (var i = 0; i < this.drumKeys().length; i++) {\r\n      if (nn === 1 * Number(this.drumKeys()[i].substring(0, 2))) {\r\n        return i;\r\n      }\r\n    }\r\n    return 0;\r\n  };\r\n}\r\nexport class WebAudioFontPlayer {\r\n  audioContext: AudioContext;\r\n  envelopes: any[];\r\n  loader: any;\r\n  onCacheFinish: any;\r\n  onCacheProgress: any;\r\n  afterTime: number;\r\n  nearZero: number;\r\n  constructor(audioContext: AudioContext) {\r\n    this.audioContext = audioContext;\r\n    this.envelopes = [];\r\n    this.loader = new WebAudioFontLoader(this);\r\n    this.onCacheFinish = null;\r\n    this.onCacheProgress = null;\r\n    this.afterTime = 0.05;\r\n    this.nearZero = 0.000001;\r\n  }\r\n  createChannel = () => {\r\n    return new WebAudioFontChannel(this.audioContext);\r\n  };\r\n  createReverberator = () => {\r\n    return new WebAudioFontReverberator(this.audioContext);\r\n  };\r\n  limitVolume = (volume: number) => {\r\n    if (volume) {\r\n      volume = 1.0 * volume;\r\n    } else {\r\n      volume = 0.5;\r\n    }\r\n    return volume;\r\n  };\r\n  queueChord = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    for (var i = 0; i < pitches.length; i++) {\r\n      this.queueWaveTable({\r\n        target,\r\n        preset,\r\n        when,\r\n        pitches: pitches[i],\r\n        duration,\r\n        volume: volume - Math.random() * 0.01,\r\n        slides\r\n      });\r\n    }\r\n  };\r\n  queueStrumUp = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    pitches.sort((a: number, b: number) => a - b);\r\n    this.queueStrum({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides\r\n    });\r\n  };\r\n  queueStrumDown = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    pitches.sort((a: number, b: number) => a - b);\r\n    this.queueStrum({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides\r\n    });\r\n  };\r\n  queueStrum = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    if (when < this.audioContext.currentTime) {\r\n      when = this.audioContext.currentTime;\r\n    }\r\n    for (var i = 0; i < pitches.length; i++) {\r\n      this.queueWaveTable({\r\n        target,\r\n        preset,\r\n        when: when + i * 0.01,\r\n        pitches: pitches[i],\r\n        duration,\r\n        volume: volume - Math.random() * 0.01,\r\n        slides\r\n      });\r\n      volume = 0.9 * volume;\r\n    }\r\n  };\r\n  queueSnap = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    volume = 1.5 * (volume || 1.0);\r\n    duration = 0.05;\r\n    this.queueChord({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides\r\n    });\r\n  };\r\n  queueWaveTable = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches: pitch,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    if (this.audioContext.state === \"suspended\") {\r\n      console.log(\"audioContext.resume\");\r\n      this.audioContext.resume();\r\n    }\r\n    volume = this.limitVolume(volume);\r\n    var zone = this.findZone(preset, pitch);\r\n    if (!zone.buffer) {\r\n      console.log(\"empty buffer \", zone);\r\n      return;\r\n    }\r\n    var baseDetune =\r\n      zone.originalPitch - 100.0 * zone.coarseTune - zone.fineTune;\r\n    var playbackRate = 1.0 * Math.pow(2, (100.0 * pitch - baseDetune) / 1200.0);\r\n    // var sampleRatio = zone.sampleRate / audioContext.sampleRate;\r\n    var startWhen = when;\r\n    if (startWhen < this.audioContext.currentTime) {\r\n      startWhen = this.audioContext.currentTime;\r\n    }\r\n    var waveDuration = duration + this.afterTime;\r\n    var loop = true;\r\n    if (zone.loopStart < 1 || zone.loopStart >= zone.loopEnd) {\r\n      loop = false;\r\n    }\r\n    if (!loop) {\r\n      if (waveDuration > zone.buffer.duration / playbackRate) {\r\n        waveDuration = zone.buffer.duration / playbackRate;\r\n      }\r\n    }\r\n    var envelope = this.findEnvelope({\r\n      target,\r\n      when: startWhen,\r\n      duration: waveDuration\r\n    });\r\n    this.setupEnvelope({\r\n      envelope,\r\n      zone,\r\n      volume,\r\n      startWhen,\r\n      waveDuration,\r\n      duration\r\n    });\r\n    envelope.audioBufferSourceNode = this.audioContext.createBufferSource();\r\n    envelope.audioBufferSourceNode.playbackRate.setValueAtTime(playbackRate, 0);\r\n    if (slides) {\r\n      if (slides.length > 0) {\r\n        envelope.audioBufferSourceNode.playbackRate.setValueAtTime(\r\n          playbackRate,\r\n          when\r\n        );\r\n        for (var i = 0; i < slides.length; i++) {\r\n          var newPlaybackRate =\r\n            1.0 * Math.pow(2, (100.0 * slides[i].pitch - baseDetune) / 1200.0);\r\n          var newWhen = when + slides[i].when;\r\n          envelope.audioBufferSourceNode.playbackRate.linearRampToValueAtTime(\r\n            newPlaybackRate,\r\n            newWhen\r\n          );\r\n        }\r\n      }\r\n    }\r\n    envelope.audioBufferSourceNode.buffer = zone.buffer;\r\n    if (loop) {\r\n      envelope.audioBufferSourceNode.loop = true;\r\n      envelope.audioBufferSourceNode.loopStart =\r\n        zone.loopStart / zone.sampleRate + zone.delay;\r\n      envelope.audioBufferSourceNode.loopEnd =\r\n        zone.loopEnd / zone.sampleRate + zone.delay;\r\n    } else {\r\n      envelope.audioBufferSourceNode.loop = false;\r\n    }\r\n    envelope.audioBufferSourceNode.connect(envelope);\r\n    envelope.audioBufferSourceNode.start(startWhen, zone.delay);\r\n    envelope.audioBufferSourceNode.stop(startWhen + waveDuration);\r\n    envelope.when = startWhen;\r\n    envelope.duration = waveDuration;\r\n    envelope.pitch = pitch;\r\n    envelope.preset = preset;\r\n    return envelope;\r\n  };\r\n  noZeroVolume = (n: number) => {\r\n    if (n > this.nearZero) {\r\n      return n;\r\n    } else {\r\n      return this.nearZero;\r\n    }\r\n  };\r\n  setupEnvelope = ({\r\n    envelope,\r\n    zone,\r\n    volume,\r\n    startWhen: when,\r\n    waveDuration: sampleDuration,\r\n    duration\r\n  }: IEnvelope) => {\r\n    envelope.gain.setValueAtTime(\r\n      this.noZeroVolume(0),\r\n      this.audioContext.currentTime\r\n    );\r\n    var lastTime = 0;\r\n    var lastVolume = 0;\r\n    var ahdsr = zone.ahdsr;\r\n    if (sampleDuration < duration + this.afterTime) {\r\n      duration = sampleDuration - this.afterTime;\r\n    }\r\n    if (ahdsr) {\r\n      if (!(ahdsr.length > 0)) {\r\n        ahdsr = [\r\n          {\r\n            duration: 0,\r\n            volume: 1,\r\n          },\r\n          {\r\n            duration: 0.5,\r\n            volume: 1,\r\n          },\r\n          {\r\n            duration: 1.5,\r\n            volume: 0.5,\r\n          },\r\n          {\r\n            duration: 3,\r\n            volume: 0,\r\n          },\r\n        ];\r\n      }\r\n    } else {\r\n      ahdsr = [\r\n        {\r\n          duration: 0,\r\n          volume: 1,\r\n        },\r\n        {\r\n          duration: duration,\r\n          volume: 1,\r\n        },\r\n      ];\r\n    }\r\n    envelope.gain.cancelScheduledValues(when);\r\n    envelope.gain.setValueAtTime(\r\n      this.noZeroVolume(ahdsr[0].volume * volume),\r\n      when\r\n    );\r\n    for (var i = 0; i < ahdsr.length; i++) {\r\n      if (ahdsr[i].duration > 0) {\r\n        if (ahdsr[i].duration + lastTime > duration) {\r\n          var r =\r\n            1 - (ahdsr[i].duration + lastTime - duration) / ahdsr[i].duration;\r\n          var n = lastVolume - r * (lastVolume - ahdsr[i].volume);\r\n          envelope.gain.linearRampToValueAtTime(\r\n            this.noZeroVolume(volume * n),\r\n            when + duration\r\n          );\r\n          break;\r\n        }\r\n        lastTime = lastTime + ahdsr[i].duration;\r\n        lastVolume = ahdsr[i].volume;\r\n        envelope.gain.linearRampToValueAtTime(\r\n          this.noZeroVolume(volume * lastVolume),\r\n          when + lastTime\r\n        );\r\n      }\r\n    }\r\n    envelope.gain.linearRampToValueAtTime(\r\n      this.noZeroVolume(0),\r\n      when + duration + this.afterTime\r\n    );\r\n  };\r\n  numValue = (aValue: number, defValue: number) => {\r\n    if (typeof aValue === \"number\") {\r\n      return aValue;\r\n    } else {\r\n      return defValue;\r\n    }\r\n  };\r\n  findEnvelope = ({ target, when, duration }: ISetup) => {\r\n    var envelope: any = null;\r\n    for (var i = 0; i < this.envelopes.length; i++) {\r\n      var e = this.envelopes[i];\r\n      if (\r\n        e.target === target &&\r\n        this.audioContext.currentTime > e.when + e.duration + 0.001\r\n      ) {\r\n        try {\r\n          e.audioBufferSourceNode.disconnect();\r\n          e.audioBufferSourceNode.stop(0);\r\n          e.audioBufferSourceNode = null;\r\n        } catch (x) {\r\n          //audioBufferSourceNode is dead already\r\n        }\r\n        envelope = e;\r\n        break;\r\n      }\r\n    }\r\n    if (!envelope) {\r\n      envelope = this.audioContext.createGain();\r\n      envelope.target = target;\r\n      envelope.connect(target);\r\n      envelope.cancel = () => {\r\n        if (envelope.when + envelope.duration > this.audioContext.currentTime) {\r\n          envelope.gain.cancelScheduledValues(0);\r\n          envelope.gain.setTargetAtTime(0.00001, this.audioContext.currentTime, 0.1);\r\n          envelope.when = this.audioContext.currentTime + 0.00001;\r\n          envelope.duration = 0;\r\n        }\r\n      };\r\n      this.envelopes.push(envelope);\r\n    }\r\n    return envelope;\r\n  };\r\n  adjustPreset = (preset: any) => {\r\n    for (var i = 0; i < preset.zones.length; i++) {\r\n      this.adjustZone(preset.zones[i]);\r\n    }\r\n  };\r\n  adjustZone = (zone: any) => {\r\n    if (zone.buffer) {\r\n      //\r\n    } else {\r\n      zone.delay = 0;\r\n      if (zone.sample) {\r\n        let decoded = atob(zone.sample);\r\n        zone.buffer = this.audioContext.createBuffer(\r\n          1,\r\n          decoded.length / 2,\r\n          zone.sampleRate\r\n        );\r\n        var float32Array = zone.buffer.getChannelData(0);\r\n        var b1, b2, n;\r\n        for (var i = 0; i < decoded.length / 2; i++) {\r\n          b1 = decoded.charCodeAt(i * 2);\r\n          b2 = decoded.charCodeAt(i * 2 + 1);\r\n          if (b1 < 0) {\r\n            b1 = 256 + b1;\r\n          }\r\n          if (b2 < 0) {\r\n            b2 = 256 + b2;\r\n          }\r\n          n = b2 * 256 + b1;\r\n          if (n >= 65536 / 2) {\r\n            n = n - 65536;\r\n          }\r\n          float32Array[i] = n / 65536.0;\r\n        }\r\n      } else {\r\n        if (zone.file) {\r\n          var datalen = zone.file.length;\r\n          var arraybuffer = new ArrayBuffer(datalen);\r\n          var view = new Uint8Array(arraybuffer);\r\n          let decoded = atob(zone.file);\r\n          var b;\r\n          for (let i = 0; i < decoded.length; i++) {\r\n            b = decoded.charCodeAt(i);\r\n            view[i] = b;\r\n          }\r\n          this.audioContext.decodeAudioData(arraybuffer, function (audioBuffer) {\r\n            zone.buffer = audioBuffer;\r\n          });\r\n        }\r\n      }\r\n      zone.loopStart = this.numValue(zone.loopStart, 0);\r\n      zone.loopEnd = this.numValue(zone.loopEnd, 0);\r\n      zone.coarseTune = this.numValue(zone.coarseTune, 0);\r\n      zone.fineTune = this.numValue(zone.fineTune, 0);\r\n      zone.originalPitch = this.numValue(zone.originalPitch, 6000);\r\n      zone.sampleRate = this.numValue(zone.sampleRate, 44100);\r\n      zone.sustain = this.numValue(zone.originalPitch, 0);\r\n    }\r\n  };\r\n  findZone = (preset: any, pitch: any) => {\r\n    var zone = null;\r\n    for (var i = preset.zones.length - 1; i >= 0; i--) {\r\n      zone = preset.zones[i];\r\n      if (zone.keyRangeLow <= pitch && zone.keyRangeHigh + 1 >= pitch) {\r\n        break;\r\n      }\r\n    }\r\n    try {\r\n      this.adjustZone(zone);\r\n    } catch (ex) {\r\n      console.log(\"adjustZone\", ex);\r\n    }\r\n    return zone;\r\n  };\r\n  cancelQueue = () => {\r\n    for (var i = 0; i < this.envelopes.length; i++) {\r\n      var e = this.envelopes[i];\r\n      e.gain.cancelScheduledValues(0);\r\n      e.gain.setValueAtTime(this.nearZero, this.audioContext.currentTime);\r\n      e.when = -1;\r\n      try {\r\n        e.audioBufferSourceNode.disconnect();\r\n      } catch (ex) {\r\n        console.log(ex);\r\n      }\r\n    }\r\n  };\r\n}\r\nexport class WebAudioFontReverberator {\r\n  audioContext: AudioContext;\r\n  input: any;\r\n  convolver: any\r\n  dry: any\r\n  wet: any\r\n  irrArrayBuffer: any\r\n  output: any\r\n  constructor(audioContext: AudioContext) {\r\n    console.log(\"WebAudioFont Reverberator v1.08\");\r\n    this.audioContext = audioContext;\r\n    this.input = this.audioContext.createBiquadFilter();\r\n    this.input.type = \"lowpass\";\r\n    this.input.frequency.setTargetAtTime(18000, 0, 0.0001);\r\n    this.convolver = null;\r\n    this.output = audioContext.createGain();\r\n    this.dry = audioContext.createGain();\r\n    this.dry.gain.setTargetAtTime(0.9, 0, 0.0001);\r\n    this.dry.connect(this.output);\r\n    this.wet = audioContext.createGain();\r\n    this.wet.gain.setTargetAtTime(0.5, 0, 0.0001);\r\n    this.input.connect(this.dry);\r\n    this.input.connect(this.wet);\r\n    import(\"./Reverbrator\").then(({ reverbrator }) => {\r\n      var irr = reverbrator;\r\n      var datalen = irr.length / 2;\r\n      this.irrArrayBuffer = new ArrayBuffer(datalen);\r\n      var view = new Uint8Array(this.irrArrayBuffer);\r\n      var decoded = atob(irr);\r\n      var b;\r\n      for (var i = 0; i < decoded.length; i++) {\r\n        b = decoded.charCodeAt(i);\r\n        view[i] = b;\r\n      }\r\n      this.audioContext.decodeAudioData(this.irrArrayBuffer, (audioBuffer) => {\r\n        this.convolver = audioContext.createConvolver();\r\n        this.convolver.buffer = audioBuffer;\r\n        this.wet.connect(this.convolver);\r\n        this.convolver.connect(this.output);\r\n        console.log(\"convolver audioBuffer\", audioBuffer);\r\n      });\r\n    })\r\n  }\r\n}\r\n","import Song from \"../plugin/Melodition/Song\";\r\nimport { WebAudioFontChannel, WebAudioFontPlayer, WebAudioFontReverberator } from \"../plugin/Melodition/WebAudio\";\r\nimport { PlayerDataInfo } from \"../_types/player.types\";\r\n\r\nconst zarib = [0, 0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\r\n\r\nconst AudioContextFunc = window.AudioContext || window.webkitAudioContext;\r\n\r\nconst audioContext = new AudioContextFunc();\r\nconst master = new WebAudioFontChannel(audioContext);\r\nconst fontPlayer = new WebAudioFontPlayer(audioContext);\r\nif (typeof window.orientation === 'undefined') {\r\n    console.log(\"Melo WebAudioFontReverberator\");\r\n    const reverberator = new WebAudioFontReverberator(audioContext)\r\n    reverberator.output.connect(audioContext.destination);\r\n    master.output.connect(reverberator.input);\r\n} else {\r\n    console.log(\"skip WebAudioFontReverberator\");\r\n    master.output.connect(audioContext.destination);\r\n}\r\n\r\nexport class ResetPlayer {\r\n    player = fontPlayer;\r\n    master = master\r\n    currentSong?: Song;\r\n    loading = true;\r\n    onAir = false;\r\n    loaded = false;\r\n    playMode = false;\r\n    sL = 16;\r\n    TrackID = 0;\r\n    tempo = 120;\r\n    zaribTempo = 1;\r\n    storeFingers: any[] = []\r\n    storeTracks: any[] = []\r\n    storeDrums: any[] = []\r\n    trackInfo: any[] = []\r\n    drumInfo: any[] = []\r\n    seekValue = 0\r\n    songs: { id: number, vol: number }[] = [];\r\n    songLength = 272;\r\n    tapSize = 32;\r\n    fingerNotes: any = {};\r\n    equalizer: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    drumVolumes: number[] = [70, 70, 70, 70, 70, 70, 70, 70];\r\n    constructor(options?: Partial<any>) {\r\n        Object.assign(this, options);\r\n        this.master.band32.gain.setValueAtTime(this.equalizer[0], 0);\r\n        this.master.band64.gain.setValueAtTime(this.equalizer[1], 0);\r\n        this.master.band128.gain.setValueAtTime(this.equalizer[2], 0);\r\n        this.master.band256.gain.setValueAtTime(this.equalizer[3], 0);\r\n        this.master.band512.gain.setValueAtTime(this.equalizer[4], 0);\r\n        this.master.band1k.gain.setValueAtTime(this.equalizer[5], 0);\r\n        this.master.band2k.gain.setValueAtTime(this.equalizer[6], 0);\r\n        this.master.band4k.gain.setValueAtTime(this.equalizer[7], 0);\r\n        this.master.band8k.gain.setValueAtTime(this.equalizer[8], 0);\r\n        this.master.band16k.gain.setValueAtTime(this.equalizer[9], 0);\r\n    }\r\n}\r\n\r\n\r\nexport const lessonCompiler = async (content: PlayerDataInfo): Promise<ResetPlayer | undefined> => {\r\n    const Melo = new ResetPlayer();\r\n    const dataString = content.song.content;\r\n    const fingers = content.fingers\r\n    let neededTracks: number[] = []\r\n    let neededDrums: number[] = []\r\n    try {\r\n        Melo.TrackID = content.track.id;\r\n        let storeFingers = {} as any;\r\n        if (fingers) {\r\n            for (const p in fingers) {\r\n                const strings = fingers[p].split(\"-\");\r\n                storeFingers[p] = {};\r\n                for (let l = 0; l < strings.length - 1; l++) {\r\n                    const main = strings[l].split(\"+\");\r\n                    const beat = Number(main[0]) + 16;\r\n                    var cnt = main[1].length / 5;\r\n                    for (let i = 0; i < cnt; i++) {\r\n                        const k = main[1].substring(i * 5, i * 5 + 2);\r\n                        const f = main[1].substring(i * 5 + 2, i * 5 + 4);\r\n                        const s = main[1].substring(i * 5 + 4, i * 5 + 5);\r\n                        if (s !== \"e\") {\r\n                            if (!storeFingers[p][f]) {\r\n                                storeFingers[p][f] = {};\r\n                            }\r\n                            if (!storeFingers[p][f][beat]) {\r\n                                storeFingers[p][f][beat] = [];\r\n                            }\r\n                            storeFingers[p][f][beat].push(k);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            Melo.storeFingers = { ...storeFingers };\r\n        }\r\n        const strings = dataString.split(\"-\");\r\n        Melo.tempo = parseInt(strings[0], 16);\r\n        Melo.sL = parseInt(strings[1]) + 1;\r\n        const step = parseInt(strings[2]);\r\n        Melo.zaribTempo = zarib[step];\r\n        for (let i = 0; i < 10; i++) {\r\n            let t = strings[5].substring(i * 2, i * 2 + 2);\r\n            Melo.equalizer[i] = parseInt(t, 16) - 10;\r\n        }\r\n        let storeDrums = [];\r\n        const cntD = strings[6].length / 7;\r\n        for (var i = 0; i < cntD; i++) {\r\n            var drum = parseInt(strings[6].substring(i * 7, i * 7 + 1));\r\n            var key = parseInt(strings[6].substring(i * 7 + 1, i * 7 + 3), 32);\r\n            var data = parseInt(strings[6].substring(i * 7 + 3, i * 7 + 7), 32);\r\n            var i32 = key & parseInt(\"1111111\", 2);\r\n            if ((data | parseInt(\"0000000000000001\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 0,\r\n                });\r\n            if ((data | parseInt(\"0000000000000010\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 1,\r\n                });\r\n            if ((data | parseInt(\"0000000000000100\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 2,\r\n                });\r\n            if ((data | parseInt(\"0000000000001000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 3,\r\n                });\r\n            if ((data | parseInt(\"0000000000010000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 4,\r\n                });\r\n            if ((data | parseInt(\"0000000000100000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 5,\r\n                });\r\n            if ((data | parseInt(\"0000000001000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 6,\r\n                });\r\n            if ((data | parseInt(\"0000000010000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 7,\r\n                });\r\n            if ((data | parseInt(\"0000000100000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 8,\r\n                });\r\n            if ((data | parseInt(\"0000001000000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 9,\r\n                });\r\n            if ((data | parseInt(\"0000010000000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 10,\r\n                });\r\n            if ((data | parseInt(\"0000100000000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 11,\r\n                });\r\n            if ((data | parseInt(\"0001000000000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 12,\r\n                });\r\n            if ((data | parseInt(\"0010000000000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 13,\r\n                });\r\n            if ((data | parseInt(\"0100000000000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 14,\r\n                });\r\n            if ((data | parseInt(\"1000000000000000\", 2)) === data)\r\n                storeDrums.push({\r\n                    drum: drum,\r\n                    beat: i32 * 16 + 15,\r\n                });\r\n        }\r\n        storeDrums.forEach((drm, index, self) => {\r\n            if (index === self.findIndex((t) => (\r\n                t.drum === drm.drum\r\n            ))) neededDrums.push(drm.drum)\r\n            Melo.storeDrums.push({\r\n                drum: drm.drum,\r\n                beat: drm.beat + 16,\r\n            });\r\n        });\r\n        let storeTracks = [];\r\n        const cntT = strings[7].length / 10;\r\n        for (let i = 0; i < cntT; i++) {\r\n            var beat = parseInt(strings[7].substring(i * 10, i * 10 + 3), 32);\r\n            var track = parseInt(\r\n                strings[7].substring(i * 10 + 3, i * 10 + 3 + 1), 32\r\n            );\r\n            var length = parseInt(\r\n                strings[7].substring(i * 10 + 4, i * 10 + 4 + 2), 32\r\n            );\r\n            var pitch = parseInt(\r\n                strings[7].substring(i * 10 + 6, i * 10 + 6 + 2), 32\r\n            );\r\n            var shift =\r\n                parseInt(strings[7].substring(i * 10 + 8, i * 10 + 8 + 2), 32) - 64;\r\n            storeTracks.push({\r\n                track: track,\r\n                beat: beat,\r\n                length: length,\r\n                shift: shift,\r\n                pitch: pitch,\r\n            });\r\n        }\r\n        Melo.storeTracks = [];\r\n        storeTracks.forEach((trc, index, self) => {\r\n            if (index === self.findIndex((t) => (\r\n                t.track === trc.track\r\n            ))) neededTracks.push(trc.track)\r\n            Melo.storeTracks.push({\r\n                beat: trc.beat + 16,\r\n                pitch: trc.pitch,\r\n                track: trc.track,\r\n                shift: trc.shift,\r\n                length: trc.length,\r\n            });\r\n            if (trc.track === Melo.TrackID) {\r\n                const beat = trc.beat;\r\n                if (Melo.fingerNotes[beat + 16]) {\r\n                    Melo.fingerNotes[beat + 16].push({ pitch: trc.pitch, length: trc.length });\r\n                } else {\r\n                    Melo.fingerNotes[beat + 16] = [];\r\n                    Melo.fingerNotes[beat + 16].push({ pitch: trc.pitch, length: trc.length });\r\n                }\r\n            }\r\n        });\r\n        neededDrums.forEach((id, i) => {\r\n            let drum = {\r\n                audioNode: audioContext.createGain(),\r\n                id: id,\r\n                replacement: parseInt(strings[8].substring(i * 3, i * 3 + 3), 16),\r\n                sound: null,\r\n                info: \"\",\r\n                volume: 70\r\n            };\r\n            if (drum.replacement) {\r\n                let info = Melo.player.loader.drumInfo(\r\n                    drum.replacement - 1\r\n                );\r\n                console.log(info)\r\n                Melo.player.loader.startLoad(\r\n                    info.url,\r\n                    info.variable\r\n                );\r\n                drum.info = info;\r\n            }\r\n            import(`../assets/sounds/default_drum_0${id}`).then((drm) => {\r\n                drum = { ...drum, ...drm.default }\r\n                drum.volume = 10 * parseInt(strings[4].substring(id, id + 1), 16);\r\n                drum.audioNode.connect(Melo.master.input);\r\n                Melo.player.adjustPreset(drum.sound);\r\n                Melo.drumInfo.push(drum);\r\n            });\r\n        })\r\n        neededTracks.forEach((id, i) => {\r\n            let track = {\r\n                audioNode: audioContext.createGain(),\r\n                nn: id,\r\n                replacement: parseInt(strings[9].substring(i * 3, i * 3 + 3), 16),\r\n                sound: null,\r\n                info: \"\",\r\n                volume: 70\r\n            };\r\n            if (track.replacement) {\r\n                let info = Melo.player.loader.instrumentInfo(\r\n                    track.replacement - 1\r\n                );\r\n                console.log(info)\r\n                Melo.player.loader.startLoad(\r\n                    audioContext,\r\n                    info.url,\r\n                    info.variable\r\n                );\r\n                track.info = info;\r\n            }\r\n            import(`../assets/sounds/default_tone_0${id}`).then((trc) => {\r\n                track = { ...track, ...trc.default }\r\n                track.volume = 10 * parseInt(strings[3].substring(id, id + 1), 16);\r\n                track.audioNode.connect(Melo.master.input);\r\n                Melo.player.adjustPreset(track.sound);\r\n                Melo.trackInfo.push(track);\r\n            });\r\n        })\r\n        let songs = [];\r\n        if (strings[10] && strings[10] !== \"000a\") {\r\n            let cnt = strings[10].length / 4;\r\n            for (let i = 0; i < cnt; i++) {\r\n                let track = parseInt(strings[10].substring(i * 4, i * 4 + 3), 32);\r\n                let vol = parseInt(strings[10].substring(i * 4 + 3, i * 4 + 4), 16) / 10;\r\n                songs.push({ id: track, vol: vol });\r\n            }\r\n        }\r\n        if (songs.length > 0) {\r\n            Melo.currentSong = new Song(audioContext);\r\n        }\r\n        Melo.songs = songs;\r\n    } catch (ex) {\r\n        Promise.reject(ex);\r\n    } finally {\r\n        return Melo\r\n    }\r\n}","import { Dispatch } from \"react\";\r\nimport { AppActions } from \"../_types\";\r\nimport {\r\n    REQUEST_PLAYER,\r\n    PlayerDataInfo,\r\n    RESET_PLAYER,\r\n    RESIZE_PLAYER,\r\n    DRAW_FINGER,\r\n    DRAW_PIANO,\r\n    DRAW_GAME,\r\n    ICanvas,\r\n    ENTER_PLAYMODE,\r\n    EXIT_PLAYMODE\r\n} from \"../_types/player.types\";\r\nimport { lessonCompiler } from \"../_helpers/playerApi\";\r\nimport { API, AudioApi } from \"../_helpers/api\";\r\nimport { Melodition } from \"../plugin/Melodition/Melodition\";\r\nimport { sizeCalculator } from \"../_helpers/pianoSizes\";\r\n\r\nvar Melo: Melodition | undefined;\r\n\r\nexport const requestPlayer = (info: PlayerDataInfo) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        lessonCompiler(info).then((Melodi) => {\r\n            if (Melodi) {\r\n                if (Melodi.songs.length > 0) {\r\n                    Melodi.songs.forEach((song, index) =>\r\n                        API.get(`/song/v2/${song.id}`).then(({ data }) =>\r\n                            AudioApi(data).then((res) => {\r\n                                Melodi.currentSong?.loadBuffer({ buffer: res.data, vol: song.vol })\r\n                                    .then(() => {\r\n                                        if (Melodi.songs.length === index + 1) {\r\n                                            Melodi.loaded = true;\r\n                                            Melo = new Melodition(Melodi)\r\n                                            dispatch({\r\n                                                type: REQUEST_PLAYER,\r\n                                                payload: Melodi\r\n                                            });\r\n                                        }\r\n                                    })\r\n                            }).catch((bufferError) => console.log(bufferError))\r\n                        ).catch((urlError) => console.log(urlError))\r\n                    )\r\n                } else {\r\n                    Melodi.loaded = true;\r\n                    Melo = new Melodition(Melodi)\r\n                    dispatch({ type: REQUEST_PLAYER, payload: Melodi });\r\n                }\r\n            }\r\n        }).catch(err => console.log(err))\r\n    }\r\n)\r\n\r\nexport const drawPiano = (keyRefs: SVGGElement[], canvasSize?: ICanvas, tapSize?: number) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        if (canvasSize && tapSize) {\r\n            const pianoSize = sizeCalculator(keyRefs, canvasSize)\r\n            Melo?.assigner({ pianoSize, keyRefs, canvasSize, tapSize })\r\n            dispatch({ type: DRAW_PIANO, payload: { pianoSize, canvasSize, tapSize } })\r\n        } else {\r\n            Melo?.assigner({ keyRefs })\r\n            dispatch({ type: DRAW_PIANO })\r\n        }\r\n    }\r\n)\r\nexport const drawFinger = (payload: any) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.assigner(payload)\r\n        dispatch({ type: DRAW_FINGER })\r\n    }\r\n)\r\nexport const drawGame = (payload: any) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.drawGame(payload)\r\n        dispatch({ type: DRAW_GAME })\r\n    }\r\n)\r\nexport const resizePlayer = () => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.stopPlay()\r\n        dispatch({ type: RESIZE_PLAYER })\r\n    }\r\n)\r\nexport const resetPlayer = () => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.stopPlay()\r\n        dispatch({ type: RESET_PLAYER })\r\n    }\r\n)\r\nexport const changeMode = (mode: boolean) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.assigner({ playMode: mode });\r\n        Melo?.stopPlay()\r\n        if (mode)\r\n            dispatch({ type: ENTER_PLAYMODE });\r\n        else\r\n            dispatch({ type: EXIT_PLAYMODE });\r\n    }\r\n)\r\n\r\nexport const startPlayer = () => {\r\n    Melo?.startPlay()\r\n}\r\nexport const stopPlayer = () => {\r\n    Melo?.stopPlay()\r\n}\r\nexport const midiNoteOn = (pitch: number) => {\r\n    Melo?.midiNoteOn(pitch, 0.7)\r\n}\r\nexport const midiNoteOff = (pitch: number) => {\r\n    Melo?.midiNoteOff(pitch)\r\n}\r\n","export class Midi {\r\n    touchedKeys: any[] = []\r\n    score: any = []\r\n}\r\nconst MidiState = new Midi();\r\n\r\nexport default MidiState","\r\ninterface IFingersClass {\r\n  note: any,\r\n  len: number,\r\n  hand: any,\r\n  beat: number\r\n}\r\nexport class FingersClass {\r\n  len: number;\r\n  note: any;\r\n  finger: any;\r\n  timer: any;\r\n  hand: string;\r\n  color: string;\r\n  bColor: string;\r\n  end: number;\r\n  constructor({ note, len, hand, beat }: IFingersClass) {\r\n    this.len = len;\r\n    this.note = note;\r\n    this.end = this.len - 1 + beat;\r\n    if (this.end <= beat) {\r\n      this.end = beat + 1;\r\n    }\r\n    this.timer = null;\r\n    this.hand = hand.hand;\r\n    this.finger = hand.finger;\r\n    this.bColor = note.id;\r\n    if (this.hand === \"right\") {\r\n      this.color = \"yellow\";\r\n    } else {\r\n      this.color = \"skyblue\";\r\n    }\r\n  }\r\n  show() {\r\n    this.note.children.back.setAttribute(\"fill\", this.color);\r\n    this.finger.setAttribute(\"fill\", this.color);\r\n  }\r\n  hide() {\r\n    this.note.children.back.setAttribute(\"fill\", this.bColor);\r\n    this.note.children.back.style.fill = \"\";\r\n    this.finger.setAttribute(\"fill\", \"rgba(99, 99, 99, 0.25)\");\r\n  }\r\n}\r\nexport class BackMover {\r\n  public y: number;\r\n  public end: number;\r\n  private yPos: number;\r\n  public margin: number;\r\n  constructor(beat: number, height: number, margin: number) {\r\n    this.y = 0;\r\n    this.margin = margin;\r\n    this.yPos = beat * height;\r\n    this.end = this.yPos + height + margin;\r\n  }\r\n  update = (ctx: CanvasRenderingContext2D, img: HTMLImageElement) => {\r\n    ctx.drawImage(img, 0, Math.floor(this.y - this.yPos - this.margin));\r\n  }\r\n}\r\ninterface IMusicLine {\r\n  x: number;\r\n  y: number;\r\n  lw: number;\r\n  color: string;\r\n  width: number;\r\n}\r\nexport class MusicLine {\r\n  private x: number;\r\n  private y: number;\r\n  private lw: number;\r\n  private color: string;\r\n  private width: number;\r\n  constructor({ width, color, x, y, lw }: IMusicLine) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.color = color;\r\n    this.lw = lw\r\n  }\r\n  draw = (ctx: CanvasRenderingContext2D) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, this.y);\r\n    ctx.lineTo(this.width, this.y);\r\n    ctx.lineWidth = this.lw\r\n    ctx.strokeStyle = this.color\r\n    ctx.stroke();\r\n    ctx.fill();\r\n  }\r\n}\r\ninterface INote {\r\n  width: number,\r\n  height: number,\r\n  color: string,\r\n  x: number,\r\n  note: number;\r\n  y: number,\r\n  end: number,\r\n  text: string,\r\n  gap: number,\r\n  tapSize: number\r\n}\r\nexport class Note {\r\n  y: number;\r\n  x: number;\r\n  r: number;\r\n  gap: number;\r\n  beg: number;\r\n  end: number;\r\n  start: number;\r\n  height: number;\r\n  width: number;\r\n  mover: number;\r\n  note: number;\r\n  tapSize: number;\r\n  text: string;\r\n  color: string;\r\n  lineColor: string;\r\n  crash: boolean;\r\n  hit?: number;\r\n  constructor({ width, height, color, x, y, end, note, text, gap, tapSize }: INote) {\r\n    this.y = y;\r\n    this.start = -y;\r\n    this.tapSize = tapSize;\r\n    this.gap = gap;\r\n    this.beg = y + gap;\r\n    this.end = end;\r\n    this.note = note;\r\n    this.height = -height;\r\n    this.x = x;\r\n    this.text = text;\r\n    this.width = width;\r\n    this.r = width / 2;\r\n    this.color = color;\r\n    this.lineColor = 'black';\r\n    this.mover = height;\r\n    this.crash = false;\r\n  }\r\n  move = () => {\r\n    this.crash = true;\r\n    this.mover = this.y - this.gap;\r\n    if (this.mover > -this.height) {\r\n      this.mover = -this.height\r\n    }\r\n  }\r\n  update = (ctx: CanvasRenderingContext2D) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x, this.y + this.start);\r\n    ctx.lineTo(this.x, this.y + this.height);\r\n    ctx.lineWidth = this.width * 0.85;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.lineCap = 'round';\r\n    ctx.stroke();\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x, this.y + this.start);\r\n    ctx.lineTo(this.x, this.y + this.height);\r\n    ctx.lineWidth = this.width * 0.2;\r\n    ctx.strokeStyle = 'white';\r\n    ctx.stroke();\r\n    if (this.crash) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.x, this.y + this.start);\r\n      ctx.lineTo(this.x, this.y - this.mover);\r\n      ctx.lineWidth = this.width * 0.2;\r\n      ctx.strokeStyle = 'red';\r\n      ctx.stroke();\r\n    }\r\n    if (this.hit) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.x, this.y + this.start);\r\n      ctx.lineTo(this.x, this.y - this.hit);\r\n      ctx.lineWidth = this.width * 0.25;\r\n      ctx.strokeStyle = this.color;\r\n      ctx.stroke();\r\n    }\r\n    if (this.crash && !this.hit) {\r\n      this.color = 'red';\r\n    }\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y + this.start, this.r * 1.4, 0, 2 * Math.PI);\r\n    ctx.fillStyle = 'black';\r\n    ctx.fill()\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y + this.start, this.r, 0, 2 * Math.PI);\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill()\r\n    ctx.font = 'bold ' + this.r * 1.3 + 'px arial';\r\n    ctx.textAlign = 'center';\r\n    ctx.textBaseline = 'middle';\r\n    ctx.fillStyle = 'black';\r\n    ctx.fillText(this.text, this.x, this.y + this.start + 1);\r\n  }\r\n}\r\n","import MidiState from \"../../_helpers/midiContext\";\r\nimport { IPianoSizes } from \"../../_types/player.types\";\r\nimport { BackMover, MusicLine, Note } from \"./Canvas\";\r\n\r\nexport default class Game {\r\n  public counter = 0;\r\n  public tapSize: number = 32;\r\n  public songLength: number = 17;\r\n  private gap: number = 384;\r\n  private margin: number = 128;\r\n  private width: number;\r\n  private height: number;\r\n  private notes: Note[] = [];\r\n  private image: HTMLImageElement;\r\n  private myObstacles: Note[][] = [];\r\n  private backMover: BackMover[] = [];\r\n  private fullSongCanvas: Note[] = [];\r\n  private context: CanvasRenderingContext2D;\r\n  constructor(canvas: HTMLCanvasElement) {\r\n    this.image = new Image();\r\n    this.width = canvas.width;\r\n    this.height = canvas.height;\r\n    this.context = canvas.getContext(\"2d\")!;\r\n  }\r\n  assigner = (options: Partial<any>) => {\r\n    Object.assign(this, options);\r\n  }\r\n  playGame = (y: number) => {\r\n    this.clear();\r\n    this.updateBacks(y)\r\n    this.updateNotes(y)\r\n  }\r\n  clear = () => {\r\n    this.context.clearRect(0, 0, this.width, this.height);\r\n  }\r\n  pitchName = (pitch: number) => {\r\n    let n = pitch % 12;\r\n    let t = \"C\";\r\n    if (n === 1) {\r\n      t = \"Db\";\r\n    }\r\n    if (n === 2) {\r\n      t = \"D\";\r\n    }\r\n    if (n === 3) {\r\n      t = \"Eb\";\r\n    }\r\n    if (n === 4) {\r\n      t = \"E\";\r\n    }\r\n    if (n === 5) {\r\n      t = \"F\";\r\n    }\r\n    if (n === 6) {\r\n      t = \"Gb\";\r\n    }\r\n    if (n === 7) {\r\n      t = \"G\";\r\n    }\r\n    if (n === 8) {\r\n      t = \"Ab\";\r\n    }\r\n    if (n === 9) {\r\n      t = \"A\";\r\n    }\r\n    if (n === 10) {\r\n      t = \"Bb\";\r\n    }\r\n    if (n === 11) {\r\n      t = \"B\";\r\n    }\r\n    return \"\" + t;\r\n  }\r\n  drawImage = () => {\r\n    const myLine = document.createElement(\"canvas\").getContext(\"2d\")!;\r\n    myLine.canvas.width = this.width;\r\n    myLine.canvas.height = this.height;\r\n    myLine.save();\r\n    Array.from(Array(17), (_, i) => i).forEach((_, v) => {\r\n      const lineWidth =\r\n        v % 16 === 0\r\n          ? 1.5\r\n          : v % 8 === 0\r\n            ? 1.2\r\n            : v % 4 === 0\r\n              ? 1\r\n              : v % 2 === 0\r\n                ? 0.8\r\n                : 0.5;\r\n      const strokeStyle =\r\n        v % 16 === 0\r\n          ? \"black\"\r\n          : v % 8 === 0\r\n            ? \"black\"\r\n            : v % 4 === 0\r\n              ? \"rgba(0,0,0,0.5)\"\r\n              : v % 2 === 0\r\n                ? \"rgba(0,0,0,0.5)\"\r\n                : \"rgba(0,0,0,0.2)\";\r\n      const yPos = v * this.tapSize;\r\n      const line = new MusicLine({\r\n        width: this.width,\r\n        color: strokeStyle,\r\n        x: 0,\r\n        y: yPos,\r\n        lw: lineWidth,\r\n      });\r\n      line.draw(myLine);\r\n    });\r\n    this.image.src = myLine.canvas.toDataURL(\"image/png\");\r\n    let firstLine: BackMover;\r\n    this.image.onload = () => {\r\n      if (!firstLine) {\r\n        firstLine = new BackMover(0, this.height, this.margin);\r\n        firstLine.update(this.context, this.image);\r\n      }\r\n    };\r\n  }\r\n  drawNote = (showTrack: any[], notePos: IPianoSizes[]) => {\r\n    const tap = this.tapSize;\r\n    Array.from(Array(this.songLength), (_, i) => i).forEach((_, m) => {\r\n      const r = notePos[1].width;\r\n      const y = tap * (16 * m);\r\n      this.myObstacles[m] = [];\r\n      showTrack.forEach((p) => {\r\n        if (p.beat >= m * 16) {\r\n          if (p.beat < (m + 1) * 16) {\r\n            const yy = y + tap * (p.beat % 16);\r\n            const cc = notePos[p.pitch].center;\r\n            const le = yy + tap * p.length;\r\n            const note = new Note({\r\n              width: r,\r\n              height: le,\r\n              color: \"yellow\",\r\n              x: cc,\r\n              y: yy,\r\n              end: le + this.height * 3,\r\n              text: this.pitchName(p.pitch),\r\n              note: p.pitch + 36,\r\n              gap: this.gap,\r\n              tapSize: this.tapSize\r\n            });\r\n            this.myObstacles[m].push(note);\r\n            this.fullSongCanvas.push(note);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n  drawBack = () => {\r\n    this.backMover = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      this.backMover.push(new BackMover(i, this.height, this.margin));\r\n    }\r\n  }\r\n  pushNote = (num?: number) => {\r\n    if (num) this.counter = num;\r\n    if (\r\n      this.myObstacles[this.counter] &&\r\n      this.myObstacles[this.counter].length > 0\r\n    ) {\r\n      this.myObstacles[this.counter].forEach((g) => {\r\n        this.notes.push(g);\r\n      });\r\n    }\r\n    this.counter++;\r\n    this.backMover.push(new BackMover(this.counter + 2, this.height, this.margin));\r\n  }\r\n  updateNotes = (y: number) => {\r\n    this.notes.forEach((note, i) => {\r\n      note.y = y;\r\n      note.update(this.context);\r\n      if (note.end < y) {\r\n        this.notes.splice(i, 1);\r\n        // missing notes\r\n        // if (!note.hit)\r\n        // \tthis.score.push([note.note, 'miss'])\r\n      }\r\n      if (this.gap - note.y <= note.start) {\r\n        let hit: string;\r\n        MidiState.touchedKeys.forEach((touch) => {\r\n          if (note.note === touch.note) {\r\n            if (\r\n              touch.y > note.beg - this.tapSize &&\r\n              touch.y < note.beg + this.tapSize\r\n            ) {\r\n              note.hit = y - this.gap + this.tapSize * 0.1;\r\n              if (\r\n                touch.y - this.tapSize * 0.3 <= note.beg &&\r\n                touch.y + this.tapSize * 0.3 >= note.beg\r\n              ) {\r\n                hit = \"perfect\";\r\n                note.color = \"green\";\r\n              } else if (touch.y > note.beg) {\r\n                hit = \"late\";\r\n                note.color = \"purple\";\r\n              } else if (touch.y < note.beg) {\r\n                hit = \"early\";\r\n                note.color = \"orange\";\r\n              }\r\n              if (!touch.hit) {\r\n                touch[\"hit\"] = hit;\r\n                MidiState.score.push([note.note, touch.hit]);\r\n                console.log(MidiState.score);\r\n              }\r\n            }\r\n          }\r\n        });\r\n        note.move();\r\n      }\r\n    });\r\n  }\r\n  updateBacks = (y: number) => {\r\n    this.backMover.forEach((back, i) => {\r\n      back.y = y;\r\n      back.update(this.context, this.image);\r\n      if (back.y > back.end) {\r\n        this.backMover.splice(i, 1);\r\n      }\r\n    });\r\n  }\r\n  updateFullSong = (y: number) => {\r\n    this.clear();\r\n    Array.from(Array(this.songLength), (_, i) => i).forEach((_, m) => {\r\n      this.context.drawImage(this.image, 0, Math.floor(y - m * this.image.height - this.tapSize * 4));\r\n    });\r\n    this.fullSongCanvas.forEach(note => {\r\n      note.y = y;\r\n      note.update(this.context);\r\n    });\r\n  }\r\n};","import { WebAudioFontChannel, WebAudioFontPlayer } from \"./WebAudio\";\r\nimport { ICanvas, IPianoSizes } from \"../../_types/player.types\";\r\nimport MidiState from \"../../_helpers/midiContext\";\r\nimport { FingersClass } from \"../Game/Canvas\";\r\nimport Game from \"../Game/Game\";\r\nimport Song from \"./Song\";\r\n\r\nexport class Melodition {\r\n    public game?: Game;\r\n    public master?: WebAudioFontChannel;\r\n    public player?: WebAudioFontPlayer;\r\n    public currentSong?: Song;\r\n    public loaded: boolean = false;\r\n    public onAir: boolean = false;\r\n    public score: any[] = [];\r\n    public handRefs: any = [];\r\n    public seekBar?: any;\r\n    public keyRefs: SVGGElement[] = [];\r\n    public canvasSize?: ICanvas;\r\n    public pianoSize?: IPianoSizes[];\r\n    public seekValue: number = 0;\r\n    public songLength = 272;\r\n    public tapSize = 32;\r\n    public loading = true;\r\n    public playMode = false;\r\n    public sL = 16;\r\n    public TrackID = 0;\r\n    public tempo = 120;\r\n    public zaribTempo = 1;\r\n    public storeFingers: any[] = [];\r\n    public storeTracks: any[] = [];\r\n    public storeDrums: any[] = [];\r\n    public trackInfo: any[] = [];\r\n    public drumInfo: any[] = [];\r\n    public fingerNotes: any = {};\r\n    public equalizer: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    public drumVolumes: number[] = [70, 70, 70, 70, 70, 70, 70, 70];\r\n    private firstDelay!: NodeJS.Timeout;\r\n    private tickID!: NodeJS.Timeout;\r\n    private currentBeat: number = 0;\r\n    private tickerDelay: number = 1;\r\n    private tickerStep: number = 0;\r\n    private animeFrame: number = 0;\r\n    private nextWhen: number = 0;\r\n    private nextBeat: number = 0;\r\n    private anime: number[] = [];\r\n    private yPos: number = 0;\r\n    private sentWhen: number = 0;\r\n    private measures: number = 16;\r\n    private finger: FingersClass[] = [];\r\n    private midiKeys: any[] = [];\r\n    constructor(options: Partial<any>) {\r\n        Object.assign(this, options);\r\n    }\r\n    assigner(options: Partial<any>) {\r\n        console.log(options)\r\n        Object.assign(this, options);\r\n    }\r\n    drawGame = (canvas: HTMLCanvasElement) => {\r\n        this.game = new Game(canvas)\r\n        this.game.assigner({\r\n            tapSize: this.tapSize,\r\n            songLength: this.sL,\r\n            gap: this.tapSize * 12,\r\n            margin: this.tapSize * 4\r\n        })\r\n        const showTrack: {\r\n            beat: number,\r\n            pitch: number,\r\n            shift: number,\r\n            length: number,\r\n        }[] = [];\r\n        this.storeTracks.forEach(p => {\r\n            if (p.track === this.TrackID) {\r\n                showTrack.push({\r\n                    beat: p.beat - 12,\r\n                    pitch: p.pitch,\r\n                    shift: p.shift,\r\n                    length: p.length,\r\n                });\r\n            }\r\n        });\r\n        this.game.clear();\r\n        this.game.drawImage();\r\n        if (this.pianoSize) {\r\n            this.game.drawNote(showTrack, this.pianoSize);\r\n        }\r\n    }\r\n    startPlay = () => {\r\n        if (this.onAir || !this.loaded) {\r\n            console.log(\"on air already\");\r\n            return;\r\n        }\r\n        this.score = [];\r\n        this.resetNodeValues();\r\n        this.nextBeat = 0;\r\n        this.nextWhen = 0;\r\n        this.game?.assigner({ counter: 0 })\r\n        if (this.player?.audioContext.state === \"suspended\") {\r\n            console.log(\"audioContext.resume\");\r\n            this.player?.audioContext.resume();\r\n        }\r\n        this.onAir = true;\r\n        const beatDur = ((4 * 60) / (this.tempo * this.zaribTempo)) * 1000;\r\n        this.firstDelay = setTimeout(() => {\r\n            this.playAllTracks(0.03);\r\n        }, beatDur);\r\n        this.queueNextBeats();\r\n        if (this.playMode) {\r\n            this.game?.drawBack();\r\n            this.game?.pushNote();\r\n            this.animeFrame = requestAnimationFrame(this.moveSVG);\r\n        } else {\r\n            this.animeFrame = requestAnimationFrame(this.moveFingers);\r\n        }\r\n        this.onAir = true;\r\n    }\r\n    stopPlay = () => {\r\n        if (!this.onAir || !this.loaded) {\r\n            console.log(\"on air already\");\r\n            return;\r\n        }\r\n        this.finger.forEach((fin, i) => {\r\n            fin.hide()\r\n        });\r\n        this.seekValue = this.currentBeat - 1;\r\n        this.onAir = false\r\n        this.anime = [];\r\n        this.finger = [];\r\n        clearTimeout(this.firstDelay);\r\n        this.stopAllTracks();\r\n        cancelAnimationFrame(this.animeFrame);\r\n        clearTimeout(this.tickID);\r\n        this.player?.cancelQueue();\r\n        this.onAir = false;\r\n    }\r\n    stopAllTracks = () => {\r\n        if (this.currentSong) {\r\n            this.currentSong.stop();\r\n            this.currentSong.elapsedTimeSinceStart = 0;\r\n        }\r\n    }\r\n    playAllTracks = (startTime: number) => {\r\n        if (this.currentSong) {\r\n            this.currentSong.setMasterVolume(100);\r\n            this.currentSong.play(startTime);\r\n            for (let i = 0; i < this.currentSong.getNbTracks(); i++) { }\r\n        }\r\n    }\r\n    rakeMouseWheel = (e: React.WheelEvent) => {\r\n        const sH = this.sL * 16;\r\n        this.seekValue = this.seekValue + (e.deltaY > 0 ? -1 : 1)\r\n        this.seekValue = this.seekValue < 0 ? 0 :\r\n            this.seekValue > sH ? sH : this.seekValue\r\n        const seekY = this.seekValue * this.tapSize;\r\n        this.seekMove(this.seekValue);\r\n        this.seekSVG(seekY);\r\n    }\r\n    seekSVG = (y: number) => {\r\n        if (!this.onAir) {\r\n            this.game?.updateFullSong(y)\r\n        }\r\n    }\r\n    resetNodeValues = () => {\r\n        for (let i = 0; i < this.trackInfo.length; i++) {\r\n            this.trackInfo[i].audioNode.gain.setValueAtTime(\r\n                this.trackInfo[i].volume / 100,\r\n                0\r\n            );\r\n        }\r\n        for (let i = 0; i < this.drumInfo.length; i++) {\r\n            this.drumInfo[i].audioNode.gain.setValueAtTime(\r\n                this.drumVolumes[i] / 100,\r\n                0\r\n            );\r\n        }\r\n        this.master?.band32.gain.setValueAtTime(this.equalizer[0], 0);\r\n        this.master?.band64.gain.setValueAtTime(this.equalizer[1], 0);\r\n        this.master?.band128.gain.setValueAtTime(this.equalizer[2], 0);\r\n        this.master?.band256.gain.setValueAtTime(this.equalizer[3], 0);\r\n        this.master?.band512.gain.setValueAtTime(this.equalizer[4], 0);\r\n        this.master?.band1k.gain.setValueAtTime(this.equalizer[5], 0);\r\n        this.master?.band2k.gain.setValueAtTime(this.equalizer[6], 0);\r\n        this.master?.band4k.gain.setValueAtTime(this.equalizer[7], 0);\r\n        this.master?.band8k.gain.setValueAtTime(this.equalizer[8], 0);\r\n        this.master?.band16k.gain.setValueAtTime(this.equalizer[9], 0);\r\n    }\r\n    queueNextBeats = () => {\r\n        if (this.onAir) {\r\n            let beat16duration = (4 * 60) / (this.tempo * this.zaribTempo) / 16;\r\n            let pieceLen16 = this.songLength + 1;\r\n            let t = this.player?.audioContext.currentTime;\r\n            if (t && this.nextWhen < t) {\r\n                this.nextWhen = t;\r\n            }\r\n            // @ts-ignore\r\n            while (this.sentWhen < t + beat16duration) {\r\n                this.sendNextBeats(this.nextWhen, this.nextBeat, this.nextBeat);\r\n                this.nextWhen = this.sentWhen + beat16duration;\r\n                this.nextBeat = this.nextBeat + 1;\r\n                if (this.playMode && (this.nextBeat / 16) % 1 === 0) {\r\n                    this.game?.pushNote();\r\n                }\r\n                if (this.nextBeat > pieceLen16) {\r\n                    this.stopPlay();\r\n                }\r\n            }\r\n            // @ts-ignore\r\n            let wait = 0.5 * 1000 * (this.nextWhen - t);\r\n            this.tickerStep++;\r\n            if (this.tickerStep >= this.tickerDelay) {\r\n                this.tickerStep = 0;\r\n            }\r\n            this.tickID = setTimeout(() => {\r\n                this.seekMove(this.nextBeat);\r\n                this.queueNextBeats();\r\n                if (!this.playMode) this.showFingers();\r\n            }, wait);\r\n        }\r\n    }\r\n    sendNextBeats = (when: number, startBeat: number, endBeat: number) => {\r\n        this.sentWhen = when;\r\n        let N = (4 * 60) / (this.tempo * this.zaribTempo);\r\n        let beatLen = (1 / 16) * N;\r\n        this.currentBeat = startBeat;\r\n        this.storeDrums.forEach((hit) => {\r\n            if (hit.beat >= startBeat && hit.beat <= endBeat) {\r\n                let channel = this.findDrumInfoHand(hit.drum);\r\n                let zones = channel.sound;\r\n                if (channel.info && window[channel.info.variable]) {\r\n                    zones = window[channel.info.variable];\r\n                }\r\n                let r = 1.0 - Math.random() * 0.2;\r\n                this.player?.queueWaveTable({\r\n                    target: channel.audioNode,\r\n                    preset: zones,\r\n                    when: when + beatLen * (hit.beat - startBeat),\r\n                    pitches: channel.pitch,\r\n                    duration: channel.length,\r\n                    volume: r * channel.volumeRatio,\r\n                });\r\n            }\r\n        })\r\n        let notes = [];\r\n        for (let i = 0; i < this.storeTracks.length; i++) {\r\n            let note = this.storeTracks[i];\r\n            if (note.beat >= startBeat && note.beat <= endBeat) {\r\n                notes.push(note);\r\n            }\r\n        }\r\n        notes.sort(function (n1, n2) {\r\n            let r = 1000 * (n1.beat - n2.beat) + 100000 * (n1.track - n2.track);\r\n            if (n1.beat === n2.beat) {\r\n                r = r + (n1.pitch - n2.pitch);\r\n            }\r\n            return r;\r\n        });\r\n        let currentBeat = -1;\r\n        let currentTrack = -1;\r\n        let inChordCount = 0;\r\n        notes.forEach(note => {\r\n            let channel = this.trackInfo.find(trc => trc.nn === note.track);\r\n            if (note.beat !== currentBeat || note.track !== currentTrack) {\r\n                currentBeat = note.beat;\r\n                currentTrack = note.track;\r\n                inChordCount = 0;\r\n                if (note.track === this.findTrackInfoHand().nn) {\r\n                    this.anime.push(note.beat);\r\n                }\r\n            }\r\n            let zones = channel.sound;\r\n            if (channel.info && window[channel.info.variable]) {\r\n                zones = window[channel.info.variable];\r\n            }\r\n            let shift = [\r\n                {\r\n                    when: note.length * beatLen,\r\n                    pitch: note.shift + channel.octave * 12 + note.pitch,\r\n                },\r\n            ];\r\n            let r = 0.6 - Math.random() * 0.2;\r\n            this.player?.queueWaveTable({\r\n                target: channel.audioNode,\r\n                preset: zones,\r\n                when:\r\n                    when +\r\n                    beatLen * (note.beat - startBeat) +\r\n                    inChordCount * channel.inChordDelay,\r\n                pitches: channel.octave * 12 + note.pitch,\r\n                duration: 0.075 + note.length * beatLen,\r\n                volume: r * channel.volumeRatio,\r\n                slides: shift,\r\n            });\r\n            inChordCount++;\r\n        })\r\n    }\r\n    showFingers = () => {\r\n        const fingers = this.storeFingers[this.TrackID];\r\n        if (this.anime.length !== 0) {\r\n            this.anime.forEach((nBeat) => {\r\n                const beat = this.fingerNotes[nBeat];\r\n                if (beat) {\r\n                    let handArr: any = {};\r\n                    for (let fin in fingers) {\r\n                        if (fingers[fin][nBeat]) {\r\n                            const hand = this.handRefs[fin];\r\n                            const key = fingers[fin][nBeat];\r\n                            handArr[key] = { finger: hand, hand: hand.getAttribute(\"class\") };\r\n                        }\r\n                    }\r\n                    beat.forEach((b: any) => {\r\n                        const len = b.length;\r\n                        const pitch = b.pitch + 36;\r\n                        const note = this.keyRefs[pitch];\r\n                        if (handArr[pitch]) {\r\n                            this.finger.push(new FingersClass({\r\n                                note: note,\r\n                                len: len,\r\n                                hand: handArr[pitch],\r\n                                beat: this.currentBeat\r\n                            }));\r\n                        }\r\n                    });\r\n                }\r\n                this.anime = this.anime.filter((item) => item !== nBeat);\r\n            });\r\n        }\r\n    }\r\n    moveFingers = () => {\r\n        if (this.onAir) {\r\n            this.finger.forEach((fin, i) => {\r\n                if (this.currentBeat >= fin.end) {\r\n                    fin.hide();\r\n                    this.finger.splice(i, 1);\r\n                } else {\r\n                    fin.show();\r\n                }\r\n            });\r\n            requestAnimationFrame(this.moveFingers);\r\n        }\r\n    }\r\n    findTrackInfoHand = (): any => {\r\n        let track = null\r\n        this.trackInfo.forEach(trc => {\r\n            if (trc.nn === this.TrackID) {\r\n                track = trc;\r\n            }\r\n        });\r\n        return track;\r\n    }\r\n    findDrumInfoHand = (order: number): any => {\r\n        let drum = null\r\n        this.drumInfo.forEach(drm => {\r\n            if (drm.id === order) {\r\n                drum = drm;\r\n            }\r\n        });\r\n        return drum;\r\n    }\r\n\r\n    seekMove = (value: number) => {\r\n        if (value < this.songLength)\r\n            if (this.seekBar) this.seekBar.changeSeeker(null, value);\r\n    }\r\n    moveSVG = () => {\r\n        if (this.game && this.onAir) {\r\n            const N = (4 * 60) / (this.tempo * this.zaribTempo);\r\n            const beatLen = (1 / 16) * N;\r\n            const c16 = 16 * this.measures;\r\n            let diff =\r\n                this.nextBeat +\r\n                // @ts-ignore\r\n                (this.player?.audioContext.currentTime - this.nextWhen) / beatLen;\r\n            while (diff < 0) {\r\n                diff = diff + c16;\r\n            }\r\n            if (diff > this.songLength - 1) {\r\n                diff = this.songLength - 1;\r\n            }\r\n            if (this.game.counter < 4 && diff > 100) diff = 0;\r\n            let y = Math.floor(diff * this.tapSize);\r\n            this.yPos = y;\r\n            this.game.playGame(y);\r\n            requestAnimationFrame(this.moveSVG);\r\n        }\r\n    }\r\n    midiNoteOn = (pitch: any, velocity = 0.7) => {\r\n        if (velocity === 0) {\r\n            this.midiNoteOff(pitch);\r\n        } else {\r\n            this.midiNoteOff(pitch);\r\n            if (this.onAir) MidiState.touchedKeys.push({ note: pitch, y: this.yPos });\r\n            let channel = this.findTrackInfoHand();\r\n            if (channel) {\r\n                let zones = channel.sound;\r\n                if (channel.info && window[channel.info.variable]) {\r\n                    zones = window[channel.info.variable];\r\n                }\r\n                this.midiKeys[pitch] = this.player?.queueWaveTable({\r\n                    target: channel.audioNode,\r\n                    preset: zones,\r\n                    when: 0,\r\n                    pitches: pitch,\r\n                    duration: 10,\r\n                    volume: velocity,\r\n                });\r\n                if (this.keyRefs[pitch]) {\r\n                    const elem: any = this.keyRefs[pitch];\r\n                    const cColor = elem.children.back.getAttribute(\"fill\");\r\n                    let bColor = \"red\";\r\n                    if (cColor !== \"white\" && cColor !== \"black\") bColor = \"green\";\r\n                    elem.children.back.style.fill = bColor;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    midiNoteOff = (pitch: any) => {\r\n        if (this.midiKeys[pitch]) {\r\n            this.midiKeys[pitch].cancel();\r\n            MidiState.touchedKeys.forEach((x, i) => {\r\n                const notePitch = MidiState.touchedKeys[i].note;\r\n                if (pitch === notePitch) MidiState.touchedKeys.splice(i, 1);\r\n            });\r\n        }\r\n        if (this.keyRefs[pitch]) {\r\n            const elem: any = this.keyRefs[pitch];\r\n            if (elem) {\r\n                elem.children.back.style.fill = \"\";\r\n            }\r\n        }\r\n    }\r\n}","import { ICanvas, IPianoSizes } from \"../_types/player.types\";\r\n\r\nexport const sizeCalculator = (keyRefs: SVGGElement[], pianoSize: ICanvas) => {\r\n    const lineWidth =\r\n        keyRefs[50].getBoundingClientRect().x -\r\n        (keyRefs[48].getBoundingClientRect().x +\r\n            keyRefs[48].getBoundingClientRect().width);\r\n    const keyXPos = pianoSize.pianoLeft\r\n    const padLeft = keyXPos ? keyXPos : 100;\r\n    const notePos: IPianoSizes[] = []\r\n    for (let k in keyRefs) {\r\n        const key = keyRefs[k];\r\n        const rect = key.getBoundingClientRect();\r\n        const x = rect.x - padLeft;\r\n        const w = rect.width;\r\n        const centerX = x + w / 2;\r\n        if (key.classList.contains(\"C\") || key.classList.contains(\"F\")) {\r\n            notePos.push({ left: x, center: centerX - lineWidth * 3.5, width: w, key: \"CF\" });\r\n        } else if (key.classList.contains(\"last\")) {\r\n            notePos.push({ left: x, center: centerX, width: w, key: \"last\" });\r\n        } else if (key.id === \"black\") {\r\n            notePos.push({ left: x, center: centerX, width: w, key: \"black\" });\r\n        } else if (key.classList.contains(\"E\") || key.classList.contains(\"B\"))\r\n            notePos.push({ left: x, center: centerX + lineWidth * 3.5, width: w, key: \"EB\" });\r\n        else if (key.classList.contains(\"A\"))\r\n            notePos.push({ left: x, center: centerX + lineWidth * 1.8, width: w, key: \"A\" });\r\n        else if (key.classList.contains(\"G\"))\r\n            notePos.push({ left: x, center: centerX + lineWidth * 1.4, width: w, key: \"G\" });\r\n        else notePos.push({ left: x, center: centerX, width: w, key: \"white\" });\r\n    }\r\n    notePos.push({ left: -100, center: 0, width: lineWidth, key: \"lineWidth\" });\r\n    return notePos;\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Theme, WithStyles, withStyles } from \"@material-ui/core/styles\";\r\nimport Stepper from \"@material-ui/core/Stepper\";\r\nimport Step from \"@material-ui/core/Step\";\r\nimport StepLabel from \"@material-ui/core/StepLabel\";\r\nimport StepContent from \"@material-ui/core/StepContent\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { pathFinder, PathFinder } from \"../../../_helpers/constants\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\n\r\nconst useStyles = (theme: Theme) => ({\r\n  root: {\r\n    width: \"250px\",\r\n  },\r\n  button: {\r\n    marginTop: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n  },\r\n});\r\n\r\ninterface SongListProps extends WithStyles<typeof useStyles> {\r\n  course?: ICourse;\r\n  lessonId?: number;\r\n  pathname: string;\r\n  requestLesson: (path: PathFinder) => void;\r\n}\r\ninterface States {\r\n  lessonIndex: number;\r\n  loading: boolean;\r\n  steps: any[];\r\n  selected: number;\r\n}\r\ntype Props = SongListProps;\r\n\r\nclass SongListSelector extends Component<Props, States> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      lessonIndex: 0,\r\n      loading: true,\r\n      steps: [],\r\n      selected: 0,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const path = pathFinder(this.props.pathname);\r\n    if (path.course === this.props.course?.id) {\r\n      const courses = this.props.course?.course_select;\r\n      if (courses) {\r\n        const stepers: any[] = [];\r\n        let index = 0;\r\n        courses.forEach((step) => {\r\n          let excerpt = step.excerpt;\r\n          if (!excerpt) {\r\n            excerpt = \"No Detail Provided\";\r\n          }\r\n          stepers.push({ id: step.id, name: step.title, excerpt: excerpt });\r\n        });\r\n        index = stepers.findIndex((step) => step.id === this.props.lessonId);\r\n        this.setState({\r\n          steps: stepers,\r\n          loading: false,\r\n          lessonIndex: index,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  linkGenerator = (id: number): string => {\r\n    const linkElement = this.props.pathname.split(\"/\").slice(0, -1);\r\n    return linkElement.join(\"/\") + \"/lesson=\" + id;\r\n  };\r\n\r\n  handleNext = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n    const index = event.currentTarget.tabIndex;\r\n    this.setState({ lessonIndex: index });\r\n  };\r\n\r\n  selectedLesson = (event: React.MouseEvent<HTMLAnchorElement, MouseEvent>) => {\r\n    const path = pathFinder(event.currentTarget.pathname);\r\n    this.props.requestLesson(path);\r\n  };\r\n\r\n  render() {\r\n    const { lessonIndex, loading, steps } = this.state;\r\n    const { classes } = this.props;\r\n    if (loading) {\r\n      return <div>...</div>;\r\n    } else {\r\n      return (\r\n        <div className={classes.root}>\r\n          <Stepper activeStep={lessonIndex} orientation=\"vertical\">\r\n            {steps.map((label, i) => (\r\n              <Step key={label.id}>\r\n                <StepLabel tabIndex={i} onClick={this.handleNext}>\r\n                  {label.name}\r\n                </StepLabel>\r\n                <StepContent>\r\n                  <Typography>{label.excerpt}</Typography>\r\n                  <Button\r\n                    component={Link}\r\n                    variant=\"contained\"\r\n                    color=\"secondary\"\r\n                    to={this.linkGenerator(label.id)}\r\n                    className={classes.button}\r\n                    onClick={this.selectedLesson}\r\n                  >\r\n                    Learn\r\n                  </Button>\r\n                </StepContent>\r\n              </Step>\r\n            ))}\r\n          </Stepper>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default withStyles(useStyles)(SongListSelector);\r\n","import React, { useRef, useState } from \"react\";\r\nimport {\r\n  Drawer,\r\n  Grid,\r\n  IconButton,\r\n  Slider,\r\n  makeStyles,\r\n  Typography,\r\n  createStyles,\r\n  Theme,\r\n} from \"@material-ui/core\";\r\nimport { ArrowBackIos, FormatListNumberedRtl } from \"@material-ui/icons\";\r\nimport { PathFinder } from \"../../../_helpers/constants\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport SongListSelector from \"../../LearningPages/Lesson/SongListSelector\";\r\nimport Fingers from \"../../Layout/Instruments/Finger/Fingers\";\r\nimport Piano from \"../../Layout/Instruments/Piano/Piano\";\r\nimport { IMelodition } from \"../../../_types/player.types\";\r\nimport { PlayButton } from \"./Buttons\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    playMain: {\r\n      minHeight: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 56px)\",\r\n      },\r\n    },\r\n    content: {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      flexWrap: \"nowrap\",\r\n    },\r\n    doubleGrid: {\r\n      flexWrap: \"nowrap\",\r\n      width: \"100%\",\r\n      maxWidth: \"100%\",\r\n      \"& > div\": {\r\n        margin: \"auto\",\r\n        padding: 0,\r\n        height: \"100%\",\r\n      },\r\n    },\r\n    centerText: {\r\n      textAlign: \"center\",\r\n    },\r\n    sideStyle: {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      flexWrap: \"nowrap\",\r\n    },\r\n  })\r\n);\r\n\r\ninterface RightSideProps {\r\n  playModeChanger: () => void;\r\n}\r\n\r\nexport const PlayerRightSide: React.FC<RightSideProps> = ({\r\n  playModeChanger,\r\n}) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Grid\r\n      container\r\n      direction=\"column\"\r\n      justify=\"center\"\r\n      alignItems=\"center\"\r\n      className={classes.sideStyle}\r\n    >\r\n      <IconButton\r\n        color=\"secondary\"\r\n        aria-label=\"play mode\"\r\n        onClick={playModeChanger}\r\n      >\r\n        <ArrowBackIos />\r\n      </IconButton>\r\n    </Grid>\r\n  );\r\n};\r\n\r\ninterface LeftSideProps {\r\n  data: ILesson;\r\n  course?: ICourse;\r\n  pathname: string;\r\n  requestLesson: (path: PathFinder) => void;\r\n}\r\n\r\nexport const PlayerLeftSide: React.FC<LeftSideProps> = (props) => {\r\n  const [drawer, setDrawer] = useState(false);\r\n\r\n  const toggleDrawer = (\r\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ) => {\r\n    if (event.type === \"keydown\") {\r\n      return;\r\n    }\r\n    if (drawer) {\r\n      setDrawer(false);\r\n    } else {\r\n      setDrawer(true);\r\n    }\r\n  };\r\n  const ref = useRef(null);\r\n\r\n  // useEffect(() => {\r\n  //     Melo.seekBar = ref.current;\r\n  //     return () => { Melo.seekBar = null };\r\n  // }, [seeker])\r\n\r\n  // useCallbackRef(useCallback((node) => {\r\n  //     if (node.iconHandler) Melo.playBtn = node\r\n  //     if (node.iconDisable) Melo.forwardBtn = node\r\n  //     return () => {\r\n  //         if (node.iconHandler) Melo.playBtn = null\r\n  //         if (node.iconDisable) Melo.forwardBtn = null\r\n  //     };\r\n  // }, []));\r\n\r\n  const { data, ...rest } = props;\r\n\r\n  const disableList = props.course ? false : true;\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid\r\n      container\r\n      direction=\"column\"\r\n      justify=\"space-around\"\r\n      alignItems=\"center\"\r\n      className={classes.sideStyle}\r\n    >\r\n      {/* <div style={{ height: '40%' }}>\r\n    <Seekbar ref={ref} />\r\n</div> */}\r\n      <Slider\r\n        color=\"secondary\"\r\n        orientation=\"vertical\"\r\n        aria-label=\"music seeker\"\r\n        defaultValue={20}\r\n        style={{ height: \"40%\" }}\r\n      />\r\n      <>\r\n        <IconButton\r\n          color=\"secondary\"\r\n          aria-label=\"play mode\"\r\n          onClick={(e) => toggleDrawer(e)}\r\n          disabled={disableList}\r\n        >\r\n          <FormatListNumberedRtl />\r\n        </IconButton>\r\n        <Drawer anchor=\"left\" open={drawer} onClose={() => setDrawer(false)}>\r\n          <SongListSelector {...rest} lessonId={data.id} />\r\n        </Drawer>\r\n      </>\r\n    </Grid>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { drawFinger } from \"../../../../_actions/player.actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AppActions, AppState } from \"../../../../_types\";\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> &\r\n  ReturnType<typeof mapDispatchToProps>;\r\n\r\nconst Fingers: React.FC<Props> = ({ Melo, theme, drawFinger }) => {\r\n  const themer = theme === \"dark\" ? 1 : 0;\r\n\r\n  const setHandRef = (ref: SVGGElement) => {\r\n    if (ref && Melo.fingerLoading) {\r\n      drawFinger({ handRefs: ref.children });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <svg\r\n      id=\"svgElem\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      width=\"100%\"\r\n      style={{\r\n        minWidth: \"150px\",\r\n        maxWidth: \"250px\",\r\n        filter: `invert(${themer})`,\r\n      }}\r\n      viewBox=\"0 0 974 512\"\r\n      fill=\"none\"\r\n    >\r\n      <g id=\"fingers\" ref={setHandRef}>\r\n        <path\r\n          className=\"right\"\r\n          id=\"r1\"\r\n          d=\"M533.5 215.5C550.258 204.846 566.5 213 575.5 222.5L614.5 266C578.491 292.941 577.487 324.434 563 361C546.255 318.826 536.187 300.612 521.5 254.5C518.156 244 516.12 225.853 533.5 215.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"right\"\r\n          id=\"r2\"\r\n          d=\"M655 56C662.494 62.9264 664.442 68.5999 667 77.5L681.615 217C656.341 219.409 644.33 222.492 629.615 243L608.5 90.5C606.606 79.4297 607.333 73.3286 612.5 64C617.947 55.7181 620.737 53.8317 631 51L631.175 50.9816C641.995 49.8491 645.411 49.4915 655 56Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"right\"\r\n          id=\"r3\"\r\n          d=\"M752.385 215.5L755.746 115.11L758 43.2689C757.382 33.8715 755.814 28.8652 750.11 20.5606C742.291 12.2544 737.072 9.82141 726.439 9C716.124 9.99562 711.124 11.9864 704.272 19.322C697.472 27.759 695.707 33.4633 695.254 44.9205L693 107.678L693.385 215.5C713.764 210.309 726.853 211.322 752.385 215.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"right\"\r\n          id=\"r4\"\r\n          d=\"M821.697 232.5L836.289 140.481L846.106 83.1651C846.82 75.5659 846.018 71.312 841.728 63.7408C835.419 55.8176 830.776 53.0107 820.745 50.5915C810.765 49.6744 805.717 50.4329 798.162 55.148C790.504 60.7505 788.028 65.0081 786.007 74.0728L777.101 114.389L757.5 216C786.421 216.011 799.981 223.042 821.697 232.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"right\"\r\n          id=\"r5\"\r\n          d=\"M849.5 168.5L827 239.5C862.617 249.985 869.511 281.09 879.5 296.5C887.342 250.949 899.398 220.668 901.5 174C897.793 161.727 895.916 153.463 879.5 149C863.891 147.757 857.224 154.157 849.5 168.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"left\"\r\n          id=\"l1\"\r\n          d=\"M440.5 215.5C423.742 204.846 407.5 213 398.5 222.5L359.5 266C395.509 292.941 396.513 324.434 411 361C427.745 318.826 437.813 300.612 452.5 254.5C455.844 244 457.88 225.853 440.5 215.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"left\"\r\n          id=\"l2\"\r\n          d=\"M319 56C311.506 62.9264 309.558 68.5999 307 77.5L292.385 217C317.659 219.409 329.67 222.492 344.385 243L365.5 90.5C367.394 79.4297 366.667 73.3286 361.5 64C356.053 55.7181 353.263 53.8317 343 51L342.825 50.9816C332.005 49.8491 328.589 49.4915 319 56Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"left\"\r\n          id=\"l3\"\r\n          d=\"M221.615 215.5L218.254 115.11L216 43.2689C216.618 33.8715 218.186 28.8652 223.89 20.5606C231.709 12.2544 236.928 9.82141 247.561 9C257.876 9.99562 262.876 11.9864 269.728 19.322C276.528 27.759 278.293 33.4633 278.746 44.9205L281 107.678L280.615 215.5C260.236 210.309 247.147 211.322 221.615 215.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"left\"\r\n          id=\"l4\"\r\n          d=\"M152.303 232.5L137.711 140.481L127.894 83.1651C127.18 75.5659 127.982 71.312 132.272 63.7408C138.581 55.8176 143.224 53.0107 153.255 50.5915C163.235 49.6744 168.283 50.4329 175.838 55.148C183.496 60.7505 185.972 65.0081 187.993 74.0728L196.899 114.389L216.5 216C187.579 216.011 174.019 223.042 152.303 232.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n        <path\r\n          className=\"left\"\r\n          id=\"l5\"\r\n          d=\"M124.5 168.5L147 239.5C111.383 249.985 104.489 281.09 94.5 296.5C86.658 250.949 74.602 220.668 72.5 174C76.207 161.727 78.084 153.463 94.5 149C110.109 147.757 116.776 154.157 124.5 168.5Z\"\r\n          fill=\"rgba(99, 99, 99, 0.25)\"\r\n        ></path>\r\n      </g>\r\n      <g id=\"hands\">\r\n        <path\r\n          id=\"hand_right\"\r\n          d=\"M803.611 510.08C801.712 510.08 799.792 509.589 798.064 508.544C793.051 505.472 791.429 498.923 794.48 493.867C795.355 492.459 880.752 349.717 888.368 174.763C888.56 170.816 887.152 167.104 884.464 164.267C881.861 161.557 879.045 160.619 874.608 160.064C868.293 160.064 863.152 163.712 861.232 169.195L825.84 269.611C823.984 274.795 818.565 277.717 813.168 276.416C807.835 275.072 804.379 269.867 805.232 264.427L832.773 87.3173C834.181 81.0667 832.923 75.3707 829.424 70.9547C825.925 66.5387 820.656 64 815.024 64C806.789 64 799.493 69.5467 797.296 77.4827L760.731 256.235C759.6 261.632 754.651 265.493 749.019 264.683C743.515 264.043 739.44 259.285 739.611 253.739L746.373 44.5013C746.971 37.0347 744.176 30.6347 738.736 26.3253C733.275 22.0587 726.405 20.8427 719.792 23.0613C712.048 25.6427 706.629 32.576 705.989 40.7253L696.944 254.528C696.688 260.075 692.229 264.533 686.683 264.747C681.371 264.235 676.336 260.821 675.675 255.317L654.768 76.5653C653.957 71.808 650.8 67.2853 646.149 64.6613C641.477 62.0373 635.973 61.7387 631.045 63.6587C623.451 66.7307 618.992 74.5173 620.208 82.6453L643.269 286.805C643.781 291.413 641.243 295.851 637.019 297.749C632.709 299.648 627.781 298.56 624.688 295.083L565.787 228.843C561.883 224.448 556.485 222.016 550.64 221.952C544.923 222.485 539.355 224.256 535.365 228.608C530.416 234.048 528.709 241.728 530.928 248.661C540.848 279.36 566.32 355.648 588.869 400.555C621.872 466.347 641.307 492.8 641.499 493.077C644.997 497.813 644.016 504.469 639.28 507.989C634.565 511.509 627.931 510.528 624.368 505.792C623.557 504.683 603.824 477.909 569.776 410.133C547.419 365.547 523.099 293.931 510.64 255.189C506.053 240.981 509.488 225.28 519.643 214.165C527.557 205.547 538.8 200.597 550.469 200.597C550.576 200.597 550.683 200.597 550.811 200.619C562.629 200.704 573.893 205.824 581.744 214.656L618.288 255.765L599.067 85.44C596.379 67.8827 606.256 50.624 623.131 43.8827C634.053 39.488 646.277 40.2773 656.603 46.08C666.885 51.8613 673.925 61.888 675.867 73.5573L681.285 119.808L684.677 39.4453C686 22.3573 697.115 8.10667 713.029 2.79467C726.363 -1.64267 740.869 0.874667 751.877 9.51467C762.928 18.176 768.816 31.7227 767.643 45.696L764.955 129.045L776.539 72.448C781.509 54.6347 797.253 42.6667 815.024 42.6667C827.205 42.6667 838.555 48.1493 846.128 57.6853C853.701 67.2213 856.475 79.488 853.723 91.3707L843.568 156.651C849.669 145.685 862.107 138.667 874.267 138.731C884.379 138.773 893.296 142.635 899.888 149.568C906.544 156.523 910.107 166.037 909.68 175.701C901.787 356.331 816.325 498.965 812.699 504.981C810.715 508.245 807.216 510.08 803.611 510.08V510.08Z\"\r\n          fill=\"black\"\r\n        ></path>\r\n        <path\r\n          id=\"hand_Left\"\r\n          d=\"M170.389 510.08C172.288 510.08 174.208 509.589 175.936 508.544C180.949 505.472 182.571 498.923 179.52 493.867C178.645 492.459 93.248 349.717 85.632 174.763C85.44 170.816 86.848 167.104 89.536 164.267C92.139 161.557 94.955 160.619 99.392 160.064C105.707 160.064 110.848 163.712 112.768 169.195L148.16 269.611C150.016 274.795 155.435 277.717 160.832 276.416C166.165 275.072 169.621 269.867 168.768 264.427L141.227 87.3173C139.819 81.0667 141.077 75.3707 144.576 70.9547C148.075 66.5387 153.344 64 158.976 64C167.211 64 174.507 69.5467 176.704 77.4827L213.269 256.235C214.4 261.632 219.349 265.493 224.981 264.683C230.485 264.043 234.56 259.285 234.389 253.739L227.627 44.5013C227.029 37.0347 229.824 30.6347 235.264 26.3253C240.725 22.0587 247.595 20.8427 254.208 23.0613C261.952 25.6427 267.371 32.576 268.011 40.7253L277.056 254.528C277.312 260.075 281.771 264.533 287.317 264.747C292.629 264.235 297.664 260.821 298.325 255.317L319.232 76.5653C320.043 71.808 323.2 67.2853 327.851 64.6613C332.523 62.0373 338.027 61.7387 342.955 63.6587C350.549 66.7307 355.008 74.5173 353.792 82.6453L330.731 286.805C330.219 291.413 332.757 295.851 336.981 297.749C341.291 299.648 346.219 298.56 349.312 295.083L408.213 228.843C412.117 224.448 417.515 222.016 423.36 221.952C429.077 222.485 434.645 224.256 438.635 228.608C443.584 234.048 445.291 241.728 443.072 248.661C433.152 279.36 407.68 355.648 385.131 400.555C352.128 466.347 332.693 492.8 332.501 493.077C329.003 497.813 329.984 504.469 334.72 507.989C339.435 511.509 346.069 510.528 349.632 505.792C350.443 504.683 370.176 477.909 404.224 410.133C426.581 365.547 450.901 293.931 463.36 255.189C467.947 240.981 464.512 225.28 454.357 214.165C446.443 205.547 435.2 200.597 423.531 200.597C423.424 200.597 423.317 200.597 423.189 200.619C411.371 200.704 400.107 205.824 392.256 214.656L355.712 255.765L374.933 85.44C377.621 67.8827 367.744 50.624 350.869 43.8827C339.947 39.488 327.723 40.2773 317.397 46.08C307.115 51.8613 300.075 61.888 298.133 73.5573L292.715 119.808L289.323 39.4453C288 22.3573 276.885 8.10667 260.971 2.79467C247.637 -1.64267 233.131 0.874667 222.123 9.51467C211.072 18.176 205.184 31.7227 206.357 45.696L209.045 129.045L197.461 72.448C192.491 54.6347 176.747 42.6667 158.976 42.6667C146.795 42.6667 135.445 48.1493 127.872 57.6853C120.299 67.2213 117.525 79.488 120.277 91.3707L130.432 156.651C124.331 145.685 111.893 138.667 99.733 138.731C89.621 138.773 80.704 142.635 74.112 149.568C67.456 156.523 63.893 166.037 64.32 175.701C72.213 356.331 157.675 498.965 161.301 504.981C163.285 508.245 166.784 510.08 170.389 510.08Z\"\r\n          fill=\"black\"\r\n        ></path>\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\nconst mapStateToProps = (state: AppState) => ({\r\n  theme: state.auth.theme,\r\n  Melo: state.melodition,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawFinger: bindActionCreators(drawFinger, dispatch),\r\n});\r\n\r\nconst connectedFinger = connect(mapStateToProps, mapDispatchToProps)(Fingers);\r\n\r\nexport default connectedFinger;\r\n","const SvgKeys = [{\r\n  id: \"white\",\r\n  note: \"C\",\r\n  front: \"M0.5 0.5H42.5V155.5C42.5 156.881 43.6193 158 45 158H79.5V245C79.5 247.485 77.4853 249.5 75 249.5H5C2.51472 249.5 0.5 247.485 0.5 245V0.5Z\",\r\n  back: \"M45.1094 203.488C44.9336 204.992 44.377 206.154 43.4395 206.975C42.5085 207.788 41.2682 208.195 39.7188 208.195C38.0391 208.195 36.6914 207.593 35.6758 206.389C34.6667 205.184 34.1621 203.573 34.1621 201.555V200.188C34.1621 198.866 34.3965 197.704 34.8652 196.701C35.3405 195.699 36.0111 194.93 36.877 194.396C37.7428 193.856 38.7454 193.586 39.8848 193.586C41.3952 193.586 42.6061 194.009 43.5176 194.855C44.429 195.695 44.9596 196.861 45.1094 198.352H43.2246C43.0618 197.219 42.707 196.398 42.1602 195.891C41.6198 195.383 40.8613 195.129 39.8848 195.129C38.6868 195.129 37.7461 195.572 37.0625 196.457C36.3854 197.342 36.0469 198.602 36.0469 200.236V201.613C36.0469 203.156 36.3691 204.383 37.0137 205.295C37.6582 206.206 38.5599 206.662 39.7188 206.662C40.7604 206.662 41.5579 206.428 42.1113 205.959C42.6712 205.484 43.0423 204.66 43.2246 203.488H45.1094Z\",\r\n}, {\r\n  note: \"Db\",\r\n  id: \"black\",\r\n  front: \"M95 0H45V153C45 154.105 45.8954 155 47 155H93C94.1046 155 95 154.105 95 153V0Z\",\r\n  back: \"M79 130H61C52 130 52 150 52 150H88C88 150 88 130 79 130Z\",\r\n}, {\r\n  id: \"white\",\r\n  note: \"D\",\r\n  front: \"M150.5 0.5H97.5V155.5C97.5 156.881 96.3807 158 95 158H84.5V245C84.5 247.485 86.5147 249.5 89 249.5H159C161.485 249.5 163.5 247.485 163.5 245V158H153C151.619 158 150.5 156.881 150.5 155.5V0.5Z\",\r\n  back: \"M118.65 208V193.781H122.664C123.901 193.781 124.995 194.055 125.945 194.602C126.896 195.148 127.628 195.926 128.143 196.936C128.663 197.945 128.927 199.104 128.934 200.412V201.32C128.934 202.661 128.673 203.837 128.152 204.846C127.638 205.855 126.899 206.63 125.936 207.17C124.979 207.71 123.862 207.987 122.586 208H118.65ZM120.525 195.324V206.467H122.498C123.943 206.467 125.066 206.018 125.867 205.119C126.674 204.221 127.078 202.941 127.078 201.281V200.451C127.078 198.837 126.697 197.583 125.936 196.691C125.18 195.793 124.106 195.337 122.713 195.324H120.525Z\",\r\n}, {\r\n  note: \"Eb\",\r\n  id: \"black\",\r\n  front: \"M203 0H153V153C153 154.105 153.895 155 155 155H201C202.105 155 203 154.105 203 153V0Z\",\r\n  back: \"M187 130H169C160 130 160 150 160 150H196C196 150 196 130 187 130Z\",\r\n}, {\r\n  note: \"E\",\r\n  id: \"white\",\r\n  front: \"M247.5 0.5H205.5V155.5C205.5 156.881 204.381 158 203 158H168.5V245C168.5 247.485 170.515 249.5 173 249.5H243C245.485 249.5 247.5 247.485 247.5 245V0.5Z\",\r\n  back: \"M211.688 201.428H205.525V206.467H212.684V208H203.65V193.781H212.586V195.324H205.525V199.895H211.688V201.428Z\",\r\n}, {\r\n  note: \"F\",\r\n  id: \"white\",\r\n  front: \"M252.5 0.5H291.5V155.5C291.5 156.881 292.619 158 294 158H331.5V245C331.5 247.485 329.485 249.5 327 249.5H257C254.515 249.5 252.5 247.485 252.5 245V0.5Z\",\r\n  back: \"M295.492 201.721H289.525V208H287.65V193.781H296.459V195.324H289.525V200.188H295.492V201.721Z\",\r\n}, {\r\n  note: \"Gb\",\r\n  id: \"black\",\r\n  front: \"M344 0H294V153C294 154.105 294.895 155 296 155H342C343.105 155 344 154.105 344 153V0Z\",\r\n  back: \"M328 130H310C301 130 301 150 301 150H337C337 150 337 130 328 130Z\",\r\n}, {\r\n  note: \"G\",\r\n  id: \"white\",\r\n  front: \"M390.5 0.5H346.5V155.5C346.5 156.881 345.381 158 344 158H336.5V245C336.5 247.485 338.515 249.5 341 249.5H411C413.485 249.5 415.5 247.485 415.5 245V158H393C391.619 158 390.5 156.881 390.5 155.5V0.5Z\",\r\n  back: \"M381.148 206.135C380.667 206.825 379.993 207.342 379.127 207.688C378.268 208.026 377.265 208.195 376.119 208.195C374.96 208.195 373.932 207.925 373.033 207.385C372.135 206.838 371.438 206.063 370.943 205.061C370.455 204.058 370.204 202.896 370.191 201.574V200.334C370.191 198.192 370.689 196.532 371.686 195.354C372.688 194.175 374.094 193.586 375.904 193.586C377.389 193.586 378.583 193.967 379.488 194.729C380.393 195.484 380.947 196.558 381.148 197.951H379.273C378.922 196.07 377.802 195.129 375.914 195.129C374.658 195.129 373.704 195.572 373.053 196.457C372.408 197.336 372.083 198.612 372.076 200.285V201.447C372.076 203.042 372.441 204.312 373.17 205.256C373.899 206.193 374.885 206.662 376.129 206.662C376.832 206.662 377.447 206.584 377.975 206.428C378.502 206.271 378.938 206.008 379.283 205.637V202.443H375.992V200.92H381.148V206.135Z\",\r\n}, {\r\n  note: \"Ab\",\r\n  id: \"black\",\r\n  front: \"M443 0H393V153C393 154.105 393.895 155 395 155H441C442.105 155 443 154.105 443 153V0Z\",\r\n  back: \"M427 130H409C400 130 400 150 400 150H436C436 150 436 130 427 130Z\",\r\n}, {\r\n  note: \"A\",\r\n  id: \"white\",\r\n  front: \"M491.5 0.5H445.5V155.5C445.5 156.881 444.381 158 443 158H420.5V245C420.5 247.485 422.515 249.5 425 249.5H495C497.485 249.5 499.5 247.485 499.5 245V158H494C492.619 158 491.5 156.881 491.5 155.5V0.5Z\",\r\n  back: \"M462.502 204.289H456.545L455.207 208H453.273L458.703 193.781H460.344L465.783 208H463.859L462.502 204.289ZM457.111 202.746H461.945L459.523 196.096L457.111 202.746Z\",\r\n}, {\r\n  note: \"Bb\",\r\n  id: \"black\",\r\n  front: \"M544 0H494V153C494 154.105 494.895 155 496 155H542C543.105 155 544 154.105 544 153V0Z\",\r\n  back: \"M528 130H510C501 130 501 150 501 150H537C537 150 537 130 528 130Z\",\r\n}, {\r\n  note: \"B\",\r\n  id: \"white\",\r\n  front: \"M583.5 0.5H546.5V155.5C546.5 156.881 545.381 158 544 158H504.5V245C504.5 247.485 506.515 249.5 509 249.5H579C581.485 249.5 583.5 247.485 583.5 245V0.5Z\",\r\n  back: \"M538.65 208V193.781H543.299C544.842 193.781 546.001 194.1 546.775 194.738C547.557 195.376 547.947 196.32 547.947 197.57C547.947 198.234 547.758 198.824 547.381 199.338C547.003 199.846 546.489 200.24 545.838 200.52C546.606 200.734 547.212 201.145 547.654 201.75C548.104 202.349 548.328 203.065 548.328 203.898C548.328 205.174 547.915 206.177 547.088 206.906C546.261 207.635 545.092 208 543.582 208H538.65ZM540.525 201.35V206.467H543.621C544.493 206.467 545.18 206.242 545.682 205.793C546.189 205.337 546.443 204.712 546.443 203.918C546.443 202.206 545.512 201.35 543.65 201.35H540.525ZM540.525 199.846H543.357C544.178 199.846 544.832 199.641 545.32 199.23C545.815 198.82 546.062 198.264 546.062 197.561C546.062 196.779 545.835 196.213 545.379 195.861C544.923 195.503 544.23 195.324 543.299 195.324H540.525V199.846Z\",\r\n}];\r\n\r\nexport default SvgKeys;\r\n\r\nexport const LastKey = {\r\n  note: \"C2\",\r\n  id: \"white\",\r\n  front: \"M663 249.5H593C590.515 249.5 588.5 247.485 588.5 245V0.5H667.5V245C667.5 247.485 665.485 249.5 663 249.5Z\",\r\n  back: \"M633.109 203.488C632.934 204.992 632.377 206.154 631.439 206.975C630.508 207.788 629.268 208.195 627.719 208.195C626.039 208.195 624.691 207.593 623.676 206.389C622.667 205.184 622.162 203.573 622.162 201.555V200.188C622.162 198.866 622.396 197.704 622.865 196.701C623.34 195.699 624.011 194.93 624.877 194.396C625.743 193.856 626.745 193.586 627.885 193.586C629.395 193.586 630.606 194.009 631.518 194.855C632.429 195.695 632.96 196.861 633.109 198.352H631.225C631.062 197.219 630.707 196.398 630.16 195.891C629.62 195.383 628.861 195.129 627.885 195.129C626.687 195.129 625.746 195.572 625.062 196.457C624.385 197.342 624.047 198.602 624.047 200.236V201.613C624.047 203.156 624.369 204.383 625.014 205.295C625.658 206.206 626.56 206.662 627.719 206.662C628.76 206.662 629.558 206.428 630.111 205.959C630.671 205.484 631.042 204.66 631.225 203.488H633.109Z\",\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\nimport SvgKeys, { LastKey } from \"../Finger/SvgKeys\";\r\nimport {\r\n  midiNoteOff,\r\n  midiNoteOn,\r\n  drawPiano,\r\n} from \"../../../../_actions/player.actions\";\r\nimport { ICanvas } from \"../../../../_types/player.types\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AppActions, AppState } from \"../../../../_types\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"row-reverse\",\r\n      justifyContent: \"center\",\r\n      flexWrap: \"nowrap\",\r\n      margin: \"0 auto\",\r\n      minWidth: \"215px\",\r\n      width: \"100%\",\r\n    },\r\n    back: {\r\n      margin: theme.spacing(0, 2),\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> &\r\n  ReturnType<typeof mapDispatchToProps>;\r\n\r\nconst Piano: React.FC<Props> = (props) => {\r\n  const { theme, Melo, drawPiano } = props;\r\n\r\n  let isDown = false;\r\n  let playedKey: any = null;\r\n  const emulatedKeys = {\r\n    z: 48,\r\n    s: 49,\r\n    x: 50,\r\n    d: 51,\r\n    c: 52,\r\n    v: 53,\r\n    g: 54,\r\n    b: 55,\r\n    h: 56,\r\n    n: 57,\r\n    j: 58,\r\n    m: 59,\r\n    \",\": 60,\r\n    l: 61,\r\n    \".\": 62,\r\n    \";\": 63,\r\n    \"/\": 64,\r\n    q: 65,\r\n    2: 66,\r\n    w: 67,\r\n    3: 68,\r\n    e: 69,\r\n    4: 70,\r\n    r: 71,\r\n    t: 72,\r\n    6: 73,\r\n    y: 74,\r\n    7: 75,\r\n    u: 76,\r\n    i: 77,\r\n    9: 78,\r\n    o: 79,\r\n    0: 80,\r\n    p: 81,\r\n    \"-\": 82,\r\n    \"[\": 83,\r\n    \"]\": 84,\r\n  };\r\n  let counter = 35;\r\n  let firstkey = 36;\r\n  const KeysArray = {} as SVGGElement[];\r\n\r\n  const keyboardUp = (e: KeyboardEvent) => {\r\n    const key = e.key as keyof typeof emulatedKeys;\r\n    if (emulatedKeys.hasOwnProperty(key)) {\r\n      const note = emulatedKeys[key];\r\n      midiNoteOff(note);\r\n      playedKey = null;\r\n    }\r\n  };\r\n  const keyboardDown = (e: KeyboardEvent) => {\r\n    const key = e.key as keyof typeof emulatedKeys;\r\n    if (emulatedKeys.hasOwnProperty(key)) {\r\n      if (key !== playedKey) {\r\n        const note = emulatedKeys[key];\r\n        midiNoteOn(note);\r\n        playedKey = key;\r\n      }\r\n    }\r\n  };\r\n\r\n  const mouseUpReset = () => {\r\n    isDown = false;\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"keydown\", keyboardDown);\r\n    document.addEventListener(\"keyup\", keyboardUp);\r\n    document.addEventListener(\"mouseup\", mouseUpReset);\r\n    return () => {\r\n      document.removeEventListener(\"keydown\", keyboardDown);\r\n      document.removeEventListener(\"keyup\", keyboardUp);\r\n    };\r\n  });\r\n\r\n  const classes = useStyles();\r\n\r\n  const mouseDown = (e: React.MouseEvent<SVGGElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    const ref: SVGGElement = e.currentTarget;\r\n    const note = ref.tabIndex;\r\n    isDown = true;\r\n    playedKey = note;\r\n    midiNoteOn(note);\r\n  };\r\n  const mouseOver = (e: React.MouseEvent<SVGGElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    const ref: SVGGElement = e.currentTarget;\r\n    const note = ref.tabIndex;\r\n    if (isDown && note !== playedKey) {\r\n      playedKey = note;\r\n      midiNoteOn(note);\r\n    }\r\n  };\r\n  const mouseLeave = (e: React.MouseEvent<SVGGElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    const ref: SVGGElement = e.currentTarget;\r\n    const note = ref.tabIndex;\r\n    if (isDown) {\r\n      midiNoteOff(note);\r\n      playedKey = null;\r\n    }\r\n  };\r\n  const mouseUp = (e: React.MouseEvent<SVGGElement, MouseEvent>) => {\r\n    e.preventDefault();\r\n    const ref: SVGGElement = e.currentTarget;\r\n    const note = ref.tabIndex;\r\n    isDown = false;\r\n    midiNoteOff(note);\r\n    playedKey = null;\r\n  };\r\n  const svgWidth = (i: number) => {\r\n    const num = i === 1 ? 668 : 584;\r\n    return num;\r\n  };\r\n  const counterFunction = (octSize: number) => {\r\n    if (octSize > 6) {\r\n      counter = 23;\r\n      firstkey = 24;\r\n    } else if (octSize > 3) {\r\n      counter = 35;\r\n      firstkey = 36;\r\n    } else if (octSize > 1) {\r\n      counter = 47;\r\n      firstkey = 48;\r\n    } else {\r\n      counter = 59;\r\n      firstkey = 60;\r\n    }\r\n  };\r\n  const detectSize = (height: number) => {\r\n    if (height > 700) {\r\n      return height / 16;\r\n    } else if (height > 500) {\r\n      return height / 16;\r\n    } else if (height > 300) {\r\n      return height / 16;\r\n    } else if (height > 100) {\r\n      return height / 16;\r\n    } else {\r\n      return height / 16;\r\n    }\r\n  };\r\n  const setKeyRef = (ref: SVGGElement | null) => {\r\n    if (ref) {\r\n      const key = ref.tabIndex;\r\n      KeysArray[key] = ref;\r\n    }\r\n  };\r\n  const setRef = (ref: HTMLDivElement) => {\r\n    if (ref && Melo.pianoLoading) {\r\n      if (Melo.playMode) {\r\n        const pianoSize = ref.getBoundingClientRect();\r\n        const width = pianoSize.width;\r\n        const height = Math.floor(window.innerHeight - (pianoSize.height + 64));\r\n        const tapSize = detectSize(height);\r\n        const baseLine = tapSize * 4 + 8;\r\n        const pianoLeft = pianoSize.left;\r\n        const canvas = { width, height, baseLine, pianoLeft };\r\n        pianoSizes(KeysArray, canvas, tapSize);\r\n      } else {\r\n        pianoSizes(KeysArray);\r\n      }\r\n    }\r\n  };\r\n  const pianoSizes = (\r\n    keyRefs: SVGGElement[],\r\n    canvasSize?: ICanvas,\r\n    tapSize?: number\r\n  ) => {\r\n    drawPiano(keyRefs, canvasSize, tapSize);\r\n  };\r\n  const themer = theme === \"dark\" ? 1 : 0;\r\n  counterFunction(Melo.octave);\r\n  return (\r\n    <div\r\n      ref={setRef}\r\n      className={classes.root}\r\n      style={{ filter: `invert(${themer})` }}\r\n    >\r\n      {Array.from(Array(Melo.octave), (_, i) => \"oct\" + (i + 1)).map(\r\n        (key, i) => (\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            id={key}\r\n            key={key}\r\n            width={svgWidth(Melo.octave - i)}\r\n            height=\"100%\"\r\n            viewBox={`0 0 ${svgWidth(Melo.octave - i)} 275`}\r\n            fill=\"none\"\r\n            style={\r\n              i !== Melo.octave - 1\r\n                ? { marginRight: 8 / Melo.octave }\r\n                : undefined\r\n            }\r\n          >\r\n            {SvgKeys.map((k) => (\r\n              <g\r\n                key={key + \"-\" + k.note}\r\n                id={k.id}\r\n                tabIndex={++counter}\r\n                onMouseDown={mouseDown}\r\n                onMouseUp={mouseUp}\r\n                onMouseLeave={mouseLeave}\r\n                onMouseOver={mouseOver}\r\n                className={counter === firstkey ? \"first\" : k.note}\r\n                ref={setKeyRef}\r\n              >\r\n                <path\r\n                  id=\"back\"\r\n                  d={k.front}\r\n                  fill={k.id}\r\n                  stroke={k.id === \"white\" ? \"#B5B5B5\" : undefined}\r\n                />\r\n                <path\r\n                  id=\"front\"\r\n                  d={k.back}\r\n                  fill={k.id === \"white\" ? \"black\" : \"rgb(255 255 255 / 65%)\"}\r\n                />\r\n                {counter === 60 ? (\r\n                  <polygon points={\"30,265 40,255 50,265\"} fill={\"black\"} />\r\n                ) : null}\r\n              </g>\r\n            ))}\r\n            {Melo.octave - i === 1 ? (\r\n              <g\r\n                id=\"C\"\r\n                className=\"last\"\r\n                tabIndex={++counter}\r\n                onMouseDown={mouseDown}\r\n                onMouseUp={mouseUp}\r\n                onMouseLeave={mouseLeave}\r\n                onMouseOver={mouseOver}\r\n                ref={setKeyRef}\r\n              >\r\n                <path\r\n                  id=\"back\"\r\n                  d={LastKey.front}\r\n                  fill=\"white\"\r\n                  stroke=\"#B5B5B5\"\r\n                />\r\n                <path id=\"front\" d={LastKey.back} fill=\"black\" />\r\n              </g>\r\n            ) : null}\r\n          </svg>\r\n        )\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n  theme: state.auth.theme,\r\n  Melo: state.melodition,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawPiano: bindActionCreators(drawPiano, dispatch),\r\n});\r\n\r\nconst connectedPiano = connect(mapStateToProps, mapDispatchToProps)(Piano);\r\n\r\nexport default connectedPiano;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { PauseCircleOutline, PlayCircleOutline } from \"@material-ui/icons\";\r\nimport { startPlayer, stopPlayer } from \"../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../_types/player.types\";\r\n\r\ninterface IPlayProps {\r\n  Melo: IMelodition;\r\n}\r\nexport const PlayButton: React.FC<IPlayProps> = ({ Melo }) => {\r\n  const [onAir, setOnAir] = useState(false);\r\n\r\n  const playHandler = () => {\r\n    if (onAir) {\r\n      stopPlayer();\r\n      setOnAir(false);\r\n    } else {\r\n      setOnAir(true);\r\n      startPlayer();\r\n    }\r\n  };\r\n  const keyboardUp = (e: KeyboardEvent) => {\r\n    if (e.code === \"Space\" && !Melo.loading) {\r\n      playHandler();\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    document.addEventListener(\"keyup\", keyboardUp);\r\n    return () => {\r\n      document.removeEventListener(\"keyup\", keyboardUp);\r\n    };\r\n  });\r\n  return (\r\n    <IconButton color=\"secondary\" aria-label=\"play song\" onClick={playHandler}>\r\n      {onAir ? (\r\n        <PauseCircleOutline style={{ fontSize: \"1.8em\" }} />\r\n      ) : (\r\n        <PlayCircleOutline style={{ fontSize: \"1.8em\" }} />\r\n      )}\r\n    </IconButton>\r\n  );\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { requestLesson } from \"../../../_actions/lesson.actions\";\r\nimport {\r\n  drawPiano,\r\n  requestPlayer,\r\n  resetPlayer,\r\n} from \"../../../_actions/player.actions\";\r\nimport { changeMode } from \"../../../_actions/player.actions\";\r\nimport { pathFinder } from \"../../../_helpers/constants\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport { AppActions, AppState } from \"../../../_types\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport {\r\n  PlayerLeftSide,\r\n  PlayerRightSide,\r\n} from \"../../Layout/Player/PlayerSides\";\r\nimport { IMelodition } from \"../../../_types/player.types\";\r\nimport Fingers from \"../../Layout/Instruments/Finger/Fingers\";\r\nimport Piano from \"../../Layout/Instruments/Piano/Piano\";\r\nimport { PlayButton } from \"../../Layout/Player/Buttons\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      overflow: \"hidden\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 113px)\",\r\n      },\r\n      display: \"flex\",\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n    main: {\r\n      width: \"100vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      overflow: \"hidden\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 113px)\",\r\n      },\r\n      display: \"flex\",\r\n    },\r\n    content: {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      flexWrap: \"nowrap\",\r\n    },\r\n    doubleGrid: {\r\n      flexWrap: \"nowrap\",\r\n      width: \"100%\",\r\n      maxWidth: \"100%\",\r\n      \"& > div\": {\r\n        margin: \"auto\",\r\n        padding: 0,\r\n        height: \"100%\",\r\n      },\r\n    },\r\n    centerText: {\r\n      textAlign: \"center\",\r\n    },\r\n  });\r\n\r\ninterface LessonProps extends WithStyles<typeof useStyles> {\r\n  error: string;\r\n  data?: ILesson;\r\n  course?: ICourse;\r\n  pathname: string;\r\n  melodition: IMelodition;\r\n  theme: \"light\" | \"dark\";\r\n}\r\n\r\ninterface States {}\r\n\r\ntype Props = LessonProps & ReturnType<typeof mapDispatchToProps>;\r\n\r\nclass Lesson extends Component<Props, States> {\r\n  shouldComponentUpdate(nextProps: Props) {\r\n    if (nextProps.data && this.props.data?.id !== nextProps.data.id) {\r\n      this.changeContent(nextProps.data.content);\r\n    }\r\n    return true;\r\n  }\r\n  componentDidMount() {\r\n    console.log(\"mounted\");\r\n    const path = pathFinder(this.props.pathname);\r\n    this.props.requestLesson(path);\r\n    if (this.props.data?.id === path.lesson) {\r\n      this.changeContent(this.props.data!.content);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    console.log(\"dismount\");\r\n    this.props.resetPlayer();\r\n    this.setState = () => {\r\n      return;\r\n    };\r\n  }\r\n\r\n  changeContent = (fullContent: string) => {\r\n    const content = JSON.parse(fullContent);\r\n    this.props.requestPlayer(content);\r\n  };\r\n\r\n  svgWidth = (i: number): number => {\r\n    const num = i === 1 ? 668 : 584;\r\n    return num;\r\n  };\r\n\r\n  playModeChanger = () => {\r\n    this.props.changeMode(true);\r\n  };\r\n\r\n  render() {\r\n    const { theme, classes, data, melodition, error, ...rest } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        {melodition.loading || melodition.playMode ? (\r\n          <CircularProgress color=\"secondary\" className={classes.autoMargin} />\r\n        ) : data ? (\r\n          <Grid container className={classes.main}>\r\n            <Grid item xs={1}>\r\n              <PlayerLeftSide {...rest} data={data} />\r\n            </Grid>\r\n            <Grid item xs={10}>\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n                className={classes.content}\r\n              >\r\n                <Grid item xs={3} className={classes.doubleGrid}>\r\n                  <Grid container justify=\"center\" alignItems=\"center\">\r\n                    <Grid item xs={9}>\r\n                      <Typography variant=\"h4\">{data.title}</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={3} className={classes.centerText}>\r\n                      <PlayButton Melo={melodition} />\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={6} className={classes.doubleGrid}>\r\n                  <Grid container justify=\"center\" alignItems=\"center\">\r\n                    <Grid item xs={12}>\r\n                      <Piano />\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n                <Grid item xs={3} className={classes.doubleGrid}>\r\n                  <Grid container justify=\"center\" alignItems=\"center\">\r\n                    <Grid item xs={6}>\r\n                      <Typography>{data.excerpt}</Typography>\r\n                    </Grid>\r\n                    <Grid item xs={6} className={classes.centerText}>\r\n                      <Fingers />\r\n                    </Grid>\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={1}>\r\n              <PlayerRightSide playModeChanger={this.playModeChanger} />\r\n            </Grid>\r\n          </Grid>\r\n        ) : (\r\n          <Typography component=\"div\" className={classes.autoMargin}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props) => ({\r\n  ...state.single.lesson,\r\n  melodition: state.melodition,\r\n  theme: state.auth.theme,\r\n  classes: ownProps.classes,\r\n  course: state.single.course.data,\r\n  pathname: state.router.location.pathname,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  changeMode: bindActionCreators(changeMode, dispatch),\r\n  requestLesson: bindActionCreators(requestLesson, dispatch),\r\n  requestPlayer: bindActionCreators(requestPlayer, dispatch),\r\n  resetPlayer: bindActionCreators(resetPlayer, dispatch),\r\n});\r\n\r\nconst connectedLesson = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(Lesson));\r\n\r\nexport default connectedLesson;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n  CircularProgress,\r\n  Container,\r\n  createStyles,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppActions, AppState } from \"../../../_types\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { PathFinder, pathFinder } from \"../../../_helpers/constants\";\r\nimport { requestExercise } from \"../../../_actions/exercise.actions\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"99vw\",\r\n      minHeight: \"calc(100vh - 128px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 112px)\",\r\n        padding: theme.spacing(1),\r\n      },\r\n      padding: theme.spacing(2),\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n    content: {\r\n      textAlign: \"center\",\r\n      width: \"100%\",\r\n      padding: 10,\r\n      backgroundColor: theme.palette.background.paper,\r\n      border: `1px solid ${theme.palette.secondary.main}`,\r\n    },\r\n  });\r\n\r\ninterface ExerciseProps extends WithStyles<typeof useStyles> {\r\n  data?: ILesson;\r\n  error: string;\r\n  loading: boolean;\r\n  pathname: string;\r\n}\r\n\r\ntype Props = ExerciseProps & LinkDispatchProps;\r\n\r\nclass Exercise extends Component<Props> {\r\n  componentDidMount() {\r\n    const path = pathFinder(this.props.pathname);\r\n    this.props.requestExercise(path);\r\n  }\r\n\r\n  render() {\r\n    const { classes, data, loading, error } = this.props;\r\n    return (\r\n      <Container className={classes.root}>\r\n        {loading ? (\r\n          <CircularProgress color=\"secondary\" className={classes.autoMargin} />\r\n        ) : data ? (\r\n          <div\r\n            className={classes.content}\r\n            dangerouslySetInnerHTML={{ __html: data.content }}\r\n          />\r\n        ) : (\r\n          <Typography component=\"div\" className={classes.autoMargin}>\r\n            {error}\r\n          </Typography>\r\n        )}\r\n      </Container>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestExercise: (path: PathFinder) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): ExerciseProps => ({\r\n  pathname: state.router.location.pathname,\r\n  classes: ownProps.classes,\r\n  ...state.single.exercise,\r\n});\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestExercise: bindActionCreators(requestExercise, dispatch),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(Exercise));\r\n","import React from \"react\";\nimport { Redirect, Route, Switch } from \"react-router-dom\";\n\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport About from \"../components/InfoPages/About\";\nimport PostList from \"../components/PostPages/PostList\";\nimport LoginPage from \"../components/AuthPages/LoginPage\";\nimport LostPassPage from \"../components/AuthPages/LostPage\";\nimport RegisterPage from \"../components/AuthPages/RegisterPage\";\nimport ProfilePage from \"../components/ProfilePages/ProfilePage\";\nimport LearningPage from \"../components/LearningPages/LearningPage\";\n\nimport Post from \"../components/PostPages/Post\";\nimport Guide from \"../components/LearningPages/Guide/Guide\";\nimport Course from \"../components/LearningPages/Course/Course\";\nimport Lesson from \"../components/LearningPages/Lesson/Lesson\";\nimport Exercise from \"../components/LearningPages/Exercise/Exercise\";\n\nconst AppRouter = () => (\n  <Switch>\n    <Redirect exact path=\"/\" to=\"/post\" />\n    <Route exact path=\"/post\" component={PostList} />\n    <Route exact path=\"/learning\" component={LearningPage} />\n    <Route\n      exact\n      path={[\"/guide\", \"/course\", \"/exercise\", \"/favorite\", \"/lesson\"]}\n      component={LearningPage}\n    />\n    <Route exact path=\"/post/:id\" component={Post} />\n    <Route exact path=\"/guide/:id\" component={Guide} />\n    <Route exact path=\"/guide/:id\" component={Guide} />\n    <Route\n      exact\n      path={[\"/course/:id\", \"/guide/:id/course=:id\"]}\n      component={Course}\n    />\n    <Route\n      exact\n      path={[\n        \"/lesson/:id\",\n        \"/course/:id/lesson=:id\",\n        \"/guide/:id/lesson=:id\",\n        \"/guide/:id/course=:id/lesson=:id\",\n      ]}\n      component={Lesson}\n    />\n    <Route\n      exact\n      path={[\n        \"/exercise/:id\",\n        \"/course/:id/exercise=:id\",\n        \"/guide/:id/exercise=:id\",\n        \"/guide/:id/course=:id/exercise=:id\",\n      ]}\n      component={Exercise}\n    />\n    <Route exact path=\"/login\" component={LoginPage} />\n    <Route exact path=\"/register\" component={RegisterPage} />\n    <Route exact path=\"/lostpassword\" component={LostPassPage} />\n    <ProtectedRoute\n      exact\n      path=\"/profile\"\n      component={ProfilePage}\n      isAllowed={true}\n      restrictedPath=\"/profile\"\n      authenticationPath=\"/login\"\n    />\n    <Route exact path=\"/about\" component={About} />\n  </Switch>\n);\n\nexport default AppRouter;\n","import React from \"react\";\r\nimport { IMelodition } from \"../../../../_types/player.types\";\r\n\r\ninterface CanvasProps {\r\n  Melo: IMelodition;\r\n}\r\n\r\nconst BackCanvas: React.FC<CanvasProps> = ({ Melo }) => {\r\n  const drawBackContext = (ref: HTMLCanvasElement | null) => {\r\n    if (ref && Melo.canvasSize && Melo.gameLoading) {\r\n      const backCtx = ref.getContext(\"2d\")!;\r\n      backCtx.clearRect(0, 0, Melo.canvasSize.width, Melo.canvasSize.height);\r\n      const keyRefs = Melo.pianoSize;\r\n      const length = keyRefs ? keyRefs.length - 1 : 61;\r\n      const lineWidth = keyRefs ? keyRefs[length].width : 0.5;\r\n      const h = Melo.canvasSize.height;\r\n      keyRefs?.forEach((rect, i) => {\r\n        backCtx.beginPath();\r\n        const x = rect.left;\r\n        if (rect.key === \"CF\") {\r\n          backCtx.moveTo(x, 0);\r\n          backCtx.lineTo(x, h);\r\n          backCtx.lineWidth = lineWidth;\r\n          backCtx.strokeStyle = \"rgba(50,50,50,0.8)\";\r\n          backCtx.stroke();\r\n        } else if (rect.key === \"last\") {\r\n          backCtx.moveTo(x, 0);\r\n          backCtx.lineTo(x, h);\r\n          backCtx.lineWidth = lineWidth;\r\n          backCtx.strokeStyle = \"rgba(50,50,50,0.8)\";\r\n          backCtx.stroke();\r\n        } else if (rect.key === \"black\") {\r\n          backCtx.rect(x, 0, rect.width, h);\r\n          backCtx.fillStyle = \"rgba(0,0,0,0.4)\";\r\n          backCtx.fill();\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <canvas\r\n      ref={(ref) => drawBackContext(ref)}\r\n      width={Melo.canvasSize?.width}\r\n      height={Melo.canvasSize?.height}\r\n      style={{ zIndex: 1 }}\r\n    />\r\n  );\r\n};\r\nexport default BackCanvas;\r\n","import React from \"react\";\r\nimport { IMelodition } from \"../../../../_types/player.types\";\r\n\r\ninterface CanvasProps {\r\n  Melo: IMelodition;\r\n  drawGame: (canvas: HTMLCanvasElement) => void;\r\n}\r\nconst FrontCanvas: React.FC<CanvasProps> = ({ Melo, drawGame }) => {\r\n  const drawFrontContext = (ref: HTMLCanvasElement | null) => {\r\n    if (ref && Melo.gameLoading && Melo.canvasSize) {\r\n      drawGame(ref);\r\n    }\r\n  };\r\n  return (\r\n    <canvas\r\n      ref={(ref) => drawFrontContext(ref)}\r\n      width={Melo.canvasSize?.width}\r\n      height={Melo.canvasSize?.height}\r\n      style={{ position: \"absolute\", top: 0, left: 0, zIndex: 2 }}\r\n      // onWheel={(e) => Melo.rakeMouseWheel(e)}\r\n    />\r\n  );\r\n};\r\nexport default FrontCanvas;\r\n","import React from \"react\";\r\nimport { ICanvas } from \"../../../../_types/player.types\";\r\n\r\nconst SvgLine: React.FC<ICanvas> = ({ width, baseLine }) => {\r\n  return (\r\n    <svg\r\n      width={width + 7}\r\n      height={baseLine}\r\n      // onWheel={(e) => Melo.rakeMouseWheel(e)}\r\n      style={{\r\n        bottom: 0,\r\n        left: -7,\r\n        zIndex: 3,\r\n        position: \"absolute\",\r\n        filter: \"drop-shadow(rgba(0, 0, 0, 0.7) 0px 1px 1px)\",\r\n      }}\r\n    >\r\n      <style>{\"@keyframes draw{to{stroke-dashoffset:0}}\"}</style>\r\n      <polygon points={\"0,0 10,8 0,16\"} fill={\"red\"} />\r\n      <line\r\n        style={{\r\n          strokeDasharray: width + 7,\r\n          strokeDashoffset: width + 7,\r\n          animation: \"draw 1s linear forwards\",\r\n        }}\r\n        x1={0}\r\n        y1={8}\r\n        x2={width + 7}\r\n        y2={8}\r\n        strokeWidth={2.5}\r\n        stroke={\"red\"}\r\n      />\r\n    </svg>\r\n  );\r\n};\r\nexport default SvgLine;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { drawGame } from \"../../../../_actions/player.actions\";\r\nimport { AppActions, AppState } from \"../../../../_types\";\r\nimport { IMelodition } from \"../../../../_types/player.types\";\r\nimport BackCanvas from \"./BackCanvas\";\r\nimport FrontCanvas from \"./FrontCanvas\";\r\nimport SvgLine from \"./SvgLine\";\r\n\r\ninterface Props {\r\n  Melo: IMelodition;\r\n  drawGame: (canvas: any) => void;\r\n}\r\n\r\nconst PianoCanvas: React.FC<Props> = ({ Melo, drawGame }) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        width: Melo.canvasSize?.width,\r\n        height: Melo.canvasSize?.height,\r\n        position: \"relative\",\r\n        boxShadow: \"inset 0 1px 4px 0px black\",\r\n      }}\r\n    >\r\n      <FrontCanvas Melo={Melo} drawGame={drawGame} />\r\n      <BackCanvas Melo={Melo} />\r\n      {Melo.canvasSize && <SvgLine {...Melo.canvasSize} />}\r\n    </div>\r\n  );\r\n};\r\nconst mapStateToProps = (state: AppState) => ({\r\n  Melo: state.melodition,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawGame: bindActionCreators(drawGame, dispatch),\r\n});\r\n\r\nconst connectedPianoCanvas = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PianoCanvas);\r\n\r\nexport default connectedPianoCanvas;\r\n","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { Divider } from \"@material-ui/core\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport { ArrowForward } from \"@material-ui/icons\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n    divider: {\r\n      margin: theme.spacing(0, 2),\r\n    },\r\n  })\r\n);\r\ninterface Props {\r\n  modeChanger: () => void;\r\n}\r\n\r\nexport default function MenuAppBar({ modeChanger }: Props) {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  const open = Boolean(anchorEl);\r\n\r\n  const handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  return (\r\n    <AppBar position=\"static\" color=\"default\" className={classes.root}>\r\n      <Toolbar>\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          onClick={modeChanger}\r\n        >\r\n          <ArrowForward />\r\n        </IconButton>\r\n        <Divider orientation=\"vertical\" flexItem className={classes.divider} />\r\n        <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\r\n          ملودیشن پلیر (1.0.0)\r\n        </Typography>\r\n        {/*<div>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"menu-appbar\"\r\n            aria-haspopup=\"true\"\r\n            onClick={handleMenu}\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <Menu\r\n            id=\"menu-appbar\"\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            keepMounted\r\n            transformOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            open={open}\r\n            onClose={handleClose}\r\n          >\r\n            <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n            <MenuItem onClick={handleClose}>My account</MenuItem>\r\n          </Menu>\r\n          </div>*/}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { ArrowBackIos } from \"@material-ui/icons\";\r\nimport {\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Slider,\r\n  IconButton,\r\n  WithStyles,\r\n  withStyles,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport PianoCanvas from \"../Layout/Instruments/Piano/PianoCanvas\";\r\nimport {\r\n  changeMode,\r\n  drawGame,\r\n  drawPiano,\r\n  resizePlayer,\r\n} from \"../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../_types/player.types\";\r\nimport Piano from \"../Layout/Instruments/Piano/Piano\";\r\nimport { PlayButton } from \"../Layout/Player/Buttons\";\r\nimport { AppActions, AppState } from \"../../_types\";\r\nimport { ILesson } from \"../../_types/lesson.types\";\r\nimport { ICourse } from \"../../_types/course.types\";\r\nimport PlayerHeader from \"./PlayerHeader\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100vw\",\r\n      height: \"100vh\",\r\n      overflow: \"hidden\",\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    main: {\r\n      width: \"100vw\",\r\n      overflow: \"hidden\",\r\n      minHeight: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 56px)\",\r\n      },\r\n      display: \"flex\",\r\n    },\r\n    content: {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      flexWrap: \"nowrap\",\r\n    },\r\n    doubleGrid: {\r\n      flexWrap: \"nowrap\",\r\n      width: \"100%\",\r\n      maxWidth: \"100%\",\r\n      \"& > div\": {\r\n        margin: \"auto\",\r\n        padding: 0,\r\n        height: \"100%\",\r\n      },\r\n    },\r\n    centerText: {\r\n      textAlign: \"center\",\r\n    },\r\n    loading: {\r\n      display: \"flex\",\r\n      height: \"83%\",\r\n      boxShadow: \"inset 0 1px 4px 0px black\",\r\n    },\r\n  });\r\n\r\ninterface LessonPlayerModeProps extends WithStyles<typeof useStyles> {\r\n  history: string;\r\n  lesson?: ILesson;\r\n  course?: ICourse;\r\n  theme: \"light\" | \"dark\";\r\n  melodition: IMelodition;\r\n}\r\n\r\ninterface States {\r\n  list: boolean;\r\n}\r\n\r\ntype Props = LessonPlayerModeProps & ReturnType<typeof mapDispatchToProps>;\r\n\r\nclass LessonPlayerMode extends Component<Props, States> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      list: false,\r\n    };\r\n  }\r\n\r\n  svgWidth = (i: number): number => {\r\n    const num = i === 1 ? 668 : 584;\r\n    return num;\r\n  };\r\n\r\n  toggleDrawer = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    if (event.type === \"keydown\") {\r\n      return;\r\n    }\r\n    if (this.state.list) {\r\n      this.setState({ list: false });\r\n    } else {\r\n      this.setState({ list: true });\r\n    }\r\n  };\r\n  playmodeChanger = () => {\r\n    this.props.changeMode(false);\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  updateDimensions = () => {\r\n    if (!this.props.melodition.pianoLoading) {\r\n      this.props.resizePlayer();\r\n    }\r\n  };\r\n  render() {\r\n    const { classes, melodition } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        <PlayerHeader modeChanger={this.playmodeChanger} />\r\n        <Grid container className={classes.main}>\r\n          <Grid item xs={1}>\r\n            <Grid\r\n              container\r\n              direction=\"column\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n              className={classes.content}\r\n            >\r\n              <PlayButton Melo={melodition} />\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={10}>\r\n            <Grid\r\n              container\r\n              direction=\"column\"\r\n              justify=\"center\"\r\n              alignItems=\"center\"\r\n              className={classes.content}\r\n            >\r\n              <Grid item xs={12}>\r\n                {melodition.pianoLoading ? (\r\n                  <div className={classes.loading}>\r\n                    <CircularProgress\r\n                      color=\"secondary\"\r\n                      style={{ margin: \"auto\" }}\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <PianoCanvas />\r\n                )}\r\n                <Piano />\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={1}>\r\n            <Grid\r\n              container\r\n              direction=\"column\"\r\n              justify=\"space-around\"\r\n              alignItems=\"center\"\r\n              className={classes.content}\r\n            >\r\n              <Slider\r\n                color=\"secondary\"\r\n                orientation=\"vertical\"\r\n                aria-label=\"music seeker\"\r\n                defaultValue={20}\r\n                style={{\r\n                  height: \"40%\",\r\n                }}\r\n              />\r\n              <IconButton color=\"secondary\" aria-label=\"play mode\">\r\n                <ArrowBackIos />\r\n              </IconButton>\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (\r\n  state: AppState,\r\n  ownProps: Props\r\n): LessonPlayerModeProps => ({\r\n  history: state.router.location.pathname,\r\n  classes: ownProps.classes,\r\n  melodition: state.melodition,\r\n  theme: state.auth.theme,\r\n  lesson: state.single.lesson.data,\r\n  course: state.single.course.data,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  changeMode: bindActionCreators(changeMode, dispatch),\r\n  drawGame: bindActionCreators(drawGame, dispatch),\r\n  drawPiano: bindActionCreators(drawPiano, dispatch),\r\n  resizePlayer: bindActionCreators(resizePlayer, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(LessonPlayerMode)) as unknown) as ComponentType<\r\n  unknown\r\n>;\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const globalStyle = createMuiTheme(\r\n    {\r\n        direction: \"rtl\",\r\n        typography: {\r\n            fontFamily: \"Vazir\",\r\n        },\r\n        overrides: {\r\n            MuiBreadcrumbs: {\r\n                root: {\r\n                    width: 'calc(100vw - 64px)',\r\n                },\r\n                ol: {\r\n                    flexWrap: \"nowrap\",\r\n                    overflowX: \"scroll\",\r\n                    scrollbarWidth: \"none\",\r\n                    whiteSpace: \"nowrap\",\r\n                    '&::-webkit-scrollbar': {\r\n                        display: \"none\"\r\n                    }\r\n                }\r\n            },\r\n            MuiCardActions: {\r\n                root: {\r\n                    padding: undefined\r\n                }\r\n            },\r\n            MuiCssBaseline: {\r\n                '@global': {\r\n                    '*': {\r\n                        scrollbarWidth: 'thin',\r\n                        scrollbarColor: \"rgb(245, 0, 87) #0000\",\r\n                    },\r\n                    '*::-webkit-scrollbar': {\r\n                        width: '10px'\r\n                    },\r\n                    '*::-webkit-scrollbar-track': {\r\n                        '-webkit-border-radius': '10px',\r\n                        borderRadius: '8px',\r\n                    },\r\n                    '*::-webkit-scrollbar-thumb': {\r\n                        '-webkit-border-radius': '10px',\r\n                        borderRadius: '10px',\r\n                        background: 'rgb(245, 0, 87)',\r\n                    },\r\n                    '*::-webkit-scrollbar-thumb:window-inactive': {\r\n                        background: 'rgb(245, 0, 87)'\r\n                    }\r\n                }\r\n            },\r\n            MuiIconButton: {\r\n                colorSecondary: {\r\n                    \"&:hover\": {\r\n                        backgroundColor: \"rgb(200 200 200 / 0.5)\",\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    })\r\n\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport { blue, pink, red } from \"@material-ui/core/colors\";\r\nimport { faIR } from \"@material-ui/core/locale\";\r\nimport { globalStyle } from \"./GlobalTheme\";\r\n\r\nexport const DarkTheme = createMuiTheme(\r\n    {\r\n        ...globalStyle,\r\n        palette: {\r\n            type: \"dark\",\r\n            primary: blue,\r\n            error: red,\r\n            secondary: {\r\n                main: pink[300],\r\n            },\r\n        },\r\n    },\r\n    faIR\r\n);\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport { red } from \"@material-ui/core/colors\";\r\nimport { faIR } from \"@material-ui/core/locale\";\r\nimport { globalStyle } from \"./GlobalTheme\";\r\n\r\nexport const LightTheme = createMuiTheme(\r\n  {\r\n    ...globalStyle,\r\n    palette: {\r\n      error: red,\r\n    },\r\n  },\r\n  faIR\r\n);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { push, goBack } from \"connected-react-router\";\r\nimport { ArrowForward } from \"@material-ui/icons\";\r\nimport { Theme, makeStyles, createStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  AppBar,\r\n  Link,\r\n  Paper,\r\n  Toolbar,\r\n  IconButton,\r\n  Divider,\r\n  Breadcrumbs,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  AllInbox,\r\n  LibraryMusic,\r\n  QueueMusic,\r\n  MusicNote,\r\n  EmojiSymbols,\r\n  Favorite,\r\n} from \"@material-ui/icons\";\r\nimport { AppActions, AppState } from \"../../_types\";\r\nimport { pathFinder } from \"../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    bracrumbs: {\r\n      padding: theme.spacing(1, 2, 0, 2),\r\n      \"& > ol > li\": {\r\n        padding: theme.spacing(1, 0.5),\r\n      },\r\n    },\r\n    back: {\r\n      margin: theme.spacing(0, 2),\r\n    },\r\n  })\r\n);\r\n\r\nconst pages: any = {\r\n  post: <AllInbox />,\r\n  guide: <LibraryMusic />,\r\n  course: <QueueMusic />,\r\n  lesson: <MusicNote />,\r\n  exercise: <EmojiSymbols />,\r\n  favorite: <Favorite />,\r\n};\r\n\r\ninterface IBreadcrumbs {\r\n  pathname: string;\r\n  single: any;\r\n}\r\n\r\ninterface ILinksPath {\r\n  name: \"home\";\r\n  url: \"/\";\r\n}\r\n\r\ntype Props = IBreadcrumbs & LinkDispatchProps;\r\n\r\nconst Breadcrumb = (props: Props) => {\r\n  const { single, pathname, push, back } = props;\r\n\r\n  const [linkPath, setLinkPath] = useState([] as ILinksPath[]);\r\n\r\n  const [trigger, setTrigger] = useState(false);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    const path = pathFinder(pathname);\r\n    const keys = Object.keys(path);\r\n    const linkArray: any[] = [];\r\n    keys.forEach((key, i) => {\r\n      const post = single[keys[i - 1]];\r\n      const title = post?.data?.title;\r\n      let name = i === 0 ? pages[key] : title ? title : \"...\";\r\n      linkArray[i] = {\r\n        url: pathname\r\n          .split(\"/\")\r\n          .slice(0, i + 2)\r\n          .join(\"/\"),\r\n        name: name,\r\n      };\r\n    });\r\n    if (path.length > 0) {\r\n      setTrigger(true);\r\n      setLinkPath(linkArray);\r\n    }\r\n    return () => {\r\n      setTrigger(false);\r\n    };\r\n  }, [pathname, single]);\r\n\r\n  const handleClick = (\r\n    event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\r\n  ) => {\r\n    event.preventDefault();\r\n    push(event.currentTarget.pathname);\r\n  };\r\n\r\n  return trigger ? (\r\n    <AppBar position=\"static\">\r\n      <Paper square style={{ overflow: \"hidden\" }}>\r\n        <Toolbar disableGutters>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"menu\"\r\n            onClick={back}\r\n            className={classes.back}\r\n          >\r\n            <ArrowForward />\r\n          </IconButton>\r\n          <Divider orientation=\"vertical\" flexItem />\r\n          <Breadcrumbs aria-label=\"breadcrumb\" className={classes.bracrumbs}>\r\n            {linkPath.map((link, i) => (\r\n              <Link\r\n                key={i + link.name}\r\n                href={link.url}\r\n                color=\"inherit\"\r\n                aria-label={link.name}\r\n                onClick={handleClick}\r\n              >\r\n                {link.name}\r\n              </Link>\r\n            ))}\r\n          </Breadcrumbs>\r\n        </Toolbar>\r\n      </Paper>\r\n    </AppBar>\r\n  ) : null;\r\n};\r\n\r\ninterface LinkDispatchProps {\r\n  push: (key: string) => void;\r\n  back: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: {}): IBreadcrumbs => {\r\n  const { pathname } = state.router.location;\r\n  return {\r\n    pathname,\r\n    single: state.single,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  push: bindActionCreators(push, dispatch),\r\n  back: bindActionCreators(goBack, dispatch),\r\n});\r\n\r\nconst conectedBreadcrumb = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Breadcrumb);\r\n\r\nexport default conectedBreadcrumb;\r\n","import React from \"react\";\r\nimport {\r\n  SettingsApplications,\r\n  AccountBox,\r\n  Home,\r\n  FileCopy,\r\n  Info,\r\n} from \"@material-ui/icons\";\r\n\r\nexport const sideLink = {\r\n  in: [\r\n    { name: \"پروفایل\", to: \"/profile\", icon: <SettingsApplications /> },\r\n    { name: \"کابری من\", to: \"/dashboard\", icon: <AccountBox /> },\r\n  ],\r\n  out: [\r\n    { name: \"ورود\", to: \"/login\", icon: <AccountBox /> },\r\n    { name: \"ثبت نام\", to: \"/register\", icon: <AccountBox /> },\r\n  ],\r\n};\r\nexport const links = [\r\n  { to: \"/\", title: \"خانه‌\", icon: <Home /> },\r\n  { to: \"/learning\", title: \"درس ها‌\", icon: <FileCopy /> },\r\n  { to: \"/about\", title: \"درباره‌\", icon: <Info /> },\r\n];\r\n","import React from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport {\r\n  createStyles,\r\n  makeStyles,\r\n  Theme,\r\n  useTheme,\r\n} from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport List from \"@material-ui/core/List\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport {\r\n  Brightness7,\r\n  Brightness4,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n} from \"@material-ui/icons\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport { links, sideLink } from \"./Links\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n    },\r\n    hide: {\r\n      display: \"none\",\r\n    },\r\n    drawer: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n    drawerPaper: {\r\n      width: drawerWidth,\r\n    },\r\n    drawerHeader: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      padding: theme.spacing(0, 1),\r\n      // necessary for content to be below app bar\r\n      ...theme.mixins.toolbar,\r\n      justifyContent: \"flex-start\",\r\n    },\r\n    toolbar: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"space-between\",\r\n      padding: theme.spacing(0, 1, 0, 4),\r\n      // necessary for content to be below app bar\r\n      ...theme.mixins.toolbar,\r\n    },\r\n  })\r\n);\r\n\r\nexport default function MiniDrawer({\r\n  state,\r\n  loggedIn,\r\n  theme,\r\n  changeTheme,\r\n  dispatch,\r\n}: AppBarInterface) {\r\n  const classes = useStyles();\r\n  const { direction } = useTheme();\r\n  const handleDrawerClose = () => {\r\n    dispatch({ type: \"menu-toggle\" });\r\n  };\r\n\r\n  const handleThemeChanger = () => {\r\n    if (theme === \"light\") changeTheme(\"dark\");\r\n    else changeTheme(\"light\");\r\n  };\r\n\r\n  const botLinks = loggedIn ? sideLink.in : sideLink.out;\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <Drawer\r\n        className={classes.drawer}\r\n        variant=\"temporary\"\r\n        anchor={direction === \"ltr\" ? \"right\" : \"left\"}\r\n        open={state.menuIsOpen}\r\n        onClose={handleDrawerClose}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n      >\r\n        <div className={classes.toolbar}>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleThemeChanger}\r\n            edge=\"start\"\r\n          >\r\n            {theme === \"light\" ? <Brightness7 /> : <Brightness4 />}\r\n          </IconButton>\r\n          <IconButton onClick={handleDrawerClose}>\r\n            {direction === \"ltr\" ? <ChevronLeft /> : <ChevronRight />}\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n          {links.map((text, index) => (\r\n            <Link\r\n              to={text.to}\r\n              key={\"sidelink-\" + index}\r\n              onClick={handleDrawerClose}\r\n              component={RouterLink}\r\n              color=\"secondary\"\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>{text.icon}</ListItemIcon>\r\n                <ListItemText primary={text.title} />\r\n              </ListItem>\r\n            </Link>\r\n          ))}\r\n        </List>\r\n        <Divider />\r\n        <List>\r\n          {botLinks.map((item, index) => (\r\n            <Link\r\n              to={item.to}\r\n              key={\"sidelink-\" + index}\r\n              onClick={handleDrawerClose}\r\n              component={RouterLink}\r\n              color=\"secondary\"\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>{item.icon}</ListItemIcon>\r\n                <ListItemText primary={item.name} />\r\n              </ListItem>\r\n            </Link>\r\n          ))}\r\n        </List>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { createStyles, Theme, Collapse } from \"@material-ui/core\";\r\nimport { links } from \"./Links\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"none\",\r\n      [theme.breakpoints.up(420)]: {\r\n        marginLeft: theme.spacing(1),\r\n        display: \"inline-block\",\r\n      },\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        marginLeft: theme.spacing(2),\r\n        display: \"inline-block\",\r\n      },\r\n      [theme.breakpoints.up(\"md\")]: {\r\n        marginLeft: theme.spacing(4),\r\n        display: \"inline-block\",\r\n      },\r\n      [theme.breakpoints.up(\"lg\")]: {\r\n        marginLeft: theme.spacing(8),\r\n        display: \"inline-block\",\r\n      },\r\n    },\r\n    linkKeeper: {\r\n      overflow: \"hidden\",\r\n      height: \"1.2em\",\r\n      lineHeight: \"1.2em\",\r\n    },\r\n    links: {\r\n      textAlign: \"center\",\r\n      flexGrow: 1,\r\n    },\r\n  })\r\n);\r\n\r\ninterface LinkConstProps {\r\n  openStatus: boolean;\r\n}\r\n\r\nconst LinkConst = ({ openStatus }: LinkConstProps) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Collapse in={!openStatus} className={classes.links}>\r\n      <div className={classes.linkKeeper}>\r\n        {links.map((link, i) => (\r\n          <Link\r\n            key={\"link-\" + i}\r\n            to={link.to}\r\n            className={classes.root}\r\n            component={RouterLink}\r\n            color=\"secondary\"\r\n          >\r\n            {link.title}\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </Collapse>\r\n  );\r\n};\r\nexport default LinkConst;\r\n","import React from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { Badge, IconButton, Menu, MenuItem } from \"@material-ui/core\";\r\nimport { AccountCircle, Stars, Notifications } from \"@material-ui/icons\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\n\r\nconst MobileMenu = (props: AppBarInterface) => {\r\n  const { mobileMenuId, mobileMoreAnchor } = props.state;\r\n  const mobileMenuIsOpen = Boolean(mobileMoreAnchor);\r\n  const handleProfileMenu = (\r\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>\r\n  ) => {\r\n    props.dispatch({ type: \"profile-anchor\", payload: event.currentTarget });\r\n  };\r\n  const handleMobileMenu = () => {\r\n    props.dispatch({ type: \"mobile-close\" });\r\n  };\r\n  const handleSignOut = () => {\r\n    handleMobileMenu();\r\n    if (props.logout) props.logout();\r\n  };\r\n  return props.loggedIn ? (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchor}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      open={mobileMenuIsOpen}\r\n      onClose={handleMobileMenu}\r\n    >\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <Stars />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Messages</p>\r\n      </MenuItem>\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 11 new alerts\" color=\"inherit\">\r\n          <Badge badgeContent={11} color=\"secondary\">\r\n            <Notifications />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Notification</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleProfileMenu}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Account</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleSignOut}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Sign Out</p>\r\n      </MenuItem>\r\n    </Menu>\r\n  ) : (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchor}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      open={mobileMenuIsOpen}\r\n      onClose={handleMobileMenu}\r\n    >\r\n      <Link to=\"/login\" component={RouterLink} color=\"secondary\">\r\n        <MenuItem onClick={handleMobileMenu}>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"primary-search-account-menu\"\r\n            aria-haspopup=\"true\"\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <p>ورود</p>\r\n        </MenuItem>\r\n      </Link>\r\n      <Link to=\"/register\" component={RouterLink} color=\"secondary\">\r\n        <MenuItem onClick={handleMobileMenu}>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"primary-search-account-menu\"\r\n            aria-haspopup=\"true\"\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <p>ثبت نام</p>\r\n        </MenuItem>\r\n      </Link>\r\n    </Menu>\r\n  );\r\n};\r\nexport default MobileMenu;\r\n","import React from \"react\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { sideLink } from \"./Links\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\n\r\nconst MenuRender = (props: AppBarInterface) => {\r\n  const { loggedIn, state, logout, dispatch } = props;\r\n  const { profileMoreAnchor, menuId } = state;\r\n  const profileMenuIsOpen = Boolean(profileMoreAnchor);\r\n  const handleSignOut = () => {\r\n    if (logout) logout();\r\n    handleDrawerClose();\r\n  };\r\n  const handleDrawerClose = () => {\r\n    dispatch({ type: \"profile-close\" });\r\n  };\r\n  const botLinks = loggedIn ? sideLink.in : sideLink.out;\r\n  return (\r\n    <Menu\r\n      anchorEl={profileMoreAnchor}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      open={profileMenuIsOpen}\r\n      onClose={handleDrawerClose}\r\n    >\r\n      {botLinks.map((item, index) => (\r\n        <Link\r\n          to={item.to}\r\n          key={\"menuitem-\" + index}\r\n          onClick={handleDrawerClose}\r\n          component={RouterLink}\r\n          color=\"secondary\"\r\n        >\r\n          <MenuItem onClick={handleDrawerClose}>{item.name}</MenuItem>\r\n        </Link>\r\n      ))}\r\n      {loggedIn && <MenuItem onClick={handleSignOut}>خروج</MenuItem>}\r\n    </Menu>\r\n  );\r\n};\r\nexport default MenuRender;\r\n","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\nimport {\r\n  AccountCircle,\r\n  Star,\r\n  Notifications,\r\n  MoreHoriz,\r\n} from \"@material-ui/icons/\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    sectionDesktop: {\r\n      display: \"none\",\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        display: \"flex\",\r\n      },\r\n    },\r\n    sectionMobile: {\r\n      display: \"flex\",\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        display: \"none\",\r\n      },\r\n    },\r\n  })\r\n);\r\n\r\nconst IconController = (props: AppBarInterface) => {\r\n  const classes = useStyles();\r\n  const { menuId, mobileMenuId } = props.state;\r\n  const profileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n    props.dispatch({ type: \"profile-anchor\", payload: event.currentTarget });\r\n  };\r\n  const mobileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n    props.dispatch({ type: \"mobile-anchor\", payload: event.currentTarget });\r\n  };\r\n  return props.loggedIn ? (\r\n    <React.Fragment>\r\n      <div className={classes.sectionDesktop}>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <Star />\r\n          </Badge>\r\n        </IconButton>\r\n        <IconButton aria-label=\"show 17 new alerts\" color=\"inherit\">\r\n          <Badge badgeContent={17} color=\"secondary\">\r\n            <Notifications />\r\n          </Badge>\r\n        </IconButton>\r\n        <IconButton\r\n          edge=\"end\"\r\n          aria-label=\"account of current user\"\r\n          aria-controls={menuId}\r\n          aria-haspopup=\"true\"\r\n          onClick={profileMenuOpen}\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n      </div>\r\n      <div className={classes.sectionMobile}>\r\n        <IconButton\r\n          aria-label=\"show more\"\r\n          aria-controls={mobileMenuId}\r\n          aria-haspopup=\"true\"\r\n          onClick={mobileMenuOpen}\r\n          color=\"inherit\"\r\n        >\r\n          <MoreHoriz />\r\n        </IconButton>\r\n      </div>\r\n    </React.Fragment>\r\n  ) : (\r\n    <IconButton\r\n      edge=\"end\"\r\n      aria-label=\"account of current user\"\r\n      aria-controls={menuId}\r\n      aria-haspopup=\"true\"\r\n      onClick={profileMenuOpen}\r\n      color=\"inherit\"\r\n    >\r\n      <AccountCircle />\r\n    </IconButton>\r\n  );\r\n};\r\nexport default IconController;\r\n","import React from \"react\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport {\r\n  createStyles,\r\n  fade,\r\n  Theme,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    search: {\r\n      position: \"relative\",\r\n      borderRadius: theme.shape.borderRadius,\r\n      backgroundColor: fade(theme.palette.common.white, 0.15),\r\n      \"&:hover\": {\r\n        backgroundColor: fade(theme.palette.common.white, 0.25),\r\n      },\r\n      width: \"100%\",\r\n      marginLeft: theme.spacing(1),\r\n      [theme.breakpoints.up(420)]: {\r\n        width: \"auto\",\r\n      },\r\n    },\r\n    searchIcon: {\r\n      padding: theme.spacing(0, 2),\r\n      height: \"100%\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      pointerEvents: \"none\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      cursor: \"pointer\",\r\n    },\r\n    inputRoot: {\r\n      color: \"inherit\",\r\n    },\r\n    inputInput: {\r\n      padding: theme.spacing(1, 1, 1, 0),\r\n      // vertical padding + font size from searchIcon\r\n      paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n      transition: theme.transitions.create(\"width\"),\r\n      width: \"0\",\r\n      \"&:focus\": {\r\n        width: \"12ch\",\r\n      },\r\n      [theme.breakpoints.down(420)]: {\r\n        width: \"7ch\",\r\n      },\r\n      [theme.breakpoints.down(350)]: {\r\n        width: \"0\",\r\n      },\r\n    },\r\n  });\r\n\r\ninterface SearchProps extends WithStyles<typeof styles> {}\r\ninterface SearchStates {\r\n  query: string;\r\n  results: any;\r\n  loading: boolean;\r\n  message: string;\r\n}\r\n\r\nclass SearchInput extends React.Component<SearchProps, SearchStates> {\r\n  constructor(props: SearchProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      query: \"\",\r\n      results: {},\r\n      loading: false,\r\n      message: \"\",\r\n    };\r\n  }\r\n  handleOnInputChange = (\r\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    const query = event.target.value;\r\n    this.setState({ query, loading: true });\r\n  };\r\n\r\n  fetchSearchResult = () => {};\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { query } = this.state;\r\n    return (\r\n      <div className={classes.search}>\r\n        <div className={classes.searchIcon}>\r\n          <SearchIcon />\r\n        </div>\r\n        <InputBase\r\n          placeholder=\"جستجو...\"\r\n          classes={{\r\n            root: classes.inputRoot,\r\n            input: classes.inputInput,\r\n          }}\r\n          inputProps={{ \"aria-label\": \"search\" }}\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={(event) => this.handleOnInputChange(event)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withStyles(styles)(SearchInput);\r\n","import React, { Dispatch } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core/styles\";\r\nimport { HeaderState, HeaderAction } from \"./HeaderReducer\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport MiniDrawer from \"./MiniDrawer\";\r\nimport LinkConst from \"./LinkConst\";\r\nimport MobileMenu from \"./MobileMenu\";\r\nimport MenuRender from \"./MenuRender\";\r\nimport IconController from \"./LeftIcons\";\r\nimport { IHeaderProps } from \"./Header\";\r\nimport SearchInput from \"./SearchInput\";\r\n\r\nconst drawerWidth = 240;\r\nconst version = process.env.REACT_APP_VERSION;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    appBar: {\r\n      zIndex: theme.zIndex.drawer + 1,\r\n      transition: theme.transitions.create([\"width\", \"margin\"], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n      }),\r\n    },\r\n    appBarShift: {\r\n      marginLeft: drawerWidth,\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      transition: theme.transitions.create([\"width\", \"margin\"], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n      }),\r\n    },\r\n    hide: {\r\n      display: \"none\",\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n  })\r\n);\r\n\r\nexport type AppBarInterface = AppBarProps & IHeaderProps;\r\n\r\ninterface AppBarProps {\r\n  state: HeaderState;\r\n  dispatch: Dispatch<HeaderAction>;\r\n}\r\nconst MainAppBar = (props: AppBarInterface) => {\r\n  const classes = useStyles();\r\n\r\n  const { menuIsOpen } = props.state;\r\n\r\n  const handleDrawerOpen = () => {\r\n    props.dispatch({ type: \"menu-toggle\" });\r\n  };\r\n\r\n  return (\r\n    <AppBar\r\n      color={\"default\"}\r\n      position=\"relative\"\r\n      className={clsx(classes.appBar, {\r\n        [classes.appBarShift]: menuIsOpen,\r\n      })}\r\n    >\r\n      <Toolbar>\r\n        <IconButton\r\n          color=\"inherit\"\r\n          aria-label=\"open drawer\"\r\n          onClick={handleDrawerOpen}\r\n          edge=\"start\"\r\n          className={clsx(classes.menuButton, {\r\n            [classes.hide]: menuIsOpen,\r\n          })}\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <Link component={RouterLink} color=\"secondary\" to=\"/\">\r\n          ملودیشن\r\n        </Link>\r\n        <p onClick={() => sessionStorage.clear()}>({version})</p>\r\n        <LinkConst openStatus={menuIsOpen} />\r\n        <SearchInput />\r\n        <IconController {...props} />\r\n      </Toolbar>\r\n      <MiniDrawer {...props} />\r\n      <MobileMenu {...props} />\r\n      <MenuRender {...props} />\r\n    </AppBar>\r\n  );\r\n};\r\nexport default MainAppBar;\r\n","export interface HeaderState {\r\n    menuId: string;\r\n    menuIsOpen: boolean;\r\n    mobileMenuId: string;\r\n    profileMoreAnchor: null | HTMLElement;\r\n    mobileMoreAnchor: null | HTMLElement;\r\n}\r\n\r\nexport const initialState: HeaderState = {\r\n    menuId: \"primary-search-account-menu\",\r\n    mobileMenuId: \"primary-search-account-menu-mobile\",\r\n    profileMoreAnchor: null,\r\n    mobileMoreAnchor: null,\r\n    menuIsOpen: false,\r\n};\r\n\r\nexport type HeaderAction =\r\n    | { type: \"menu-toggle\" | \"profile-close\" | \"mobile-close\" }\r\n    | { type: \"field\"; fieldName: string; payload: string }\r\n    | { type: \"loggedIn\"; payload: boolean }\r\n    | { type: \"profile-anchor\"; payload: null | HTMLElement }\r\n    | { type: \"mobile-anchor\"; payload: null | HTMLElement };\r\n\r\nexport default function HeaderReducer(state: HeaderState, action: HeaderAction) {\r\n    switch (action.type) {\r\n        case \"field\": {\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload,\r\n            };\r\n        }\r\n        case \"menu-toggle\": {\r\n            return {\r\n                ...state,\r\n                menuIsOpen: !state.menuIsOpen,\r\n            };\r\n        }\r\n        case \"profile-close\": {\r\n            return {\r\n                ...state,\r\n                profileMoreAnchor: null,\r\n            };\r\n        }\r\n        case \"mobile-close\": {\r\n            return {\r\n                ...state,\r\n                mobileMoreAnchor: null,\r\n            };\r\n        }\r\n        case \"mobile-anchor\": {\r\n            return {\r\n                ...state,\r\n                mobileMoreAnchor: action.payload,\r\n            };\r\n        }\r\n        case \"profile-anchor\": {\r\n            return {\r\n                ...state,\r\n                profileMoreAnchor: action.payload,\r\n            };\r\n        }\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import React, { ComponentType, useReducer } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport MainAppBar from \"./MainAppBar\";\r\nimport { changeTheme, logoutRequest } from \"../../../_actions/user.actions\";\r\nimport HeaderReducer, { initialState } from \"./HeaderReducer\";\r\n\r\ninterface MapProps {\r\n  loggedIn: boolean;\r\n  theme: \"light\" | \"dark\";\r\n}\r\n\r\nexport type IHeaderProps = LinkDispatchProps & MapProps;\r\n\r\nconst Header: React.FC<IHeaderProps> = ({ ...rest }) => {\r\n  const [state, dispatch] = useReducer(HeaderReducer, initialState);\r\n\r\n  return <MainAppBar state={state} dispatch={dispatch} {...rest} />;\r\n};\r\n\r\ninterface LinkDispatchProps {\r\n  logout: () => void;\r\n  changeTheme: (theme: \"light\" | \"dark\") => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): MapProps => {\r\n  const { loggedIn, theme } = state.auth;\r\n  return { loggedIn, theme };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  logout: bindActionCreators(logoutRequest, dispatch),\r\n  changeTheme: bindActionCreators(changeTheme, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Header) as unknown) as ComponentType<unknown>;\r\n","import {\r\n  SHOW_SNACKBAR,\r\n  REMOVE_SNACKBAR,\r\n  DefaultSnackState,\r\n} from \"../_types/snackbar.types\";\r\n\r\nexport const snackbarShow = (snackbar: DefaultSnackState) => ({\r\n  type: SHOW_SNACKBAR,\r\n  snackbar: {\r\n    ...snackbar,\r\n  },\r\n})\r\n\r\nexport const snackbarRemove = (key: string) => ({ type: REMOVE_SNACKBAR, key })\r\n","import { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AppState, AppActions } from \"../../../_types\";\r\nimport { ISnack } from \"../../../_types/snackbar.types\";\r\nimport { snackbarRemove } from \"../../../_actions/snackbar.actions\";\r\n\r\nlet displayed: string[] = [];\r\n\r\ninterface NotifierProps {\r\n  snackbars?: ISnack[];\r\n}\r\n\r\ntype Props = NotifierProps & LinkDispatchProps;\r\n\r\nconst Notifier = ({ snackbars, removeSnack }: Props): null => {\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n  const storeDisplayed = (id: string) => {\r\n    displayed = [...displayed, id];\r\n  };\r\n\r\n  const removeDisplayed = (id: string) => {\r\n    displayed = [...displayed.filter((key) => id !== key)];\r\n  };\r\n\r\n  useEffect(() => {\r\n    snackbars?.forEach(\r\n      ({ key, message, options = {}, dismissed = false }: ISnack) => {\r\n        if (dismissed) {\r\n          closeSnackbar(key);\r\n          return;\r\n        }\r\n        if (displayed.includes(key)) return;\r\n        enqueueSnackbar(message, {\r\n          key,\r\n          ...options,\r\n          onClose: (event, reason, myKey) => {\r\n            if (options.onClose) {\r\n              options.onClose(event, reason, myKey);\r\n            }\r\n          },\r\n          onExited: (event, myKey) => {\r\n            if (removeSnack) removeSnack(String(myKey));\r\n            removeDisplayed(String(myKey));\r\n          },\r\n        });\r\n        storeDisplayed(key);\r\n      }\r\n    );\r\n  }, [snackbars, closeSnackbar, enqueueSnackbar, removeSnack]);\r\n\r\n  return null;\r\n};\r\ninterface LinkDispatchProps {\r\n  removeSnack?: (key: string) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): NotifierProps => {\r\n  const { snackbar } = state;\r\n  return {\r\n    snackbars: snackbar.snackbars,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  removeSnack: bindActionCreators(snackbarRemove, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifier);\r\n","import React from \"react\";\r\nimport { create } from \"jss\";\r\nimport jssRTL from \"jss-rtl\";\r\nimport { connect } from \"react-redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ConnectedRouter } from \"connected-react-router\";\r\nimport { SnackbarProvider } from \"notistack\";\r\nimport { history } from \"./_store/store.config\";\r\nimport AppRouter from \"./router\";\r\nimport \"./App.css\";\r\nimport {\r\n  Box,\r\n  createStyles,\r\n  jssPreset,\r\n  makeStyles,\r\n  Paper,\r\n  responsiveFontSizes,\r\n  Slide,\r\n  StylesProvider,\r\n  Theme,\r\n  ThemeProvider,\r\n} from \"@material-ui/core\";\r\nimport LessonPlayerMode from \"./components/PlayMode/LessonPlayMode\";\r\nimport { LightTheme, DarkTheme } from \"./plugin/Themes\";\r\nimport Breadcrumb from \"./components/Layout/Breadcrumbs\";\r\nimport { changeMode } from \"./_actions/player.actions\";\r\nimport Header from \"./components/Layout/Header/Header\";\r\nimport Notifier from \"./components/Layout/SnackBar/Notifier\";\r\nimport { AppActions, AppState } from \"./_types\";\r\n\r\nconst jss = create({ plugins: [...jssPreset().plugins, jssRTL()] });\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    app: {\r\n      width: \"100vw\",\r\n      height: \"100vh\",\r\n      overflowX: \"hidden\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      overflow: \"hidden\",\r\n    },\r\n    mainBody: {\r\n      height: \"inherit\",\r\n      overflowX: \"hidden\",\r\n      overflowY: \"auto\",\r\n    },\r\n    paper: {\r\n      zIndex: 999999,\r\n      position: \"absolute\",\r\n    },\r\n  })\r\n);\r\n\r\ninterface AppTheme {\r\n  playMode: boolean;\r\n  theme: \"light\" | \"dark\";\r\n}\r\ntype Props = AppTheme & LinkDispatchProps;\r\n\r\nconst App = ({ theme, playMode, changeMode }: Props) => {\r\n  const classes = useStyles();\r\n  const currentTheme = theme === \"light\" ? LightTheme : DarkTheme;\r\n  const responsTheme = responsiveFontSizes(currentTheme);\r\n  history.listen(() => {\r\n    if (playMode) {\r\n      changeMode(false);\r\n    }\r\n  });\r\n  return (\r\n    <ConnectedRouter history={history}>\r\n      <StylesProvider jss={jss}>\r\n        <ThemeProvider theme={responsTheme}>\r\n          <SnackbarProvider>\r\n            <Slide direction=\"right\" in={playMode} mountOnEnter unmountOnExit>\r\n              <Paper elevation={4} className={classes.paper}>\r\n                <LessonPlayerMode />\r\n              </Paper>\r\n            </Slide>\r\n            <Box className={classes.app}>\r\n              <Header />\r\n              <Breadcrumb />\r\n              <Notifier />\r\n              <Box id=\"main-body\" className={classes.mainBody}>\r\n                <AppRouter />\r\n              </Box>\r\n            </Box>\r\n          </SnackbarProvider>\r\n        </ThemeProvider>\r\n      </StylesProvider>\r\n    </ConnectedRouter>\r\n  );\r\n};\r\n\r\ninterface LinkDispatchProps {\r\n  changeMode: (mode: boolean) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n  const { theme } = state.auth;\r\n  const { playMode } = state.melodition;\r\n  return { theme, playMode };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  changeMode: bindActionCreators(changeMode, dispatch),\r\n});\r\n\r\nconst conectedApp = connect(mapStateToProps, mapDispatchToProps)(App);\r\n\r\nexport default conectedApp;\r\n","import App from \"./App\";\r\nimport React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./_store/store.config\";\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}