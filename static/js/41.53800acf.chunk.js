(this["webpackJsonpmelodition-typescript"]=this["webpackJsonpmelodition-typescript"]||[]).push([[41],{486:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a(108),r=a(73),o=a(74),l=a(76),c=a(75),s=a(12),d=a(0),m=a.n(d),p=a(22),u=a(35),h=a(182),f=a(310),g=a(72),b=a(7),x=a(283),v=a(289),y=a(77),j=a(309),E=function(e){var t=e.width,a=e.height,n=e.loading,r=Object(i.a)(e,["width","height","loading"]);return m.a.createElement("canvas",{ref:function(e){return function(e){if(e&&n){var i=e.getContext("2d");i.clearRect(0,0,t,a),i.strokeStyle="black",i.lineWidth=.1,i.strokeRect(0,r.tapSize/2,t,a-r.tapSize),i.fillStyle="rgba(200, 200, 200, 0.2)",i.fillRect(0,r.tapSize/2,t,a-r.tapSize),r.linesArray.forEach((function(e,a){var n=(a+1)*r.tapSize/2;a%2!==0&&a!==r.linesArray.length-1&&(i.beginPath(),i.font="bold "+r.fontSize+"px arial",i.textAlign="center",i.textBaseline="middle",i.fillStyle="black",i.fillText(Object(j.d)(e),.5*r.spaceSize,n),Object(j.c)(e)||(i.moveTo(r.spaceSize,n),i.lineTo(t-r.spaceSize/2,n),i.lineWidth=1.5,i.strokeStyle="rgba(50, 50, 50, 1)",i.stroke(),i.fill()))}))}}(e)},width:t,height:a,style:{zIndex:1}})},w=Object(u.c)((function(e){return{Melo:e.melodition}}),(function(e){return{drawNotes:Object(p.b)(x.e,e)}}))((function(e){var t=e.Melo,a=e.drawNotes;if(t.noteInfo){var n=t.noteInfo,i=n.width,r=n.height;return m.a.createElement("div",{style:{width:i,height:r,position:"relative",margin:"5px 0"}},m.a.createElement(E,Object.assign({},t.noteInfo,{loading:t.notesLoading})),m.a.createElement("canvas",{ref:function(e){return function(e){e&&t.notesLoading&&a(e)}(e)},width:i,height:r,style:{position:"absolute",top:0,left:0,zIndex:2}}))}return m.a.createElement(y.a,null)})),O=a(384),S=a(366),k=a(59),z=a(308),N=a(317),I=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).updateDimensions=function(){e.props.melodition.pianoLoading||e.props.resizePlayer()},e.svgWidth=function(e){return 1===e?668:584},e.playModeChanger=function(){e.props.changeMode(!0)},e}return Object(o.a)(a,[{key:"shouldComponentUpdate",value:function(e){var t;return e.data&&(null===(t=this.props.data)||void 0===t?void 0:t.id)!==e.data.id&&this.props.requestPlayer(e.data),!0}},{key:"componentDidMount",value:function(){console.log("mounted"),window.addEventListener("resize",this.updateDimensions);var e=Object(k.e)(this.props.pathname);this.props.requestLesson(e),this.props.data&&this.props.data.id===e.exercise&&this.props.requestPlayer(this.props.data)}},{key:"componentWillUnmount",value:function(){console.log("dismount"),this.props.resetPlayer(),window.removeEventListener("resize",this.updateDimensions),this.setState=function(){}}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data,n=e.melodition,r=e.error,o=Object(i.a)(e,["classes","data","melodition","error"]);return m.a.createElement("div",{className:t.root},n.loading||n.playMode?m.a.createElement(y.a,null):a?m.a.createElement(f.a,{container:!0,className:t.main},m.a.createElement(f.a,{item:!0,xs:1},m.a.createElement(O.a,Object.assign({},o,{data:a}))),m.a.createElement(f.a,{item:!0,xs:10},m.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:t.content},m.a.createElement(f.a,{item:!0,xs:6,className:t.doubleGrid},m.a.createElement(f.a,{container:!0,justify:"center",alignItems:"center"},m.a.createElement(f.a,{item:!0,xs:12},n.pianoLoading?m.a.createElement(y.a,{noPad:!0}):m.a.createElement(w,null),m.a.createElement(N.a,null)))),m.a.createElement(f.a,{item:!0,xs:3,className:t.doubleGrid},m.a.createElement(f.a,{container:!0,justify:"center",alignItems:"center"},m.a.createElement(f.a,{item:!0,xs:6},m.a.createElement(g.a,null,a.excerpt)),m.a.createElement(f.a,{item:!0,xs:6,className:t.centerText},m.a.createElement(S.a,null)))))),m.a.createElement(f.a,{item:!0,xs:1},m.a.createElement(f.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:t.sideStyle},m.a.createElement(z.a,{loading:n.loading})))):m.a.createElement(g.a,{component:"div",className:t.autoMargin},r))}}]),a}(d.Component),M=Object(u.c)((function(e,t){return Object(n.a)(Object(n.a)({},e.single.exercise),{},{melodition:e.melodition,theme:e.auth.theme,classes:t.classes,course:e.single.course.data,pathname:e.router.location.pathname})}),(function(e){return{changeMode:Object(p.b)(x.b,e),requestLesson:Object(p.b)(v.a,e),requestPlayer:Object(p.b)(x.k,e),resetPlayer:Object(p.b)(x.l,e),resizePlayer:Object(p.b)(x.m,e)}}))(Object(b.a)((function(e){var t,a;return Object(h.a)({root:(t={width:"100vw",minHeight:"calc(100vh - 128px)",overflow:"hidden"},Object(s.a)(t,e.breakpoints.down("xs"),{minHeight:"calc(100vh - 113px)"}),Object(s.a)(t,"display","flex"),t),autoMargin:{margin:"auto"},main:(a={width:"100vw",minHeight:"calc(100vh - 128px)",overflow:"hidden"},Object(s.a)(a,e.breakpoints.down("xs"),{minHeight:"calc(100vh - 113px)"}),Object(s.a)(a,"display","flex"),a),content:{height:"100%",width:"100%",flexWrap:"nowrap"},doubleGrid:{flexWrap:"nowrap",width:"100%",maxWidth:"100%","& > div":{margin:"auto",padding:0,height:"100%"}},centerText:{textAlign:"center"},sideStyle:{height:"100%",width:"100%",flexWrap:"nowrap"},loading:{display:"flex",height:"200px",boxShadow:"inset 0 1px 4px 0px black"}})}))(I));t.default=M}}]);
//# sourceMappingURL=41.53800acf.chunk.js.map