{"version":3,"sources":["_actions/exercise.actions.ts","components/Layout/Instruments/Piano/constant.ts","_actions/lesson.actions.ts","_actions/midi.actions.ts","components/Layout/SnackBar/alert.tsx","_reducers/user.reducer.ts","_reducers/profile.reducer.ts","_reducers/snackbar.reducer.ts","_reducers/player.reducer.ts","_reducers/post.reducer.ts","_reducers/guide.reducer.ts","_reducers/lesson.reducer.ts","_reducers/course.reducer.ts","_reducers/exercise.reducer.ts","_reducers/index.ts","_store/store.config.ts","components/Layout/Player/Buttons.tsx","components/Layout/Instruments/Piano/SvgKeys.ts","components/Layout/Instruments/Piano/index.tsx","_actions/post.actions.ts","_helpers/constants.ts","components/Layout/Player/SeekBar.tsx","assets/img/melodition.jpg","_helpers/api.ts","_helpers/midiContext.ts","plugin/Game/Canvas.ts","plugin/Game/Notes.ts","plugin/Game/Game.ts","plugin/Melodition/Melodition.ts","plugin/Melodition/Song.ts","plugin/Melodition/WebAudio.ts","_helpers/playerApi.ts","_actions/player.actions.ts","_helpers/pianoSizes.ts","_types/player.types.ts","_types/profile.types.ts","assets/sounds lazy /^/default_drum_0.*$/ groupOptions: {} namespace object","assets/sounds lazy /^/default_tone_0.*$/ groupOptions: {} namespace object","router/ProtectedRoute.tsx","components/InfoPages/About.tsx","components/PostPages/PostCard.tsx","components/PostPages/PostList.tsx","components/Layout/Captcha/ReCaptcha.tsx","components/Layout/Captcha/Captcha.tsx","components/AuthPages/LoginPage.tsx","components/AuthPages/LostPage.tsx","components/AuthPages/RegisterPage.tsx","components/UserPages/Dashboard/LatestSongs.js","components/UserPages/Dashboard/index.tsx","components/UserPages/Profile/ImageInput.tsx","components/UserPages/Profile/index.tsx","components/LearningPages/Guide/GuideCard.tsx","components/LearningPages/Guide/GuideList.tsx","components/LearningPages/Lesson/LessonCard.tsx","components/LearningPages/Lesson/LessonList.tsx","components/LearningPages/Course/CourseCard.tsx","components/LearningPages/Course/CourseList.tsx","components/LearningPages/Favorite/FavoriteCard.tsx","components/LearningPages/Favorite/FavoriteList.tsx","components/LearningPages/Exercise/ExerciseList.tsx","components/LearningPages/index.tsx","router/Test.jsx","router/index.tsx","components/Layout/Instruments/Piano/PlayMode/PlayerHeader.tsx","components/Layout/Instruments/Piano/GameCanvas/GameFront.tsx","components/Layout/Instruments/Piano/GameCanvas/GameBack.tsx","components/Layout/Instruments/Piano/GameCanvas/SvgLine.tsx","components/Layout/Instruments/Piano/GameCanvas/index.tsx","components/Layout/Instruments/Piano/PlayMode/LessonPlayMode.tsx","_actions/snackbar.actions.ts","components/Layout/SnackBar/Notifier.ts","components/Layout/Breadcrumbs.tsx","components/Layout/Themes/GlobalTheme.ts","components/Layout/Themes/DarkTheme.ts","components/Layout/Themes/LightTheme.ts","components/Layout/Header/LeftIcons.tsx","components/Layout/Header/SearchInput.tsx","components/Layout/Header/MobileMenu.tsx","components/Layout/Header/Links.tsx","components/Layout/Header/MenuRender.tsx","components/Layout/Header/MiniDrawer.tsx","components/Layout/Header/LinkConst.tsx","components/Layout/Header/MainAppBar.tsx","_reducers/header.reducer.ts","components/Layout/Header/Header.tsx","App.tsx","index.tsx","_types/auth.types.ts","_types/exercise.types.ts","components/Layout/Loadings.tsx","_types/lesson.types.ts","_types/course.types.ts","_types/snackbar.types.ts","_types/guide.types.ts","_actions/profile.actions.ts","_types/post.types.ts","_actions/user.actions.ts","_actions/course.actions.ts","_actions/guide.actions.ts"],"names":["requestAllExercise","dispatch","getState","exerciseState","bank","exercises","resetTime","getTheTime","nextLoad","data","type","REQUEST_EXERCISES","API","get","then","res","SUCCESS_EXERCISES","payload","catch","err","errorHandler","FAILURE_EXERCISES","requestExercise","path","found","find","exercise","id","ENTER_NOTEMODE","SUCCESS_EXERCISE","guide","requestGuide","course","requestCourse","REQUEST_EXERCISE","SAVE_EXERCISES","FAILURE_EXERCISE","rightLine","leftLine","pitchName","pitch","n","t","outLine","v","emulatedKeys","z","s","x","d","c","g","b","h","j","m","l","q","2","w","3","e","4","r","6","y","7","u","i","9","o","0","p","PianoEvent","isDown","playedKey","keyboardUp","preventDefault","key","hasOwnProperty","note","midiNoteOff","keyboardDown","midiNoteOn","mouseUpReset","mouseDown","currentTarget","tabIndex","mouseOver","mouseLeave","mouseUp","requestAllLesson","lessonState","lessons","REQUEST_LESSONS","SUCCESS_LESSONS","FAILURE_LESSONS","requestLesson","lesson","SUCCESS_LESSON","REQUEST_LESSON","SAVE_LESSONS","FAILURE_LESSON","midiInput","requsetMidi","navigator","requestMIDIAccess","midiAccess","console","log","inputs","entry","seccessHandler","name","onmidimessage","onMidiMessage","onstatechange","error","changeMidi","enable","midiState","notes","hold","midiEvent","length","command","velocity","holder","push","vol","forEach","target","link","response","message","toString","store","button","SHOW_SNACKBAR","snackbar","snackBarMaker","loginErrorHandler","url","msg","variant","replace","UniqId","options","TransitionComponent","props","direction","anchorOrigin","horizontal","vertical","autoHideDuration","action","to","component","RouterLink","color","style","borderRadius","size","aria-label","onClick","CLEAR_SNACKBAR","dismissAll","user","getUserLocal","theme","localStorage","getItem","initialState","loggedIn","loading","authReducer","state","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","LOST_REQUEST","LOST_SUCCESS","LOST_FAILURE","USER_LOGOUT","undefined","CHANGE_THEME","setItem","profileReducerDefaultState","profileReducer","INFO_REQUEST","INFO_SUCCESS","profile","INFO_FAILURE","PLAYTIME_SUCCESS","playtime","FAVORITE_SUCCESS","favorite","DELETE_PROFILE","snackbarReducerDefaultState","snackbars","snackbarReducer","map","dismissed","REMOVE_SNACKBAR","filter","loadings","fingerLoading","notesLoading","pianoLoading","gameLoading","seekLoading","defaultPlayer","playMode","noteMode","octave","songLength","tapSize","resetState","JSON","parse","stringify","playerReducer","REQUEST_PLAYER","DRAW_GAME_PIANO","DRAW_NOTE_PIANO","DRAW_GAME","DRAW_FINGER","DRAW_NOTES","DRAW_SEEKBAR","ENTER_PLAYMODE","canvasSize","EXIT_PLAYMODE","RESIZE_PLAYER","RESET_PLAYER","postsReducerDefaultState","postsReducer","REQUEST_POSTS","SUCCESS_POSTS","FAILURE_POSTS","postReducerDefaultState","postReducer","REQUEST_POST","SUCCESS_POST","FAILURE_POST","guidesReducerDefaultState","guidesReducer","REQUEST_GUIDES","SUCCESS_GUIDES","SAVE_GUIDES","match","every","item","_","FAILURE_GUIDES","guideReducerDefaultState","guideReducer","REQUEST_GUIDE","SUCCESS_GUIDE","FAILURE_GUIDE","lessonsReducerDefaultState","lessonsReducer","lessonReducerDefaultState","lessonReducer","coursesReducerDefaultState","coursesReducer","REQUEST_COURSES","SUCCESS_COURSES","SAVE_COURSES","FAILURE_COURSES","courseReducerDefaultState","courseReducer","REQUEST_COURSE","SUCCESS_COURSE","FAILURE_COURSE","exercisesReducerDefaultState","exercisesReducer","exerciseReducerDefaultState","exerciseReducer","rootReducer","history","combineReducers","router","connectRouter","single","post","posts","guides","courses","melodition","auth","createBrowserHistory","preloadingState","composeEnhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","createRootReducer","applyMiddleware","routerMiddleware","thunk","configureStore","PlayButton","useState","onAir","setOnAir","playHandler","stopPlayer","startPlayer","code","useEffect","document","addEventListener","removeEventListener","fontSize","SvgKeys","xPos","yPos","front","back","useStyles","makeStyles","createStyles","root","display","flexDirection","justifyContent","flexWrap","margin","minWidth","width","cursor","touchAction","spacing","connectedPiano","connect","Melo","drawGamePiano","bindActionCreators","gamePiano","drawNotePiano","notePiano","counter","firstkey","keyRefs","octSize","classes","setKeyRef","ref","pianoSize","getBoundingClientRect","height","Math","floor","innerHeight","detectSize","baseLine","pianoLeft","left","neededLines","need","up","lines","down","lineSide","spaceSize","linesArray","Array","from","notePos","pos","className","oct","xmlns","viewBox","fill","marginRight","k","lastKey","backFill","frontFill","active","neededTracks","some","el","textPos","onMouseUp","onMouseDown","onMouseLeave","onTouchEnd","onTouchMove","onTouchStart","stroke","fontWeight","cx","cy","strokeWidth","points","requestAllPost","postState","requestPost","pathFinder","pathSplit","split","compiledPath","Number","typeSplit","type1Split","type2Split","minutes","Date","getTime","ms","random","thumbnailsFinder","img","image","fallImg","medium","season","connectedSeekbar","drawSeekBar","callback","useCallback","node","seekBar","SeekInput","forwardRef","seek","setSeek","useImperativeHandle","changeSeeker","value","orientation","defaultValue","max","min","onChange","canvasWheel","aria-labelledby","module","exports","Axios","create","baseURL","headers","localUser","token","Authorization","authHeader","interceptors","use","status","test","logoutRequest","Promise","reject","AudioApi","method","responseType","MidiState","touchedKeys","score","trackLen","FingersClass","len","hand","beat","num","finger","bColor","fColor","cColor","end","showing","this","children","getAttribute","setAttribute","BackMover","update","ctx","drawImage","MusicLine","lw","draw","beginPath","moveTo","lineTo","lineWidth","strokeStyle","LessonNote","text","gap","beg","start","mover","lineColor","crash","hit","move","lineCap","arc","PI","fillStyle","font","textAlign","textBaseline","fillText","ExerciseNote","outline","globalCompositeOperation","OutLine","Object","assign","Notes","canvas","fullNotes","context","assigner","playGame","clear","updateFullSong","clearRect","drawNote","showTrack","memo","noteMemo","prevNote","prevState","includes","getContext","Game","backMover","barNotes","updateBacks","updateNotes","firstLine","myLine","createElement","save","src","toDataURL","onload","tap","yy","cc","center","le","drawBack","pushNote","splice","touch","Image","Melodition","game","master","player","song","songDetails","loaded","handRefs","seekValue","TrackID","tempo","zaribTempo","fingerNotes","drumInfo","trackInfo","storeDrums","storeTracks","storeFingers","equalizer","drumVolumes","noteInfo","firstDelay","tickID","currentBeat","tickerDelay","tickerStep","animeFrame","nextWhen","nextBeat","sentWhen","anime","midiKeys","trainNotes","stopReset","drawGame","round","startPlay","resetNodeValues","audioContext","resume","beatDur","setTimeout","playAllTracks","queueNextBeats","requestAnimationFrame","moveSVG","moveFingers","stopPlay","getElementById","click","clearTimeout","stopAllTracks","cancelAnimationFrame","cancelQueue","resetGame","fin","hide","training","seekMove","next","keys","pushFinger","show","stop","elapsedTimeSinceStart","startTime","setMasterVolume","play","getNbTracks","rakeMouseWheel","deltaY","seekY","seekSVG","audioNode","gain","setValueAtTime","volume","band32","band64","band128","band256","band512","band1k","band2k","band4k","band8k","band16k","beat16duration","currentTime","sendNextBeats","wait","when","startBeat","endBeat","beatLen","channel","findDrumInfoHand","drum","zones","sound","info","variable","queueWaveTable","preset","pitches","duration","volumeRatio","sort","n1","n2","track","currentTrack","inChordCount","trc","nn","shift","inChordDelay","slides","fingers","nBeat","handArr","diff","findTrackInfoHand","order","drm","elem","cancel","notePitch","Song","tracks","analyserNode","sampleNodes","masterVolumeNode","paused","muted","loopEndTime","loopMode","loopStartTime","trackVolumeNodes","decodedAudioBuffers","addTrack","decodedBuffer","buffer","peaks","panning","solo","sampleNode","volumeNode","loadBuffer","a","decodeAudioData","resolve","buildGraph","sources","sample","createBufferSource","createGain","destination","setTrackVolumesDependingOnMuteSoloStatus","pause","setVolume","val","fraction","setVolumeOfTrack","trackNumber","getUrlsOfTracks","urls","getDuration","dur","toggleLoopMode","toggleMute","togglePause","thereIsSolo","nbTracks","createAnalyser","WebAudioFontChannel","input","output","bandEqualizer","frequency","createBiquadFilter","setTargetAtTime","Q","createDynamicsCompressor","threshold","knee","ratio","attack","release","WebAudioFontLoader","cached","choosenInfos","drumKeyArray","drumNamesArray","instrumentKeyArray","instrumentNamesArray","startLoad","filePath","variableName","getElementsByTagName","appendChild","decodeAfterLoading","waitOrFinish","adjustPreset","onFinish","me","progress","waitLoad","instrumentTitles","insNames","instrumentKeys","instrumentInfo","substr","title","findInstrument","program","substring","drumTitles","drumNames","drumKeys","findDrum","WebAudioFontReverberator","convolver","dry","wet","irrArrayBuffer","irr","reverbrator","datalen","ArrayBuffer","view","Uint8Array","decoded","atob","charCodeAt","audioBuffer","createConvolver","zarib","AudioContext","webkitAudioContext","fontPlayer","envelopes","loader","onCacheFinish","onCacheProgress","afterTime","nearZero","createChannel","createReverberator","limitVolume","queueChord","queueStrumUp","queueStrum","queueStrumDown","queueSnap","zone","findZone","baseDetune","originalPitch","coarseTune","fineTune","playbackRate","pow","startWhen","waveDuration","loop","loopStart","loopEnd","envelope","findEnvelope","setupEnvelope","audioBufferSourceNode","newPlaybackRate","newWhen","linearRampToValueAtTime","sampleRate","delay","noZeroVolume","sampleDuration","lastTime","lastVolume","ahdsr","cancelScheduledValues","numValue","aValue","defValue","disconnect","adjustZone","createBuffer","b1","b2","float32Array","getChannelData","file","arraybuffer","sustain","keyRangeLow","keyRangeHigh","ex","reverberator","ResetPlayer","sL","songs","lessonCompiler","content","dataString","neededInst","neededDrums","storedFingersFunc","strings","parseInt","step","cntD","storeDrumsFunc","index","self","findIndex","cntT","storeTracksFunc","number","replacement","default","cnt","cauntMeasures","songdur","mx","ceil","add","mxT","apply","mxD","main","f","i32","requestPlayer","Melodi","realTempo","songbeat","bufferError","urlError","keyXPos","padLeft","rect","centerX","classList","contains","sizeCalculator","drawFinger","drawNotes","resizePlayer","resetPlayer","changeMode","mode","details","saveData","time","toLocaleTimeString","date","toLocaleDateString","addPlayTimes","webpackAsyncContext","req","__webpack_require__","Error","ids","redirectPath","authenticationPath","isAllowed","restrictedPath","pathname","render","About","setInput","handleChange","Button","maxHeight","breakpoints","cardAction","minHeight","PostCard","featured_img","excerpt","author","clickHandler","Card","CardActionArea","CardMedia","alt","CardContent","Typography","gutterBottom","CardActions","PostList","header","Chip","chip","label","Grid","container","justify","cardList","autoMargin","Component","ownProps","withStyles","padding","position","right","top","ReCaptcha","script","loadScript","captchaOnLoad","onLoad","async","defer","body","grecaptcha","sitekey","ready","setState","removeChild","onError","LinearProgress","captchaWarning","captcha","React","zIndex","border","Captcha","form","setFieldValue","errors","touched","field","event","recaptcha","LoginPage","Container","maxWidth","paddingTop","CssBaseline","Avatar","initialValues","username","password","validationSchema","Yup","shape","required","onSubmit","resetForm","login","values","Box","mb","align","fullWidth","disabled","mt","my","TextField","placeholder","xs","Link","loginRequest","logout","LostPage","user_login","lostRequest","RegisterPage","email","firstname","lastname","confirm_password","policy","oneOf","registerRequest","dir","alignItems","ml","Checkbox","checked","underline","Boolean","FormHelperText","useStyles1","flexShrink","marginLeft","TablePaginationActions","useTheme","count","page","rowsPerPage","onChangePage","IconButton","LastPage","FirstPage","KeyboardArrowRight","KeyboardArrowLeft","useStyles2","table","toolbar","flexFlow","only","LatestSongs","setPage","setRowsPerPage","emptyRows","sel","dateChanger","clsx","CardHeader","Divider","Table","TableHead","TableRow","TableCell","TableBody","slice","row","colSpan","TableFooter","TablePagination","rowsPerPageOptions","lower","low","average","high","higher","SelectProps","inputProps","native","newPage","onChangeRowsPerPage","ActionsComponent","Dashboard","getPlayTimes","lg","md","xl","ImageInput","fileUpload","showFileUpload","current","handleImageChange","reader","FileReader","files","onloadend","imagePreviewUrl","result","readAsDataURL","createRef","errorMessage","avatarStyle","bigAvatar","whiteBack","primaryBack","errorBack","hidden","accept","ErrorOutline","AccountCircle","borderColor","palette","secondary","borderStyle","background","phoneRegExp","Profile","getProfile","initData","image_select","first_name","last_name","nickname","mobile","FILE_SIZE","matches","updateProfile","profileRequest","GuideCard","thumbnails","description","teacher","GuideList","requestAllGuide","rightChip","backgroundColor","svgSize","primary","LessonCard","changed","setChanged","addFavorites","CircularProgress","fav","Favorite","FavoriteBorder","LessonList","CourseCard","CourseList","requestAllCourse","FavoriteCard","FavoriteList","nextProps","reverse","ExerciseList","pages","icon","LibraryMusic","child","QueueMusic","MusicNote","EmojiSymbols","pageName","pageNumber","obj","indexOf","tabControl","tabPanel","pathName","location","setValue","useMediaQuery","AppBar","Paper","square","Tabs","newValue","indicatorColor","textColor","scrollButtons","Tab","aria-controls","role","initialColors","lastColor","lastTimer","Test","colors","setColors","changeColor","prev","Post","lazy","Guide","Course","Lesson","Exercise","AppRouter","fallback","exact","LearningPage","LostPassPage","flexGrow","menuButton","divider","MenuAppBar","modeChanger","Toolbar","edge","ArrowForward","flexItem","GameFront","drawFrontContext","onWheel","GameBack","backCtx","drawBackContext","SvgLine","bottom","strokeDasharray","strokeDashoffset","animation","x1","y1","x2","y2","connectedPianoCanvas","boxShadow","LessonPlayerMode","svgWidth","toggleDrawer","list","playmodeChanger","updateDimensions","noPad","Piano","ArrowBackIos","drawPiano","overflow","paper","doubleGrid","centerText","snackbarRemove","displayed","removeSnack","useSnackbar","enqueueSnackbar","closeSnackbar","onClose","reason","myKey","onExited","String","bracrumbs","AllInbox","conectedBreadcrumb","goBack","linkPath","setLinkPath","trigger","setTrigger","linkArray","join","handleClick","disableGutters","Breadcrumbs","href","globalStyle","createMuiTheme","typography","fontFamily","overrides","MuiBreadcrumbs","ol","overflowX","scrollbarWidth","whiteSpace","MuiCardActions","MuiCssBaseline","scrollbarColor","MuiIconButton","colorSecondary","DarkTheme","blue","red","pink","faIR","LightTheme","sectionDesktop","sectionMobile","avatarSmall","IconController","menuId","mobileMenuId","profileMenuOpen","Fragment","Badge","badgeContent","Star","Notifications","aria-haspopup","MoreHoriz","SearchInput","handleOnInputChange","query","fetchSearchResult","results","search","searchIcon","InputBase","inputRoot","inputInput","fade","common","white","pointerEvents","paddingLeft","transition","transitions","MobileMenu","mobileMoreAnchor","mobileMenuIsOpen","handleMobileMenu","anchorEl","keepMounted","transformOrigin","open","MenuItem","Stars","sideLink","in","SettingsApplications","AccountBox","out","links","Home","FileCopy","Info","MenuRender","profileMoreAnchor","profileMenuIsOpen","handleDrawerClose","botLinks","drawer","drawerPaper","drawerHeader","mixins","MiniDrawer","changeTheme","Drawer","anchor","menuIsOpen","Brightness7","Brightness4","ChevronLeft","ChevronRight","List","ListItem","ListItemIcon","ListItemText","linkKeeper","lineHeight","LinkConst","openStatus","Collapse","appBar","easing","sharp","leavingScreen","appBarShift","enteringScreen","MainAppBar","sessionStorage","process","HeaderReducer","fieldName","rest","useReducer","jss","plugins","jssPreset","jssRTL","App","currentTheme","responsTheme","responsiveFontSizes","StylesProvider","ThemeProvider","Slide","mountOnEnter","unmountOnExit","app","mainBody","connectedApp","overflowY","loadingPad","LoadingCircle","requestUpdate","userData","put","FormData","append","defaults","user_display_name","removeItem","courseState","newPath","compiler","Compiler","course_select","select","genre","guideState","addCourses","guide_select","addExercises","added"],"mappings":"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AM,2BACfA,EAAS,IAAM,sBACfA,EAAS,IAAM,+BACfA,EAAS,IAAM,6BACfA,EAAS,IAAM,sBACfA,EAAS,IAAM,oBACfA,EAAS,IAAM,oBACfA,EAAS,IAAM,qBACfA,EAAS,IAAM,qBACfA,EAAS,IAAM,kBACfA,EAAS,IAAM,iBACfA,EAAS,IAAM,iBACfA,EAAS,IAAM,sBACfA,EAAS,IAAM,2BACfA,EAAS,IAAM,6BACfA,EAAS,IAAM,2BACfA,EAAS,IAAM,mBACfA,EAAS,IAAM,8BACfA,EAAS,IAAM,8BACfA,EAAS,IAAM,4BACf,EAAKd,qBAAuBc,EAE9B,OAAO,EAAKd,sBAjI0B,KAmIxCe,eAAiB,WA0Kf,OAzKK,EAAKhB,qBACR,EAAKA,mBAAqB,CACxB,wBACA,2BACA,8BACA,8BACA,wBACA,wBACA,8BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,2BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,2BACA,8BACA,8BACA,8BACA,wBACA,wBACA,8BACA,wBACA,8BACA,wBACA,sBACA,2BACA,wBACA,2BACA,wBACA,8BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,wBACA,2BACA,8BACA,8BACA,wBACA,2BACA,wBACA,wBACA,wBACA,2BACA,2BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,8BACA,wBACA,2BACA,wBACA,2BACA,2BACA,2BACA,wBACA,8BACA,uBACA,uBACA,uBACA,gCACA,wBACA,gCACA,gCACA,gCACA,gCACA,8BACA,wBACA,8BACA,6BACA,wBACA,8BACA,wBACA,wBACA,2BACA,8BACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,wBACA,2BACA,wBACA,8BACA,8BACA,wBACA,8BACA,8BACA,wBACA,wBACA,wBACA,8BACA,wBACA,8BACA,wBACA,8BACA,8BACA,wBACA,2BACA,2BACA,8BACA,8BACA,8BACA,8BACA,8BACA,wBACA,2BACA,2BACA,8BACA,wBACA,wBACA,8BA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","file":"static/js/main.cf29e4bc.chunk.js","sourcesContent":["import { Dispatch } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n  FAILURE_EXERCISE,\r\n  REQUEST_EXERCISE,\r\n  SUCCESS_EXERCISE,\r\n  FAILURE_EXERCISES,\r\n  REQUEST_EXERCISES,\r\n  SUCCESS_EXERCISES,\r\n  SAVE_EXERCISES,\r\n} from \"../_types/exercise.types\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { requestCourse } from \"./course.actions\";\r\nimport { requestGuide } from \"./guide.actions\";\r\nimport { AppActions } from \"../_types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppState } from \"../_types\";\r\nimport { ENTER_NOTEMODE } from \"../_types/player.types\";\r\n\r\nexport const requestAllExercise = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const exerciseState = getState().bank.exercises;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - exerciseState.nextLoad;\r\n    if (exerciseState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_EXERCISES });\r\n\r\n    API.get(`/lesson/v2?course=125`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_EXERCISES, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_EXERCISES))\r\n  }\r\n)\r\n\r\nexport const requestExercise = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const found = getState().bank.exercises.data.find(exercise => exercise.id === path.exercise);\r\n    if (found) {\r\n      dispatch({ type: ENTER_NOTEMODE })\r\n      dispatch({ type: SUCCESS_EXERCISE, data: found })\r\n    }\r\n    else if (path.guide) {\r\n      dispatch(requestGuide(path))\r\n    }\r\n    else if (path.course) {\r\n      dispatch(requestCourse(path))\r\n    }\r\n    else if (!found) {\r\n      dispatch({ type: REQUEST_EXERCISE });\r\n      API.get(`/lesson/v2?id=${path.exercise}`)\r\n        .then(res => {\r\n          dispatch({ type: ENTER_NOTEMODE })\r\n          dispatch({ type: SUCCESS_EXERCISE, data: res.data[0] })\r\n          dispatch({ type: SAVE_EXERCISES, data: res.data })\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_EXERCISE))\r\n    }\r\n  }\r\n)","import { midiNoteOff, midiNoteOn } from \"../../../../_actions/player.actions\";\r\n\r\nexport const rightLine = [\r\n    1,\r\n    2,\r\n    4,\r\n    6,\r\n    7,\r\n    9,\r\n    11,\r\n    13,\r\n    14,\r\n    16,\r\n    18,\r\n    19,\r\n    21,\r\n    23,\r\n    25,\r\n    26,\r\n    28,\r\n    30,\r\n    31,\r\n    33,\r\n    35,\r\n    37,\r\n    38,\r\n    40,\r\n    42,\r\n];\r\nexport const leftLine = [\r\n    0,\r\n    2,\r\n    4,\r\n    6,\r\n    7,\r\n    9,\r\n    11,\r\n    12,\r\n    14,\r\n    16,\r\n    18,\r\n    19,\r\n    21,\r\n    23,\r\n    24,\r\n    26,\r\n    28,\r\n    30,\r\n    31,\r\n    33,\r\n    35,\r\n    36,\r\n    38,\r\n    40,\r\n    42,\r\n    43,\r\n    45,\r\n    47,\r\n];\r\nexport const pitchName = (pitch: number) => {\r\n    let n = pitch % 12;\r\n    let t = \"C\";\r\n    if (n === 1) {\r\n        t = \"Db\";\r\n    }\r\n    if (n === 2) {\r\n        t = \"D\";\r\n    }\r\n    if (n === 3) {\r\n        t = \"Eb\";\r\n    }\r\n    if (n === 4) {\r\n        t = \"E\";\r\n    }\r\n    if (n === 5) {\r\n        t = \"F\";\r\n    }\r\n    if (n === 6) {\r\n        t = \"Gb\";\r\n    }\r\n    if (n === 7) {\r\n        t = \"G\";\r\n    }\r\n    if (n === 8) {\r\n        t = \"Ab\";\r\n    }\r\n    if (n === 9) {\r\n        t = \"A\";\r\n    }\r\n    if (n === 10) {\r\n        t = \"Bb\";\r\n    }\r\n    if (n === 11) {\r\n        t = \"B\";\r\n    }\r\n    return \"\" + t;\r\n};\r\nexport const outLine = (v: number) => v === 101 || v === 81 || v === 60 || v === 40;\r\n\r\nconst emulatedKeys = {\r\n    z: 48,\r\n    s: 49,\r\n    x: 50,\r\n    d: 51,\r\n    c: 52,\r\n    v: 53,\r\n    g: 54,\r\n    b: 55,\r\n    h: 56,\r\n    n: 57,\r\n    j: 58,\r\n    m: 59,\r\n    \",\": 60,\r\n    l: 61,\r\n    \".\": 62,\r\n    \";\": 63,\r\n    \"/\": 64,\r\n    q: 65,\r\n    2: 66,\r\n    w: 67,\r\n    3: 68,\r\n    e: 69,\r\n    4: 70,\r\n    r: 71,\r\n    t: 72,\r\n    6: 73,\r\n    y: 74,\r\n    7: 75,\r\n    u: 76,\r\n    i: 77,\r\n    9: 78,\r\n    o: 79,\r\n    0: 80,\r\n    p: 81,\r\n    \"-\": 82,\r\n    \"[\": 83,\r\n    \"]\": 84,\r\n}\r\n\r\ntype IPianoEvent = React.TouchEvent<SVGGElement> | React.MouseEvent<SVGGElement, MouseEvent>\r\nexport class PianoEvent {\r\n    isDown = false\r\n    playedKey: number | string | null;\r\n    keyboardUp = (e: KeyboardEvent) => {\r\n        e.preventDefault();\r\n        const key = e.key as keyof typeof emulatedKeys;\r\n        if (emulatedKeys.hasOwnProperty(key)) {\r\n            const note = emulatedKeys[key];\r\n            midiNoteOff(note);\r\n            this.playedKey = null;\r\n        }\r\n    };\r\n    keyboardDown = (e: KeyboardEvent) => {\r\n        e.preventDefault();\r\n        const key = e.key as keyof typeof emulatedKeys;\r\n        if (emulatedKeys.hasOwnProperty(key)) {\r\n            if (key !== this.playedKey) {\r\n                const note = emulatedKeys[key];\r\n                midiNoteOn(note);\r\n                this.playedKey = key;\r\n            }\r\n        }\r\n    };\r\n    mouseUpReset = () => {\r\n        this.isDown = false;\r\n    };\r\n    mouseDown = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        this.isDown = true;\r\n        this.playedKey = note;\r\n        midiNoteOn(note);\r\n    };\r\n    mouseOver = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        if (this.isDown && note !== this.playedKey) {\r\n            this.playedKey = note;\r\n            midiNoteOn(note);\r\n        }\r\n    };\r\n    mouseLeave = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        if (this.isDown) {\r\n            midiNoteOff(note);\r\n            this.playedKey = null;\r\n        }\r\n    };\r\n    mouseUp = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        this.isDown = false;\r\n        midiNoteOff(note);\r\n        this.playedKey = null;\r\n    };\r\n}","import { Dispatch } from \"react\";\r\nimport {\r\n  FAILURE_LESSON,\r\n  REQUEST_LESSON,\r\n  SUCCESS_LESSON,\r\n  FAILURE_LESSONS,\r\n  REQUEST_LESSONS,\r\n  SUCCESS_LESSONS,\r\n  SAVE_LESSONS,\r\n} from \"../_types/lesson.types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppState } from \"../_types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { requestGuide } from \"./guide.actions\";\r\nimport { requestCourse } from \"./course.actions\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\n\r\nexport const requestAllLesson = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const lessonState = getState().bank.lessons;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - lessonState.nextLoad;\r\n    if (lessonState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_LESSONS });\r\n\r\n    API.get(`/lesson/v2`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_LESSONS, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_LESSONS))\r\n  }\r\n)\r\n\r\nexport const requestLesson = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const found = getState().bank.lessons.data.find(lesson => lesson.id === path.lesson);\r\n\r\n    if (found) {\r\n      dispatch({ type: SUCCESS_LESSON, data: found })\r\n    }\r\n    else if (path.guide) {\r\n      dispatch(requestGuide(path))\r\n    }\r\n    else if (path.course) {\r\n      dispatch(requestCourse(path))\r\n    }\r\n    else if (!found) {\r\n      dispatch({ type: REQUEST_LESSON });\r\n      API.get(`/lesson/v2?id=${path.lesson}`)\r\n        .then(res => {\r\n          dispatch({ type: SUCCESS_LESSON, data: res.data[0] })\r\n          dispatch({ type: SAVE_LESSONS, data: res.data })\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_LESSON))\r\n    }\r\n  }\r\n)\r\n\r\n","import { midiNoteOff, midiNoteOn } from \"./player.actions\";\r\nimport { errorHandler, seccessHandler } from \"../components/Layout/SnackBar/alert\";\r\n\r\nlet midiInput: WebMidi.MIDIInput;\r\n\r\nexport const requsetMidi = () => {\r\n    if (!navigator.requestMIDIAccess) errorHandler(\"لطفاً برای استفاده کامل از امکانات سایت از گوگل کروم یا مایکروسافت اج استفاده کنید.\");\r\n    else navigator.requestMIDIAccess()\r\n        .then((midiAccess) => {\r\n            console.log(\"MIDI Ready!\");\r\n            for (let entry of midiAccess.inputs) {\r\n                midiInput = entry[1]\r\n                seccessHandler(\"MIDI input device: \" + midiInput.name)\r\n                console.log(midiInput)\r\n                midiInput.onmidimessage = onMidiMessage;\r\n                midiInput.onstatechange = onstatechange;\r\n            }\r\n        })\r\n        .catch((error) => {\r\n            errorHandler(\"Error accessing MIDI devices: \" + error);\r\n        });\r\n}\r\nexport const changeMidi = (enable: boolean) => {\r\n    if (midiInput)\r\n        midiInput.onmidimessage = enable ? onMidiMessage : () => { };\r\n}\r\n\r\n// const noteNames: string[] = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\r\n\r\nconst onstatechange = (midiState: WebMidi.MIDIConnectionEvent): void => {\r\n    console.log(midiState)\r\n    // warningHandler(midiState.)\r\n}\r\n\r\nlet notes: number[] = [];\r\nlet hold = false;\r\n\r\nconst onMidiMessage = (midiEvent: WebMidi.MIDIMessageEvent): void => {\r\n    let data: Uint8Array = midiEvent.data;\r\n    if (data.length === 3) {\r\n        // status is the first byte.\r\n        let status = data[0];\r\n        // command is the four most significant bits of the status byte.\r\n        let command = status >>> 4;\r\n        // channel 0-15 is the lower four bits.\r\n        // let channel = status & 0xF;\r\n\r\n        if (command === 11) {\r\n            let velocity = data[2];\r\n            if (velocity === 127 || velocity === 0)\r\n                hold = holder(velocity)\r\n        }\r\n        // just look at note on and note off messages.\r\n        if (command === 0x9 || command === 0x8) {\r\n            // note number is the second byte.\r\n            let note = data[1];\r\n            // velocity is the thrid byte.\r\n            let velocity = data[2];\r\n\r\n            // let commandName = command === 0x9 ? \"Note On \" : \"Note Off\";\r\n            // calculate octave and note name.\r\n            // let noteName = noteNames[note % 12];\r\n            // let octave = Math.trunc(note / 12);\r\n\r\n            if (command === 0x9 && velocity) {\r\n                midiNoteOn(note, velocity / 100)\r\n                notes.push(note)\r\n            } else {\r\n                if (!hold) {\r\n                    midiNoteOff(note)\r\n                    notes = [];\r\n                }\r\n            }\r\n            // console.log(`${commandName} ${noteName}${octave} ${velocity}`);\r\n        }\r\n    }\r\n}\r\nconst holder = (vol: number) => {\r\n    if (vol === 0) {\r\n        notes.forEach(n => {\r\n            midiNoteOff(n)\r\n        })\r\n        notes = []\r\n        return false\r\n    } else {\r\n        return true\r\n    }\r\n}","import React from \"react\";\r\nimport { Close } from \"@material-ui/icons\";\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { IconButton, Slide, Link, Button } from \"@material-ui/core\";\r\nimport { TransitionProps } from \"@material-ui/core/transitions/transition\";\r\nimport { UniqId } from \"../../../_helpers/constants\";\r\nimport {\r\n  ISnack,\r\n  CLEAR_SNACKBAR,\r\n  SHOW_SNACKBAR,\r\n} from \"../../../_types/snackbar.types\";\r\nimport { VariantType } from \"notistack\";\r\n\r\nexport const errorHandler = (err: any, target?: any): void => {\r\n  let error = err;\r\n  let link;\r\n  if (typeof err !== \"string\") error = err.response?.data.message.toString();\r\n  if (error) {\r\n    if (target) store.dispatch({ type: target, error });\r\n    if (err.response?.data.button) link = err.response?.data.button;\r\n    store.dispatch({\r\n      type: SHOW_SNACKBAR,\r\n      snackbar: snackBarMaker(error, \"error\", link),\r\n    });\r\n  }\r\n};\r\nexport const loginErrorHandler = (target: any, message = \"Please login!\") => {\r\n  errorHandler(\r\n    {\r\n      response: {\r\n        data: {\r\n          button: { url: \"/login\", msg: \"Login\" },\r\n          message,\r\n        },\r\n      },\r\n    },\r\n    target\r\n  );\r\n};\r\n\r\nexport const seccessHandler = (err: any, target?: any): void => {\r\n  let error = err;\r\n  if (typeof err !== \"string\") error = err.response?.data.message.toString();\r\n  if (target) store.dispatch({ type: target, error });\r\n  store.dispatch({\r\n    type: SHOW_SNACKBAR,\r\n    snackbar: snackBarMaker(error, \"success\"),\r\n  });\r\n};\r\nexport const warningHandler = (err: any, target?: any): void => {\r\n  let error = err;\r\n  if (typeof err !== \"string\") error = err.response?.data.message.toString();\r\n  if (target) store.dispatch({ type: target, error });\r\n  store.dispatch({\r\n    type: SHOW_SNACKBAR,\r\n    snackbar: snackBarMaker(error, \"warning\"),\r\n  });\r\n};\r\n\r\nexport const snackBarMaker = (\r\n  message: string,\r\n  variant: VariantType,\r\n  link?: { msg: string; url: string }\r\n): ISnack => {\r\n  return {\r\n    message: message.replace(/<[^>]+>/g, \"\"),\r\n    key: UniqId(),\r\n    options: {\r\n      TransitionComponent: (props: TransitionProps) => (\r\n        <Slide {...props} direction=\"left\" />\r\n      ),\r\n      anchorOrigin: { horizontal: \"left\", vertical: \"bottom\" },\r\n      variant: variant,\r\n      autoHideDuration: variant === \"error\" ? null : 5000,\r\n      action: (key: string) => (\r\n        <>\r\n          {link && (\r\n            <Link to={link.url} component={RouterLink}>\r\n              <Button color=\"primary\">{link.msg}</Button>\r\n            </Link>\r\n          )}\r\n          <IconButton\r\n            style={{ borderRadius: 5 }}\r\n            color=\"inherit\"\r\n            size=\"small\"\r\n            aria-label=\"close\"\r\n            component=\"span\"\r\n            onClick={() =>\r\n              store.dispatch({\r\n                type: CLEAR_SNACKBAR,\r\n                dismissAll: !key,\r\n                key,\r\n              })\r\n            }\r\n          >\r\n            <Close />\r\n          </IconButton>\r\n        </>\r\n      ),\r\n    },\r\n  };\r\n};\r\n","import {\r\n  LOST_FAILURE,\r\n  LOST_REQUEST,\r\n  LOST_SUCCESS,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  REGISTER_FAILURE,\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  USER_LOGOUT,\r\n  CHANGE_THEME,\r\n  UserActionTypes,\r\n  DefaultUserState,\r\n} from \"../_types/auth.types\";\r\nimport { getUserLocal } from \"../_helpers/constants\";\r\n\r\nconst user = getUserLocal(\"user\");\r\nconst storedTheme = localStorage.getItem(\"theme\");\r\nconst theme = storedTheme === \"dark\" ? \"dark\" : \"light\"\r\n\r\nconst initialState: DefaultUserState = user\r\n  ? { loggedIn: true, loading: false, user, theme }\r\n  : { loggedIn: false, loading: false, theme };\r\n\r\nexport function authReducer(\r\n  state = initialState,\r\n  action: UserActionTypes\r\n): DefaultUserState {\r\n  switch (action.type) {\r\n    case LOGIN_REQUEST:\r\n      return { ...state, loading: true };\r\n    case LOGIN_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loggedIn: true,\r\n        loading: false,\r\n        user: action.user,\r\n      };\r\n    case LOGIN_FAILURE:\r\n      return { ...state, loading: false };\r\n    case REGISTER_REQUEST:\r\n      return { ...state, loggedIn: false, loading: true };\r\n    case REGISTER_SUCCESS:\r\n      return { ...state, loading: false };\r\n    case REGISTER_FAILURE:\r\n      return { ...state, loading: false };\r\n    case LOST_REQUEST:\r\n      return { ...state, loggedIn: false, loading: true };\r\n    case LOST_SUCCESS:\r\n      return { ...state, loading: false };\r\n    case LOST_FAILURE:\r\n      return { ...state, loading: false };\r\n    case USER_LOGOUT:\r\n      return { ...state, user: undefined, loggedIn: false, loading: false };\r\n    case CHANGE_THEME:\r\n      localStorage.setItem(\"theme\", action.theme);\r\n      return { ...state, theme: action.theme };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  INFO_REQUEST,\r\n  INFO_FAILURE,\r\n  INFO_SUCCESS,\r\n  DELETE_PROFILE,\r\n  PLAYTIME_SUCCESS,\r\n  ProfileActionTypes,\r\n  DefaultProfileState,\r\n  FAVORITE_SUCCESS,\r\n} from \"../_types/profile.types\";\r\n\r\nconst profileReducerDefaultState: DefaultProfileState = {\r\n  loading: true,\r\n  error: \"User not found!\"\r\n};\r\n\r\nexport function profileReducer(\r\n  state = profileReducerDefaultState,\r\n  action: ProfileActionTypes\r\n): DefaultProfileState {\r\n  switch (action.type) {\r\n    case INFO_REQUEST:\r\n      return { ...state, loading: true };\r\n    case INFO_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        data: action.profile,\r\n      };\r\n    case INFO_FAILURE:\r\n      return {\r\n        loading: false,\r\n        error: action.error,\r\n      };\r\n    case PLAYTIME_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        playtime: action.playtime,\r\n      };\r\n    case FAVORITE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading: false,\r\n        favorite: action.favorite,\r\n      };\r\n    case DELETE_PROFILE:\r\n      return {\r\n        loading: true,\r\n        error: \"User not found!\",\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {\r\n  DefaultSnackState,\r\n  CLEAR_SNACKBAR,\r\n  SHOW_SNACKBAR,\r\n  SnackActionTypes,\r\n  REMOVE_SNACKBAR,\r\n} from \"../_types/snackbar.types\";\r\n\r\nconst snackbarReducerDefaultState: DefaultSnackState = {\r\n  snackbars: [],\r\n};\r\n\r\nexport const snackbarReducer = (\r\n  state = snackbarReducerDefaultState,\r\n  action: SnackActionTypes\r\n): DefaultSnackState => {\r\n  switch (action.type) {\r\n    case SHOW_SNACKBAR:\r\n      return {\r\n        ...state,\r\n        snackbars: [\r\n          ...state.snackbars,\r\n          {\r\n            ...action.snackbar,\r\n          },\r\n        ],\r\n      };\r\n    case CLEAR_SNACKBAR:\r\n      return {\r\n        ...state,\r\n        snackbars: state.snackbars?.map((snackbar) =>\r\n          action.dismissAll || snackbar.key === action.key\r\n            ? { ...snackbar, dismissed: true }\r\n            : { ...snackbar }\r\n        ),\r\n      };\r\n    case REMOVE_SNACKBAR:\r\n      return {\r\n        ...state,\r\n        snackbars: state.snackbars?.filter(\r\n          (snackbar) => snackbar.key !== action.key\r\n        ),\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  PlayerActionTypes,\r\n  REQUEST_PLAYER,\r\n  RESET_PLAYER,\r\n  ENTER_PLAYMODE,\r\n  ENTER_NOTEMODE,\r\n  EXIT_PLAYMODE,\r\n  DRAW_GAME_PIANO,\r\n  DRAW_NOTE_PIANO,\r\n  DRAW_NOTES,\r\n  IMelodition,\r\n  DRAW_GAME,\r\n  DRAW_FINGER,\r\n  RESIZE_PLAYER,\r\n  DRAW_SEEKBAR\r\n} from \"../_types/player.types\";\r\nconst loadings = {\r\n  fingerLoading: true,\r\n  notesLoading: true,\r\n  pianoLoading: true,\r\n  gameLoading: true,\r\n  seekLoading: true,\r\n  loading: true,\r\n};\r\nconst defaultPlayer: IMelodition = {\r\n  ...loadings,\r\n  playMode: false,\r\n  noteMode: false,\r\n  octave: 5,\r\n  songLength: 272,\r\n  tapSize: 32,\r\n};\r\nconst resetState: IMelodition = JSON.parse(JSON.stringify(defaultPlayer))\r\n\r\nexport const playerReducer = (\r\n  state = defaultPlayer,\r\n  action: PlayerActionTypes\r\n): IMelodition => {\r\n  switch (action.type) {\r\n    case REQUEST_PLAYER:\r\n      return { ...state, ...action.payload, loading: false };\r\n    case DRAW_GAME_PIANO:\r\n      return { ...state, ...action.payload, pianoLoading: false };\r\n    case DRAW_NOTE_PIANO:\r\n      return { ...state, ...action.payload, pianoLoading: false };\r\n    case DRAW_GAME:\r\n      return { ...state, gameLoading: false };\r\n    case DRAW_FINGER:\r\n      return { ...state, fingerLoading: false };\r\n    case DRAW_NOTES:\r\n      return { ...state, notesLoading: false };\r\n    case DRAW_SEEKBAR:\r\n      return { ...state, seekLoading: false };\r\n    case ENTER_NOTEMODE:\r\n      return { ...state, noteMode: true };\r\n    case ENTER_PLAYMODE:\r\n      return {\r\n        ...state,\r\n        ...loadings,\r\n        loading: false,\r\n        playMode: true,\r\n        canvasSize: undefined\r\n      };\r\n    case EXIT_PLAYMODE:\r\n      return {\r\n        ...state,\r\n        ...loadings,\r\n        loading: false,\r\n        playMode: false,\r\n      };\r\n    case RESIZE_PLAYER:\r\n      return { ...state, pianoLoading: true, gameLoading: true, notesLoading: true };\r\n    case RESET_PLAYER:\r\n      return resetState;\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  REQUEST_POST,\r\n  SUCCESS_POST,\r\n  FAILURE_POST,\r\n  REQUEST_POSTS,\r\n  SUCCESS_POSTS,\r\n  FAILURE_POSTS,\r\n  PostActionTypes,\r\n  DefaultPostState,\r\n  DefaultPostsState,\r\n} from \"../_types/post.types\";\r\n\r\nconst postsReducerDefaultState: DefaultPostsState = {\r\n  data: [],\r\n  loading: true,\r\n  error: 'Not Found',\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const postsReducer = (\r\n  state = postsReducerDefaultState,\r\n  action: PostActionTypes\r\n): DefaultPostsState => {\r\n  switch (action.type) {\r\n    case REQUEST_POSTS:\r\n      return state;\r\n    case SUCCESS_POSTS:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case FAILURE_POSTS:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst postReducerDefaultState: DefaultPostState = {\r\n  loading: true,\r\n  error: 'Not Found'\r\n};\r\n\r\nexport const postReducer = (\r\n  state = postReducerDefaultState,\r\n  action: PostActionTypes\r\n): DefaultPostState => {\r\n  switch (action.type) {\r\n    case REQUEST_POST:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_POST:\r\n      if (action.data === undefined) {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };\r\n      }\r\n    case FAILURE_POST:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SAVE_GUIDES,\r\n  REQUEST_GUIDE,\r\n  SUCCESS_GUIDE,\r\n  FAILURE_GUIDE,\r\n  REQUEST_GUIDES,\r\n  SUCCESS_GUIDES,\r\n  FAILURE_GUIDES,\r\n  GuideActionTypes,\r\n  DefaultGuideState,\r\n  DefaultGuidesState,\r\n} from \"../_types/guide.types\";\r\n\r\nconst guidesReducerDefaultState: DefaultGuidesState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const guidesReducer = (\r\n  state = guidesReducerDefaultState,\r\n  action: GuideActionTypes\r\n): DefaultGuidesState => {\r\n  switch (action.type) {\r\n    case REQUEST_GUIDES:\r\n      return state;\r\n    case SUCCESS_GUIDES:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_GUIDES:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_GUIDES:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst guideReducerDefaultState: DefaultGuideState = {\r\n  loading: true,\r\n  error: \"Not Found\",\r\n};\r\n\r\nexport const guideReducer = (\r\n  state = guideReducerDefaultState,\r\n  action: GuideActionTypes\r\n): DefaultGuideState => {\r\n  switch (action.type) {\r\n    case REQUEST_GUIDE:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_GUIDE:\r\n      return {\r\n        ...state,\r\n        data: action.data,\r\n        loading: false,\r\n      };\r\n    case FAILURE_GUIDE:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SAVE_LESSONS,\r\n  REQUEST_LESSON,\r\n  SUCCESS_LESSON,\r\n  FAILURE_LESSON,\r\n  REQUEST_LESSONS,\r\n  SUCCESS_LESSONS,\r\n  FAILURE_LESSONS,\r\n  LessonActionTypes,\r\n  DefaultLessonState,\r\n  DefaultLessonsState,\r\n} from \"../_types/lesson.types\";\r\n\r\nconst lessonsReducerDefaultState: DefaultLessonsState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const lessonsReducer = (\r\n  state = lessonsReducerDefaultState,\r\n  action: LessonActionTypes\r\n): DefaultLessonsState => {\r\n  switch (action.type) {\r\n    case REQUEST_LESSONS:\r\n      return state;\r\n    case SUCCESS_LESSONS:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_LESSONS:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_LESSONS:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst lessonReducerDefaultState: DefaultLessonState = {\r\n  loading: true,\r\n  error: \"Not Found\",\r\n};\r\n\r\nexport const lessonReducer = (\r\n  state = lessonReducerDefaultState,\r\n  action: LessonActionTypes\r\n): DefaultLessonState => {\r\n  switch (action.type) {\r\n    case REQUEST_LESSON:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_LESSON:\r\n      return {\r\n        ...state,\r\n        data: action.data,\r\n        loading: false,\r\n      };\r\n    case FAILURE_LESSON:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SAVE_COURSES,\r\n  REQUEST_COURSE,\r\n  SUCCESS_COURSE,\r\n  FAILURE_COURSE,\r\n  REQUEST_COURSES,\r\n  SUCCESS_COURSES,\r\n  FAILURE_COURSES,\r\n  CourseActionTypes,\r\n  DefaultCourseState,\r\n  DefaultCoursesState,\r\n} from \"../_types/course.types\";\r\n\r\nconst coursesReducerDefaultState: DefaultCoursesState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const coursesReducer = (\r\n  state = coursesReducerDefaultState,\r\n  action: CourseActionTypes\r\n): DefaultCoursesState => {\r\n  switch (action.type) {\r\n    case REQUEST_COURSES:\r\n      return state;\r\n    case SUCCESS_COURSES:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_COURSES:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_COURSES:\r\n      return {\r\n        data: [],\r\n        nextLoad: 0,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst courseReducerDefaultState: DefaultCourseState = {\r\n  loading: true,\r\n  error: 'Not Found',\r\n};\r\n\r\nexport const courseReducer = (\r\n  state = courseReducerDefaultState,\r\n  action: CourseActionTypes\r\n): DefaultCourseState => {\r\n  switch (action.type) {\r\n    case REQUEST_COURSE:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_COURSE:\r\n      if (action.data === undefined) {\r\n        return {\r\n          ...state,\r\n          loading: false,\r\n        }\r\n      } else {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };\r\n      }\r\n    case FAILURE_COURSE:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SAVE_EXERCISES,\r\n  REQUEST_EXERCISE,\r\n  SUCCESS_EXERCISE,\r\n  FAILURE_EXERCISE,\r\n  REQUEST_EXERCISES,\r\n  SUCCESS_EXERCISES,\r\n  FAILURE_EXERCISES,\r\n  ExerciseActionTypes,\r\n  DefaultExerciseState,\r\n  DefaultExercisesState,\r\n} from \"../_types/exercise.types\";\r\n\r\nconst exercisesReducerDefaultState: DefaultExercisesState = {\r\n  data: [],\r\n  loading: true,\r\n  error: \"Not Found\",\r\n  nextLoad: 0,\r\n};\r\n\r\nexport const exercisesReducer = (\r\n  state = exercisesReducerDefaultState,\r\n  action: ExerciseActionTypes\r\n): DefaultExercisesState => {\r\n  switch (action.type) {\r\n    case REQUEST_EXERCISES:\r\n      return state;\r\n    case SUCCESS_EXERCISES:\r\n      return {\r\n        ...state,\r\n        data: action.payload.data,\r\n        nextLoad: action.payload.nextLoad,\r\n        loading: false,\r\n      };\r\n    case SAVE_EXERCISES:\r\n      let match = false;\r\n      if (state.data.length)\r\n        match = action.data.every(item => state.data.map(_ => _.id === item.id));\r\n      return {\r\n        ...state,\r\n        data: match ? state.data : action.data,\r\n      };\r\n    case FAILURE_EXERCISES:\r\n      return {\r\n        data: [],\r\n        error: action.error,\r\n        nextLoad: 0,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst exerciseReducerDefaultState: DefaultExerciseState = {\r\n  loading: true,\r\n  error: \"Not Found\",\r\n};\r\n\r\nexport const exerciseReducer = (\r\n  state = exerciseReducerDefaultState,\r\n  action: ExerciseActionTypes\r\n): DefaultExerciseState => {\r\n  switch (action.type) {\r\n    case REQUEST_EXERCISE:\r\n      return { ...state, loading: true, data: undefined };\r\n    case SUCCESS_EXERCISE:\r\n      if (action.data === undefined) {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          data: action.data,\r\n          loading: false,\r\n        };;\r\n      }\r\n    case FAILURE_EXERCISE:\r\n      return {\r\n        ...state,\r\n        error: action.error,\r\n        loading: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { History } from 'history';\r\nimport { combineReducers } from \"redux\";\r\nimport { connectRouter } from 'connected-react-router'\r\n\r\nimport { authReducer } from \"./user.reducer\";\r\nimport { profileReducer } from \"./profile.reducer\";\r\nimport { snackbarReducer } from \"./snackbar.reducer\";\r\nimport { playerReducer } from './player.reducer';\r\nimport { postReducer, postsReducer } from \"./post.reducer\";\r\nimport { guideReducer, guidesReducer } from \"./guide.reducer\";\r\nimport { lessonReducer, lessonsReducer } from \"./lesson.reducer\";\r\nimport { courseReducer, coursesReducer } from \"./course.reducer\";\r\nimport { exerciseReducer, exercisesReducer } from \"./exercise.reducer\";\r\n\r\nconst rootReducer = (history: History) => combineReducers({\r\n    router: connectRouter(history),\r\n    single: combineReducers({\r\n        post: postReducer,\r\n        guide: guideReducer,\r\n        course: courseReducer,\r\n        lesson: lessonReducer,\r\n        exercise: exerciseReducer,\r\n    }),\r\n    bank: combineReducers({\r\n        posts: postsReducer,\r\n        guides: guidesReducer,\r\n        courses: coursesReducer,\r\n        lessons: lessonsReducer,\r\n        exercises: exercisesReducer,\r\n    }),\r\n    melodition: playerReducer,\r\n    user: profileReducer,\r\n    snackbar: snackbarReducer,\r\n    auth: authReducer,\r\n});\r\n\r\nexport default rootReducer","import { createBrowserHistory } from 'history'\nimport thunk, { ThunkMiddleware } from \"redux-thunk\";\n\nimport { applyMiddleware, compose, createStore } from 'redux'\nimport { routerMiddleware } from 'connected-react-router'\nimport createRootReducer from '../_reducers'\nimport { AppActions, AppState } from '../_types';\n\nexport const history = createBrowserHistory()\n\nexport const store = configureStore();\n\nexport default function configureStore(preloadingState?: any) {\n  const composeEnhancer: typeof compose = (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n  const store = createStore(\n    createRootReducer(history),\n    preloadingState,\n    composeEnhancer(\n      applyMiddleware(\n        routerMiddleware(history),\n        thunk as ThunkMiddleware<AppState, AppActions>,\n      ),\n    ),\n  )\n\n  return store\n}","import React, { useEffect, useState } from \"react\";\r\nimport { IconButton } from \"@material-ui/core\";\r\nimport { PauseCircleOutline, PlayCircleOutline } from \"@material-ui/icons\";\r\nimport { startPlayer, stopPlayer } from \"../../../_actions/player.actions\";\r\n\r\ninterface IPlayProps {\r\n  loading: boolean;\r\n}\r\nexport const PlayButton: React.FC<IPlayProps> = ({ loading }) => {\r\n  const [onAir, setOnAir] = useState(false);\r\n\r\n  const playHandler = () => {\r\n    if (onAir) {\r\n      stopPlayer();\r\n      setOnAir(false);\r\n    } else {\r\n      startPlayer();\r\n      setOnAir(true);\r\n    }\r\n  };\r\n  const keyboardUp = (e: KeyboardEvent) => {\r\n    if (e.code === \"Space\" && !loading) {\r\n      playHandler();\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    document.addEventListener(\"keyup\", keyboardUp);\r\n    return () => {\r\n      document.removeEventListener(\"keyup\", keyboardUp);\r\n    };\r\n  });\r\n  return (\r\n    <IconButton\r\n      id=\"play-button\"\r\n      color=\"secondary\"\r\n      aria-label=\"play song\"\r\n      onClick={playHandler}\r\n    >\r\n      {onAir ? (\r\n        <PauseCircleOutline style={{ fontSize: \"1.8em\" }} />\r\n      ) : (\r\n        <PlayCircleOutline style={{ fontSize: \"1.8em\" }} />\r\n      )}\r\n    </IconButton>\r\n  );\r\n};\r\n","const SvgKeys = [{\r\n  note: \"C\",\r\n  xPos: 47,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M0.5 0.5H42.5V155.5C42.5 156.881 43.6193 158 45 158H79.5V245C79.5 247.485 77.4853 249.5 75 249.5H5C2.51472 249.5 0.5 247.485 0.5 245V0.5Z\",\r\n}, {\r\n  note: \"Db\",\r\n  xPos: 77,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M95 0H45V153C45 154.105 45.8954 155 47 155H93C94.1046 155 95 154.105 95 153V0Z\",\r\n  back: \"M79 130H61C52 130 52 150 52 150H88C88 150 88 130 79 130Z\",\r\n}, {\r\n  note: \"D\",\r\n  xPos: 130,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M150.5 0.5H97.5V155.5C97.5 156.881 96.3807 158 95 158H84.5V245C84.5 247.485 86.5147 249.5 89 249.5H159C161.485 249.5 163.5 247.485 163.5 245V158H153C151.619 158 150.5 156.881 150.5 155.5V0.5Z\",\r\n}, {\r\n  note: \"Eb\",\r\n  xPos: 185,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M203 0H153V153C153 154.105 153.895 155 155 155H201C202.105 155 203 154.105 203 153V0Z\",\r\n  back: \"M187 130H169C160 130 160 150 160 150H196C196 150 196 130 187 130Z\",\r\n}, {\r\n  note: \"E\",\r\n  xPos: 214,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M247.5 0.5H205.5V155.5C205.5 156.881 204.381 158 203 158H168.5V245C168.5 247.485 170.515 249.5 173 249.5H243C245.485 249.5 247.5 247.485 247.5 245V0.5Z\",\r\n}, {\r\n  note: \"F\",\r\n  xPos: 298,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M252.5 0.5H291.5V155.5C291.5 156.881 292.619 158 294 158H331.5V245C331.5 247.485 329.485 249.5 327 249.5H257C254.515 249.5 252.5 247.485 252.5 245V0.5Z\",\r\n}, {\r\n  note: \"Gb\",\r\n  xPos: 327,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M344 0H294V153C294 154.105 294.895 155 296 155H342C343.105 155 344 154.105 344 153V0Z\",\r\n  back: \"M328 130H310C301 130 301 150 301 150H337C337 150 337 130 328 130Z\",\r\n}, {\r\n  note: \"G\",\r\n  xPos: 383,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M390.5 0.5H346.5V155.5C346.5 156.881 345.381 158 344 158H336.5V245C336.5 247.485 338.515 249.5 341 249.5H411C413.485 249.5 415.5 247.485 415.5 245V158H393C391.619 158 390.5 156.881 390.5 155.5V0.5Z\",\r\n}, {\r\n  note: \"Ab\",\r\n  xPos: 427,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M443 0H393V153C393 154.105 393.895 155 395 155H441C442.105 155 443 154.105 443 153V0Z\",\r\n  back: \"M427 130H409C400 130 400 150 400 150H436C436 150 436 130 427 130Z\",\r\n}, {\r\n  note: \"A\",\r\n  xPos: 466,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M491.5 0.5H445.5V155.5C445.5 156.881 444.381 158 443 158H420.5V245C420.5 247.485 422.515 249.5 425 249.5H495C497.485 249.5 499.5 247.485 499.5 245V158H494C492.619 158 491.5 156.881 491.5 155.5V0.5Z\",\r\n}, {\r\n  note: \"Bb\",\r\n  xPos: 526,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M544 0H494V153C494 154.105 494.895 155 496 155H542C543.105 155 544 154.105 544 153V0Z\",\r\n  back: \"M528 130H510C501 130 501 150 501 150H537C537 150 537 130 528 130Z\",\r\n}, {\r\n  note: \"B\",\r\n  xPos: 551,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M583.5 0.5H546.5V155.5C546.5 156.881 545.381 158 544 158H504.5V245C504.5 247.485 506.515 249.5 509 249.5H579C581.485 249.5 583.5 247.485 583.5 245V0.5Z\",\r\n}, {\r\n  note: \"C\",\r\n  xPos: 637,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M663 249.5H593C590.515 249.5 588.5 247.485 588.5 245V0.5H667.5V245C667.5 247.485 665.485 249.5 663 249.5Z\",\r\n}];\r\n\r\nexport default SvgKeys;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { gamePiano, notePiano } from \"../../../../_actions/player.actions\";\r\nimport { leftLine, PianoEvent, pitchName, rightLine } from \"./constant\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\nimport { changeMidi } from \"../../../../_actions/midi.actions\";\r\nimport { INotePos } from \"../../../../_types/player.types\";\r\nimport { AppActions, AppState } from \"../../../../_types\";\r\nimport SvgKeys from \"./SvgKeys\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n      flexDirection: \"row-reverse\",\r\n      justifyContent: \"center\",\r\n      flexWrap: \"nowrap\",\r\n      margin: \"0 auto\",\r\n      minWidth: \"215px\",\r\n      width: \"100%\",\r\n      cursor: \"default\",\r\n      \"-webkit-touch-callout\": \"none\",\r\n      \"-webkit-user-select\": \"none\",\r\n      \"-khtml-user-select\": \"none\",\r\n      \"-moz-user-select\": \"none\",\r\n      \"-ms-user-select\": \"none\",\r\n      \"user-select\": \"none\",\r\n      touchAction: \"none\",\r\n    },\r\n    back: {\r\n      margin: theme.spacing(0, 2),\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> &\r\n  ReturnType<typeof mapDispatchToProps>;\r\n\r\nconst Piano: React.FC<Props> = (props) => {\r\n  const { /*theme,*/ Melo, drawGamePiano, drawNotePiano } = props;\r\n\r\n  const {\r\n    keyboardDown,\r\n    keyboardUp,\r\n    mouseDown,\r\n    mouseUp,\r\n    mouseLeave,\r\n    mouseOver,\r\n  } = new PianoEvent();\r\n\r\n  let counter = 36;\r\n  let firstkey = 36;\r\n  const keyRefs = {} as SVGGElement[];\r\n\r\n  useEffect(() => {\r\n    console.log(\"Piano mounted\");\r\n    changeMidi(true);\r\n    document.addEventListener(\"keydown\", keyboardDown);\r\n    document.addEventListener(\"keyup\", keyboardUp);\r\n    return () => {\r\n      console.log(\"Piano disMounted\");\r\n      changeMidi(false);\r\n      document.removeEventListener(\"keydown\", keyboardDown);\r\n      document.removeEventListener(\"keyup\", keyboardUp);\r\n    };\r\n  }, [Melo.loading, keyboardDown, keyboardUp]);\r\n\r\n  const classes = useStyles();\r\n\r\n  const counterFunction = (octSize: number) => {\r\n    if (octSize > 6) {\r\n      counter = 24;\r\n      firstkey = 24;\r\n    } else if (octSize > 3) {\r\n      counter = 36;\r\n      firstkey = 36;\r\n    } else if (octSize > 1) {\r\n      counter = 48;\r\n      firstkey = 48;\r\n    } else {\r\n      counter = 60;\r\n      firstkey = 60;\r\n    }\r\n  };\r\n  const detectSize = (height: number) => {\r\n    if (height > 700) {\r\n      return height / 16;\r\n    } else if (height > 500) {\r\n      return height / 16;\r\n    } else if (height > 300) {\r\n      return height / 16;\r\n    } else if (height > 100) {\r\n      return height / 16;\r\n    } else {\r\n      return height / 16;\r\n    }\r\n  };\r\n  const setKeyRef = (ref: SVGGElement | null) => {\r\n    if (ref) {\r\n      const key = ref.tabIndex;\r\n      keyRefs[key] = ref;\r\n    }\r\n  };\r\n\r\n  const setRef = (ref: HTMLDivElement) => {\r\n    if (ref && Melo.pianoLoading) {\r\n      const pianoSize = ref.getBoundingClientRect();\r\n      const width = pianoSize.width;\r\n      const height = Math.floor(window.innerHeight - (pianoSize.height + 64));\r\n      if (Melo.playMode) {\r\n        const tapSize = detectSize(height);\r\n        const baseLine = tapSize * 4 + 8;\r\n        const pianoLeft = pianoSize.left;\r\n        const canvasSize = { width, height, baseLine, pianoLeft };\r\n        drawGamePiano(keyRefs, canvasSize, tapSize);\r\n      } else if (Melo.noteMode && Melo.neededLines) {\r\n        const need = Melo.neededLines.up > 83 ? 102 : 83;\r\n        const lines =\r\n          Melo.neededLines.down < 58 || Melo.neededLines.up > 83 ? 28 : 16;\r\n        const lineSide = need > 83 ? rightLine : leftLine;\r\n        const tapSize = height / 2.1 / (lines / 2);\r\n        const spaceSize = width / (Melo.neededLines.notes + 2);\r\n        const fontSize =\r\n          spaceSize * 0.5 < 7 ? 7 : spaceSize * 0.5 > 12 ? 12 : spaceSize * 0.5;\r\n        const linesArray = Array.from(\r\n          Array(lines),\r\n          (_, i) => need - lineSide[i]\r\n        );\r\n        const notePos: INotePos = {};\r\n        linesArray.forEach((v, i) => {\r\n          const y = ((i + 1) * tapSize) / 2;\r\n          notePos[v] = { pos: y, note: pitchName(v) };\r\n          notePos[v - 1] = { pos: y, note: pitchName(v - 1) };\r\n        });\r\n        drawNotePiano(keyRefs, {\r\n          width,\r\n          height: height / 2.1,\r\n          tapSize,\r\n          spaceSize,\r\n          fontSize,\r\n          linesArray,\r\n          notePos,\r\n        });\r\n      } else {\r\n        drawGamePiano(keyRefs);\r\n      }\r\n    }\r\n  };\r\n  const themeColor = (color: string) => {\r\n    // if (color === \"black\") return theme === \"dark\" ? \"white\" : \"black\";\r\n    // if (color === \"white\") return theme === \"dark\" ? \"black\" : \"white\";\r\n    return color;\r\n  };\r\n  // const themer = theme === \"dark\" ? 1 : 0;\r\n  counterFunction(Melo.octave);\r\n  return (\r\n    <div ref={setRef} className={classes.root}>\r\n      {Array.from(Array(Melo.octave), (_, i) => \"oct\" + (i + 1)).map(\r\n        (oct, i) => {\r\n          const width = Melo.octave - i === 1 ? 668 : 584;\r\n          return (\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              id={oct}\r\n              key={oct}\r\n              width={width}\r\n              height=\"100%\"\r\n              viewBox={`0 0 ${width} 275`}\r\n              fill=\"none\"\r\n              style={\r\n                i !== Melo.octave - 1\r\n                  ? { marginRight: 8 / Melo.octave }\r\n                  : undefined\r\n              }\r\n            >\r\n              {SvgKeys.map((k, n) => {\r\n                let lastKey = SvgKeys.length;\r\n                let className = counter === firstkey ? \"first\" : k.note;\r\n                if (Melo.octave - i === 1 && lastKey === n + 1) {\r\n                  lastKey++;\r\n                  className = \"last\";\r\n                  i++;\r\n                }\r\n                let backFill = k.id === \"white\" ? \"#B5B5B5\" : undefined;\r\n                let frontFill =\r\n                  k.id === \"white\" ? \"black\" : \"rgb(255 255 255 / 65%)\";\r\n                const active = Melo.neededTracks?.some(\r\n                  (el) => el.pitch + 36 === counter\r\n                );\r\n                const textPos = k.id === \"white\" ? k.xPos : k.xPos + 6;\r\n                return (\r\n                  lastKey !== n + 1 && (\r\n                    <g\r\n                      id={k.id}\r\n                      ref={setKeyRef}\r\n                      onMouseUp={mouseUp}\r\n                      onMouseDown={mouseDown}\r\n                      onMouseLeave={mouseLeave}\r\n                      onTouchEnd={mouseLeave}\r\n                      onTouchMove={mouseOver}\r\n                      onTouchStart={mouseDown}\r\n                      key={oct + \"-\" + k.note + i}\r\n                      className={className}\r\n                      tabIndex={counter}\r\n                    >\r\n                      <path\r\n                        id=\"back\"\r\n                        d={k.front}\r\n                        fill={themeColor(k.id)}\r\n                        stroke={backFill}\r\n                      />\r\n                      {k.id !== \"white\" ? (\r\n                        <path\r\n                          id=\"front\"\r\n                          d={k.back}\r\n                          fill={themeColor(frontFill)}\r\n                        />\r\n                      ) : (\r\n                        <text\r\n                          id=\"front\"\r\n                          x={textPos}\r\n                          y={k.yPos}\r\n                          fill={themeColor(\"rgb(155 155 155)\")}\r\n                          fontSize=\"25\"\r\n                          fontWeight=\"900\"\r\n                        >\r\n                          {k.note}\r\n                        </text>\r\n                      )}\r\n                      {active && (\r\n                        <circle\r\n                          cx={k.xPos - 8}\r\n                          cy={k.yPos + 20}\r\n                          r=\"6\"\r\n                          fill={themeColor(\"rgb(56 56 56)\")}\r\n                          stroke={themeColor(k.id)}\r\n                          strokeWidth=\"2\"\r\n                        />\r\n                      )}\r\n                      {counter++ === 60 && (\r\n                        <polygon points=\"30,265 40,255 50,265\" fill=\"black\" />\r\n                      )}\r\n                    </g>\r\n                  )\r\n                );\r\n              })}\r\n            </svg>\r\n          );\r\n        }\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n  theme: state.auth.theme,\r\n  Melo: state.melodition,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawGamePiano: bindActionCreators(gamePiano, dispatch),\r\n  drawNotePiano: bindActionCreators(notePiano, dispatch),\r\n});\r\n\r\nconst connectedPiano = connect(mapStateToProps, mapDispatchToProps)(Piano);\r\n\r\nexport default connectedPiano;\r\n","import { Dispatch } from \"redux\";\r\nimport {\r\n  REQUEST_POSTS,\r\n  SUCCESS_POSTS,\r\n  FAILURE_POSTS,\r\n  REQUEST_POST,\r\n  SUCCESS_POST,\r\n  FAILURE_POST,\r\n} from \"../_types/post.types\";\r\nimport { AppState } from \"../_types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { getTheTime } from \"../_helpers/constants\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { API } from \"../_helpers/api\";\r\n\r\nexport const requestAllPost = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const postState = getState().bank.posts;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - postState.nextLoad;\r\n    if (postState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_POSTS });\r\n    API.get(`/post/v2`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_POSTS, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_POSTS))\r\n  }\r\n)\r\n\r\nexport const requestPost = (id: number) => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const postState = getState().bank.posts.data;\r\n\r\n    const found = postState?.find(post => post.id === id);\r\n    if (found) {\r\n      dispatch({ type: SUCCESS_POST, data: found })\r\n    } else {\r\n      dispatch({ type: REQUEST_POST });\r\n      API.get(`/post/v2?id=${id}`)\r\n        .then((res) => dispatch({ type: SUCCESS_POST, data: res.data[0] }))\r\n        .catch(err => errorHandler(err, FAILURE_POST))\r\n    }\r\n  }\r\n)","import { LoginResponse } from \"../_types/auth.types\";\r\nimport fallImg from \"../assets/img/melodition.jpg\";\r\nimport { ThumbnailsInfo } from \"../_types/guide.types\";\r\n\r\nexport interface PathFinder {\r\n  post?: number;\r\n  guide?: number;\r\n  course?: number;\r\n  lesson?: number;\r\n  exercise?: number;\r\n  length: number;\r\n}\r\nexport const pathFinder = (path: string): PathFinder => {\r\n  const pathSplit = path.split(\"/\");\r\n  let compiledPath: PathFinder = { length: 0 };\r\n  if (pathSplit.length === 3) {\r\n    compiledPath = {\r\n      [pathSplit[1]]: Number(pathSplit[2]),\r\n      length: 1,\r\n    };\r\n  } else if (pathSplit.length === 4) {\r\n    const typeSplit = pathSplit[3].split(\"=\");\r\n    compiledPath = {\r\n      [pathSplit[1]]: Number(pathSplit[2]),\r\n      [typeSplit[0]]: Number(typeSplit[1]),\r\n      length: 2,\r\n    };\r\n  } else if (pathSplit.length === 5) {\r\n    const type1Split = pathSplit[3].split(\"=\");\r\n    const type2Split = pathSplit[4].split(\"=\");\r\n    compiledPath = {\r\n      [pathSplit[1]]: Number(pathSplit[2]),\r\n      [type1Split[0]]: Number(type1Split[1]),\r\n      [type2Split[0]]: Number(type2Split[1]),\r\n      length: 3,\r\n    };\r\n  }\r\n  return compiledPath;\r\n};\r\n\r\nexport const getUserLocal = (key: string): LoginResponse => {\r\n  const item = localStorage.getItem(key);\r\n  return item !== null ? JSON.parse(item) : undefined;\r\n};\r\n\r\nexport const getTheTime = (minutes: number = 0): number => {\r\n  var d = new Date();\r\n  var t = d.getTime();\r\n  const ms = minutes * 60000;\r\n  return t + ms;\r\n};\r\n\r\nexport const UniqId = (): string => {\r\n  return getTheTime(Math.random()).toString(36);\r\n};\r\n\r\nexport const thumbnailsFinder = (\r\n  img: string | ThumbnailsInfo | null\r\n): string => {\r\n  let image = fallImg;\r\n  if (img) {\r\n    if (typeof img === \"object\") image = img.medium;\r\n    else if (typeof img === \"string\") image = img;\r\n  }\r\n  return image;\r\n};\r\n\r\nexport const season = [\r\n  \"\",\r\n  \"شروع\",\r\n  \"بخش اول\",\r\n  \"بخش دوم\",\r\n  \"بخش سوم\",\r\n  \"بخش چهارم\",\r\n  \"بخش پنجم\",\r\n  \"بخش ششم\",\r\n  \"بخش هفتم\",\r\n  \"بخش هشتم\",\r\n  \"بخش نهم\",\r\n  \"بخش دهم\",\r\n];\r\n","import React, {\r\n  useState,\r\n  forwardRef,\r\n  useImperativeHandle,\r\n  useCallback,\r\n} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport { AppActions, AppState } from \"../../../_types\";\r\nimport { canvasWheel, drawSeekBar } from \"../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../_types/player.types\";\r\n\r\ntype SeekBarProps = ReturnType<typeof mapStateToProps> &\r\n  ReturnType<typeof mapDispatchToProps>;\r\n\r\nconst Seekbar: React.FC<SeekBarProps> = ({ Melo, drawSeekBar }) => {\r\n  const callback = useCallback(\r\n    (node: any) => {\r\n      if (node && Melo.seekLoading) {\r\n        drawSeekBar({ seekBar: node });\r\n      }\r\n      return () => {};\r\n    },\r\n    [Melo.seekLoading, drawSeekBar]\r\n  );\r\n\r\n  return (\r\n    <div style={{ height: \"40%\" }}>\r\n      <SeekInput ref={callback} Melo={Melo} />\r\n    </div>\r\n  );\r\n};\r\nconst mapStateToProps = (state: AppState) => ({\r\n  Melo: state.melodition,\r\n});\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawSeekBar: bindActionCreators(drawSeekBar, dispatch),\r\n});\r\nconst connectedSeekbar = connect(mapStateToProps, mapDispatchToProps)(Seekbar);\r\n\r\nexport default connectedSeekbar;\r\n\r\ninterface SeekInputProps {\r\n  Melo: IMelodition;\r\n}\r\nconst SeekInput = forwardRef<unknown, SeekInputProps>(({ Melo }, ref) => {\r\n  const [seek, setSeek] = useState(1);\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      changeSeeker: changeSeeker,\r\n    };\r\n  });\r\n  const changeSeeker = (value: number) => {\r\n    if (typeof value === \"number\") {\r\n      setSeek(value);\r\n    }\r\n  };\r\n  const seekchanger = (value: number | number[]) => {\r\n    if (typeof value === \"number\") {\r\n      canvasWheel(value);\r\n    }\r\n  };\r\n  return (\r\n    <Slider\r\n      color=\"secondary\"\r\n      orientation=\"vertical\"\r\n      aria-label=\"seekbar\"\r\n      defaultValue={0}\r\n      max={Melo.songLength}\r\n      min={0}\r\n      onChange={(_, e) => seekchanger(e)}\r\n      aria-labelledby=\"vertical-slider\"\r\n      value={seek}\r\n    />\r\n  );\r\n});\r\n","module.exports = __webpack_public_path__ + \"static/media/melodition.7fdc0c11.jpg\";","import Axios from \"axios\";\r\nimport { store } from \"../_store/store.config\";\r\nimport { logoutRequest } from \"../_actions/user.actions\";\r\n\r\nexport const authHeader = (): HeadersInit => {\r\n  const localUser = localStorage.getItem(\"user\");\r\n  let user: { token: string } = localUser ? JSON.parse(localUser) : null;\r\n  if (user?.token) {\r\n    return { Authorization: \"Bearer \" + user.token };\r\n  } else {\r\n    return { Authorization: \"\" };\r\n  }\r\n}\r\nexport const API = Axios.create({\r\n  baseURL: \"https://panel.melodition.com/wp-json\",\r\n  headers: authHeader(),\r\n});\r\n\r\n\r\nAPI.interceptors.response.use(\r\n  res => {\r\n    return res;\r\n  },\r\n  err => {\r\n    console.log(err)\r\n    if (err.response.status === 403) {\r\n      if (/invalid_token/.test(err.response.data.code)) {\r\n        store.dispatch(logoutRequest())\r\n      } else if (/incorrect_password/.test(err.response.data.code))\r\n        err.response.data.button = { url: \"/lostpassword\", msg: \"بازیابی رمز\" }\r\n    }\r\n    return Promise.reject(err);\r\n  }\r\n)\r\nexport const AudioApi = Axios.create({ method: \"get\", responseType: \"arraybuffer\" });\r\n","export class Midi {\r\n    touchedKeys: {\r\n        note: number\r\n        y: number\r\n        hit?: string\r\n    }[] = []\r\n    score: any = []\r\n    trackLen: number\r\n}\r\nconst MidiState = new Midi();\r\n\r\nexport default MidiState\r\n","interface IFingersClass {\r\n  note: any,\r\n  len: number,\r\n  hand: any,\r\n  beat: number\r\n  num: number\r\n  pitch: number\r\n}\r\nexport class FingersClass {\r\n  len: number;\r\n  note: any;\r\n  finger: SVGElement;\r\n  hand: string;\r\n  color: string;\r\n  bColor: string;\r\n  fColor: string;\r\n  cColor: string;\r\n  end: number;\r\n  num: number;\r\n  pitch: number;\r\n  showing: boolean;\r\n  constructor({ note, len, hand, beat, num, pitch }: IFingersClass) {\r\n    this.len = len;\r\n    this.note = note;\r\n    this.num = num;\r\n    this.pitch = pitch;\r\n    this.end = this.len - 1 + beat;\r\n    if (this.end <= beat) {\r\n      this.end = beat + 1;\r\n    }\r\n    this.hand = hand.hand;\r\n    this.finger = hand.finger;\r\n    this.fColor = \"rgba(210, 210, 210, 0.5)\";/*hand.finger.getAttribute(\"fill\");*/\r\n    this.cColor = note.children.front.getAttribute(\"fill\");\r\n    this.bColor = note.id;\r\n    if (this.hand === \"right\") {\r\n      this.color = \"yellow\";\r\n    } else {\r\n      this.color = \"skyblue\";\r\n    }\r\n    this.showing = true;\r\n  }\r\n  show(c?: string) {\r\n    let color = this.color;\r\n    if (c) color = c\r\n    this.note.children.back.setAttribute(\"fill\", color);\r\n    this.note.children.front.setAttribute(\"fill\", \"black\");\r\n    this.finger.setAttribute(\"fill\", color);\r\n  }\r\n  hide() {\r\n    this.note.children.back.setAttribute(\"fill\", this.bColor);\r\n    this.note.children.front.setAttribute(\"fill\", this.cColor);\r\n    this.note.children.back.style.fill = \"\";\r\n    this.note.children.front.style.fill = \"\";\r\n    this.finger.setAttribute(\"fill\", this.fColor);\r\n    this.showing = false\r\n  }\r\n}\r\nexport class BackMover {\r\n  public y: number;\r\n  public end: number;\r\n  private yPos: number;\r\n  public margin: number;\r\n  constructor(beat: number, height: number, margin: number) {\r\n    this.y = 0;\r\n    this.margin = margin;\r\n    this.yPos = beat * height;\r\n    this.end = this.yPos + height + margin;\r\n  }\r\n  update = (ctx: CanvasRenderingContext2D, img: HTMLImageElement) => {\r\n    ctx.drawImage(img, 0, Math.floor(this.y - this.yPos - this.margin));\r\n  }\r\n}\r\ninterface IMusicLine {\r\n  x: number;\r\n  y: number;\r\n  lw: number;\r\n  color: string;\r\n  width: number;\r\n}\r\nexport class MusicLine {\r\n  private x: number;\r\n  private y: number;\r\n  private lw: number;\r\n  private color: string;\r\n  private width: number;\r\n  constructor({ width, color, x, y, lw }: IMusicLine) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = width;\r\n    this.color = color;\r\n    this.lw = lw\r\n  }\r\n  draw = (ctx: CanvasRenderingContext2D) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, this.y);\r\n    ctx.lineTo(this.width, this.y);\r\n    ctx.lineWidth = this.lw\r\n    ctx.strokeStyle = this.color\r\n    ctx.stroke();\r\n    ctx.fill();\r\n  }\r\n}\r\ninterface ILessonNote {\r\n  width: number,\r\n  height: number,\r\n  color: string,\r\n  x: number,\r\n  note: number;\r\n  y: number,\r\n  end: number,\r\n  text: string,\r\n  gap: number,\r\n}\r\nexport class LessonNote {\r\n  y: number;\r\n  x: number;\r\n  r: number;\r\n  gap: number;\r\n  beg: number;\r\n  end: number;\r\n  start: number;\r\n  height: number;\r\n  width: number;\r\n  mover: number;\r\n  note: number;\r\n  text: string;\r\n  color: string;\r\n  lineColor: string;\r\n  crash: boolean;\r\n  hit?: number;\r\n  constructor({ width, height, color, x, y, end, note, text, gap }: ILessonNote) {\r\n    this.y = y;\r\n    this.start = -y;\r\n    this.gap = gap;\r\n    this.beg = y + gap;\r\n    this.end = end;\r\n    this.note = note;\r\n    this.height = -height;\r\n    this.x = x;\r\n    this.text = text;\r\n    this.width = width;\r\n    this.r = width / 2;\r\n    this.color = color;\r\n    this.lineColor = 'black';\r\n    this.mover = height;\r\n    this.crash = false;\r\n  }\r\n  move = () => {\r\n    this.crash = true;\r\n    this.mover = this.y - this.gap;\r\n    if (this.mover > -this.height) {\r\n      this.mover = -this.height\r\n    }\r\n  }\r\n  update = (ctx: CanvasRenderingContext2D) => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x, this.y + this.start);\r\n    ctx.lineTo(this.x, this.y + this.height);\r\n    ctx.lineWidth = this.width * 0.85;\r\n    ctx.strokeStyle = 'black';\r\n    ctx.lineCap = 'round';\r\n    ctx.stroke();\r\n    ctx.beginPath();\r\n    ctx.moveTo(this.x, this.y + this.start);\r\n    ctx.lineTo(this.x, this.y + this.height);\r\n    ctx.lineWidth = this.width * 0.2;\r\n    ctx.strokeStyle = 'white';\r\n    ctx.stroke();\r\n    if (this.crash) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.x, this.y + this.start);\r\n      ctx.lineTo(this.x, this.y - this.mover);\r\n      ctx.lineWidth = this.width * 0.2;\r\n      ctx.strokeStyle = 'red';\r\n      ctx.stroke();\r\n    }\r\n    if (this.hit) {\r\n      ctx.beginPath();\r\n      ctx.moveTo(this.x, this.y + this.start);\r\n      ctx.lineTo(this.x, this.y - this.hit);\r\n      ctx.lineWidth = this.width * 0.25;\r\n      ctx.strokeStyle = this.color;\r\n      ctx.stroke();\r\n    }\r\n    if (this.crash && !this.hit) {\r\n      this.color = 'red';\r\n    }\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y + this.start, this.r * 1.4, 0, 2 * Math.PI);\r\n    ctx.fillStyle = 'black';\r\n    ctx.fill()\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y + this.start, this.r, 0, 2 * Math.PI);\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill()\r\n    ctx.font = 'bold ' + this.r * 1.3 + 'px arial';\r\n    ctx.textAlign = 'center';\r\n    ctx.textBaseline = 'middle';\r\n    ctx.fillStyle = 'black';\r\n    ctx.fillText(this.text, this.x, this.y + this.start + 1);\r\n  }\r\n}\r\ninterface IExerciseNote {\r\n  x: number,\r\n  y: number,\r\n  r: number,\r\n  note: string;\r\n  pitch: number;\r\n  text?: string;\r\n  outline?: OutLine;\r\n}\r\nexport class ExerciseNote {\r\n  x: number;\r\n  y: number;\r\n  r: number;\r\n  note: string;\r\n  text?: string;\r\n  pitch: number;\r\n  color: string;\r\n  outline?: IOutLineProps;\r\n  constructor(props: Partial<IExerciseNote>) {\r\n    Object.assign(this, props);\r\n    this.color = \"white\"\r\n  }\r\n  update = (ctx: CanvasRenderingContext2D) => {\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);\r\n    ctx.fillStyle = \"rgba(0, 0, 0, 0.2)\";\r\n    ctx.fill();\r\n    ctx.beginPath();\r\n    ctx.arc(this.x, this.y, this.r * 0.6, 0, 2 * Math.PI);\r\n    ctx.fillStyle = this.color;\r\n    ctx.fill();\r\n    if (this.text) {\r\n      ctx.font = this.r * 2 + 'px arial';\r\n      ctx.textAlign = 'center';\r\n      ctx.textBaseline = 'middle';\r\n      ctx.fillStyle = \"black\";\r\n      ctx.fillText(this.text, this.x - this.r * 1.2, this.y);\r\n    }\r\n    if (this.outline) {\r\n      ctx.globalCompositeOperation = 'destination-over';\r\n      new OutLine(ctx, this.outline)\r\n      ctx.globalCompositeOperation = 'source-over';\r\n    }\r\n  }\r\n}\r\nexport interface IOutLineProps {\r\n  r: number,\r\n  x: number,\r\n  y: number\r\n}\r\nexport class OutLine {\r\n  constructor(ctx: CanvasRenderingContext2D, { r, x, y }: IOutLineProps) {\r\n    ctx.beginPath();\r\n    ctx.moveTo(x - r, y);\r\n    ctx.lineTo(x + r, y);\r\n    ctx.lineWidth = 0.5;\r\n    ctx.strokeStyle = \"black\";\r\n    ctx.stroke();\r\n  }\r\n}\r\n","import { INotePos } from \"../../_types/player.types\";\r\nimport { ExerciseNote, IOutLineProps } from \"./Canvas\";\r\n\r\nexport default class Notes {\r\n    public counter = 0\r\n    public tapSize: number\r\n    public spaceSize: number\r\n    private width: number;\r\n    private height: number;\r\n    private notePos: INotePos = {};\r\n    private fullNotes: ExerciseNote[] = [];\r\n    private context: CanvasRenderingContext2D;\r\n    constructor(canvas: HTMLCanvasElement) {\r\n        this.width = canvas.width;\r\n        this.height = canvas.height;\r\n        this.context = canvas.getContext(\"2d\")!;\r\n    }\r\n    assigner = (options: Partial<any>) => {\r\n        Object.assign(this, options);\r\n    }\r\n    playGame = (num: number, color: string) => {\r\n        this.clear();\r\n        this.updateFullSong(num, color)\r\n    }\r\n    clear = () => {\r\n        this.context.clearRect(0, 0, this.width, this.height);\r\n    }\r\n    drawNote = (showTrack: any[]) => {\r\n        const gap = this.spaceSize * 1.6;\r\n        let r = this.tapSize * 0.46;\r\n        r = this.spaceSize < 20 ? this.spaceSize * 0.42 : r;\r\n        let memo = \"K\";\r\n        let outline: IOutLineProps;\r\n        let noteMemo: { note: string, text: string }[] = [{ note: 'K', text: \"!\" }];\r\n        showTrack.forEach((n, i) => {\r\n            const x = gap + i * this.spaceSize;\r\n            const pitch = n.pitch + 36;\r\n            let y = this.notePos[pitch].pos;\r\n            let note = this.notePos[pitch].note;\r\n            let prevNote = this.notePos[pitch - 1];\r\n            let text;\r\n            if (note.length === 2) {\r\n                let prevState = noteMemo.find(o => o.note === note);\r\n                if (prevState) {\r\n                    text = prevState.text;\r\n                    note = prevState.note;\r\n                } else\r\n                    if (!prevNote.note.includes(memo) && i !== 0) {\r\n                        text = \"♯\";\r\n                        note = prevNote.note;\r\n                        y = prevNote.pos;\r\n                    } else {\r\n                        text = \"♭\";\r\n                    }\r\n                noteMemo.push({ note, text })\r\n            }\r\n            if (pitch === 81 || pitch === 60 || pitch === 61 || pitch === 40) {\r\n                outline = { r: r * 1.5, x, y }\r\n            }\r\n            if (pitch === 59 || pitch === 58) {\r\n                outline = { r: r * 1.2, x, y: this.notePos[60].pos }\r\n            }\r\n            memo = note;\r\n            const notes = new ExerciseNote({ x, y, r, pitch, text, note, outline });\r\n            notes.update(this.context);\r\n            this.fullNotes.push(notes)\r\n        });\r\n    }\r\n    resetGame() {\r\n        this.clear();\r\n        this.fullNotes.forEach(note => {\r\n            note.color = \"white\";\r\n            note.update(this.context);\r\n        })\r\n    }\r\n    updateFullSong = (num: number, color: string) => {\r\n        this.fullNotes.forEach((note, i) => {\r\n            if (i === num)\r\n                note.color = color;\r\n            if (i === num - 1)\r\n                note.color = \"green\";\r\n            note.update(this.context);\r\n        });\r\n    }\r\n};","import MidiState from \"../../_helpers/midiContext\";\r\nimport { BackMover, MusicLine, LessonNote } from \"./Canvas\";\r\nimport { IPianoSizes } from \"../../_types/player.types\";\r\n\r\nexport default class Game {\r\n  public counter = 0;\r\n  public tapSize: number = 32;\r\n  public songLength: number = 17;\r\n  private gap: number;\r\n  private margin: number = 128;\r\n  private width: number;\r\n  private height: number;\r\n  private notes: LessonNote[] = [];\r\n  private image: HTMLImageElement;\r\n  private backMover: BackMover[] = [];\r\n  private barNotes: LessonNote[][] = [];\r\n  private fullNotes: LessonNote[] = [];\r\n  private context: CanvasRenderingContext2D;\r\n  constructor(canvas: HTMLCanvasElement) {\r\n    this.image = new Image();\r\n    this.width = canvas.width;\r\n    this.height = canvas.height;\r\n    this.context = canvas.getContext(\"2d\")!;\r\n  }\r\n  assigner = (options: Partial<any>) => {\r\n    Object.assign(this, options);\r\n  }\r\n  playGame = (y: number) => {\r\n    this.clear();\r\n    this.updateBacks(y)\r\n    this.updateNotes(y)\r\n  }\r\n  clear = () => {\r\n    this.context.clearRect(0, 0, this.width, this.height);\r\n  }\r\n  pitchName = (pitch: number) => {\r\n    let n = pitch % 12;\r\n    let t = \"C\";\r\n    if (n === 1) {\r\n      t = \"Db\";\r\n    }\r\n    if (n === 2) {\r\n      t = \"D\";\r\n    }\r\n    if (n === 3) {\r\n      t = \"Eb\";\r\n    }\r\n    if (n === 4) {\r\n      t = \"E\";\r\n    }\r\n    if (n === 5) {\r\n      t = \"F\";\r\n    }\r\n    if (n === 6) {\r\n      t = \"Gb\";\r\n    }\r\n    if (n === 7) {\r\n      t = \"G\";\r\n    }\r\n    if (n === 8) {\r\n      t = \"Ab\";\r\n    }\r\n    if (n === 9) {\r\n      t = \"A\";\r\n    }\r\n    if (n === 10) {\r\n      t = \"Bb\";\r\n    }\r\n    if (n === 11) {\r\n      t = \"B\";\r\n    }\r\n    return \"\" + t;\r\n  }\r\n  drawImage = () => {\r\n    const myLine = document.createElement(\"canvas\").getContext(\"2d\")!;\r\n    myLine.canvas.width = this.width;\r\n    myLine.canvas.height = this.height;\r\n    myLine.save();\r\n    Array.from(Array(17), (_, i) => i).forEach((_, v) => {\r\n      const lineWidth =\r\n        v % 16 === 0\r\n          ? 1.5\r\n          : v % 8 === 0\r\n            ? 1.2\r\n            : v % 4 === 0\r\n              ? 1\r\n              : v % 2 === 0\r\n                ? 0.8\r\n                : 0.5;\r\n      const strokeStyle =\r\n        v % 16 === 0\r\n          ? \"black\"\r\n          : v % 8 === 0\r\n            ? \"black\"\r\n            : v % 4 === 0\r\n              ? \"rgba(0,0,0,0.5)\"\r\n              : v % 2 === 0\r\n                ? \"rgba(0,0,0,0.5)\"\r\n                : \"rgba(0,0,0,0.2)\";\r\n      const yPos = v * this.tapSize;\r\n      const line = new MusicLine({\r\n        width: this.width,\r\n        color: strokeStyle,\r\n        x: 0,\r\n        y: yPos,\r\n        lw: lineWidth,\r\n      });\r\n      line.draw(myLine);\r\n    });\r\n    this.image.src = myLine.canvas.toDataURL(\"image/png\");\r\n    let firstLine: BackMover;\r\n    this.image.onload = () => {\r\n      if (!firstLine) {\r\n        firstLine = new BackMover(0, this.height, this.margin);\r\n        firstLine.update(this.context, this.image);\r\n      }\r\n    };\r\n  }\r\n  drawNote = (showTrack: any[], notePos: IPianoSizes[]) => {\r\n    const tap = this.tapSize;\r\n    Array.from(Array(this.songLength), (_, i) => i).forEach(m => {\r\n      const r = notePos[1].width;\r\n      const y = tap * (16 * m);\r\n      this.barNotes[m] = [];\r\n      showTrack.forEach((p) => {\r\n        if (p.beat >= m * 16) {\r\n          if (p.beat < (m + 1) * 16) {\r\n            const yy = y + tap * (p.beat % 16);\r\n            const cc = notePos[p.pitch].center;\r\n            const le = yy + tap * p.length;\r\n            const note = new LessonNote({\r\n              width: r,\r\n              height: le,\r\n              color: \"yellow\",\r\n              x: cc,\r\n              y: yy,\r\n              end: le + this.height * 3,\r\n              text: this.pitchName(p.pitch),\r\n              note: p.pitch + 36,\r\n              gap: this.gap,\r\n            });\r\n            this.barNotes[m].push(note);\r\n            this.fullNotes.push(note);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n  drawBack = () => {\r\n    this.backMover = [];\r\n    for (let i = 0; i < 3; i++) {\r\n      this.backMover.push(new BackMover(i, this.height, this.margin));\r\n    }\r\n  }\r\n  pushNote = (num?: number) => {\r\n    if (num) this.counter = num;\r\n    if (\r\n      this.barNotes[this.counter] &&\r\n      this.barNotes[this.counter].length > 0\r\n    ) {\r\n      this.barNotes[this.counter].forEach((g) => {\r\n        this.notes.push(g);\r\n      });\r\n    }\r\n    if (this.songLength > this.counter + 3)\r\n      this.backMover.push(new BackMover(this.counter + 3, this.height, this.margin));\r\n    this.counter++;\r\n  }\r\n  updateNotes = (y: number) => {\r\n    this.notes.forEach((note, i) => {\r\n      note.y = y;\r\n      note.update(this.context);\r\n      if (note.end < y) {\r\n        this.notes.splice(i, 1);\r\n        // missing notes\r\n        // if (!note.hit)\r\n        // \tthis.score.push([note.note, 'miss'])\r\n      }\r\n      if (this.gap - note.y <= note.start) {\r\n        let hit: string;\r\n        MidiState.touchedKeys.forEach((touch) => {\r\n          if (note.note === touch.note) {\r\n            if (\r\n              touch.y > note.beg - this.tapSize &&\r\n              touch.y < note.beg + this.tapSize\r\n            ) {\r\n              note.hit = y - this.gap + this.tapSize * 0.1;\r\n              if (\r\n                touch.y - this.tapSize * 0.3 <= note.beg &&\r\n                touch.y + this.tapSize * 0.3 >= note.beg\r\n              ) {\r\n                hit = \"perfect\";\r\n                note.color = \"green\";\r\n              } else if (touch.y > note.beg) {\r\n                hit = \"late\";\r\n                note.color = \"purple\";\r\n              } else if (touch.y < note.beg) {\r\n                hit = \"early\";\r\n                note.color = \"orange\";\r\n              }\r\n              if (!touch.hit) {\r\n                touch[\"hit\"] = hit;\r\n                MidiState.score.push([note.note, touch.hit]);\r\n              }\r\n            }\r\n          }\r\n        });\r\n        note.move();\r\n      }\r\n    });\r\n  }\r\n  updateBacks = (y: number) => {\r\n    this.backMover.forEach((back, i) => {\r\n      back.y = y;\r\n      back.update(this.context, this.image);\r\n      if (back.y > back.end) {\r\n        this.backMover.splice(i, 1);\r\n      }\r\n    });\r\n  }\r\n  updateFullSong = (y: number) => {\r\n    this.clear();\r\n    Array.from(Array(this.songLength), (_, i) => i).forEach((_, m) => {\r\n      this.context.drawImage(this.image, 0, Math.floor(y - m * this.image.height - this.tapSize * 4));\r\n    });\r\n    this.fullNotes.forEach(note => {\r\n      note.y = y;\r\n      note.update(this.context);\r\n    });\r\n  }\r\n};","import { ICanvas, IDetails, INeededTrack, INoteDraw, IPianoSizes } from \"../../_types/player.types\";\r\nimport { WebAudioFontChannel, WebAudioFontPlayer } from \"./WebAudio\";\r\nimport MidiState from \"../../_helpers/midiContext\";\r\nimport { FingersClass } from \"../Game/Canvas\";\r\nimport Notes from \"../Game/Notes\";\r\nimport Game from \"../Game/Game\";\r\nimport Song from \"./Song\";\r\n\r\nexport class Melodition {\r\n\r\n    public game?: Game;\r\n    public notes?: Notes;\r\n    public master?: WebAudioFontChannel;\r\n    public player?: WebAudioFontPlayer;\r\n    public song?: Song;\r\n    public songDetails: IDetails;\r\n    public loaded: boolean = false;\r\n    public onAir: boolean = false;\r\n    public score: any[] = [];\r\n    public handRefs: any = [];\r\n    public seekBar?: { changeSeeker: (v: number) => void };\r\n    public keyRefs: SVGGElement[] = [];\r\n    public canvasSize?: ICanvas;\r\n    public pianoSize?: IPianoSizes[];\r\n    public seekValue: number = 0;\r\n    public songLength = 272;\r\n    public tapSize = 32;\r\n    public loading = true;\r\n    public playMode = false;\r\n    public noteMode = false;\r\n    public TrackID = 0;\r\n    public tempo = 120;\r\n    public zaribTempo = 1;\r\n    public fingerNotes: any = {};\r\n    public drumInfo: any[] = [];\r\n    public trackInfo: any[] = [];\r\n    public storeDrums: any[] = [];\r\n    public storeTracks: any[] = [];\r\n    public storeFingers: any[] = [];\r\n    public equalizer: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    public drumVolumes: number[] = [70, 70, 70, 70, 70, 70, 70, 70];\r\n    public noteInfo: INoteDraw;\r\n    public neededTracks: INeededTrack[]\r\n    private firstDelay!: NodeJS.Timeout;\r\n    private tickID!: NodeJS.Timeout;\r\n    private currentBeat = 0;\r\n    private tickerDelay = 1;\r\n    private tickerStep = 0;\r\n    private animeFrame = 0;\r\n    private nextWhen = 0;\r\n    private nextBeat = 0;\r\n    private sentWhen = 0;\r\n    private yPos = 0;\r\n    private anime: number[] = [];\r\n    private finger: FingersClass[] = [];\r\n    private midiKeys: any[] = [];\r\n    private trainNotes: FingersClass[] = [];\r\n    constructor(options: Partial<any>) {\r\n        Object.assign(this, options);\r\n        console.log(this);\r\n    }\r\n    assigner(options: Partial<any>) {\r\n        Object.assign(this, options);\r\n        console.log(options);\r\n    }\r\n    drawNote = (canvas: HTMLCanvasElement) => {\r\n        this.noteMode = true;\r\n        this.notes = new Notes(canvas);\r\n        this.notes.assigner({ ...this.noteInfo });\r\n        // needed track should be seperate from drawgame because of first delay\r\n        this.notes.drawNote(this.neededTracks);\r\n        this.stopReset();\r\n    }\r\n    drawGame = (canvas: HTMLCanvasElement) => {\r\n        this.game = new Game(canvas);\r\n        this.game.assigner({\r\n            tapSize: this.tapSize,\r\n            songLength: Math.round(this.songLength / 16),\r\n            gap: this.tapSize * 12,\r\n            margin: this.tapSize * 4\r\n        })\r\n        this.game.clear();\r\n        this.game.drawImage();\r\n        if (this.pianoSize) {\r\n            this.game.drawNote(this.neededTracks, this.pianoSize);\r\n        }\r\n    }\r\n    startPlay = () => {\r\n        if (this.onAir || !this.loaded) {\r\n            console.log(\"on air already\");\r\n            return;\r\n        }\r\n        this.score = [];\r\n        this.yPos = 0;\r\n        this.resetNodeValues();\r\n        this.nextBeat = 0;\r\n        this.nextWhen = 0;\r\n        this.game?.assigner({ counter: 0 })\r\n        if (this.player?.audioContext.state === \"suspended\") {\r\n            console.log(\"audioContext.resume\");\r\n            this.player?.audioContext.resume();\r\n        }\r\n        this.onAir = true;\r\n        const beatDur = ((4 * 60) / (this.tempo * this.zaribTempo)) * 1000;\r\n        this.firstDelay = setTimeout(() => {\r\n            this.playAllTracks(0.03);\r\n        }, beatDur);\r\n        this.queueNextBeats();\r\n        this.onAir = true;\r\n        if (this.playMode) {\r\n            this.game?.drawBack();\r\n            this.game?.pushNote();\r\n            this.animeFrame = requestAnimationFrame(this.moveSVG);\r\n        } else {\r\n            this.stopReset()\r\n            this.animeFrame = requestAnimationFrame(this.moveFingers);\r\n        }\r\n    }\r\n    stopPlay = () => {\r\n        if (!this.onAir || !this.loaded) {\r\n            console.log(\"Not On Air\");\r\n            return;\r\n        }\r\n        this.onAir = false;\r\n        if (!this.playMode) this.stopReset();\r\n        document.getElementById(\"play-button\")?.click();\r\n        clearTimeout(this.firstDelay);\r\n        this.stopAllTracks();\r\n        cancelAnimationFrame(this.animeFrame);\r\n        clearTimeout(this.tickID);\r\n        this.player?.cancelQueue();\r\n    }\r\n    stopReset = () => {\r\n        if (this.notes) {\r\n            this.notes.resetGame();\r\n        }\r\n        this.finger.forEach((fin, i) => {\r\n            fin.hide()\r\n        });\r\n        this.seekValue = this.currentBeat - 1;\r\n        this.yPos = 0;\r\n        this.anime = [];\r\n        this.finger = [];\r\n        if (!this.onAir) this.training();\r\n    }\r\n    training = () => {\r\n        this.finger.forEach(note => {\r\n            if (note?.showing) note.hide();\r\n        });\r\n        if (this.yPos >= this.neededTracks.length) {\r\n            this.stopReset();\r\n            return\r\n        }\r\n        if (this.noteMode) this.seekMove(this.yPos * 5.3333);\r\n        const next = Number(Object.keys(this.fingerNotes)[this.yPos]);\r\n        this.anime.push(next);\r\n        this.pushFinger();\r\n        this.trainNotes = []\r\n        this.finger.forEach(o => { if (o.num === this.yPos - 1) this.trainNotes.push(o) });\r\n        this.trainNotes.forEach(note => {\r\n            note.show();\r\n            this.notes?.playGame(note.num, note.color);\r\n        });\r\n    }\r\n    stopAllTracks = () => {\r\n        if (this.song) {\r\n            this.song.stop();\r\n            this.song.elapsedTimeSinceStart = 0;\r\n        }\r\n    }\r\n    playAllTracks = (startTime: number) => {\r\n        if (this.song) {\r\n            this.song.setMasterVolume(100);\r\n            this.song.play(startTime);\r\n            for (let i = 0; i < this.song.getNbTracks(); i++) { }\r\n        }\r\n    }\r\n    rakeMouseWheel = (e: number | React.WheelEvent) => {\r\n        if (!this.onAir && this.playMode) {\r\n            if (typeof e !== \"number\")\r\n                this.seekValue = this.seekValue + (e.deltaY > 0 ? -1 : 1);\r\n            else\r\n                this.seekValue = e;\r\n            this.seekValue = this.seekValue < 0 ? 0 :\r\n                this.seekValue > this.songLength ? this.songLength : this.seekValue\r\n            const seekY = this.seekValue * this.tapSize;\r\n            this.seekMove(this.seekValue);\r\n            this.seekSVG(seekY);\r\n        }\r\n    }\r\n    seekMove = (value: number) => {\r\n        if (this.seekBar && value < this.songLength) {\r\n            this.seekBar.changeSeeker(value);\r\n        }\r\n    }\r\n    seekSVG = (y: number) => {\r\n        if (!this.onAir) {\r\n            this.game?.updateFullSong(y)\r\n        }\r\n    }\r\n    resetNodeValues = () => {\r\n        for (let i = 0; i < this.trackInfo.length; i++) {\r\n            this.trackInfo[i].audioNode.gain.setValueAtTime(\r\n                this.trackInfo[i].volume / 100,\r\n                0\r\n            );\r\n        }\r\n        for (let i = 0; i < this.drumInfo.length; i++) {\r\n            this.drumInfo[i].audioNode.gain.setValueAtTime(\r\n                this.drumVolumes[i] / 100,\r\n                0\r\n            );\r\n        }\r\n        this.master?.band32.gain.setValueAtTime(this.equalizer[0], 0);\r\n        this.master?.band64.gain.setValueAtTime(this.equalizer[1], 0);\r\n        this.master?.band128.gain.setValueAtTime(this.equalizer[2], 0);\r\n        this.master?.band256.gain.setValueAtTime(this.equalizer[3], 0);\r\n        this.master?.band512.gain.setValueAtTime(this.equalizer[4], 0);\r\n        this.master?.band1k.gain.setValueAtTime(this.equalizer[5], 0);\r\n        this.master?.band2k.gain.setValueAtTime(this.equalizer[6], 0);\r\n        this.master?.band4k.gain.setValueAtTime(this.equalizer[7], 0);\r\n        this.master?.band8k.gain.setValueAtTime(this.equalizer[8], 0);\r\n        this.master?.band16k.gain.setValueAtTime(this.equalizer[9], 0);\r\n    }\r\n    queueNextBeats = () => {\r\n        if (this.onAir && this.player) {\r\n            let beat16duration = (4 * 60) / (this.tempo * this.zaribTempo) / 16;\r\n            let t = this.player.audioContext.currentTime;\r\n            if (t && this.nextWhen < t) {\r\n                this.nextWhen = t;\r\n            }\r\n            while (this.sentWhen < t + beat16duration) {\r\n                this.sendNextBeats(this.nextWhen, this.nextBeat, this.nextBeat);\r\n                this.nextWhen = this.sentWhen + beat16duration;\r\n                if (this.nextBeat > this.songLength + 1) {\r\n                    this.stopPlay();\r\n                }\r\n                this.nextBeat = this.nextBeat + 1;\r\n                if (this.playMode && (this.nextBeat / 16) % 1 === 0) {\r\n                    this.game?.pushNote();\r\n                }\r\n                this.seekMove(this.nextBeat);\r\n                if (!this.playMode) this.pushFinger();\r\n            }\r\n            let wait = 0.5 * 1000 * (this.nextWhen - t);\r\n            this.tickerStep++;\r\n            if (this.tickerStep >= this.tickerDelay) {\r\n                this.tickerStep = 0;\r\n            }\r\n            this.tickID = setTimeout(() => {\r\n                this.queueNextBeats();\r\n            }, wait);\r\n        }\r\n    }\r\n    sendNextBeats = (when: number, startBeat: number, endBeat: number) => {\r\n        this.sentWhen = when;\r\n        let N = (4 * 60) / (this.tempo * this.zaribTempo);\r\n        let beatLen = (1 / 16) * N;\r\n        this.currentBeat = startBeat;\r\n        this.storeDrums.forEach((hit) => {\r\n            if (hit.beat >= startBeat && hit.beat <= endBeat) {\r\n                let channel = this.findDrumInfoHand(hit.drum);\r\n                let zones = channel.sound;\r\n                if (channel.info && window[channel.info.variable]) {\r\n                    zones = window[channel.info.variable];\r\n                }\r\n                let r = 1.0 - Math.random() * 0.2;\r\n                this.player?.queueWaveTable({\r\n                    target: channel.audioNode,\r\n                    preset: zones,\r\n                    when: when + beatLen * (hit.beat - startBeat),\r\n                    pitches: channel.pitch,\r\n                    duration: channel.length,\r\n                    volume: r * channel.volumeRatio,\r\n                });\r\n            }\r\n        })\r\n        let notes = [];\r\n        for (let i = 0; i < this.storeTracks.length; i++) {\r\n            let note = this.storeTracks[i];\r\n            if (note.beat >= startBeat && note.beat <= endBeat) {\r\n                notes.push(note);\r\n            }\r\n        }\r\n        notes.sort(function (n1, n2) {\r\n            let r = 1000 * (n1.beat - n2.beat) + 100000 * (n1.track - n2.track);\r\n            if (n1.beat === n2.beat) {\r\n                r = r + (n1.pitch - n2.pitch);\r\n            }\r\n            return r;\r\n        });\r\n        let currentBeat = -1;\r\n        let currentTrack = -1;\r\n        let inChordCount = 0;\r\n        notes.forEach(note => {\r\n            let channel = this.trackInfo.find(trc => trc.nn === note.track);\r\n            if (note.beat !== currentBeat || note.track !== currentTrack) {\r\n                currentBeat = note.beat;\r\n                currentTrack = note.track;\r\n                inChordCount = 0;\r\n                if (note.track === this.TrackID) {\r\n                    this.anime.push(note.beat);\r\n                }\r\n            }\r\n            let zones = channel.sound;\r\n            if (channel.info && window[channel.info.variable]) {\r\n                zones = window[channel.info.variable];\r\n            }\r\n            let shift = [\r\n                {\r\n                    when: note.length * beatLen,\r\n                    pitch: note.shift + channel.octave * 12 + note.pitch,\r\n                },\r\n            ];\r\n            let r = 0.6 - Math.random() * 0.2;\r\n            this.player?.queueWaveTable({\r\n                target: channel.audioNode,\r\n                preset: zones,\r\n                when:\r\n                    when +\r\n                    beatLen * (note.beat - startBeat) +\r\n                    inChordCount * channel.inChordDelay,\r\n                pitches: channel.octave * 12 + note.pitch,\r\n                duration: 0.075 + note.length * beatLen,\r\n                volume: r * channel.volumeRatio,\r\n                slides: shift,\r\n            });\r\n            inChordCount++;\r\n        })\r\n    }\r\n    pushFinger = () => {\r\n        const fingers = this.storeFingers[this.TrackID];\r\n        if (this.anime.length !== 0) {\r\n            this.anime.forEach((nBeat) => {\r\n                const beat = this.fingerNotes[nBeat];\r\n                if (beat) {\r\n                    let handArr: any = {};\r\n                    for (let fin in fingers) {\r\n                        if (fingers[fin][nBeat]) {\r\n                            const hand = this.handRefs[fin];\r\n                            const key = fingers[fin][nBeat];\r\n                            if (hand)\r\n                                handArr[key] = { finger: hand, hand: hand.getAttribute(\"class\") };\r\n                        }\r\n                    }\r\n                    beat.forEach((b: any) => {\r\n                        const len = b.length;\r\n                        const pitch = b.pitch + 36;\r\n                        const note = this.keyRefs[pitch];\r\n                        if (handArr[pitch]) {\r\n                            this.finger.push(new FingersClass({\r\n                                note: note,\r\n                                len: len,\r\n                                hand: handArr[pitch],\r\n                                beat: this.currentBeat,\r\n                                num: this.yPos,\r\n                                pitch\r\n                            }));\r\n                        }\r\n                    });\r\n                    this.yPos++\r\n                }\r\n                this.anime = this.anime.filter((item) => item !== nBeat);\r\n            });\r\n        }\r\n    }\r\n    moveFingers = () => {\r\n        if (this.onAir) {\r\n            this.finger.forEach(fin => {\r\n                if (fin.showing && this.currentBeat > fin.end) {\r\n                    fin.hide();\r\n                } else if (fin.showing) {\r\n                    if (this.noteMode && this.notes) {\r\n                        this.notes.playGame(fin.num, \"green\");\r\n                    }\r\n                    fin.show();\r\n                }\r\n            });\r\n            requestAnimationFrame(this.moveFingers);\r\n        }\r\n    }\r\n    moveSVG = () => {\r\n        if (this.player && this.game && this.onAir) {\r\n            const N = (4 * 60) / (this.tempo * this.zaribTempo);\r\n            const beatLen = (1 / 16) * N;\r\n            let diff =\r\n                this.nextBeat +\r\n                (this.player.audioContext.currentTime - this.nextWhen) / beatLen;\r\n            while (diff < 0) {\r\n                diff = diff + this.songLength;\r\n            }\r\n            if (diff > this.songLength) {\r\n                diff = this.songLength;\r\n            }\r\n            if (this.game.counter < 4 && diff > 100) diff = 0;\r\n            let y = Math.round(diff * this.tapSize);\r\n            this.yPos = y;\r\n            this.game.playGame(y);\r\n            requestAnimationFrame(this.moveSVG);\r\n        }\r\n    }\r\n    findTrackInfoHand = (): any => {\r\n        let track = null\r\n        this.trackInfo.forEach(trc => {\r\n            if (trc.nn === this.TrackID) {\r\n                track = trc;\r\n            }\r\n        });\r\n        return track;\r\n    }\r\n    findDrumInfoHand = (order: number): any => {\r\n        let drum = null\r\n        this.drumInfo.forEach(drm => {\r\n            if (drm.id === order) {\r\n                drum = drm;\r\n            }\r\n        });\r\n        return drum;\r\n    }\r\n    midiNoteOn = (pitch: any, velocity: number) => {\r\n        if (velocity === 0) {\r\n            this.midiNoteOff(pitch);\r\n        } else {\r\n            this.midiNoteOff(pitch);\r\n            MidiState.touchedKeys.push({ note: pitch, y: this.yPos });\r\n            let channel = this.findTrackInfoHand();\r\n            if (channel) {\r\n                let zones = channel.sound;\r\n                if (channel.info && window[channel.info.variable]) {\r\n                    zones = window[channel.info.variable];\r\n                }\r\n                this.midiKeys[pitch] = this.player?.queueWaveTable({\r\n                    target: channel.audioNode,\r\n                    preset: zones,\r\n                    when: 0,\r\n                    pitches: pitch,\r\n                    duration: 10,\r\n                    volume: velocity,\r\n                });\r\n                const elem: any = this.keyRefs[pitch];\r\n                if (elem) {\r\n                    let bColor = \"red\";\r\n                    if (!this.onAir) {\r\n                        const cColor = elem.children.back.getAttribute(\"fill\");\r\n                        if (cColor !== \"white\" && cColor !== \"black\") {\r\n                            bColor = \"green\";\r\n                            if (this.trainNotes.every(o =>\r\n                                MidiState.touchedKeys.some(p => p.note === o.pitch)\r\n                            )) this.training();\r\n                        }\r\n                    }\r\n                    elem.children.back.style.fill = bColor;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    midiNoteOff = (pitch: any) => {\r\n        if (this.midiKeys[pitch]) {\r\n            this.midiKeys[pitch].cancel();\r\n            MidiState.touchedKeys.forEach((_, i) => {\r\n                const notePitch = MidiState.touchedKeys[i].note;\r\n                if (pitch === notePitch) MidiState.touchedKeys.splice(i, 1);\r\n            });\r\n        }\r\n        if (this.keyRefs[pitch]) {\r\n            const elem: any = this.keyRefs[pitch];\r\n            if (elem) {\r\n                elem.children.back.style.fill = \"\";\r\n            }\r\n        }\r\n    }\r\n}","export default class Song {\n  volume = 1;\n  tracks: any[] = [];\n  analyserNode: any;\n  sampleNodes: any[] = [];\n  masterVolumeNode: any;\n  paused: boolean = true;\n  muted: boolean = false;\n  loopEndTime: any = null;\n  loopMode: boolean = false;\n  loopStartTime: any = null;\n  audioContext: AudioContext;\n  trackVolumeNodes: any[] = [];\n  elapsedTimeSinceStart: any = null;\n  decodedAudioBuffers: AudioBuffer[] | [] = [];\n\n  constructor(audioContext: AudioContext) {\n    this.audioContext = audioContext;\n    this.masterVolumeNode = this.audioContext.createGain();\n    this.analyserNode = this.audioContext.createAnalyser();\n  }\n  addTrack = (data: any) => {\n    this.tracks.push({\n      decodedBuffer: data.buffer,\n      peaks: null,\n      volume: data.vol,\n      panning: 0,\n      muted: false,\n      solo: false,\n      sampleNode: null,\n      volumeNode: null,\n    });\n  };\n  loadBuffer = async (data: any) => {\n    const song = this;\n    await this.audioContext.decodeAudioData(\n      data.buffer,\n      (buffer) => {\n        if (!buffer) {\n          Promise.reject(\"error decoding file data: \");\n        }\n        this.decodedAudioBuffers = [...this.decodedAudioBuffers, buffer];\n        this.addTrack({ buffer, vol: data.vol })\n        Promise.resolve(song);\n      },\n      (error) => Promise.reject(error)\n    );\n  };\n  buildGraph = () => {\n    var sources = [];\n    for (var i = 0; i < this.decodedAudioBuffers.length; i++) {\n      var sample = this.decodedAudioBuffers[i];\n      sources[i] = this.audioContext.createBufferSource();\n      sources[i].buffer = sample;\n      this.trackVolumeNodes[i] = this.audioContext.createGain();\n      if (this.trackVolumeNodes[i]) {\n        this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n      }\n      sources[i].connect(this.trackVolumeNodes[i]);\n      this.trackVolumeNodes[i].connect(this.masterVolumeNode);\n      this.masterVolumeNode.connect(this.analyserNode);\n      this.analyserNode.connect(this.audioContext.destination);\n    }\n    this.sampleNodes = sources;\n  };\n  play = (startTime: number) => {\n    this.buildGraph();\n    this.setTrackVolumesDependingOnMuteSoloStatus();\n    this.elapsedTimeSinceStart = startTime;\n    this.sampleNodes.forEach((s) => {\n      s.start(0, startTime);\n    });\n    this.paused = false;\n  };\n  stop = () => {\n    if (this.paused === true) return;\n    this.sampleNodes.forEach((s) => {\n      s.stop(0);\n    });\n    this.paused = true;\n  };\n  pause = () => {\n    if (!this.paused) {\n      this.stop();\n    } else {\n      this.play(this.elapsedTimeSinceStart);\n    }\n  };\n  setVolume = (value: number) => {\n    this.volume = value;\n    this.masterVolumeNode.gain.value = value;\n  };\n  setMasterVolume = (val: number) => {\n    var fraction;\n    if (val === undefined) {\n      fraction = 80 / 100;\n    } else {\n      fraction = val / 100;\n    }\n    this.setVolume(fraction * fraction);\n  };\n  setVolumeOfTrack = (value: number, trackNumber: number) => {\n    if (this.trackVolumeNodes[trackNumber] !== undefined) {\n      this.trackVolumeNodes[trackNumber].gain.value = value;\n      this.tracks[trackNumber].volume = value;\n    }\n  };\n  getUrlsOfTracks = () => {\n    var urls: string[] = [];\n    this.tracks.forEach((track) => {\n      urls.push(track.url);\n    });\n    return urls;\n  };\n  getDuration = () => {\n    if (this.decodedAudioBuffers !== undefined) {\n      let dur = 0;\n      for (let i = 0; i < this.decodedAudioBuffers.length; i++) {\n        if (dur < this.decodedAudioBuffers[i].duration)\n          dur = this.decodedAudioBuffers[i].duration;\n      }\n      return dur;\n    }\n    return undefined;\n  };\n  getNbTracks = () => {\n    return this.tracks.length;\n  };\n  toggleLoopMode = () => {\n    this.loopMode = !this.loopMode;\n  };\n  toggleMute = () => {\n    this.muted = !this.muted;\n    if (this.muted) {\n      this.masterVolumeNode.gain.value = 0;\n    } else {\n      this.masterVolumeNode.gain.value = this.volume;\n    }\n  };\n  togglePause = () => {\n    this.paused = !this.paused;\n  };\n  setTrackVolumesDependingOnMuteSoloStatus = () => {\n    var thereIsSolo = false;\n    var nbTracks = this.getNbTracks();\n    for (var i = 0; i < nbTracks; i++) {\n      if (this.tracks[i].solo) {\n        thereIsSolo = true;\n        break;\n      }\n    }\n    if (thereIsSolo) {\n      for (let i = 0; i < nbTracks; i++) {\n        if (this.tracks[i].solo) {\n          this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n        } else {\n          this.trackVolumeNodes[i].gain.value = 0;\n        }\n      }\n      return;\n    }\n    for (let i = 0; i < nbTracks; i++) {\n      if (this.trackVolumeNodes[i] !== undefined) {\n        if (this.tracks[i].muted) {\n          this.trackVolumeNodes[i].gain.value = 0;\n        } else {\n          this.trackVolumeNodes[i].gain.value = this.tracks[i].volume;\n        }\n      }\n    }\n  };\n}","import { IQueue, IEnvelope, ISetup } from \"../../_types/player.types\";\r\n\r\nexport class WebAudioFontChannel {\r\n  audioContext: AudioContext;\r\n  input: any;\r\n  band32: any;\r\n  band64: any;\r\n  band128: any;\r\n  band256: any;\r\n  band512: any;\r\n  band1k: any;\r\n  band2k: any;\r\n  band4k: any;\r\n  band8k: any;\r\n  band16k: any;\r\n  output: any;\r\n  constructor(audioContext: AudioContext) {\r\n    console.log(\"WebAudioFont Channel v1.04\");\r\n    this.audioContext = audioContext;\r\n    this.input = this.audioContext.createDynamicsCompressor();\r\n    this.input.threshold.setValueAtTime(-3, 0); // = -3; //-50\r\n    this.input.knee.setValueAtTime(30, 0); //40\r\n    this.input.ratio.setValueAtTime(12, 0); //12\r\n    this.input.attack.setValueAtTime(0.05, 0); //0\r\n    this.input.release.setValueAtTime(0.08, 0); //0.25\r\n    this.band32 = this.bandEqualizer(this.input, 32);\r\n    this.band64 = this.bandEqualizer(this.band32, 64);\r\n    this.band128 = this.bandEqualizer(this.band64, 128);\r\n    this.band256 = this.bandEqualizer(this.band128, 256);\r\n    this.band512 = this.bandEqualizer(this.band256, 512);\r\n    this.band1k = this.bandEqualizer(this.band512, 1024);\r\n    this.band2k = this.bandEqualizer(this.band1k, 2048);\r\n    this.band4k = this.bandEqualizer(this.band2k, 4096);\r\n    this.band8k = this.bandEqualizer(this.band4k, 8192);\r\n    this.band16k = this.bandEqualizer(this.band8k, 16384);\r\n    this.output = audioContext.createGain();\r\n    this.band16k.connect(this.output);\r\n  }\r\n  bandEqualizer = (from: any, frequency: any) => {\r\n    var filter = this.audioContext.createBiquadFilter();\r\n    filter.frequency.setTargetAtTime(frequency, 0, 0.0001);\r\n    filter.type = \"peaking\";\r\n    filter.gain.setTargetAtTime(0, 0, 0.0001);\r\n    filter.Q.setTargetAtTime(1.0, 0, 0.0001);\r\n    from.connect(filter);\r\n    return filter;\r\n  };\r\n}\r\nexport class WebAudioFontLoader {\r\n  player: any;\r\n  cached: { filePath: any, variableName: any }[];\r\n  choosenInfos?: [number, number][];\r\n  drumKeyArray?: string[];\r\n  drumNamesArray?: string[];\r\n  instrumentKeyArray?: string[];\r\n  instrumentNamesArray?: string[];\r\n  constructor(player: WebAudioFontPlayer) {\r\n    console.log(\"WebAudioFont Loader v1.27\");\r\n    this.player = player;\r\n    this.cached = [];\r\n  }\r\n  startLoad = (filePath: string, variableName: any) => {\r\n    if (window[variableName]) {\r\n      return;\r\n    }\r\n    for (var i = 0; i < this.cached.length; i++) {\r\n      if (this.cached[i].variableName === variableName) {\r\n        return;\r\n      }\r\n    }\r\n    this.cached.push({\r\n      filePath: filePath,\r\n      variableName: variableName,\r\n    });\r\n    var r = document.createElement(\"script\");\r\n    r.setAttribute(\"type\", \"text/javascript\");\r\n    r.setAttribute(\"src\", filePath);\r\n    document.getElementsByTagName(\"head\")[0].appendChild(r);\r\n    this.decodeAfterLoading(variableName);\r\n  };\r\n  decodeAfterLoading = (variableName: any) => {\r\n    this.waitOrFinish(variableName, () => {\r\n      this.player.adjustPreset(window[variableName]);\r\n    });\r\n  };\r\n  waitOrFinish = (variableName: any, onFinish: () => void) => {\r\n    if (window[variableName]) {\r\n      onFinish();\r\n    } else {\r\n      var me = this;\r\n      setTimeout(function () {\r\n        me.waitOrFinish(variableName, onFinish);\r\n      }, 111);\r\n    }\r\n  };\r\n  loaded = (variableName: any) => {\r\n    if (!window[variableName]) {\r\n      return false;\r\n    }\r\n    var preset = window[variableName];\r\n    for (var i = 0; i < preset.zones.length; i++) {\r\n      if (!preset.zones[i].buffer) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  };\r\n  progress = () => {\r\n    if (this.cached.length > 0) {\r\n      for (var k = 0; k < this.cached.length; k++) {\r\n        if (!this.loaded(this.cached[k].variableName)) {\r\n          return k / this.cached.length;\r\n        }\r\n      }\r\n      return 1;\r\n    } else {\r\n      return 1;\r\n    }\r\n  };\r\n  waitLoad = (onFinish: () => void) => {\r\n    var me = this;\r\n    if (this.progress() >= 1) {\r\n      onFinish();\r\n    } else {\r\n      setTimeout(function () {\r\n        me.waitLoad(onFinish);\r\n      }, 333);\r\n    }\r\n  };\r\n  instrumentTitles = () => {\r\n    if (!this.instrumentNamesArray) {\r\n      var insNames = [];\r\n      insNames[0] = \"Acoustic Grand Piano: Piano\";\r\n      insNames[1] = \"Bright Acoustic Piano: Piano\";\r\n      insNames[2] = \"Electric Grand Piano: Piano\";\r\n      insNames[3] = \"Honky-tonk Piano: Piano\";\r\n      insNames[4] = \"Electric Piano 1: Piano\";\r\n      insNames[5] = \"Electric Piano 2: Piano\";\r\n      insNames[6] = \"Harpsichord: Piano\";\r\n      insNames[7] = \"Clavinet: Piano\";\r\n      insNames[8] = \"Celesta: Chromatic Percussion\";\r\n      insNames[9] = \"Glockenspiel: Chromatic Percussion\";\r\n      insNames[10] = \"Music Box: Chromatic Percussion\";\r\n      insNames[11] = \"Vibraphone: Chromatic Percussion\";\r\n      insNames[12] = \"Marimba: Chromatic Percussion\";\r\n      insNames[13] = \"Xylophone: Chromatic Percussion\";\r\n      insNames[14] = \"Tubular Bells: Chromatic Percussion\";\r\n      insNames[15] = \"Dulcimer: Chromatic Percussion\";\r\n      insNames[16] = \"Drawbar Organ: Organ\";\r\n      insNames[17] = \"Percussive Organ: Organ\";\r\n      insNames[18] = \"Rock Organ: Organ\";\r\n      insNames[19] = \"Church Organ: Organ\";\r\n      insNames[20] = \"Reed Organ: Organ\";\r\n      insNames[21] = \"Accordion: Organ\";\r\n      insNames[22] = \"Harmonica: Organ\";\r\n      insNames[23] = \"Tango Accordion: Organ\";\r\n      insNames[24] = \"Acoustic Guitar (nylon): Guitar\";\r\n      insNames[25] = \"Acoustic Guitar (steel): Guitar\";\r\n      insNames[26] = \"Electric Guitar (jazz): Guitar\";\r\n      insNames[27] = \"Electric Guitar (clean): Guitar\";\r\n      insNames[28] = \"Electric Guitar (muted): Guitar\";\r\n      insNames[29] = \"Overdriven Guitar: Guitar\";\r\n      insNames[30] = \"Distortion Guitar: Guitar\";\r\n      insNames[31] = \"Guitar Harmonics: Guitar\";\r\n      insNames[32] = \"Acoustic Bass: Bass\";\r\n      insNames[33] = \"Electric Bass (finger): Bass\";\r\n      insNames[34] = \"Electric Bass (pick): Bass\";\r\n      insNames[35] = \"Fretless Bass: Bass\";\r\n      insNames[36] = \"Slap Bass 1: Bass\";\r\n      insNames[37] = \"Slap Bass 2: Bass\";\r\n      insNames[38] = \"Synth Bass 1: Bass\";\r\n      insNames[39] = \"Synth Bass 2: Bass\";\r\n      insNames[40] = \"Violin: Strings\";\r\n      insNames[41] = \"Viola: Strings\";\r\n      insNames[42] = \"Cello: Strings\";\r\n      insNames[43] = \"Contrabass: Strings\";\r\n      insNames[44] = \"Tremolo Strings: Strings\";\r\n      insNames[45] = \"Pizzicato Strings: Strings\";\r\n      insNames[46] = \"Orchestral Harp: Strings\";\r\n      insNames[47] = \"Timpani: Strings\";\r\n      insNames[48] = \"String Ensemble 1: Ensemble\";\r\n      insNames[49] = \"String Ensemble 2: Ensemble\";\r\n      insNames[50] = \"Synth Strings 1: Ensemble\";\r\n      this.instrumentNamesArray = insNames;\r\n    }\r\n    return this.instrumentNamesArray;\r\n  };\r\n  instrumentKeys = () => {\r\n    if (!this.instrumentKeyArray) {\r\n      this.instrumentKeyArray = [\r\n        \"0000_Aspirin_sf2_file\",\r\n        \"0001_FluidR3_GM_sf2_file\",\r\n        \"0002_GeneralUserGS_sf2_file\",\r\n        \"0003_GeneralUserGS_sf2_file\",\r\n        \"0010_Aspirin_sf2_file\",\r\n        \"0011_Aspirin_sf2_file\",\r\n        \"0012_GeneralUserGS_sf2_file\",\r\n        \"0020_Aspirin_sf2_file\",\r\n        \"0021_Aspirin_sf2_file\",\r\n        \"0022_Aspirin_sf2_file\",\r\n        \"0030_Aspirin_sf2_file\",\r\n        \"0031_Aspirin_sf2_file\",\r\n        \"0040_Aspirin_sf2_file\",\r\n        \"0041_FluidR3_GM_sf2_file\",\r\n        \"0042_GeneralUserGS_sf2_file\",\r\n        \"0043_GeneralUserGS_sf2_file\",\r\n        \"0044_GeneralUserGS_sf2_file\",\r\n        \"0045_GeneralUserGS_sf2_file\",\r\n        \"0046_GeneralUserGS_sf2_file\",\r\n        \"0050_Aspirin_sf2_file\",\r\n        \"0051_FluidR3_GM_sf2_file\",\r\n        \"0052_GeneralUserGS_sf2_file\",\r\n        \"0053_GeneralUserGS_sf2_file\",\r\n        \"0054_GeneralUserGS_sf2_file\",\r\n        \"0060_Aspirin_sf2_file\",\r\n        \"0061_Aspirin_sf2_file\",\r\n        \"0062_GeneralUserGS_sf2_file\",\r\n        \"0070_Aspirin_sf2_file\",\r\n        \"0071_GeneralUserGS_sf2_file\",\r\n        \"0080_Aspirin_sf2_file\",\r\n        \"0080_Chaos_sf2_file\",\r\n        \"0081_FluidR3_GM_sf2_file\",\r\n        \"0090_Aspirin_sf2_file\",\r\n        \"0091_SoundBlasterOld_sf2\",\r\n        \"0100_Aspirin_sf2_file\",\r\n        \"0101_GeneralUserGS_sf2_file\",\r\n        \"0110_Aspirin_sf2_file\",\r\n        \"0111_FluidR3_GM_sf2_file\",\r\n        \"0120_Aspirin_sf2_file\",\r\n        \"0121_FluidR3_GM_sf2_file\",\r\n        \"0130_Aspirin_sf2_file\",\r\n        \"0131_FluidR3_GM_sf2_file\",\r\n        \"0140_Aspirin_sf2_file\",\r\n        \"0141_FluidR3_GM_sf2_file\",\r\n        \"0142_GeneralUserGS_sf2_file\",\r\n        \"0143_GeneralUserGS_sf2_file\",\r\n        \"0150_Aspirin_sf2_file\",\r\n        \"0151_FluidR3_GM_sf2_file\",\r\n        \"0160_Aspirin_sf2_file\",\r\n        \"0161_Aspirin_sf2_file\",\r\n        \"0170_Aspirin_sf2_file\",\r\n        \"0171_FluidR3_GM_sf2_file\",\r\n        \"0172_FluidR3_GM_sf2_file\",\r\n        \"0180_Aspirin_sf2_file\",\r\n        \"0181_Aspirin_sf2_file\",\r\n        \"0190_Aspirin_sf2_file\",\r\n        \"0191_Aspirin_sf2_file\",\r\n        \"0200_Aspirin_sf2_file\",\r\n        \"0201_Aspirin_sf2_file\",\r\n        \"0210_Aspirin_sf2_file\",\r\n        \"0211_Aspirin_sf2_file\",\r\n        \"0212_GeneralUserGS_sf2_file\",\r\n        \"0220_Aspirin_sf2_file\",\r\n        \"0221_FluidR3_GM_sf2_file\",\r\n        \"0230_Aspirin_sf2_file\",\r\n        \"0231_FluidR3_GM_sf2_file\",\r\n        \"0232_FluidR3_GM_sf2_file\",\r\n        \"0233_FluidR3_GM_sf2_file\",\r\n        \"0240_Aspirin_sf2_file\",\r\n        \"0241_GeneralUserGS_sf2_file\",\r\n        \"0241_JCLive_sf2_file\",\r\n        \"0242_JCLive_sf2_file\",\r\n        \"0243_JCLive_sf2_file\",\r\n        \"0253_Acoustic_Guitar_sf2_file\",\r\n        \"0250_Aspirin_sf2_file\",\r\n        \"0251_Acoustic_Guitar_sf2_file\",\r\n        \"0252_Acoustic_Guitar_sf2_file\",\r\n        \"0253_Acoustic_Guitar_sf2_file\",\r\n        \"0254_Acoustic_Guitar_sf2_file\",\r\n        \"0255_GeneralUserGS_sf2_file\",\r\n        \"0260_Aspirin_sf2_file\",\r\n        \"0261_GeneralUserGS_sf2_file\",\r\n        \"0262_Stratocaster_sf2_file\",\r\n        \"0270_Aspirin_sf2_file\",\r\n        \"0271_GeneralUserGS_sf2_file\",\r\n        \"0280_Aspirin_sf2_file\",\r\n        \"0281_Aspirin_sf2_file\",\r\n        \"0282_FluidR3_GM_sf2_file\",\r\n        \"0283_GeneralUserGS_sf2_file\",\r\n        \"0290_Aspirin_sf2_file\",\r\n        \"0291_Aspirin_sf2_file\",\r\n        \"0292_Aspirin_sf2_file\",\r\n        \"0300_Aspirin_sf2_file\",\r\n        \"0301_Aspirin_sf2_file\",\r\n        \"0302_Aspirin_sf2_file\",\r\n        \"0303_Aspirin_sf2_file\",\r\n        \"0304_Aspirin_sf2_file\",\r\n        \"0310_Aspirin_sf2_file\",\r\n        \"0311_FluidR3_GM_sf2_file\",\r\n        \"0320_Aspirin_sf2_file\",\r\n        \"0321_GeneralUserGS_sf2_file\",\r\n        \"0322_GeneralUserGS_sf2_file\",\r\n        \"0330_Aspirin_sf2_file\",\r\n        \"0331_GeneralUserGS_sf2_file\",\r\n        \"0332_GeneralUserGS_sf2_file\",\r\n        \"0340_Aspirin_sf2_file\",\r\n        \"0341_Aspirin_sf2_file\",\r\n        \"0350_Aspirin_sf2_file\",\r\n        \"0351_GeneralUserGS_sf2_file\",\r\n        \"0360_Aspirin_sf2_file\",\r\n        \"0361_GeneralUserGS_sf2_file\",\r\n        \"0370_Aspirin_sf2_file\",\r\n        \"0371_GeneralUserGS_sf2_file\",\r\n        \"0372_GeneralUserGS_sf2_file\",\r\n        \"0380_Aspirin_sf2_file\",\r\n        \"0381_FluidR3_GM_sf2_file\",\r\n        \"0382_FluidR3_GM_sf2_file\",\r\n        \"0383_GeneralUserGS_sf2_file\",\r\n        \"0384_GeneralUserGS_sf2_file\",\r\n        \"0385_GeneralUserGS_sf2_file\",\r\n        \"0386_GeneralUserGS_sf2_file\",\r\n        \"0387_GeneralUserGS_sf2_file\",\r\n        \"0390_Aspirin_sf2_file\",\r\n        \"0391_FluidR3_GM_sf2_file\",\r\n        \"0392_FluidR3_GM_sf2_file\",\r\n        \"0393_GeneralUserGS_sf2_file\",\r\n        \"0400_Aspirin_sf2_file\",\r\n        \"0401_Aspirin_sf2_file\",\r\n        \"0402_GeneralUserGS_sf2_file\",\r\n        \"0410_Aspirin_sf2_file\",\r\n        \"0410_Chaos_sf2_file\",\r\n        \"0411_FluidR3_GM_sf2_file\",\r\n        \"0420_Aspirin_sf2_file\",\r\n        \"0421_FluidR3_GM_sf2_file\",\r\n        \"0430_Aspirin_sf2_file\",\r\n        \"0431_FluidR3_GM_sf2_file\",\r\n        \"0440_Aspirin_sf2_file\",\r\n        \"0441_GeneralUserGS_sf2_file\",\r\n        \"0442_GeneralUserGS_sf2_file\",\r\n        \"0450_Aspirin_sf2_file\",\r\n        \"0451_FluidR3_GM_sf2_file\",\r\n        \"0460_Aspirin_sf2_file\",\r\n        \"0461_FluidR3_GM_sf2_file\",\r\n        \"0470_Aspirin_sf2_file\",\r\n        \"0471_FluidR3_GM_sf2_file\",\r\n        \"0480_Aspirin_sf2_file\",\r\n        \"0480_SoundBlasterOld_sf2\",\r\n        \"04810_GeneralUserGS_sf2_file\",\r\n        \"0481_Aspirin_sf2_file\",\r\n        \"0481_FluidR3_GM_sf2_file\",\r\n        \"0481_GeneralUserGS_sf2_file\",\r\n        \"0482_Aspirin_sf2_file\",\r\n        \"0482_GeneralUserGS_sf2_file\",\r\n        \"0483_GeneralUserGS_sf2_file\",\r\n        \"0484_GeneralUserGS_sf2_file\",\r\n        \"0485_GeneralUserGS_sf2_file\",\r\n        \"0486_GeneralUserGS_sf2_file\",\r\n        \"0487_GeneralUserGS_sf2_file\",\r\n        \"0488_GeneralUserGS_sf2_file\",\r\n        \"0489_GeneralUserGS_sf2_file\",\r\n        \"0490_Aspirin_sf2_file\",\r\n        \"0490_GeneralUserGS_sf2_file\",\r\n        \"0491_GeneralUserGS_sf2_file\",\r\n        \"0492_GeneralUserGS_sf2_file\",\r\n        \"0500_Aspirin_sf2_file\",\r\n      ];\r\n    }\r\n    return this.instrumentKeyArray;\r\n  };\r\n  instrumentInfo = (n: number) => {\r\n    var key = this.instrumentKeys()[n];\r\n    var p = 1 * Number(key.substr(0, 3));\r\n    return {\r\n      variable: \"_tone_\" + key,\r\n      url: \"https://surikov.github.io/webaudiofontdata/sound/\" + key + \".js\",\r\n      title: this.instrumentTitles()[p],\r\n    };\r\n  };\r\n  findInstrument = (program: number) => {\r\n    if (!this.choosenInfos) {\r\n      this.choosenInfos = [\r\n        [1, 2], //Accoustic Grand Piano\r\n        [2, 14], //Bright Accoustic Piano\r\n        [3, 25], //Electric Grand Piano\r\n        [4, 37], //Honky-Tonk Piano\r\n        [5, 48], //Electric Pino 1\r\n        [6, 58], //Electric Piano 2\r\n        [7, 70], //HarpsiChord Piano\r\n        [8, 83], //Cravinet\r\n        [9, 91], //Celesta\r\n        [10, 99], //Glockenspiel\r\n        [11, 107], //Music Box\r\n        [12, 118], //Vibraphone\r\n        [13, 127], // Marimba\r\n        [14, 136], // Xylophone\r\n        [15, 144], // Tubular Bells\r\n        [16, 152], // Dulcimer\r\n        [17, 164], // Drawbar Organ\r\n        [18, 170], // Percussive Organ\r\n        [19, 183], //Rock Organ\r\n        [20, 194], // Church Organ\r\n        [21, 205], //Reed Organ\r\n        [22, 215], //Accordion\r\n        [23, 228], //\r\n        [24, 241], //\r\n        [25, 254], //\r\n        [26, 263], //\r\n        [27, 277], //\r\n        [28, 296], //\r\n        [29, 308], //\r\n        [30, 319], //\r\n        [31, 350], //\r\n        [32, 356], //\r\n        [33, 369], //\r\n        [34, 379], //\r\n        [35, 385], //\r\n        [36, 399], // Fretless Bass\r\n        [37, 403], // Slap Bass 1\r\n        [38, 412], // Slap Bass 2\r\n        [39, 421], // Synth Bass 1\r\n        [40, 438], // Synth Bass 2\r\n        [41, 452], // Violin\r\n        [42, 461], // Viola\r\n        [43, 467], // Cello\r\n        [44, 477], // Contrabass\r\n        [45, 488], // Tremolo Strings\r\n        [46, 493], // Pizzicato Strings\r\n        [47, 501], // Orchestral Harp\r\n        [48, 511], // Timpani\r\n        [49, 518], // String Ensemble 1\r\n        [50, 547], //String Ensemble 2\r\n      ];\r\n    }\r\n    for (var i = 0; i < this.instrumentKeys().length; i++) {\r\n      if (program === 1 * Number(this.instrumentKeys()[i].substring(0, 3))) {\r\n        return i;\r\n      }\r\n    }\r\n    console.log(\"program\", program, \"not found\");\r\n    return 0;\r\n  };\r\n  drumTitles = () => {\r\n    if (!this.drumNamesArray) {\r\n      var drumNames = [];\r\n      drumNames[35] = \"Bass Drum 2\";\r\n      drumNames[36] = \"Bass Drum 1\";\r\n      drumNames[37] = \"Side Stick/Rimshot\";\r\n      drumNames[38] = \"Snare Drum 1\";\r\n      drumNames[39] = \"Hand Clap\";\r\n      drumNames[40] = \"Snare Drum 2\";\r\n      drumNames[41] = \"Low Tom 2\";\r\n      drumNames[42] = \"Closed Hi-hat\";\r\n      drumNames[43] = \"Low Tom 1\";\r\n      drumNames[44] = \"Pedal Hi-hat\";\r\n      drumNames[45] = \"Mid Tom 2\";\r\n      drumNames[46] = \"Open Hi-hat\";\r\n      drumNames[47] = \"Mid Tom 1\";\r\n      drumNames[48] = \"High Tom 2\";\r\n      drumNames[49] = \"Crash Cymbal 1\";\r\n      drumNames[50] = \"High Tom 1\";\r\n      drumNames[51] = \"Ride Cymbal 1\";\r\n      drumNames[52] = \"Chinese Cymbal\";\r\n      drumNames[53] = \"Ride Bell\";\r\n      drumNames[54] = \"Tambourine\";\r\n      drumNames[55] = \"Splash Cymbal\";\r\n      drumNames[56] = \"Cowbell\";\r\n      drumNames[57] = \"Crash Cymbal 2\";\r\n      drumNames[58] = \"Vibra Slap\";\r\n      drumNames[59] = \"Ride Cymbal 2\";\r\n      drumNames[60] = \"High Bongo\";\r\n      drumNames[61] = \"Low Bongo\";\r\n      drumNames[62] = \"Mute High Conga\";\r\n      drumNames[63] = \"Open High Conga\";\r\n      drumNames[64] = \"Low Conga\";\r\n      drumNames[65] = \"High Timbale\";\r\n      drumNames[66] = \"Low Timbale\";\r\n      drumNames[67] = \"High Agogo\";\r\n      drumNames[68] = \"Low Agogo\";\r\n      drumNames[69] = \"Cabasa\";\r\n      drumNames[70] = \"Maracas\";\r\n      drumNames[71] = \"Short Whistle\";\r\n      drumNames[72] = \"Long Whistle\";\r\n      drumNames[73] = \"Short Guiro\";\r\n      drumNames[74] = \"Long Guiro\";\r\n      drumNames[75] = \"Claves\";\r\n      drumNames[76] = \"High Wood Block\";\r\n      drumNames[77] = \"Low Wood Block\";\r\n      drumNames[78] = \"Mute Cuica\";\r\n      drumNames[79] = \"Open Cuica\";\r\n      drumNames[80] = \"Mute Triangle\";\r\n      drumNames[81] = \"Open Triangle\";\r\n      this.drumNamesArray = drumNames;\r\n    }\r\n    return this.drumNamesArray;\r\n  };\r\n  drumKeys = () => {\r\n    if (!this.drumKeyArray) {\r\n      this.drumKeyArray = [\r\n        \"35_0_SBLive_sf2\",\r\n        \"36_0_SBLive_sf2\",\r\n        \"37_0_SBLive_sf2\",\r\n        \"38_0_SBLive_sf2\",\r\n        \"39_0_SBLive_sf2\",\r\n        \"40_0_SBLive_sf2\",\r\n        \"41_0_SBLive_sf2\",\r\n        \"42_0_SBLive_sf2\",\r\n        \"43_0_SBLive_sf2\",\r\n        \"44_0_SBLive_sf2\",\r\n        \"45_0_SBLive_sf2\",\r\n        \"46_0_SBLive_sf2\",\r\n        \"47_0_SBLive_sf2\",\r\n        \"48_0_SBLive_sf2\",\r\n        \"49_0_SBLive_sf2\",\r\n        \"50_0_SBLive_sf2\",\r\n        \"51_0_SBLive_sf2\",\r\n        \"52_0_SBLive_sf2\",\r\n        \"53_0_SBLive_sf2\",\r\n        \"54_0_SBLive_sf2\",\r\n        \"55_0_SBLive_sf2\",\r\n        \"56_0_SBLive_sf2\",\r\n        \"57_0_SBLive_sf2\",\r\n        \"58_0_SBLive_sf2\",\r\n        \"59_0_SBLive_sf2\",\r\n        \"60_0_SBLive_sf2\",\r\n        \"61_0_SBLive_sf2\",\r\n        \"62_0_SBLive_sf2\",\r\n        \"63_0_SBLive_sf2\",\r\n        \"64_0_SBLive_sf2\",\r\n        \"65_0_SBLive_sf2\",\r\n        \"66_0_SBLive_sf2\",\r\n        \"67_0_SBLive_sf2\",\r\n        \"68_0_SBLive_sf2\",\r\n        \"69_0_SBLive_sf2\",\r\n        \"70_0_SBLive_sf2\",\r\n        \"71_0_SBLive_sf2\",\r\n        \"72_0_SBLive_sf2\",\r\n        \"73_0_SBLive_sf2\",\r\n        \"74_0_SBLive_sf2\",\r\n        \"75_0_SBLive_sf2\",\r\n        \"76_0_SBLive_sf2\",\r\n        \"77_0_SBLive_sf2\",\r\n        \"78_0_SBLive_sf2\",\r\n        \"79_0_SBLive_sf2\",\r\n        \"80_0_SBLive_sf2\",\r\n        \"81_0_SBLive_sf2\",\r\n      ];\r\n    }\r\n    return this.drumKeyArray;\r\n  };\r\n  drumInfo = (n: number) => {\r\n    var key = this.drumKeys()[n];\r\n    var p = 1 * Number(key.substr(0, 2));\r\n    return {\r\n      variable: \"_drum_\" + key,\r\n      url: \"https://surikov.github.io/webaudiofontdata/sound/128\" + key + \".js\",\r\n      pitch: p,\r\n      title: this.drumTitles()[p],\r\n    };\r\n  };\r\n  findDrum = (nn: number) => {\r\n    for (var i = 0; i < this.drumKeys().length; i++) {\r\n      if (nn === 1 * Number(this.drumKeys()[i].substring(0, 2))) {\r\n        return i;\r\n      }\r\n    }\r\n    return 0;\r\n  };\r\n}\r\nexport class WebAudioFontPlayer {\r\n  audioContext: AudioContext;\r\n  envelopes: any[];\r\n  loader: any;\r\n  onCacheFinish: any;\r\n  onCacheProgress: any;\r\n  afterTime: number;\r\n  nearZero: number;\r\n  constructor(audioContext: AudioContext) {\r\n    this.audioContext = audioContext;\r\n    this.envelopes = [];\r\n    this.loader = new WebAudioFontLoader(this);\r\n    this.onCacheFinish = null;\r\n    this.onCacheProgress = null;\r\n    this.afterTime = 0.05;\r\n    this.nearZero = 0.000001;\r\n  }\r\n  createChannel = () => {\r\n    return new WebAudioFontChannel(this.audioContext);\r\n  };\r\n  createReverberator = () => {\r\n    return new WebAudioFontReverberator(this.audioContext);\r\n  };\r\n  limitVolume = (volume: number) => {\r\n    if (volume) {\r\n      volume = 1.0 * volume;\r\n    } else {\r\n      volume = 0.5;\r\n    }\r\n    return volume;\r\n  };\r\n  queueChord = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    for (var i = 0; i < pitches.length; i++) {\r\n      this.queueWaveTable({\r\n        target,\r\n        preset,\r\n        when,\r\n        pitches: pitches[i],\r\n        duration,\r\n        volume: volume - Math.random() * 0.01,\r\n        slides\r\n      });\r\n    }\r\n  };\r\n  queueStrumUp = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    pitches.sort((a: number, b: number) => a - b);\r\n    this.queueStrum({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides\r\n    });\r\n  };\r\n  queueStrumDown = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    pitches.sort((a: number, b: number) => a - b);\r\n    this.queueStrum({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides\r\n    });\r\n  };\r\n  queueStrum = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    if (when < this.audioContext.currentTime) {\r\n      when = this.audioContext.currentTime;\r\n    }\r\n    for (var i = 0; i < pitches.length; i++) {\r\n      this.queueWaveTable({\r\n        target,\r\n        preset,\r\n        when: when + i * 0.01,\r\n        pitches: pitches[i],\r\n        duration,\r\n        volume: volume - Math.random() * 0.01,\r\n        slides\r\n      });\r\n      volume = 0.9 * volume;\r\n    }\r\n  };\r\n  queueSnap = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    volume = this.limitVolume(volume);\r\n    volume = 1.5 * (volume || 1.0);\r\n    duration = 0.05;\r\n    this.queueChord({\r\n      target,\r\n      preset,\r\n      when,\r\n      pitches,\r\n      duration,\r\n      volume,\r\n      slides\r\n    });\r\n  };\r\n  queueWaveTable = ({\r\n    target,\r\n    preset,\r\n    when,\r\n    pitches: pitch,\r\n    duration,\r\n    volume,\r\n    slides\r\n  }: IQueue) => {\r\n    if (this.audioContext.state === \"suspended\") {\r\n      console.log(\"audioContext.resume\");\r\n      this.audioContext.resume();\r\n    }\r\n    volume = this.limitVolume(volume);\r\n    var zone = this.findZone(preset, pitch);\r\n    if (!zone.buffer) {\r\n      console.log(\"empty buffer \", zone);\r\n      return;\r\n    }\r\n    var baseDetune =\r\n      zone.originalPitch - 100.0 * zone.coarseTune - zone.fineTune;\r\n    var playbackRate = 1.0 * Math.pow(2, (100.0 * pitch - baseDetune) / 1200.0);\r\n    // var sampleRatio = zone.sampleRate / audioContext.sampleRate;\r\n    var startWhen = when;\r\n    if (startWhen < this.audioContext.currentTime) {\r\n      startWhen = this.audioContext.currentTime;\r\n    }\r\n    var waveDuration = duration + this.afterTime;\r\n    var loop = true;\r\n    if (zone.loopStart < 1 || zone.loopStart >= zone.loopEnd) {\r\n      loop = false;\r\n    }\r\n    if (!loop) {\r\n      if (waveDuration > zone.buffer.duration / playbackRate) {\r\n        waveDuration = zone.buffer.duration / playbackRate;\r\n      }\r\n    }\r\n    var envelope = this.findEnvelope({\r\n      target,\r\n      when: startWhen,\r\n      duration: waveDuration\r\n    });\r\n    this.setupEnvelope({\r\n      envelope,\r\n      zone,\r\n      volume,\r\n      startWhen,\r\n      waveDuration,\r\n      duration\r\n    });\r\n    envelope.audioBufferSourceNode = this.audioContext.createBufferSource();\r\n    envelope.audioBufferSourceNode.playbackRate.setValueAtTime(playbackRate, 0);\r\n    if (slides) {\r\n      if (slides.length > 0) {\r\n        envelope.audioBufferSourceNode.playbackRate.setValueAtTime(\r\n          playbackRate,\r\n          when\r\n        );\r\n        for (var i = 0; i < slides.length; i++) {\r\n          var newPlaybackRate =\r\n            1.0 * Math.pow(2, (100.0 * slides[i].pitch - baseDetune) / 1200.0);\r\n          var newWhen = when + slides[i].when;\r\n          envelope.audioBufferSourceNode.playbackRate.linearRampToValueAtTime(\r\n            newPlaybackRate,\r\n            newWhen\r\n          );\r\n        }\r\n      }\r\n    }\r\n    envelope.audioBufferSourceNode.buffer = zone.buffer;\r\n    if (loop) {\r\n      envelope.audioBufferSourceNode.loop = true;\r\n      envelope.audioBufferSourceNode.loopStart =\r\n        zone.loopStart / zone.sampleRate + zone.delay;\r\n      envelope.audioBufferSourceNode.loopEnd =\r\n        zone.loopEnd / zone.sampleRate + zone.delay;\r\n    } else {\r\n      envelope.audioBufferSourceNode.loop = false;\r\n    }\r\n    envelope.audioBufferSourceNode.connect(envelope);\r\n    envelope.audioBufferSourceNode.start(startWhen, zone.delay);\r\n    envelope.audioBufferSourceNode.stop(startWhen + waveDuration);\r\n    envelope.when = startWhen;\r\n    envelope.duration = waveDuration;\r\n    envelope.pitch = pitch;\r\n    envelope.preset = preset;\r\n    return envelope;\r\n  };\r\n  noZeroVolume = (n: number) => {\r\n    if (n > this.nearZero) {\r\n      return n;\r\n    } else {\r\n      return this.nearZero;\r\n    }\r\n  };\r\n  setupEnvelope = ({\r\n    envelope,\r\n    zone,\r\n    volume,\r\n    startWhen: when,\r\n    waveDuration: sampleDuration,\r\n    duration\r\n  }: IEnvelope) => {\r\n    envelope.gain.setValueAtTime(\r\n      this.noZeroVolume(0),\r\n      this.audioContext.currentTime\r\n    );\r\n    var lastTime = 0;\r\n    var lastVolume = 0;\r\n    var ahdsr = zone.ahdsr;\r\n    if (sampleDuration < duration + this.afterTime) {\r\n      duration = sampleDuration - this.afterTime;\r\n    }\r\n    if (ahdsr) {\r\n      if (!(ahdsr.length > 0)) {\r\n        ahdsr = [\r\n          {\r\n            duration: 0,\r\n            volume: 1,\r\n          },\r\n          {\r\n            duration: 0.5,\r\n            volume: 1,\r\n          },\r\n          {\r\n            duration: 1.5,\r\n            volume: 0.5,\r\n          },\r\n          {\r\n            duration: 3,\r\n            volume: 0,\r\n          },\r\n        ];\r\n      }\r\n    } else {\r\n      ahdsr = [\r\n        {\r\n          duration: 0,\r\n          volume: 1,\r\n        },\r\n        {\r\n          duration: duration,\r\n          volume: 1,\r\n        },\r\n      ];\r\n    }\r\n    envelope.gain.cancelScheduledValues(when);\r\n    envelope.gain.setValueAtTime(\r\n      this.noZeroVolume(ahdsr[0].volume * volume),\r\n      when\r\n    );\r\n    for (var i = 0; i < ahdsr.length; i++) {\r\n      if (ahdsr[i].duration > 0) {\r\n        if (ahdsr[i].duration + lastTime > duration) {\r\n          var r =\r\n            1 - (ahdsr[i].duration + lastTime - duration) / ahdsr[i].duration;\r\n          var n = lastVolume - r * (lastVolume - ahdsr[i].volume);\r\n          envelope.gain.linearRampToValueAtTime(\r\n            this.noZeroVolume(volume * n),\r\n            when + duration\r\n          );\r\n          break;\r\n        }\r\n        lastTime = lastTime + ahdsr[i].duration;\r\n        lastVolume = ahdsr[i].volume;\r\n        envelope.gain.linearRampToValueAtTime(\r\n          this.noZeroVolume(volume * lastVolume),\r\n          when + lastTime\r\n        );\r\n      }\r\n    }\r\n    envelope.gain.linearRampToValueAtTime(\r\n      this.noZeroVolume(0),\r\n      when + duration + this.afterTime\r\n    );\r\n  };\r\n  numValue = (aValue: number, defValue: number) => {\r\n    if (typeof aValue === \"number\") {\r\n      return aValue;\r\n    } else {\r\n      return defValue;\r\n    }\r\n  };\r\n  findEnvelope = ({ target, when, duration }: ISetup) => {\r\n    var envelope: any = null;\r\n    for (var i = 0; i < this.envelopes.length; i++) {\r\n      var e = this.envelopes[i];\r\n      if (\r\n        e.target === target &&\r\n        this.audioContext.currentTime > e.when + e.duration + 0.001\r\n      ) {\r\n        try {\r\n          e.audioBufferSourceNode.disconnect();\r\n          e.audioBufferSourceNode.stop(0);\r\n          e.audioBufferSourceNode = null;\r\n        } catch (x) {\r\n          //audioBufferSourceNode is dead already\r\n        }\r\n        envelope = e;\r\n        break;\r\n      }\r\n    }\r\n    if (!envelope) {\r\n      envelope = this.audioContext.createGain();\r\n      envelope.target = target;\r\n      envelope.connect(target);\r\n      envelope.cancel = () => {\r\n        if (envelope.when + envelope.duration > this.audioContext.currentTime) {\r\n          envelope.gain.cancelScheduledValues(0);\r\n          envelope.gain.setTargetAtTime(0.00001, this.audioContext.currentTime, 0.1);\r\n          envelope.when = this.audioContext.currentTime + 0.00001;\r\n          envelope.duration = 0;\r\n        }\r\n      };\r\n      this.envelopes.push(envelope);\r\n    }\r\n    return envelope;\r\n  };\r\n  adjustPreset = (preset: any) => {\r\n    for (var i = 0; i < preset.zones.length; i++) {\r\n      this.adjustZone(preset.zones[i]);\r\n    }\r\n  };\r\n  adjustZone = (zone: any) => {\r\n    if (zone.buffer) {\r\n      //\r\n    } else {\r\n      zone.delay = 0;\r\n      if (zone.sample) {\r\n        let decoded = atob(zone.sample);\r\n        zone.buffer = this.audioContext.createBuffer(\r\n          1,\r\n          decoded.length / 2,\r\n          zone.sampleRate\r\n        );\r\n        var float32Array = zone.buffer.getChannelData(0);\r\n        var b1, b2, n;\r\n        for (var i = 0; i < decoded.length / 2; i++) {\r\n          b1 = decoded.charCodeAt(i * 2);\r\n          b2 = decoded.charCodeAt(i * 2 + 1);\r\n          if (b1 < 0) {\r\n            b1 = 256 + b1;\r\n          }\r\n          if (b2 < 0) {\r\n            b2 = 256 + b2;\r\n          }\r\n          n = b2 * 256 + b1;\r\n          if (n >= 65536 / 2) {\r\n            n = n - 65536;\r\n          }\r\n          float32Array[i] = n / 65536.0;\r\n        }\r\n      } else {\r\n        if (zone.file) {\r\n          var datalen = zone.file.length;\r\n          var arraybuffer = new ArrayBuffer(datalen);\r\n          var view = new Uint8Array(arraybuffer);\r\n          let decoded = atob(zone.file);\r\n          var b;\r\n          for (let i = 0; i < decoded.length; i++) {\r\n            b = decoded.charCodeAt(i);\r\n            view[i] = b;\r\n          }\r\n          this.audioContext.decodeAudioData(arraybuffer, function (audioBuffer) {\r\n            zone.buffer = audioBuffer;\r\n          });\r\n        }\r\n      }\r\n      zone.loopStart = this.numValue(zone.loopStart, 0);\r\n      zone.loopEnd = this.numValue(zone.loopEnd, 0);\r\n      zone.coarseTune = this.numValue(zone.coarseTune, 0);\r\n      zone.fineTune = this.numValue(zone.fineTune, 0);\r\n      zone.originalPitch = this.numValue(zone.originalPitch, 6000);\r\n      zone.sampleRate = this.numValue(zone.sampleRate, 44100);\r\n      zone.sustain = this.numValue(zone.originalPitch, 0);\r\n    }\r\n  };\r\n  findZone = (preset: any, pitch: any) => {\r\n    var zone = null;\r\n    for (var i = preset.zones.length - 1; i >= 0; i--) {\r\n      zone = preset.zones[i];\r\n      if (zone.keyRangeLow <= pitch && zone.keyRangeHigh + 1 >= pitch) {\r\n        break;\r\n      }\r\n    }\r\n    try {\r\n      this.adjustZone(zone);\r\n    } catch (ex) {\r\n      console.log(\"adjustZone\", ex);\r\n    }\r\n    return zone;\r\n  };\r\n  cancelQueue = () => {\r\n    for (var i = 0; i < this.envelopes.length; i++) {\r\n      var e = this.envelopes[i];\r\n      e.gain.cancelScheduledValues(0);\r\n      e.gain.setValueAtTime(this.nearZero, this.audioContext.currentTime);\r\n      e.when = -1;\r\n      try {\r\n        e.audioBufferSourceNode.disconnect();\r\n      } catch (ex) {\r\n        console.log(ex);\r\n      }\r\n    }\r\n  };\r\n}\r\nexport class WebAudioFontReverberator {\r\n  audioContext: AudioContext;\r\n  input: any;\r\n  convolver: any\r\n  dry: any\r\n  wet: any\r\n  irrArrayBuffer: any\r\n  output: any\r\n  constructor(audioContext: AudioContext) {\r\n    console.log(\"WebAudioFont Reverberator v1.08\");\r\n    this.audioContext = audioContext;\r\n    this.input = this.audioContext.createBiquadFilter();\r\n    this.input.type = \"lowpass\";\r\n    this.input.frequency.setTargetAtTime(18000, 0, 0.0001);\r\n    this.convolver = null;\r\n    this.output = audioContext.createGain();\r\n    this.dry = audioContext.createGain();\r\n    this.dry.gain.setTargetAtTime(0.9, 0, 0.0001);\r\n    this.dry.connect(this.output);\r\n    this.wet = audioContext.createGain();\r\n    this.wet.gain.setTargetAtTime(0.5, 0, 0.0001);\r\n    this.input.connect(this.dry);\r\n    this.input.connect(this.wet);\r\n    import(\"./Reverbrator\").then(({ reverbrator }) => {\r\n      var irr = reverbrator;\r\n      var datalen = irr.length / 2;\r\n      this.irrArrayBuffer = new ArrayBuffer(datalen);\r\n      var view = new Uint8Array(this.irrArrayBuffer);\r\n      var decoded = atob(irr);\r\n      var b;\r\n      for (var i = 0; i < decoded.length; i++) {\r\n        b = decoded.charCodeAt(i);\r\n        view[i] = b;\r\n      }\r\n      this.audioContext.decodeAudioData(this.irrArrayBuffer, (audioBuffer) => {\r\n        this.convolver = audioContext.createConvolver();\r\n        this.convolver.buffer = audioBuffer;\r\n        this.wet.connect(this.convolver);\r\n        this.convolver.connect(this.output);\r\n        console.log(\"convolver audioBuffer\", audioBuffer);\r\n      });\r\n    })\r\n  }\r\n}\r\n","import Song from \"../plugin/Melodition/Song\";\r\nimport { WebAudioFontChannel, WebAudioFontPlayer, WebAudioFontReverberator } from \"../plugin/Melodition/WebAudio\";\r\nimport { ILesson } from \"../_types/lesson.types\";\r\nimport { INeededLine } from \"../_types/player.types\";\r\n\r\nconst zarib = [0, 0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2];\r\n\r\nconst AudioContextFunc = window.AudioContext || window.webkitAudioContext;\r\n\r\nconst audioContext = new AudioContextFunc();\r\nconst fontPlayer = new WebAudioFontPlayer(audioContext);\r\nconst master = new WebAudioFontChannel(audioContext);\r\n\r\nif (typeof window.orientation === \"undefined\") {\r\n    console.log(\"Melo WebAudioFontReverberator\");\r\n    const reverberator = new WebAudioFontReverberator(audioContext)\r\n    reverberator.output.connect(audioContext.destination);\r\n    master.output.connect(reverberator.input);\r\n} else {\r\n    console.log(\"skip WebAudioFontReverberator\");\r\n    master.output.connect(audioContext.destination);\r\n}\r\n\r\nexport class ResetPlayer {\r\n    player = fontPlayer;\r\n    master = master\r\n    song?: Song;\r\n    songDetails: IDetails;\r\n    loading = true;\r\n    onAir = false;\r\n    loaded = false;\r\n    playMode = false;\r\n    sL = 16;\r\n    TrackID = 0;\r\n    tempo = 120;\r\n    zaribTempo = 1;\r\n    neededLines: INeededLine\r\n    neededTracks: any[] = []\r\n    storeFingers: any[] = []\r\n    storeTracks: any[] = []\r\n    storeDrums: any[] = []\r\n    trackInfo: any[] = []\r\n    drumInfo: any[] = []\r\n    seekValue = 0\r\n    songs: { id: number, vol: number }[] = [];\r\n    songLength = 272;\r\n    tapSize = 32;\r\n    fingerNotes: any = {};\r\n    equalizer: number[] = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\r\n    drumVolumes: number[] = [70, 70, 70, 70, 70, 70, 70, 70];\r\n    constructor(options?: Partial<any>) {\r\n        Object.assign(this, options);\r\n        this.master.band32.gain.setValueAtTime(this.equalizer[0], 0);\r\n        this.master.band64.gain.setValueAtTime(this.equalizer[1], 0);\r\n        this.master.band128.gain.setValueAtTime(this.equalizer[2], 0);\r\n        this.master.band256.gain.setValueAtTime(this.equalizer[3], 0);\r\n        this.master.band512.gain.setValueAtTime(this.equalizer[4], 0);\r\n        this.master.band1k.gain.setValueAtTime(this.equalizer[5], 0);\r\n        this.master.band2k.gain.setValueAtTime(this.equalizer[6], 0);\r\n        this.master.band4k.gain.setValueAtTime(this.equalizer[7], 0);\r\n        this.master.band8k.gain.setValueAtTime(this.equalizer[8], 0);\r\n        this.master.band16k.gain.setValueAtTime(this.equalizer[9], 0);\r\n    }\r\n}\r\ninterface IDetails {\r\n    title: string,\r\n    id: number,\r\n}\r\nexport const lessonCompiler = async (info: ILesson): Promise<ResetPlayer | undefined> => {\r\n    const Melo = new ResetPlayer();\r\n    const content = JSON.parse(info.content);\r\n    Melo.songDetails = { id: info.id, title: info.title }\r\n    const dataString = content.song.content;\r\n    const fingers = content.fingers;\r\n    let neededInst: number[] = [];\r\n    let neededDrums: number[] = [];\r\n    try {\r\n        Melo.TrackID = content.track.id;\r\n        if (fingers) {\r\n            let storeFingers = storedFingersFunc(fingers);\r\n            Melo.storeFingers = { ...storeFingers };\r\n        }\r\n        const strings = dataString.split(\"-\");\r\n        Melo.tempo = parseInt(strings[0], 16);\r\n        Melo.sL = parseInt(strings[1]) + 1;\r\n        const step = parseInt(strings[2]);\r\n        Melo.zaribTempo = zarib[step];\r\n        for (let i = 0; i < 10; i++) {\r\n            let t = strings[5].substring(i * 2, i * 2 + 2);\r\n            Melo.equalizer[i] = parseInt(t, 16) - 10;\r\n        }\r\n\r\n        const cntD = strings[6].length / 7;\r\n        let storeDrums = storeDrumsFunc(cntD, strings[6]);\r\n        storeDrums.forEach((drm, index, self) => {\r\n            if (index === self.findIndex((t) => (\r\n                t.drum === drm.drum\r\n            ))) neededDrums.push(drm.drum)\r\n            Melo.storeDrums.push({\r\n                drum: drm.drum,\r\n                beat: drm.beat,\r\n            });\r\n        });\r\n\r\n        const cntT = strings[7].length / 10;\r\n        let storeTracks = storeTracksFunc(cntT, strings[7]);\r\n        let up = 24;\r\n        let down = 24;\r\n\r\n        storeTracks.forEach((trc, index, self) => {\r\n            if (index === self.findIndex((t) => (\r\n                t.track === trc.track\r\n            ))) neededInst.push(trc.track)\r\n            Melo.storeTracks.push({\r\n                ...trc,\r\n                beat: trc.beat,\r\n            });\r\n            if (trc.track === Melo.TrackID) {\r\n                Melo.neededTracks.push({ ...trc, beat: trc.beat - 12 })\r\n                if (trc.pitch > up) {\r\n                    up = trc.pitch;\r\n                }\r\n                if (trc.pitch < down) {\r\n                    down = trc.pitch;\r\n                }\r\n                const beat = trc.beat;\r\n                if (Melo.fingerNotes[beat]) {\r\n                    Melo.fingerNotes[beat].push({ pitch: trc.pitch, length: trc.length });\r\n                } else {\r\n                    Melo.fingerNotes[beat] = [];\r\n                    Melo.fingerNotes[beat].push({ pitch: trc.pitch, length: trc.length });\r\n                }\r\n            }\r\n        });\r\n\r\n        Melo.neededLines = {\r\n            up: up + 36,\r\n            number: up - down, down: down + 36,\r\n            notes: Melo.neededTracks.length\r\n        }\r\n\r\n        neededDrums.forEach((id, i) => {\r\n            let drum = {\r\n                audioNode: audioContext.createGain(),\r\n                id: id,\r\n                replacement: parseInt(strings[8].substring(id * 3, id * 3 + 3), 16),\r\n                sound: null,\r\n                info: \"\",\r\n                volume: 70\r\n            };\r\n            if (drum.replacement) {\r\n                let info = Melo.player.loader.drumInfo(\r\n                    drum.replacement - 1\r\n                );\r\n                console.log(info)\r\n                Melo.player.loader.startLoad(\r\n                    info.url,\r\n                    info.variable\r\n                );\r\n                drum.info = info;\r\n            }\r\n            import(`../assets/sounds/default_drum_0${id}`).then((drm) => {\r\n                drum = { ...drum, ...drm.default }\r\n                drum.volume = 10 * parseInt(strings[4].substring(id, id + 1), 16);\r\n                drum.audioNode.connect(Melo.master.input);\r\n                Melo.player.adjustPreset(drum.sound);\r\n                Melo.drumInfo.push(drum);\r\n            });\r\n        })\r\n\r\n        neededInst.forEach((id, i) => {\r\n            let track = {\r\n                audioNode: audioContext.createGain(),\r\n                nn: id,\r\n                replacement: parseInt(strings[9].substring((7 - id) * 3, (7 - id) * 3 + 3), 16),\r\n                sound: null,\r\n                info: \"\",\r\n                volume: 70\r\n            };\r\n            if (track.replacement) {\r\n                let info = Melo.player.loader.instrumentInfo(\r\n                    track.replacement - 1\r\n                );\r\n                console.log(info)\r\n                Melo.player.loader.startLoad(\r\n                    info.url,\r\n                    info.variable\r\n                );\r\n                track.info = info;\r\n            }\r\n            import(`../assets/sounds/default_tone_0${id}`).then((trc) => {\r\n                track = { ...track, ...trc.default }\r\n                track.volume = 10 * parseInt(strings[3].substring(id, id + 1), 16);\r\n                track.audioNode.connect(Melo.master.input);\r\n                Melo.player.adjustPreset(track.sound);\r\n                Melo.trackInfo.push(track);\r\n            });\r\n        })\r\n\r\n        let songs = [];\r\n        if (strings[10] && strings[10] !== \"000a\") {\r\n            let cnt = strings[10].length / 4;\r\n            for (let i = 0; i < cnt; i++) {\r\n                let track = parseInt(strings[10].substring(i * 4, i * 4 + 3), 32);\r\n                let vol = parseInt(strings[10].substring(i * 4 + 3, i * 4 + 4), 16) / 10;\r\n                songs.push({ id: track, vol: vol });\r\n            }\r\n        }\r\n        if (songs.length > 0) {\r\n            Melo.song = new Song(audioContext);\r\n        }\r\n        Melo.songs = songs;\r\n    } catch (ex) {\r\n        Promise.reject(ex);\r\n    } finally {\r\n        return Melo\r\n    }\r\n}\r\nexport const cauntMeasures = (storeDrums: any[], storeTracks: any[], songdur: number = 0) => {\r\n    let mx: number = Math.ceil(songdur);\r\n    const add: number = songdur ? 6 : 2;\r\n    const mxT = Math.max.apply(Math, storeTracks.map((o) => o.beat + o.length));\r\n    const mxD = Math.max.apply(Math, storeDrums.map((o) => o.beat));\r\n    mx = mxT > mx ? mxT : mx;\r\n    mx = mxD > mx ? mxD : mx;\r\n    mx = mx + add;\r\n    do {\r\n        mx++\r\n    } while (mx % 16 !== 0)\r\n    console.log(mx, songdur, mxD, mxT);\r\n    return mx;\r\n}\r\n\r\nconst storedFingersFunc = (fingers: string[]) => {\r\n    let storeFingers = {} as any;\r\n    for (const p in fingers) {\r\n        const strings = fingers[p].split(\"-\");\r\n        storeFingers[p] = {};\r\n        for (let l = 0; l < strings.length - 1; l++) {\r\n            const main = strings[l].split(\"+\");\r\n            const beat = Number(main[0]) + 16;\r\n            var cnt = main[1].length / 5;\r\n            for (let i = 0; i < cnt; i++) {\r\n                const k = main[1].substring(i * 5, i * 5 + 2);\r\n                const f = main[1].substring(i * 5 + 2, i * 5 + 4);\r\n                const s = main[1].substring(i * 5 + 4, i * 5 + 5);\r\n                if (s !== \"e\") {\r\n                    if (!storeFingers[p][f]) {\r\n                        storeFingers[p][f] = {};\r\n                    }\r\n                    if (!storeFingers[p][f][beat]) {\r\n                        storeFingers[p][f][beat] = [];\r\n                    }\r\n                    storeFingers[p][f][beat].push(k);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return storeFingers;\r\n}\r\nconst storeDrumsFunc = (cntD: number, strings: string) => {\r\n    let storeDrums = [];\r\n    for (var i = 0; i < cntD; i++) {\r\n        var drum = parseInt(strings.substring(i * 7, i * 7 + 1));\r\n        var key = parseInt(strings.substring(i * 7 + 1, i * 7 + 3), 32);\r\n        var data = parseInt(strings.substring(i * 7 + 3, i * 7 + 7), 32);\r\n        var i32 = key & parseInt(\"1111111\", 2);\r\n        if ((data | parseInt(\"0000000000000001\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 0) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000000000010\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 1) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000000000100\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 2) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000000001000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 3) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000000010000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 4) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000000100000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 5) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000001000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 6) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000010000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 7) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000000100000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 8) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000001000000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 9) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000010000000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 10) + 16,\r\n            });\r\n        if ((data | parseInt(\"0000100000000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 11) + 16,\r\n            });\r\n        if ((data | parseInt(\"0001000000000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 12) + 16,\r\n            });\r\n        if ((data | parseInt(\"0010000000000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 13) + 16,\r\n            });\r\n        if ((data | parseInt(\"0100000000000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 14) + 16,\r\n            });\r\n        if ((data | parseInt(\"1000000000000000\", 2)) === data)\r\n            storeDrums.push({\r\n                drum: drum,\r\n                beat: (i32 * 16 + 15) + 16,\r\n            });\r\n    }\r\n    return storeDrums;\r\n}\r\nconst storeTracksFunc = (cntT: number, strings: string) => {\r\n    let storeTracks = [];\r\n    for (let i = 0; i < cntT; i++) {\r\n        var beat = parseInt(strings.substring(i * 10, i * 10 + 3), 32);\r\n        var track = parseInt(\r\n            strings.substring(i * 10 + 3, i * 10 + 3 + 1), 32\r\n        );\r\n        var length = parseInt(\r\n            strings.substring(i * 10 + 4, i * 10 + 4 + 2), 32\r\n        );\r\n        var pitch = parseInt(\r\n            strings.substring(i * 10 + 6, i * 10 + 6 + 2), 32\r\n        );\r\n        var shift = parseInt(strings.substring(i * 10 + 8, i * 10 + 8 + 2), 32) - 64;\r\n        storeTracks.push({\r\n            track: track,\r\n            beat: beat + 16,\r\n            length: length,\r\n            shift: shift,\r\n            pitch: pitch,\r\n        });\r\n    }\r\n    return storeTracks;\r\n}\r\n","import { Dispatch } from \"react\";\r\nimport { AppActions } from \"../_types\";\r\nimport {\r\n    REQUEST_PLAYER,\r\n    RESIZE_PLAYER,\r\n    RESET_PLAYER,\r\n    DRAW_FINGER,\r\n    DRAW_GAME_PIANO,\r\n    DRAW_NOTES,\r\n    DRAW_GAME,\r\n    ICanvas,\r\n    ENTER_PLAYMODE,\r\n    EXIT_PLAYMODE,\r\n    DRAW_SEEKBAR,\r\n    DRAW_NOTE_PIANO,\r\n    INoteDraw\r\n} from \"../_types/player.types\";\r\nimport { store } from \"../_store/store.config\";\r\nimport { API, AudioApi } from \"../_helpers/api\";\r\nimport MidiState from \"../_helpers/midiContext\";\r\nimport { sizeCalculator } from \"../_helpers/pianoSizes\";\r\nimport { Melodition } from \"../plugin/Melodition/Melodition\";\r\nimport { cauntMeasures, lessonCompiler } from \"../_helpers/playerApi\";\r\nimport { ILesson } from \"../_types/lesson.types\";\r\nimport { addPlayTimes } from \"./profile.actions\";\r\n\r\nvar Melo: Melodition | undefined;\r\n\r\nexport const requestPlayer = (info: ILesson) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        lessonCompiler(info).then((Melodi) => {\r\n            if (Melodi) {\r\n                if (Melodi.songs.length > 0) {\r\n                    Melodi.songs.forEach((song, index) =>\r\n                        API.get(`/song/v2/${song.id}`).then(({ data }) =>\r\n                            AudioApi(data).then((res) => {\r\n                                Melodi.song?.loadBuffer({ buffer: res.data, vol: song.vol })\r\n                                    .then(() => {\r\n                                        if (Melodi.songs.length === index + 1) {\r\n                                            const realTempo = (Melodi.tempo * Melodi.zaribTempo) / 60\r\n                                            const songbeat = Melodi.song?.getDuration()! / realTempo;\r\n                                            Melodi.songLength = cauntMeasures(Melodi.storeDrums, Melodi.storeTracks, songbeat)\r\n                                            Melodi.loaded = true;\r\n                                            Melo = new Melodition(Melodi)\r\n                                            const { songLength, neededLines, neededTracks } = Melodi\r\n                                            dispatch({ type: REQUEST_PLAYER, payload: { songLength, neededLines, neededTracks } });\r\n                                        }\r\n                                    })\r\n                            }).catch((bufferError) => console.log(bufferError))\r\n                        ).catch((urlError) => console.log(urlError))\r\n                    )\r\n                } else {\r\n                    Melodi.songLength = cauntMeasures(Melodi.storeDrums, Melodi.storeTracks)\r\n                    Melodi.loaded = true;\r\n                    Melo = new Melodition(Melodi)\r\n                    const { songLength, neededLines, neededTracks } = Melodi\r\n                    dispatch({ type: REQUEST_PLAYER, payload: { songLength, neededLines, neededTracks } });\r\n                }\r\n            }\r\n        }).catch(err => console.log(err))\r\n    }\r\n)\r\n\r\nexport const gamePiano = (keyRefs: SVGGElement[], canvasSize?: ICanvas, tapSize?: number) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        if (canvasSize && tapSize) {\r\n            const pianoSize = sizeCalculator(keyRefs, canvasSize)\r\n            Melo?.assigner({ pianoSize, keyRefs, canvasSize, tapSize })\r\n            dispatch({ type: DRAW_GAME_PIANO, payload: { pianoSize, canvasSize, tapSize } })\r\n        } else {\r\n            Melo?.assigner({ keyRefs })\r\n            dispatch({ type: DRAW_GAME_PIANO })\r\n        }\r\n    }\r\n)\r\nexport const notePiano = (keyRefs: SVGGElement[], noteInfo: INoteDraw) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.assigner({ noteInfo, keyRefs })\r\n        dispatch({ type: DRAW_NOTE_PIANO, payload: { noteInfo } })\r\n    }\r\n)\r\nexport const drawFinger = (payload: any) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.assigner(payload)\r\n        if (!Melo?.playMode) Melo?.stopReset();\r\n        dispatch({ type: DRAW_FINGER })\r\n    }\r\n)\r\nexport const drawSeekBar = (payload: any) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.assigner(payload)\r\n        dispatch({ type: DRAW_SEEKBAR })\r\n    }\r\n)\r\nexport const drawGame = (payload: any) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.drawGame(payload)\r\n        dispatch({ type: DRAW_GAME })\r\n    }\r\n)\r\nexport const drawNotes = (payload: any) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.drawNote(payload)\r\n        dispatch({ type: DRAW_NOTES })\r\n    }\r\n)\r\nexport const resizePlayer = () => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.stopPlay()\r\n        dispatch({ type: RESIZE_PLAYER })\r\n    }\r\n)\r\nexport const resetPlayer = () => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.stopPlay()\r\n        dispatch({ type: RESET_PLAYER })\r\n    }\r\n)\r\nexport const changeMode = (mode: boolean) => (\r\n    (dispatch: Dispatch<AppActions>) => {\r\n        Melo?.assigner({ playMode: mode });\r\n        Melo?.stopPlay()\r\n        if (mode)\r\n            dispatch({ type: ENTER_PLAYMODE });\r\n        else\r\n            dispatch({ type: EXIT_PLAYMODE });\r\n    }\r\n)\r\n\r\nexport const canvasWheel = (e: number | React.WheelEvent) => {\r\n    Melo?.rakeMouseWheel(e)\r\n}\r\nexport const startPlayer = () => {\r\n    Melo?.startPlay()\r\n}\r\nexport const stopPlayer = () => {\r\n    Melo?.stopPlay()\r\n    const score = MidiState.score;\r\n    if (Melo && score.length > 0) {\r\n        const details = Melo.songDetails;\r\n        const len = Melo.neededTracks.length;\r\n        const progress = Math.round(score.length / len * 100) + '%';\r\n        const saveData = {\r\n            song: { name: details.title, id: details.id, notes: len },\r\n            time: new Date().toLocaleTimeString(), score: JSON.stringify(score),\r\n            date: new Date().toLocaleDateString(), progress\r\n        }\r\n        MidiState.score = [];\r\n        store.dispatch(addPlayTimes(saveData));\r\n    }\r\n}\r\n\r\nexport const midiNoteOn = (pitch: number, vol = 0.7) => {\r\n    Melo?.midiNoteOn(pitch, vol)\r\n}\r\nexport const midiNoteOff = (pitch: number) => {\r\n    Melo?.midiNoteOff(pitch)\r\n}","import { ICanvas, IPianoSizes } from \"../_types/player.types\";\r\n\r\nexport const sizeCalculator = (keyRefs: SVGGElement[], pianoSize: ICanvas) => {\r\n    const lineWidth =\r\n        keyRefs[50].getBoundingClientRect().x -\r\n        (keyRefs[48].getBoundingClientRect().x +\r\n            keyRefs[48].getBoundingClientRect().width);\r\n    const keyXPos = pianoSize.pianoLeft\r\n    const padLeft = keyXPos ? keyXPos : 100;\r\n    const notePos: IPianoSizes[] = []\r\n    for (let k in keyRefs) {\r\n        const key = keyRefs[k];\r\n        const rect = key.getBoundingClientRect();\r\n        const x = rect.x - padLeft;\r\n        const w = rect.width;\r\n        const centerX = x + w / 2;\r\n        if (key.classList.contains(\"C\") || key.classList.contains(\"F\")) {\r\n            notePos.push({ left: x, center: centerX - lineWidth * 3.5, width: w, key: \"CF\" });\r\n        } else if (key.classList.contains(\"last\")) {\r\n            notePos.push({ left: x, center: centerX, width: w, key: \"last\" });\r\n        } else if (key.id === \"black\") {\r\n            notePos.push({ left: x, center: centerX, width: w, key: \"black\" });\r\n        } else if (key.classList.contains(\"E\") || key.classList.contains(\"B\"))\r\n            notePos.push({ left: x, center: centerX + lineWidth * 3.5, width: w, key: \"EB\" });\r\n        else if (key.classList.contains(\"A\"))\r\n            notePos.push({ left: x, center: centerX + lineWidth * 1.8, width: w, key: \"A\" });\r\n        else if (key.classList.contains(\"G\"))\r\n            notePos.push({ left: x, center: centerX + lineWidth * 1.4, width: w, key: \"G\" });\r\n        else notePos.push({ left: x, center: centerX, width: w, key: \"white\" });\r\n    }\r\n    notePos.push({ left: -100, center: 0, width: lineWidth, key: \"lineWidth\" });\r\n    return notePos;\r\n}","export const REQUEST_PLAYER = \"REQUEST_PLAYER\";\r\nexport const ENTER_NOTEMODE = \"ENTER_NOTEMODE\";\r\nexport const ENTER_PLAYMODE = \"ENTER_PLAYMODE\";\r\nexport const EXIT_PLAYMODE = \"EXIT_PLAYMODE\";\r\nexport const RESIZE_PLAYER = \"RESIZE_PLAYER\";\r\nexport const RESET_PLAYER = \"RESET_PLAYER\";\r\nexport const START_PLAYER = \"START_PLAYER\";\r\nexport const STOP_PLAYER = \"STOP_PLAYER\";\r\n\r\nexport const DRAW_GAME_PIANO = \"DRAW_GAME_PIANO\";\r\nexport const DRAW_NOTE_PIANO = \"DRAW_NOTE_PIANO\";\r\nexport const DRAW_SEEKBAR = \"DRAW_SEEKBAR\";\r\nexport const DRAW_FINGER = \"DRAW_FINGER\";\r\nexport const DRAW_NOTES = \"DRAW_NOTES\";\r\nexport const DRAW_GAME = \"DRAW_GAME\";\r\n\r\nexport interface IMelodition {\r\n  playMode: boolean,\r\n  noteMode: boolean,\r\n  loading: boolean,\r\n  octave: number,\r\n  fingerLoading: boolean,\r\n  pianoLoading: boolean,\r\n  notesLoading: boolean,\r\n  gameLoading: boolean,\r\n  seekLoading: boolean,\r\n  tapSize: number,\r\n  songLength: number,\r\n  canvasSize?: ICanvas,\r\n  neededLines?: INeededLine,\r\n  neededTracks?: INeededTrack[],\r\n  pianoSize?: IPianoSizes[],\r\n  handRefs?: HTMLCollection,\r\n  noteInfo?: INoteDraw,\r\n}\r\nexport interface DrawGamePiano {\r\n  type: typeof DRAW_GAME_PIANO;\r\n  payload?: {\r\n    pianoSize: IPianoSizes[]\r\n    canvasSize: ICanvas\r\n    tapSize: number\r\n  }\r\n}\r\nexport interface DrawNotePiano {\r\n  type: typeof DRAW_NOTE_PIANO;\r\n  payload: { noteInfo: INoteDraw }\r\n}\r\nexport interface DrawGame {\r\n  type: typeof DRAW_GAME;\r\n}\r\nexport interface DrawNotes {\r\n  type: typeof DRAW_NOTES;\r\n}\r\nexport interface DrawFinger {\r\n  type: typeof DRAW_FINGER;\r\n}\r\nexport interface DrawSeekbar {\r\n  type: typeof DRAW_SEEKBAR;\r\n}\r\n\r\nexport interface StartPlayers {\r\n  type: typeof START_PLAYER;\r\n}\r\nexport interface StopPlayers {\r\n  type: typeof STOP_PLAYER;\r\n}\r\nexport interface ResizePlayers {\r\n  type: typeof RESIZE_PLAYER;\r\n}\r\n\r\nexport interface ResetPlayers {\r\n  type: typeof RESET_PLAYER;\r\n}\r\nexport interface RequestPlayers {\r\n  type: typeof REQUEST_PLAYER;\r\n  payload: {\r\n    songLength: number\r\n    neededLines: INeededLine\r\n    neededTracks: any[]\r\n  };\r\n}\r\nexport interface EnterNoteMode {\r\n  type: typeof ENTER_NOTEMODE;\r\n}\r\nexport interface EnterPlayMode {\r\n  type: typeof ENTER_PLAYMODE;\r\n}\r\nexport interface ExitPlayMode {\r\n  type: typeof EXIT_PLAYMODE;\r\n}\r\n\r\nexport type PlayerActionTypes =\r\n  | DrawSeekbar\r\n  | DrawFinger\r\n  | DrawNotes\r\n  | DrawGame\r\n  | DrawNotePiano\r\n  | DrawGamePiano\r\n  | ResizePlayers\r\n  | RequestPlayers\r\n  | StartPlayers\r\n  | StopPlayers\r\n  | ResetPlayers\r\n  | EnterNoteMode\r\n  | EnterPlayMode\r\n  | ExitPlayMode;\r\n\r\nexport interface PlayerDataInfo {\r\n  fingers: string[];\r\n  song: {\r\n    content: string;\r\n    edited: string;\r\n    id: number;\r\n    name: string;\r\n  }\r\n  track: {\r\n    id: number;\r\n    name: string;\r\n  }\r\n}\r\nexport interface IDetails {\r\n  title: string,\r\n  id: number,\r\n}\r\nexport interface IQueue {\r\n  target: any,\r\n  preset: any,\r\n  when: any,\r\n  pitches: any,\r\n  duration: any,\r\n  volume: any,\r\n  slides?: any\r\n}\r\nexport interface IEnvelope {\r\n  envelope: any,\r\n  zone: any,\r\n  volume: any,\r\n  startWhen: any,\r\n  waveDuration: any,\r\n  duration: any\r\n}\r\nexport interface ISetup {\r\n  target: any,\r\n  when: any,\r\n  duration: any\r\n}\r\nexport interface INotePos {\r\n  [key: number]: {\r\n    pos: number;\r\n    note: string\r\n  }\r\n}\r\nexport interface INoteDraw {\r\n  width: number,\r\n  height: number,\r\n  tapSize: number,\r\n  spaceSize: number,\r\n  fontSize: number,\r\n  linesArray: number[],\r\n  notePos: INotePos,\r\n}\r\nexport interface INeededTrack {\r\n  beat: number,\r\n  pitch: number,\r\n  shift: number,\r\n  length: number,\r\n}\r\nexport interface INeededLine {\r\n  up: number;\r\n  number: number;\r\n  down: number;\r\n  notes: number;\r\n}\r\nexport interface IPianoSizes {\r\n  left: number,\r\n  center: number,\r\n  width: number\r\n  key: string\r\n}\r\nexport interface ICanvas {\r\n  width: number;\r\n  height: number;\r\n  baseLine: number;\r\n  pianoLeft: number;\r\n}","import { LoginResponse } from \"./auth.types\";\r\n\r\nexport const INFO_REQUEST = \"PROFILE_INFO_REQUEST\";\r\nexport const INFO_SUCCESS = \"PROFILE_INFO_SUCCESS\";\r\nexport const INFO_FAILURE = \"PROFILE_INFO_FAILURE\";\r\n\r\nexport const PLAYTIME_SUCCESS = \"PLAYTIME_SUCCESS\";\r\nexport const FAVORITE_SUCCESS = \"FAVORITE_SUCCESS\";\r\n\r\nexport const SAVE_PROFILE = \"SAVE_PROFILE\";\r\nexport const DELETE_PROFILE = \"DELETE_PROFILE\";\r\n\r\nexport interface DefaultProfileState {\r\n  loading: boolean;\r\n  error: string;\r\n  data?: IProfile;\r\n  playtime?: IPlaytime[];\r\n  favorite?: IFavorite[];\r\n}\r\nexport type IProfile = {\r\n  id: string;\r\n  name: string;\r\n  nickname: string;\r\n  first_name: string;\r\n  last_name: string;\r\n  slug: string;\r\n  title: { rendered: string };\r\n  score: { rendered: string };\r\n  image_select: string;\r\n  mobile: string;\r\n  info?: LoginResponse;\r\n};\r\nexport interface IPlaytime {\r\n  song: {\r\n    name: string;\r\n    id: number;\r\n    notes: number;\r\n  };\r\n  time: string;\r\n  score: string;\r\n  date: string;\r\n  progress: string;\r\n};\r\n\r\nexport interface IFavorite {\r\n  id: number;\r\n  title: string;\r\n  type: string;\r\n  excerpt: string;\r\n  author: string;\r\n  featured_img: string;\r\n}\r\n\r\nexport interface SaveProfileInfoAction {\r\n  type: typeof SAVE_PROFILE;\r\n  userData: any;\r\n}\r\nexport interface DeleteProfileInfoAction {\r\n  type: typeof DELETE_PROFILE;\r\n}\r\n\r\nexport interface ProfileInfoRequestAction {\r\n  type: typeof INFO_REQUEST;\r\n}\r\nexport interface ProfileInfoSuccessAction {\r\n  type: typeof INFO_SUCCESS;\r\n  profile: IProfile;\r\n}\r\nexport interface ProfileInfoFailureAction {\r\n  type: typeof INFO_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface UserPlayTimeSeccess {\r\n  type: typeof PLAYTIME_SUCCESS;\r\n  playtime: IPlaytime[];\r\n}\r\nexport interface UserFavoritesSeccess {\r\n  type: typeof FAVORITE_SUCCESS;\r\n  favorite: IFavorite[];\r\n}\r\n\r\nexport type ProfileActionTypes =\r\n  | SaveProfileInfoAction\r\n  | DeleteProfileInfoAction\r\n  | ProfileInfoRequestAction\r\n  | ProfileInfoSuccessAction\r\n  | ProfileInfoFailureAction\r\n  | UserPlayTimeSeccess\r\n  | UserFavoritesSeccess;\r\n","var map = {\n\t\"./default_drum_00\": [\n\t\t257,\n\t\t1\n\t],\n\t\"./default_drum_00.ts\": [\n\t\t257,\n\t\t1\n\t],\n\t\"./default_drum_01\": [\n\t\t258,\n\t\t2\n\t],\n\t\"./default_drum_01.ts\": [\n\t\t258,\n\t\t2\n\t],\n\t\"./default_drum_02\": [\n\t\t259,\n\t\t3\n\t],\n\t\"./default_drum_02.ts\": [\n\t\t259,\n\t\t3\n\t],\n\t\"./default_drum_03\": [\n\t\t260,\n\t\t4\n\t],\n\t\"./default_drum_03.ts\": [\n\t\t260,\n\t\t4\n\t],\n\t\"./default_drum_04\": [\n\t\t261,\n\t\t5\n\t],\n\t\"./default_drum_04.ts\": [\n\t\t261,\n\t\t5\n\t],\n\t\"./default_drum_05\": [\n\t\t262,\n\t\t6\n\t],\n\t\"./default_drum_05.ts\": [\n\t\t262,\n\t\t6\n\t],\n\t\"./default_drum_06\": [\n\t\t263,\n\t\t7\n\t],\n\t\"./default_drum_06.ts\": [\n\t\t263,\n\t\t7\n\t],\n\t\"./default_drum_07\": [\n\t\t264,\n\t\t8\n\t],\n\t\"./default_drum_07.ts\": [\n\t\t264,\n\t\t8\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 337;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./default_tone_00\": [\n\t\t265,\n\t\t9\n\t],\n\t\"./default_tone_00.ts\": [\n\t\t265,\n\t\t9\n\t],\n\t\"./default_tone_01\": [\n\t\t266,\n\t\t10\n\t],\n\t\"./default_tone_01.ts\": [\n\t\t266,\n\t\t10\n\t],\n\t\"./default_tone_02\": [\n\t\t267,\n\t\t11\n\t],\n\t\"./default_tone_02.ts\": [\n\t\t267,\n\t\t11\n\t],\n\t\"./default_tone_03\": [\n\t\t268,\n\t\t12\n\t],\n\t\"./default_tone_03.ts\": [\n\t\t268,\n\t\t12\n\t],\n\t\"./default_tone_04\": [\n\t\t269,\n\t\t13\n\t],\n\t\"./default_tone_04.ts\": [\n\t\t269,\n\t\t13\n\t],\n\t\"./default_tone_05\": [\n\t\t270,\n\t\t14\n\t],\n\t\"./default_tone_05.ts\": [\n\t\t270,\n\t\t14\n\t],\n\t\"./default_tone_06\": [\n\t\t271,\n\t\t15\n\t],\n\t\"./default_tone_06.ts\": [\n\t\t271,\n\t\t15\n\t],\n\t\"./default_tone_07\": [\n\t\t272,\n\t\t16\n\t],\n\t\"./default_tone_07.ts\": [\n\t\t272,\n\t\t16\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 338;\nmodule.exports = webpackAsyncContext;","import * as React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect, Route, RouteProps } from \"react-router\";\r\nimport { AppState } from \"../_types\";\r\n\r\ninterface ProtectedRouteProps extends RouteProps {\r\n  loggedIn?: boolean;\r\n  isAllowed?: boolean;\r\n  restrictedPath: string;\r\n  authenticationPath: string;\r\n}\r\n\r\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = (props) => {\r\n  let redirectPath = \"\";\r\n  if (!props.loggedIn) {\r\n    redirectPath = props.authenticationPath;\r\n  }\r\n  if (props.loggedIn && !props.isAllowed) {\r\n    redirectPath = props.restrictedPath;\r\n  }\r\n\r\n  if (redirectPath) {\r\n    const renderComponent = () => <Redirect to={{ pathname: redirectPath }} />;\r\n    return <Route {...props} component={renderComponent} render={undefined} />;\r\n  } else {\r\n    return <Route {...props} />;\r\n  }\r\n};\r\n\r\nconst mapStateToProps = (state: AppState) => {\r\n  const { auth } = state;\r\n  return {\r\n    loggedIn: auth.loggedIn,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(ProtectedRoute);\r\n","import React, { useState } from \"react\";\r\nimport { Button } from \"@material-ui/core\";\r\nimport { store } from \"../../_store/store.config\";\r\nimport { SHOW_SNACKBAR, CLEAR_SNACKBAR } from \"../../_types/snackbar.types\";\r\nimport { snackBarMaker } from \"../Layout/SnackBar/alert\";\r\n\r\ninterface AboutProps {}\r\n\r\nconst About: React.FC<AboutProps> = () => {\r\n  const [input, setInput] = useState<string>(\"\");\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n    const { value } = e.target;\r\n    setInput(value);\r\n  };\r\n  return (\r\n    <>\r\n      <h1>About</h1>\r\n      <p>\r\n        {\" \"}\r\n        Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque ipsum\r\n        praesentium rem asperiores fuga illo et, architecto doloremque nulla.\r\n        Magni perspiciatis praesentium facere facilis, ullam officiis saepe sunt\r\n        amet nulla?\r\n      </p>\r\n      <input type=\"text\" onChange={(e) => handleChange(e)} value={input} />\r\n      <Button\r\n        onClick={() =>\r\n          store.dispatch({\r\n            type: SHOW_SNACKBAR,\r\n            snackbar: snackBarMaker(input, \"success\"),\r\n          })\r\n        }\r\n      >\r\n        Snack\r\n      </Button>\r\n      <Button\r\n        onClick={() =>\r\n          store.dispatch({\r\n            type: CLEAR_SNACKBAR,\r\n            dismissAll: true,\r\n          })\r\n        }\r\n      >\r\n        Clear\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\nexport default About;\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../_store/store.config\";\r\nimport { IPost } from \"../../_types/post.types\";\r\nimport { thumbnailsFinder } from \"../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: 300,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n      [theme.breakpoints.down(350)]: {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: \"140px\",\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  post: IPost;\r\n};\r\n\r\nexport const PostCard: React.FC<Props> = ({ post }) => {\r\n  const classes = useStyles();\r\n  const { title, featured_img, excerpt, author } = post;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/post/${post.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          height=\"140\"\r\n          component=\"img\"\r\n          alt={post.title}\r\n          title={post.title}\r\n          image={thumbnailsFinder(featured_img)}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {excerpt}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {author}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { AppActions } from \"../../_types\";\r\nimport { IPost } from \"../../_types/post.types\";\r\nimport { AppState } from \"../../_types\";\r\nimport { requestAllPost } from \"../../_actions/post.actions\";\r\nimport { PostCard } from \"./PostCard\";\r\nimport {\r\n  Chip,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport { LoadingCircle } from \"../Layout/Loadings\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      padding: theme.spacing(2, 1, 0, 2),\r\n    },\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 143px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: theme.spacing(1),\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface PostsPorps extends WithStyles<typeof useStyles> {\r\n  data: IPost[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = PostsPorps & LinkDispatchProps;\r\n\r\nexport class PostList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllPost();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <div className={classes.root}>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">پست ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <LoadingCircle />\r\n          ) : data.length ? (\r\n            data.map((post: IPost) => <PostCard key={post.id} post={post} />)\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllPost: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): PostsPorps => ({\r\n  classes: ownProps.classes,\r\n  ...state.bank.posts,\r\n});\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllPost: bindActionCreators(requestAllPost, dispatch),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(PostList));\r\n","import {\r\n  createStyles,\r\n  LinearProgress,\r\n  Theme,\r\n  Typography,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport { FormikErrors } from \"formik\";\r\nimport * as React from \"react\";\r\n\r\ndeclare global {\r\n  interface Window {\r\n    captchaOnLoad: () => void;\r\n    grecaptcha: ReCaptchaInstance;\r\n    webkitAudioContext: {\r\n      new (contextOptions?: AudioContextOptions | undefined): AudioContext;\r\n      prototype: AudioContext;\r\n    };\r\n    zones: any;\r\n  }\r\n}\r\n\r\ninterface ReCaptchaInstance {\r\n  ready: (cb: () => any) => any;\r\n  execute: (options: ReCaptchaExecuteOptions) => Promise<string>;\r\n  render: (id: string, options: ReCaptchaRenderOptions) => any;\r\n}\r\n\r\ninterface ReCaptchaExecuteOptions {\r\n  action: string;\r\n}\r\n\r\ninterface ReCaptchaRenderOptions {\r\n  callback: () => void;\r\n  sitekey: string;\r\n  size: \"normal\";\r\n  theme: \"dark\" | \"light\";\r\n}\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      position: \"relative\",\r\n      minHeight: 80,\r\n    },\r\n    captcha: {\r\n      zIndex: 2,\r\n      \"& > div:first-child\": {\r\n        margin: \"auto\",\r\n        \"& > div > iframe\": {\r\n          borderRadius: 4,\r\n          border: \"1px solid\",\r\n        },\r\n      },\r\n    },\r\n    captchaWarning: {\r\n      \"& > div:first-child\": {\r\n        margin: \"auto\",\r\n        \"& > div > iframe\": {\r\n          borderRadius: 4,\r\n          border: \"1px solid red\",\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\ninterface Props extends WithStyles<typeof useStyles> {\r\n  action: string;\r\n  theme: \"light\" | \"dark\";\r\n  onError: error;\r\n  onChange: (val: boolean) => void;\r\n}\r\ntype error =\r\n  | string\r\n  | false\r\n  | FormikErrors<any>\r\n  | string[]\r\n  | FormikErrors<any>[]\r\n  | undefined;\r\n\r\ninterface State {\r\n  readonly loading: boolean;\r\n}\r\n\r\nclass ReCaptcha extends React.PureComponent<Props, State> {\r\n  state: State = {\r\n    loading: true,\r\n  };\r\n\r\n  private script!: HTMLScriptElement;\r\n\r\n  componentDidMount(): void {\r\n    this.loadScript();\r\n  }\r\n\r\n  componentWillUnmount(): void {\r\n    document.body.removeChild(this.script);\r\n  }\r\n\r\n  render() {\r\n    const { classes, onError } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        {this.state.loading && <LinearProgress color=\"secondary\" />}\r\n        <div\r\n          id=\"g-recaptcha\"\r\n          className={onError ? classes.captchaWarning : classes.captcha}\r\n        />\r\n        <Typography color=\"error\" variant=\"caption\">\r\n          {onError}\r\n        </Typography>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private loadScript = (): void => {\r\n    window.captchaOnLoad = this.onLoad;\r\n\r\n    const url = \"https://www.google.com/recaptcha/api.js\";\r\n    const queryString = \"?onload=captchaOnLoad&render=explicit&hl=fa\";\r\n    const script = document.createElement(\"script\");\r\n    script.type = \"text/javascript\";\r\n    script.src = url + queryString;\r\n    script.async = true;\r\n    script.defer = true;\r\n    this.script = document.body.appendChild(script);\r\n  };\r\n\r\n  private callback = () => {\r\n    this.props.onChange(true);\r\n  };\r\n\r\n  private onLoad = (): void => {\r\n    window.grecaptcha.render(\"g-recaptcha\", {\r\n      callback: this.callback,\r\n      sitekey: \"6Le8wccUAAAAAA0kNONoUC-NKPecGnUGKRY7zMno\",\r\n      size: \"normal\",\r\n      theme: this.props.theme,\r\n    });\r\n\r\n    window.grecaptcha.ready(() => {\r\n      this.setState({ loading: false });\r\n    });\r\n  };\r\n}\r\n\r\nexport default withStyles(useStyles)(ReCaptcha);\r\n","import React, { useCallback } from \"react\";\r\nimport { SwitchProps } from \"formik-material-ui\";\r\nimport ReCaptcha from \"./ReCaptcha\";\r\nimport { store } from \"../../../_store/store.config\";\r\n\r\nexport function Captcha(props: SwitchProps) {\r\n  const {\r\n    form: { setFieldValue, errors, touched },\r\n    field: { name },\r\n  } = props;\r\n\r\n  const theme = store.getState().auth.theme;\r\n  const onChange = useCallback(\r\n    (event) => {\r\n      setFieldValue(name, event ? true : false);\r\n    },\r\n    [setFieldValue, name]\r\n  );\r\n  return (\r\n    <ReCaptcha\r\n      action=\"login\"\r\n      theme={theme}\r\n      onChange={onChange}\r\n      onError={touched.recaptcha && errors.recaptcha}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n  Avatar,\r\n  CssBaseline,\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Link,\r\n  Grid,\r\n  Typography,\r\n  LinearProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../_types\";\r\nimport { AppActions } from \"../../_types\";\r\nimport { IUser } from \"../../_types/auth.types\";\r\nimport { Captcha } from \"../Layout/Captcha/Captcha\";\r\nimport { loginRequest, logoutRequest } from \"../../_actions/user.actions\";\r\nimport { push } from \"connected-react-router\";\r\nimport { Path } from \"history\";\r\n\r\ninterface LoginPageProps {\r\n  loading: boolean;\r\n  loggedIn: boolean;\r\n}\r\n\r\ntype Props = LoginPageProps & LinkDispatchProps;\r\n\r\nclass LoginPage extends React.Component<Props> {\r\n  componentDidMount() {\r\n    if (this.props.loggedIn) {\r\n      this.props.push(\"/profile\");\r\n    }\r\n  }\r\n  render() {\r\n    const { loading, loggedIn } = this.props;\r\n    return !loggedIn ? (\r\n      <Container component=\"main\" maxWidth=\"xs\" style={{ paddingTop: \"10px\" }}>\r\n        <CssBaseline />\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Avatar style={{ margin: \"auto\" }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign in\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{\r\n              username: \"\",\r\n              password: \"\",\r\n              recaptcha: false,\r\n            }}\r\n            validationSchema={Yup.object().shape({\r\n              username: Yup.string()\r\n                .max(255)\r\n                .required(\"Email or Username is required\"),\r\n              password: Yup.string().max(255).required(\"Password is required\"),\r\n              recaptcha: Yup.boolean().required(\"ReCAPTCHA is required\"),\r\n            })}\r\n            onSubmit={(event: IUser, { resetForm }) => {\r\n              this.props.login({\r\n                username: event.username,\r\n                password: event.password,\r\n              });\r\n              resetForm({\r\n                values: {\r\n                  username: event.username,\r\n                  password: \"\",\r\n                  recaptcha: event.recaptcha,\r\n                },\r\n              });\r\n            }}\r\n          >\r\n            <Form>\r\n              <Box mb={3}>\r\n                <Typography\r\n                  color=\"textSecondary\"\r\n                  align=\"center\"\r\n                  gutterBottom\r\n                  variant=\"body2\"\r\n                >\r\n                  Sign in on the internal platform\r\n                </Typography>\r\n              </Box>\r\n              <Grid item>\r\n                <Button\r\n                  fullWidth\r\n                  size=\"large\"\r\n                  variant=\"contained\"\r\n                  type=\"submit\"\r\n                  disabled={true}\r\n                >\r\n                  Login with Google\r\n                </Button>\r\n              </Grid>\r\n              <Box mt={3} mb={1}>\r\n                <Typography\r\n                  align=\"center\"\r\n                  color=\"textSecondary\"\r\n                  variant=\"body1\"\r\n                >\r\n                  or login with username / email address\r\n                </Typography>\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={TextField}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Email Address/Username\"\r\n                  margin=\"normal\"\r\n                  name=\"username\"\r\n                  id=\"username\"\r\n                  placeholder=\"John\"\r\n                  type=\"username\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={TextField}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Password\"\r\n                  margin=\"normal\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={Captcha}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Recaptcha\"\r\n                  margin=\"normal\"\r\n                  name=\"recaptcha\"\r\n                  type=\"recaptcha\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              {loading && <LinearProgress color=\"secondary\" />}\r\n              <Box my={1}>\r\n                <Button\r\n                  color=\"secondary\"\r\n                  disabled={loading}\r\n                  fullWidth\r\n                  size=\"large\"\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                >\r\n                  Sign in\r\n                </Button>\r\n              </Box>\r\n              <Grid container style={{ textAlign: \"initial\" }}>\r\n                <Grid item xs>\r\n                  <Link\r\n                    color=\"secondary\"\r\n                    component={RouterLink}\r\n                    to=\"/lostpassword\"\r\n                    variant=\"body2\"\r\n                  >\r\n                    Forgot password?\r\n                  </Link>\r\n                </Grid>\r\n                <Grid item>\r\n                  <Typography color=\"textSecondary\" variant=\"body2\">\r\n                    {\"Don't have an account? \"}\r\n                    <Link\r\n                      color=\"secondary\"\r\n                      component={RouterLink}\r\n                      to=\"/register\"\r\n                      variant=\"body2\"\r\n                    >\r\n                      Sign up\r\n                    </Link>\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n            </Form>\r\n          </Formik>\r\n        </div>\r\n      </Container>\r\n    ) : null;\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  login: (user: IUser) => void;\r\n  logout: () => void;\r\n  push: (path: Path) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): LoginPageProps => {\r\n  const { loggedIn, loading } = state.auth;\r\n  return {\r\n    loggedIn,\r\n    loading,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  login: bindActionCreators(loginRequest, dispatch),\r\n  logout: bindActionCreators(logoutRequest, dispatch),\r\n  push: bindActionCreators(push, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginPage);\r\n","import React from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n  Avatar,\r\n  CssBaseline,\r\n  Box,\r\n  Button,\r\n  Container,\r\n  Typography,\r\n  LinearProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../_types\";\r\nimport { AppActions } from \"../../_types\";\r\nimport { ILost } from \"../../_types/auth.types\";\r\nimport { lostRequest } from \"../../_actions/user.actions\";\r\nimport { Captcha } from \"../Layout/Captcha/Captcha\";\r\nimport { push } from \"connected-react-router\";\r\nimport { Path } from \"history\";\r\n\r\ninterface LostPageProps {\r\n  loading: boolean;\r\n  loggedIn: boolean;\r\n}\r\n\r\ntype Props = LostPageProps & LinkDispatchProps;\r\n\r\nclass LostPage extends React.Component<Props> {\r\n  componentDidMount() {\r\n    if (this.props.loggedIn) {\r\n      this.props.push(\"/\");\r\n    }\r\n  }\r\n  render() {\r\n    const { loading, loggedIn } = this.props;\r\n    return !loggedIn ? (\r\n      <Container component=\"main\" maxWidth=\"xs\" style={{ paddingTop: \"10px\" }}>\r\n        <CssBaseline />\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Avatar style={{ margin: \"auto\" }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Lost Password\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{\r\n              user_login: \"\",\r\n              recaptcha: false,\r\n            }}\r\n            validationSchema={Yup.object().shape({\r\n              user_login: Yup.string()\r\n                .max(255)\r\n                .required(\"Email or Username is required\"),\r\n              recaptcha: Yup.boolean().required(\"ReCAPTCHA is required\"),\r\n            })}\r\n            onSubmit={(event: ILost, { resetForm }) => {\r\n              if (event.user_login) {\r\n                this.props.lostRequest(event);\r\n              }\r\n              resetForm({\r\n                values: {\r\n                  user_login: \"\",\r\n                  recaptcha: event.recaptcha,\r\n                },\r\n              });\r\n            }}\r\n          >\r\n            <Form>\r\n              <Box my={2}>\r\n                <Typography\r\n                  color=\"textSecondary\"\r\n                  align=\"center\"\r\n                  gutterBottom\r\n                  variant=\"body2\"\r\n                >\r\n                  Enter your email or user_login\r\n                </Typography>\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={TextField}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Email Address/Username\"\r\n                  margin=\"normal\"\r\n                  name=\"user_login\"\r\n                  id=\"user_login\"\r\n                  placeholder=\"John\"\r\n                  type=\"user_login\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              <Box my={1}>\r\n                <Field\r\n                  component={Captcha}\r\n                  color=\"secondary\"\r\n                  fullWidth\r\n                  label=\"Recaptcha\"\r\n                  margin=\"normal\"\r\n                  name=\"recaptcha\"\r\n                  type=\"recaptcha\"\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n              {loading && <LinearProgress color=\"secondary\" />}\r\n              <Box my={1}>\r\n                <Button\r\n                  color=\"secondary\"\r\n                  disabled={loading}\r\n                  fullWidth\r\n                  size=\"large\"\r\n                  type=\"submit\"\r\n                  variant=\"contained\"\r\n                >\r\n                  Recover\r\n                </Button>\r\n              </Box>\r\n            </Form>\r\n          </Formik>\r\n        </div>\r\n      </Container>\r\n    ) : null;\r\n  }\r\n}\r\ninterface LinkDispatchProps {\r\n  lostRequest: (user: ILost) => void;\r\n  push: (path: Path) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): LostPageProps => {\r\n  const { loggedIn, loading } = state.auth;\r\n  return {\r\n    loggedIn,\r\n    loading,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>,\r\n  ownProps: LostPageProps\r\n): LinkDispatchProps => ({\r\n  lostRequest: bindActionCreators(lostRequest, dispatch),\r\n  push: bindActionCreators(push, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LostPage);\r\n","import React from \"react\";\r\nimport * as Yup from \"yup\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport {\r\n  Avatar,\r\n  CssBaseline,\r\n  Box,\r\n  Button,\r\n  Checkbox,\r\n  Container,\r\n  FormHelperText,\r\n  Link,\r\n  Typography,\r\n  LinearProgress,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../_types\";\r\nimport { AppActions } from \"../../_types\";\r\nimport { IRegister } from \"../../_types/auth.types\";\r\nimport { Captcha } from \"../Layout/Captcha/Captcha\";\r\nimport { registerRequest } from \"../../_actions/user.actions\";\r\nimport { push } from \"connected-react-router\";\r\nimport { Path } from \"history\";\r\n\r\ninterface RegisterPageProps {\r\n  loading: boolean;\r\n  loggedIn: boolean;\r\n}\r\n\r\ntype Props = RegisterPageProps & LinkDispatchProps;\r\n\r\nclass RegisterPage extends React.Component<Props> {\r\n  componentDidMount() {\r\n    if (this.props.loggedIn) {\r\n      this.props.push(\"/\");\r\n    }\r\n  }\r\n  render() {\r\n    const { loading, loggedIn } = this.props;\r\n    return !loggedIn ? (\r\n      <Container component=\"main\" maxWidth=\"xs\" style={{ paddingTop: \"10px\" }}>\r\n        <CssBaseline />\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <Avatar style={{ margin: \"auto\" }}>\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n          <Typography component=\"h1\" variant=\"h5\">\r\n            Sign Up\r\n          </Typography>\r\n          <Formik\r\n            initialValues={{\r\n              email: \"\",\r\n              firstname: \"\",\r\n              lastname: \"\",\r\n              username: \"\",\r\n              password: \"\",\r\n              confirm_password: \"\",\r\n              recaptcha: false,\r\n              policy: false,\r\n            }}\r\n            validationSchema={Yup.object().shape({\r\n              email: Yup.string()\r\n                .email(\"Must be a valid email\")\r\n                .max(255)\r\n                .required(\"Email is required\"),\r\n              firstname: Yup.string()\r\n                .max(255)\r\n                .required(\"First name is required\"),\r\n              lastname: Yup.string().max(255).required(\"Last name is required\"),\r\n              username: Yup.string().max(255).required(\"User name is required\"),\r\n              password: Yup.string().max(255).required(\"Password is required\"),\r\n              confirm_password: Yup.string().oneOf(\r\n                [Yup.ref(\"password\"), \"\"],\r\n                \"Both password need to be the same\"\r\n              ),\r\n              policy: Yup.boolean().oneOf([true], \"This field must be checked\"),\r\n              recaptcha: Yup.boolean().oneOf(\r\n                [true],\r\n                \"This field must be checked\"\r\n              ),\r\n            })}\r\n            onSubmit={(e: IRegister, { resetForm }) => {\r\n              this.props.registerRequest({\r\n                ...e,\r\n              });\r\n              resetForm({\r\n                values: {\r\n                  ...e,\r\n                },\r\n              });\r\n            }}\r\n          >\r\n            {({ handleChange, values, touched, errors }) => (\r\n              <Form>\r\n                <Box mb={3}>\r\n                  <Typography\r\n                    color=\"textSecondary\"\r\n                    align=\"center\"\r\n                    gutterBottom\r\n                    variant=\"body2\"\r\n                  >\r\n                    Use your email to create new account\r\n                  </Typography>\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"نام\"\r\n                    margin=\"normal\"\r\n                    name=\"firstname\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"نام خانوادگی\"\r\n                    margin=\"normal\"\r\n                    name=\"lastname\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"نام کاربری\"\r\n                    margin=\"normal\"\r\n                    name=\"username\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"آدرس ایمیل\"\r\n                    margin=\"normal\"\r\n                    name=\"email\"\r\n                    dir=\"ltr\"\r\n                    type=\"email\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"پسورد\"\r\n                    margin=\"normal\"\r\n                    name=\"password\"\r\n                    type=\"password\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Field\r\n                    component={TextField}\r\n                    color=\"secondary\"\r\n                    fullWidth\r\n                    label=\"تائید پسورد\"\r\n                    margin=\"normal\"\r\n                    name=\"confirm_password\"\r\n                    type=\"password\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                  <Box alignItems=\"center\" display=\"flex\" ml={-1}>\r\n                    <Checkbox\r\n                      checked={values.policy}\r\n                      name=\"policy\"\r\n                      onChange={handleChange}\r\n                    />\r\n                    <Typography color=\"textSecondary\" variant=\"body1\">\r\n                      I have read the{\" \"}\r\n                      <Link\r\n                        color=\"secondary\"\r\n                        component={RouterLink}\r\n                        to=\"#\"\r\n                        underline=\"always\"\r\n                        variant=\"body1\"\r\n                      >\r\n                        Terms and Conditions{\" \"}\r\n                      </Link>\r\n                    </Typography>\r\n                  </Box>\r\n                  {Boolean(touched.policy && errors.policy) && (\r\n                    <FormHelperText error>{errors.policy}</FormHelperText>\r\n                  )}\r\n                  <Box my={1}>\r\n                    <Field\r\n                      component={Captcha}\r\n                      color=\"secondary\"\r\n                      fullWidth\r\n                      label=\"Recaptcha\"\r\n                      margin=\"normal\"\r\n                      name=\"recaptcha\"\r\n                      type=\"recaptcha\"\r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Box>\r\n                  {loading && <LinearProgress color=\"secondary\" />}\r\n                  <Box my={2}>\r\n                    <Button\r\n                      color=\"secondary\"\r\n                      disabled={loading}\r\n                      fullWidth\r\n                      size=\"large\"\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                    >\r\n                      Sign up now\r\n                    </Button>\r\n                  </Box>\r\n                  <Typography\r\n                    align=\"center\"\r\n                    color=\"textSecondary\"\r\n                    variant=\"body2\"\r\n                  >\r\n                    Have an account?\r\n                    <Link\r\n                      color=\"secondary\"\r\n                      component={RouterLink}\r\n                      to=\"/login\"\r\n                      variant=\"body2\"\r\n                    >\r\n                      Sign in\r\n                    </Link>\r\n                  </Typography>\r\n                </Box>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n        </div>\r\n      </Container>\r\n    ) : null;\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  registerRequest: (user: IRegister) => void;\r\n  push: (path: Path) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): RegisterPageProps => {\r\n  const { loggedIn, loading } = state.auth;\r\n  return {\r\n    loggedIn,\r\n    loading,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  registerRequest: bindActionCreators(registerRequest, dispatch),\r\n  push: bindActionCreators(push, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(RegisterPage);\r\n","import React from \"react\";\r\nimport clsx from \"clsx\";\r\nimport PropTypes from \"prop-types\";\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardHeader,\r\n  Chip,\r\n  Divider,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableFooter,\r\n  TableRow,\r\n  makeStyles,\r\n  Link,\r\n  useTheme,\r\n  IconButton,\r\n  TablePagination,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  KeyboardArrowLeft,\r\n  KeyboardArrowRight,\r\n  FirstPage,\r\n  LastPage,\r\n} from \"@material-ui/icons\";\r\nimport { UniqId } from \"../../../_helpers/constants\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\n\r\nconst useStyles1 = makeStyles((theme) => ({\r\n  root: {\r\n    flexShrink: 0,\r\n    marginLeft: theme.spacing(2.5),\r\n  },\r\n}));\r\n\r\nfunction TablePaginationActions(props) {\r\n  const classes = useStyles1();\r\n  const theme = useTheme();\r\n  const { count, page, rowsPerPage, onChangePage } = props;\r\n  const handleFirstPageButtonClick = (event) => {\r\n    onChangePage(event, 0);\r\n  };\r\n\r\n  const handleBackButtonClick = (event) => {\r\n    onChangePage(event, page - 1);\r\n  };\r\n\r\n  const handleNextButtonClick = (event) => {\r\n    onChangePage(event, page + 1);\r\n  };\r\n\r\n  const handleLastPageButtonClick = (event) => {\r\n    onChangePage(event, Math.max(0, Math.ceil(count / rowsPerPage) - 1));\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <IconButton\r\n        onClick={handleFirstPageButtonClick}\r\n        disabled={page === 0}\r\n        aria-label=\"first page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? <LastPage /> : <FirstPage />}\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleBackButtonClick}\r\n        disabled={page === 0}\r\n        aria-label=\"previous page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? (\r\n          <KeyboardArrowRight />\r\n        ) : (\r\n          <KeyboardArrowLeft />\r\n        )}\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleNextButtonClick}\r\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n        aria-label=\"next page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? (\r\n          <KeyboardArrowLeft />\r\n        ) : (\r\n          <KeyboardArrowRight />\r\n        )}\r\n      </IconButton>\r\n      <IconButton\r\n        onClick={handleLastPageButtonClick}\r\n        disabled={page >= Math.ceil(count / rowsPerPage) - 1}\r\n        aria-label=\"last page\"\r\n      >\r\n        {theme.direction === \"rtl\" ? <FirstPage /> : <LastPage />}\r\n      </IconButton>\r\n    </div>\r\n  );\r\n}\r\n\r\nTablePaginationActions.propTypes = {\r\n  count: PropTypes.number.isRequired,\r\n  onChangePage: PropTypes.func.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n  rowsPerPage: PropTypes.number.isRequired,\r\n};\r\n\r\nconst useStyles2 = makeStyles((theme) => ({\r\n  table: {\r\n    minWidth: 300,\r\n  },\r\n  toolbar: {\r\n    \"& div\": {\r\n      flexFlow: \"wrap\",\r\n      justifyContent: \"flex-end\",\r\n      [theme.breakpoints.only(\"xs\")]: {\r\n        justifyContent: \"space-around\",\r\n      },\r\n    },\r\n  },\r\n}));\r\n\r\nexport default function LatestSongs({ res }) {\r\n  const classes = useStyles2();\r\n  const [page, setPage] = React.useState(0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(5);\r\n\r\n  const emptyRows =\r\n    rowsPerPage - Math.min(rowsPerPage, res.length - page * rowsPerPage);\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = (event) => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n  const pagination = {\r\n    lower: [{ label: \"همه\", value: -1 }],\r\n    low: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n    average: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"۱۰\", value: 10 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n    high: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"۱۰\", value: 10 },\r\n      { label: \"۲۵\", value: 25 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n    higher: [\r\n      { label: \"۵\", value: 5 },\r\n      { label: \"۱۰\", value: 10 },\r\n      { label: \"۲۵\", value: 25 },\r\n      { label: \"۵۰\", value: 50 },\r\n      { label: \"همه\", value: -1 },\r\n    ],\r\n  };\r\n  const sel =\r\n    res.length > 500\r\n      ? \"higher\"\r\n      : res.length >= 100\r\n      ? \"high\"\r\n      : res.length >= 30\r\n      ? \"average\"\r\n      : res.length > 5\r\n      ? \"low\"\r\n      : \"lower\";\r\n  const dateChanger = (d, t) => {\r\n    let date, time;\r\n    if (d) date = d;\r\n    if (t) time = t;\r\n    return date ? date : time;\r\n  };\r\n  return (\r\n    <Card className={clsx(classes.root)}>\r\n      <CardHeader title=\"آخرین آهنگ ها\" />\r\n      <Divider />\r\n      <Box>\r\n        <Table className={classes.table} aria-label=\"custom pagination table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell>نام آهنگ</TableCell>\r\n              <TableCell>ساعت</TableCell>\r\n              <TableCell>تاریخ</TableCell>\r\n              <TableCell>دقت</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n            {(rowsPerPage > 0\r\n              ? res.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n              : res\r\n            ).map((row) => (\r\n              <TableRow key={UniqId()}>\r\n                {row.song.id !== 0 ? (\r\n                  <TableCell>\r\n                    <Link\r\n                      to={`/lesson/${row.song.id}`}\r\n                      color=\"secondary\"\r\n                      component={RouterLink}\r\n                    >\r\n                      {row.song.name}\r\n                    </Link>\r\n                  </TableCell>\r\n                ) : (\r\n                  <TableCell>\r\n                    <Link to=\"/guide\" color=\"secondary\" component={RouterLink}>\r\n                      {row.song.name}\r\n                    </Link>\r\n                  </TableCell>\r\n                )}\r\n                <TableCell>{dateChanger(false, row.time)}</TableCell>\r\n                <TableCell>{dateChanger(row.date)}</TableCell>\r\n                <TableCell>\r\n                  <Chip color=\"secondary\" label={row.progress} size=\"small\" />\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n            {emptyRows > 0 && (\r\n              <TableRow style={{ height: 57 * emptyRows }}>\r\n                <TableCell colSpan={6} />\r\n              </TableRow>\r\n            )}\r\n          </TableBody>\r\n          <TableFooter>\r\n            <TableRow>\r\n              <TablePagination\r\n                className={classes.toolbar}\r\n                rowsPerPageOptions={pagination[sel]}\r\n                colSpan={4}\r\n                count={res.length}\r\n                rowsPerPage={rowsPerPage}\r\n                page={page}\r\n                SelectProps={{\r\n                  inputProps: { \"aria-label\": \"row per page\" },\r\n                  native: true,\r\n                }}\r\n                onChangePage={handleChangePage}\r\n                onChangeRowsPerPage={handleChangeRowsPerPage}\r\n                ActionsComponent={TablePaginationActions}\r\n              />\r\n            </TableRow>\r\n          </TableFooter>\r\n        </Table>\r\n      </Box>\r\n    </Card>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { Container, Grid } from \"@material-ui/core\";\r\nimport { getPlayTimes } from \"../../../_actions/profile.actions\";\r\nimport { DefaultProfileState } from \"../../../_types/profile.types\";\r\nimport LatestSongs from \"./LatestSongs\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\nimport { AppActions, AppState } from \"../../../_types\";\r\n\r\ninterface ProfilePageProps {}\r\n\r\ntype Props = ProfilePageProps & LinkDispatchProps & DefaultProfileState;\r\n\r\nclass Dashboard extends React.Component<Props> {\r\n  componentDidMount() {\r\n    if (!this.props.playtime) this.props.getPlayTimes();\r\n  }\r\n\r\n  render() {\r\n    const { playtime, loading } = this.props;\r\n    if (loading) {\r\n      return <LoadingCircle />;\r\n    }\r\n    if (!playtime) {\r\n      return <div>not signed...</div>;\r\n    } else {\r\n      return (\r\n        <Container maxWidth={false} style={{ paddingTop: \"10px\" }}>\r\n          <Grid container spacing={3}>\r\n            <Grid item lg={12} md={12} xl={12} xs={12}>\r\n              <LatestSongs res={playtime} />\r\n            </Grid>\r\n            {/* <Grid item lg={4} md={12} xl={4} xs={12}>\r\n              <InstrumentTraffic />\r\n            </Grid>\r\n            <Grid\r\n              container\r\n              spacing={3}\r\n              item\r\n              lg={8}\r\n              md={12}\r\n              xl={8}\r\n              xs={12}\r\n              style={{ margin: 0, padding: 0 }}\r\n            > */}\r\n            {/* <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <TotalLevel />\r\n              </Grid>\r\n              <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <Budget  />\r\n              </Grid>\r\n              <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <TotalCustomers  />\r\n              </Grid>\r\n              <Grid item lg={6} md={6} xl={6} xs={12}>\r\n                <TotalProfit /> */}\r\n            {/* </Grid> */}\r\n            {/* </Grid> */}\r\n          </Grid>\r\n        </Container>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  getPlayTimes: () => void;\r\n}\r\n\r\nconst mapStateToProps = (\r\n  state: AppState,\r\n  ownProps: Props\r\n): ProfilePageProps => {\r\n  return { ...state.user };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>,\r\n  ownProps: ProfilePageProps\r\n): LinkDispatchProps => ({\r\n  getPlayTimes: bindActionCreators(getPlayTimes, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\r\n","import React, { Component } from \"react\";\r\nimport clsx from \"clsx\";\r\n\r\nimport withStyles, { WithStyles } from \"@material-ui/core/styles/withStyles\";\r\nimport { createStyles, Theme, Typography, Avatar } from \"@material-ui/core\";\r\nimport { AccountCircle, ErrorOutline } from \"@material-ui/icons\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    hidden: { display: \"none\" },\r\n\r\n    container: {\r\n      margin: theme.spacing(2, 0),\r\n      textAlign: \"center\",\r\n    },\r\n    bigAvatar: {\r\n      margin: \"auto\",\r\n      width: 128,\r\n      height: 128,\r\n      borderColor: theme.palette.secondary.main,\r\n      borderStyle: \"solid\",\r\n      cursor: \"pointer\",\r\n    },\r\n    primaryBack: {\r\n      background: theme.palette.secondary.main,\r\n    },\r\n    whiteBack: {\r\n      background: \"white\",\r\n    },\r\n    errorBack: { background: theme.palette.error.main },\r\n  });\r\n\r\ninterface Props extends WithStyles<typeof useStyles> {\r\n  errorMessage: string;\r\n  title: string;\r\n  field: any;\r\n  image: string;\r\n  setFieldValue: (name: string, file: File) => void;\r\n}\r\ninterface State {\r\n  file?: any;\r\n  imagePreviewUrl: any;\r\n}\r\nclass ImageInput extends Component<Props, State> {\r\n  fileUpload: React.RefObject<HTMLInputElement>;\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      file: undefined,\r\n      imagePreviewUrl: null,\r\n    };\r\n    this.fileUpload = React.createRef();\r\n  }\r\n\r\n  showFileUpload = () => {\r\n    this.fileUpload.current?.click();\r\n  };\r\n\r\n  handleImageChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    e.preventDefault();\r\n    let reader = new FileReader();\r\n    const files = e.target.files;\r\n    if (files?.length) {\r\n      const file = files[0];\r\n      reader.onloadend = () => {\r\n        this.setState({\r\n          file,\r\n          imagePreviewUrl: reader.result,\r\n        });\r\n      };\r\n      reader.readAsDataURL(file);\r\n      this.props.setFieldValue(this.props.field.name, file);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { errorMessage, classes, image } = this.props;\r\n    const { name } = this.props.field;\r\n    const { file, imagePreviewUrl } = this.state;\r\n\r\n    const avatarStyle = clsx(\r\n      classes.bigAvatar,\r\n      this.state.file ? [classes.whiteBack] : [classes.primaryBack],\r\n      { [classes.errorBack]: errorMessage }\r\n    );\r\n\r\n    return (\r\n      <div className={classes.container}>\r\n        <input\r\n          className={classes.hidden}\r\n          id={name}\r\n          name={name}\r\n          type=\"file\"\r\n          onChange={this.handleImageChange}\r\n          ref={this.fileUpload}\r\n          accept=\"image/png, image/jpeg\"\r\n        />\r\n        <Avatar\r\n          className={avatarStyle}\r\n          onClick={this.showFileUpload}\r\n          alt=\"avatar\"\r\n          src={\r\n            errorMessage\r\n              ? undefined\r\n              : file\r\n              ? imagePreviewUrl\r\n              : image\r\n              ? image\r\n              : undefined\r\n          }\r\n        >\r\n          {errorMessage ? (\r\n            <ErrorOutline style={{ fontSize: 36 }} />\r\n          ) : (\r\n            <AccountCircle style={{ fontSize: 36 }} />\r\n          )}\r\n        </Avatar>\r\n        {errorMessage ? (\r\n          <Typography variant=\"caption\" color=\"error\">\r\n            {errorMessage}\r\n          </Typography>\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(useStyles)(ImageInput);\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n  Box,\r\n  Button,\r\n  Container,\r\n  createStyles,\r\n  Grid,\r\n  LinearProgress,\r\n  Theme,\r\n  Typography,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\nimport * as Yup from \"yup\";\r\nimport { Field, Form, Formik } from \"formik\";\r\nimport { TextField } from \"formik-material-ui\";\r\nimport {\r\n  profileRequest,\r\n  updateProfile,\r\n} from \"../../../_actions/profile.actions\";\r\nimport { DefaultProfileState } from \"../../../_types/profile.types\";\r\nimport { DefaultUserState } from \"../../../_types/auth.types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { AppState } from \"../../../_types\";\r\nimport ImageInput from \"./ImageInput\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\n\r\nconst phoneRegExp = /^((\\\\+[1-9]{1,4}[ \\\\-]*)|(\\\\([0-9]{2,3}\\\\)[ \\\\-]*)|([0-9]{2,4})[ \\\\-]*)*?[0-9]{3,4}?[ \\\\-]*[0-9]{3,4}?$/;\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"99vw\",\r\n      minHeight: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 48px)\",\r\n        padding: theme.spacing(1),\r\n      },\r\n      padding: theme.spacing(2),\r\n    },\r\n    container: {\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"space-between\",\r\n    },\r\n    form: {\r\n      margin: theme.spacing(2),\r\n      display: \"flex\",\r\n      justifyContent: \"space-between\",\r\n      \"& > div\": {\r\n        width: \"100%\",\r\n      },\r\n    },\r\n  });\r\n\r\ninterface ProfilePageProps extends WithStyles<typeof useStyles> {\r\n  auth: DefaultUserState;\r\n}\r\n\r\ntype Props = ProfilePageProps &\r\n  DefaultProfileState &\r\n  ReturnType<typeof mapDispatchToProps>;\r\n\r\nclass Profile extends Component<Props> {\r\n  componentDidMount() {\r\n    if (!this.props.loading) this.props.getProfile();\r\n  }\r\n  render() {\r\n    const { data, loading, classes } = this.props;\r\n    const FILE_SIZE = 160 * 1024;\r\n    if (!data) {\r\n      return <LoadingCircle />;\r\n    } else {\r\n      const initData = {\r\n        image_select: data.image_select,\r\n        first_name: data.first_name,\r\n        last_name: data.last_name,\r\n        nickname: data.nickname,\r\n        mobile: data.mobile ? data.mobile : \"\",\r\n      };\r\n      return (\r\n        <Container maxWidth={false} className={classes.root}>\r\n          <Grid container spacing={3}>\r\n            <Grid\r\n              item\r\n              lg={12}\r\n              md={12}\r\n              xl={12}\r\n              xs={12}\r\n              className={classes.container}\r\n            >\r\n              <Container\r\n                component=\"main\"\r\n                maxWidth=\"xs\"\r\n                style={{ paddingTop: \"10px\" }}\r\n              >\r\n                <Formik\r\n                  initialValues={initData}\r\n                  validationSchema={Yup.object().shape({\r\n                    image_select: Yup.mixed().test(\r\n                      \"fileSize\",\r\n                      `File too large ,should be lower than ${\r\n                        FILE_SIZE / 1000\r\n                      }kb`,\r\n                      (value) =>\r\n                        value && typeof value === \"object\"\r\n                          ? value.size <= FILE_SIZE\r\n                          : true\r\n                    ),\r\n                    first_name: Yup.string()\r\n                      .max(255)\r\n                      .required(\"First name is required\"),\r\n                    last_name: Yup.string()\r\n                      .max(255)\r\n                      .required(\"Last name is required\"),\r\n                    nickname: Yup.string()\r\n                      .max(255)\r\n                      .required(\"User name is required\"),\r\n                    mobile: Yup.string().matches(\r\n                      phoneRegExp,\r\n                      \"Phone number is not valid\"\r\n                    ),\r\n                  })}\r\n                  onSubmit={(e: typeof initData, { resetForm }) => {\r\n                    let val: any = e;\r\n                    if (typeof e.image_select === \"string\")\r\n                      val = { ...e, image_select: undefined };\r\n                    this.props.updateProfile({\r\n                      ...val,\r\n                    });\r\n                    resetForm({\r\n                      values: {\r\n                        ...e,\r\n                        image_select: data.image_select,\r\n                      },\r\n                    });\r\n                  }}\r\n                >\r\n                  {({ setFieldValue, initialValues, errors }) => (\r\n                    <Form>\r\n                      <Box mb={3}>\r\n                        <Field\r\n                          name=\"image_select\"\r\n                          component={ImageInput}\r\n                          image={initialValues.image_select}\r\n                          setFieldValue={setFieldValue}\r\n                          margin=\"normal\"\r\n                          errorMessage={\r\n                            errors[\"image_select\"]\r\n                              ? errors[\"image_select\"]\r\n                              : undefined\r\n                          }\r\n                        />\r\n                        <Typography\r\n                          color=\"textSecondary\"\r\n                          align=\"center\"\r\n                          variant=\"h5\"\r\n                        >\r\n                          Personal Information\r\n                        </Typography>\r\n                        <Field\r\n                          component={TextField}\r\n                          color=\"secondary\"\r\n                          fullWidth\r\n                          label=\"نام نمایشی\"\r\n                          margin=\"normal\"\r\n                          name=\"nickname\"\r\n                          variant=\"outlined\"\r\n                        />\r\n                        <Field\r\n                          component={TextField}\r\n                          color=\"secondary\"\r\n                          fullWidth\r\n                          label=\"نام\"\r\n                          margin=\"normal\"\r\n                          name=\"first_name\"\r\n                          variant=\"outlined\"\r\n                        />\r\n                        <Field\r\n                          component={TextField}\r\n                          color=\"secondary\"\r\n                          fullWidth\r\n                          label=\"نام خانوادگی\"\r\n                          margin=\"normal\"\r\n                          name=\"last_name\"\r\n                          variant=\"outlined\"\r\n                        />\r\n                        <Field\r\n                          component={TextField}\r\n                          color=\"secondary\"\r\n                          fullWidth\r\n                          label=\"موبایل\"\r\n                          margin=\"normal\"\r\n                          name=\"mobile\"\r\n                          type=\"mobile\"\r\n                          variant=\"outlined\"\r\n                        />\r\n                        {loading && <LinearProgress color=\"secondary\" />}\r\n                        <Box my={2}>\r\n                          <Button\r\n                            color=\"secondary\"\r\n                            disabled={loading}\r\n                            fullWidth\r\n                            size=\"large\"\r\n                            type=\"submit\"\r\n                            variant=\"contained\"\r\n                          >\r\n                            Save\r\n                          </Button>\r\n                        </Box>\r\n                      </Box>\r\n                    </Form>\r\n                  )}\r\n                </Formik>\r\n              </Container>\r\n            </Grid>\r\n          </Grid>\r\n        </Container>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (\r\n  state: AppState,\r\n  ownProps: Props\r\n): ProfilePageProps => {\r\n  return {\r\n    ...state.user,\r\n    auth: state.auth,\r\n    classes: ownProps.classes,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  getProfile: bindActionCreators(profileRequest, dispatch),\r\n  updateProfile: bindActionCreators(updateProfile, dispatch),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(Profile));\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { IGuide } from \"../../../_types/guide.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: 300,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n      [theme.breakpoints.down(350)]: {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  guide: IGuide;\r\n};\r\n\r\nexport const GuideCard: React.FC<Props> = ({ guide }) => {\r\n  const classes = useStyles();\r\n  const { title, thumbnails, description, teacher } = guide;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/guide/${guide.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(thumbnails)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {description}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {teacher}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { requestAllGuide } from \"../../../_actions/guide.actions\";\r\nimport { IGuide } from \"../../../_types/guide.types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { GuideCard } from \"./GuideCard\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface GuideProps extends WithStyles<typeof useStyles> {\r\n  data: IGuide[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = GuideProps & LinkDispatchProps;\r\n\r\nclass GuideList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllGuide();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">مجموعه ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <LoadingCircle />\r\n          ) : data.length ? (\r\n            data.map((guide: IGuide) => (\r\n              <GuideCard key={guide.id} guide={guide} />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllGuide: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): GuideProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.bank.guides,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllGuide: bindActionCreators(requestAllGuide, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(GuideList)) as unknown) as ComponentType<unknown>;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  IconButton,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n  CircularProgress,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\nimport { Favorite, FavoriteBorder } from \"@material-ui/icons\";\r\nimport { addFavorites } from \"../../../_actions/profile.actions\";\r\nimport { DefaultProfileState } from \"../../../_types/profile.types\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: 300,\r\n      maxHeight: 360,\r\n      position: \"relative\",\r\n      margin: theme.spacing(2),\r\n      [theme.breakpoints.down(350)]: {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n    rightChip: {\r\n      backgroundColor: \"#fafafac2\",\r\n      position: \"absolute\",\r\n      zIndex: 30,\r\n      right: theme.spacing(1),\r\n      top: theme.spacing(1),\r\n      \"&:hover\": {\r\n        backgroundColor: \"#fafafac2\",\r\n      },\r\n    },\r\n    svgSize: {\r\n      color: theme.palette.secondary.main,\r\n      width: 34,\r\n      height: 34,\r\n      \"&:hover\": {\r\n        color: theme.palette.primary.main,\r\n      },\r\n    },\r\n    loading: {\r\n      maxWidth: 34,\r\n      maxHeight: 34,\r\n      color: theme.palette.secondary.main,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  lesson: ILesson;\r\n  user: DefaultProfileState;\r\n  type: string;\r\n};\r\n\r\nexport const LessonCard: React.FC<Props> = ({ lesson, user, type }) => {\r\n  const classes = useStyles();\r\n  const { title, featured_img, excerpt, author, id } = lesson;\r\n  const { loading, error, favorite } = user;\r\n  const [changed, setChanged] = useState(false);\r\n\r\n  const clickHandler = () => {\r\n    store.dispatch(push(`/${type}/${id}`));\r\n  };\r\n  const handleFavorite = () => {\r\n    store.dispatch(\r\n      addFavorites({ title, featured_img, excerpt, author, id, type })\r\n    );\r\n    setChanged(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (changed) setChanged(loading);\r\n    else if (error === \"Please login!\") setChanged(false);\r\n    return () => {\r\n      setChanged(false);\r\n    };\r\n  }, [loading, error, changed]);\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <IconButton\r\n        aria-label=\"add to favorites\"\r\n        className={classes.rightChip}\r\n        onClick={handleFavorite}\r\n      >\r\n        {changed ? (\r\n          <CircularProgress className={classes.loading} />\r\n        ) : favorite?.some((fav) => fav.id === id) ? (\r\n          <Favorite className={classes.svgSize} />\r\n        ) : (\r\n          <FavoriteBorder className={classes.svgSize} />\r\n        )}\r\n      </IconButton>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(featured_img)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {excerpt}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {author}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  Grid,\r\n  Typography,\r\n  Theme,\r\n  createStyles,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { requestAllLesson } from \"../../../_actions/lesson.actions\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { LessonCard } from \"./LessonCard\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\nimport { DefaultProfileState } from \"../../../_types/profile.types\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface LessonProps extends WithStyles<typeof useStyles> {\r\n  data: ILesson[];\r\n  error?: string;\r\n  loading?: boolean;\r\n  user: DefaultProfileState;\r\n}\r\n\r\ntype Props = LessonProps & LinkDispatchProps;\r\n\r\nclass LessonList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllLesson();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes, user } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">درس ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <LoadingCircle />\r\n          ) : data.length ? (\r\n            data.map((lesson: ILesson) => (\r\n              <LessonCard\r\n                key={lesson.id}\r\n                lesson={lesson}\r\n                user={user}\r\n                type=\"lesson\"\r\n              />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllLesson: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): LessonProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    user: state.user,\r\n    ...state.bank.lessons,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllLesson: bindActionCreators(requestAllLesson, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(LessonList)) as unknown) as ComponentType<unknown>;\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: 300,\r\n      maxHeight: 360,\r\n      margin: theme.spacing(2),\r\n      [theme.breakpoints.down(350)]: {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  course: ICourse;\r\n};\r\n\r\nexport const CourseCard: React.FC<Props> = ({ course }) => {\r\n  const classes = useStyles();\r\n  const { title, thumbnails, description, teacher } = course;\r\n\r\n  const clickHandler = (\r\n    e: React.MouseEvent<HTMLButtonElement, MouseEvent>\r\n  ): void => {\r\n    store.dispatch(push(`/course/${course.id}`));\r\n  };\r\n  return (\r\n    <Card className={classes.root}>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(thumbnails)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {description}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {teacher}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  Grid,\r\n  Typography,\r\n  WithStyles,\r\n  createStyles,\r\n  Theme,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { CourseCard } from \"./CourseCard\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { ICourse } from \"../../../_types/course.types\";\r\nimport { requestAllCourse } from \"../../../_actions/course.actions\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface CourseProps extends WithStyles<typeof useStyles> {\r\n  data: ICourse[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = CourseProps & LinkDispatchProps;\r\n\r\nclass CourseList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllCourse();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">آموزش ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <LoadingCircle />\r\n          ) : data.length ? (\r\n            data.map((course: ICourse) => (\r\n              <CourseCard key={course.id} course={course} />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllCourse: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): CourseProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.bank.courses,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllCourse: bindActionCreators(requestAllCourse, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(CourseList)) as unknown) as ComponentType<unknown>;\r\n","import React from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Card,\r\n  Button,\r\n  CardMedia,\r\n  Typography,\r\n  IconButton,\r\n  CardContent,\r\n  CardActions,\r\n  CardActionArea,\r\n} from \"@material-ui/core\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { thumbnailsFinder } from \"../../../_helpers/constants\";\r\nimport { Favorite } from \"@material-ui/icons\";\r\nimport { addFavorites } from \"../../../_actions/profile.actions\";\r\nimport { IFavorite } from \"../../../_types/profile.types\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: 300,\r\n      maxHeight: 360,\r\n      position: \"relative\",\r\n      margin: theme.spacing(2),\r\n      [theme.breakpoints.down(350)]: {\r\n        margin: theme.spacing(1),\r\n      },\r\n    },\r\n    cardAction: {\r\n      justifyContent: \"space-between\",\r\n      margin: \"inherit\",\r\n    },\r\n    content: {\r\n      minHeight: 150,\r\n    },\r\n    rightChip: {\r\n      position: \"absolute\",\r\n      zIndex: 30,\r\n      right: theme.spacing(1),\r\n      top: theme.spacing(1),\r\n    },\r\n    svgSize: {\r\n      color: theme.palette.secondary.main,\r\n      width: 34,\r\n      height: 34,\r\n    },\r\n  })\r\n);\r\n\r\ntype Props = {\r\n  favorite: IFavorite;\r\n};\r\n\r\nexport const FavoriteCard: React.FC<Props> = ({ favorite }) => {\r\n  const classes = useStyles();\r\n  const { title, featured_img, excerpt, author, id, type } = favorite;\r\n\r\n  const clickHandler = () => {\r\n    store.dispatch(push(`/${type}/${id}`));\r\n  };\r\n  const handleFavorite = () => {\r\n    store.dispatch(addFavorites({ ...favorite, type: \"lesson\" }));\r\n  };\r\n\r\n  return (\r\n    <Card className={classes.root}>\r\n      <IconButton\r\n        aria-label=\"add to favorites\"\r\n        className={classes.rightChip}\r\n        onClick={handleFavorite}\r\n      >\r\n        <Favorite className={classes.svgSize} />\r\n      </IconButton>\r\n      <CardActionArea onClick={clickHandler}>\r\n        <CardMedia\r\n          component=\"img\"\r\n          alt={title}\r\n          height=\"140\"\r\n          image={thumbnailsFinder(featured_img)}\r\n          title={title}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n            {title}\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n            {excerpt}\r\n          </Typography>\r\n        </CardContent>\r\n      </CardActionArea>\r\n      <CardActions className={classes.cardAction}>\r\n        <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n          از {author}\r\n        </Typography>\r\n        <Button size=\"medium\" color=\"secondary\" onClick={clickHandler}>\r\n          ادامه مطلب\r\n        </Button>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n};\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../../_types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { FavoriteCard } from \"./FavoriteCard\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\nimport { IFavorite } from \"../../../_types/profile.types\";\r\nimport { profileRequest } from \"../../../_actions/profile.actions\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface FavoriteProps extends WithStyles<typeof useStyles> {\r\n  favorite?: IFavorite[];\r\n  error: string;\r\n  loading: boolean;\r\n}\r\ntype Props = FavoriteProps & LinkDispatchProps;\r\n\r\nclass FavoriteList extends Component<Props> {\r\n  shouldComponentUpdate(nextProps: Props) {\r\n    if (!nextProps.loading) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.loading) this.props.profileRequest();\r\n  }\r\n\r\n  render() {\r\n    const { loading, favorite, error, classes } = this.props;\r\n    const length = favorite ? favorite.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">موردعلاقه ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <LoadingCircle />\r\n          ) : favorite ? (\r\n            favorite\r\n              .slice(0)\r\n              .reverse()\r\n              .map((favorite: IFavorite) => (\r\n                <FavoriteCard key={favorite.id} favorite={favorite} />\r\n              ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  profileRequest: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): FavoriteProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    ...state.user,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  profileRequest: bindActionCreators(profileRequest, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(FavoriteList)) as unknown) as ComponentType<unknown>;\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  Chip,\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  Typography,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\n\r\nimport { AppState } from \"../../../_types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport { ILesson } from \"../../../_types/lesson.types\";\r\nimport { requestAllExercise } from \"../../../_actions/exercise.actions\";\r\nimport { LoadingCircle } from \"../../Layout/Loadings\";\r\nimport { LessonCard } from \"../Lesson/LessonCard\";\r\nimport { DefaultProfileState } from \"../../../_types/profile.types\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    header: {\r\n      position: \"relative\",\r\n    },\r\n    cardList: {\r\n      minHeight: \"calc(100vh - 240px)\",\r\n    },\r\n    chip: {\r\n      position: \"absolute\",\r\n      right: 0,\r\n      top: 0,\r\n    },\r\n    autoMargin: {\r\n      margin: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface ExerciseProps extends WithStyles<typeof useStyles> {\r\n  data: ILesson[];\r\n  error: string;\r\n  user: DefaultProfileState;\r\n  loading: boolean;\r\n}\r\n\r\ntype Props = ExerciseProps & LinkDispatchProps;\r\n\r\nclass ExerciseList extends Component<Props> {\r\n  componentDidMount() {\r\n    this.props.requestAllExercise();\r\n  }\r\n\r\n  render() {\r\n    const { loading, data, error, classes, user } = this.props;\r\n    const length = data ? data.length : 0;\r\n    return (\r\n      <>\r\n        <div className={classes.header}>\r\n          <Typography variant=\"h3\">تمرین ها</Typography>\r\n          <Chip\r\n            className={classes.chip}\r\n            color=\"secondary\"\r\n            label={\"تعداد: \" + length}\r\n          />\r\n        </div>\r\n        <Grid container justify=\"center\" className={classes.cardList}>\r\n          {loading ? (\r\n            <LoadingCircle />\r\n          ) : data.length ? (\r\n            data.map((exercise: ILesson) => (\r\n              <LessonCard\r\n                key={exercise.id}\r\n                lesson={exercise}\r\n                user={user}\r\n                type=\"exercise\"\r\n              />\r\n            ))\r\n          ) : (\r\n            <Typography component=\"div\" className={classes.autoMargin}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n        </Grid>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {\r\n  requestAllExercise: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props): ExerciseProps => {\r\n  return {\r\n    classes: ownProps.classes,\r\n    user: state.user,\r\n    ...state.bank.exercises,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  requestAllExercise: bindActionCreators(requestAllExercise, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(withStyles(useStyles)(ExerciseList)) as unknown) as ComponentType<unknown>;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { push } from \"connected-react-router\";\r\nimport {\r\n  Tab,\r\n  Box,\r\n  Tabs,\r\n  AppBar,\r\n  makeStyles,\r\n  Paper,\r\n  Theme,\r\n  useMediaQuery,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  LibraryMusic,\r\n  QueueMusic,\r\n  MusicNote,\r\n  EmojiSymbols,\r\n  Favorite,\r\n} from \"@material-ui/icons\";\r\n\r\nimport GuideList from \"./Guide/GuideList\";\r\nimport LessonList from \"./Lesson/LessonList\";\r\nimport CourseList from \"./Course/CourseList\";\r\nimport FavoriteList from \"./Favorite/FavoriteList\";\r\nimport ExerciseList from \"./Exercise/ExerciseList\";\r\nimport { AppActions, AppState } from \"../../_types\";\r\nimport { connect } from \"react-redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\n\r\nconst pages = [\r\n  {\r\n    link: \"/guide\",\r\n    icon: <LibraryMusic />,\r\n    label: \"GUIDES\",\r\n    child: <GuideList />,\r\n  },\r\n  {\r\n    link: \"/course\",\r\n    icon: <QueueMusic />,\r\n    label: \"COURSES\",\r\n    child: <CourseList />,\r\n  },\r\n  {\r\n    link: \"/lesson\",\r\n    icon: <MusicNote />,\r\n    label: \"LESSONS\",\r\n    child: <LessonList />,\r\n  },\r\n  {\r\n    link: \"/exercise\",\r\n    icon: <EmojiSymbols />,\r\n    label: \"EXERCISES\",\r\n    child: <ExerciseList />,\r\n  },\r\n  {\r\n    link: \"/favorite\",\r\n    icon: <Favorite />,\r\n    label: \"FAVORITES\",\r\n    child: <FavoriteList />,\r\n  },\r\n];\r\n\r\nconst pageName = (num: number) => {\r\n  return pages[num].link;\r\n};\r\nconst pageNumber = (name: string) => {\r\n  const obj = pages.find((page) => page.link === name);\r\n  if (obj) return pages.indexOf(obj);\r\n  return 0;\r\n};\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    width: \"100vw\",\r\n  },\r\n  tabControl: {\r\n    [theme.breakpoints.down(880)]: {\r\n      minWidth: 150,\r\n    },\r\n    [theme.breakpoints.down(830)]: {\r\n      minWidth: 140,\r\n    },\r\n    [theme.breakpoints.down(780)]: {\r\n      minWidth: 120,\r\n    },\r\n    [theme.breakpoints.down(680)]: {\r\n      minWidth: 100,\r\n    },\r\n    [theme.breakpoints.down(500)]: {\r\n      minWidth: 80,\r\n    },\r\n    [theme.breakpoints.down(370)]: {\r\n      minWidth: 65,\r\n    },\r\n    [theme.breakpoints.down(320)]: {\r\n      minWidth: 55,\r\n    },\r\n  },\r\n  tabPanel: {\r\n    padding: theme.spacing(2),\r\n  },\r\n}));\r\n\r\ninterface Props {\r\n  loggedIn: boolean;\r\n  pathName: string;\r\n  push: (num: string) => void;\r\n}\r\n\r\nconst LearningPage: React.FC<Props> = ({ loggedIn, pathName, push }) => {\r\n  const classes = useStyles();\r\n\r\n  const [value, setValue] = useState(pageNumber(pathName));\r\n\r\n  useEffect(() => {\r\n    if (pathName === \"/favorite\" && !loggedIn) push(pageName(0));\r\n    else setValue(pageNumber(pathName));\r\n  }, [pathName, loggedIn, push]);\r\n\r\n  const matches = useMediaQuery(\"(min-width:500px)\");\r\n\r\n  const handleChange = (newValue: number) => {\r\n    setValue(newValue);\r\n    push(pageName(newValue));\r\n  };\r\n  return (\r\n    <>\r\n      <AppBar position=\"static\">\r\n        <Paper square>\r\n          <Tabs\r\n            value={value}\r\n            onChange={(_, e) => handleChange(e)}\r\n            variant=\"scrollable\"\r\n            indicatorColor=\"secondary\"\r\n            textColor=\"secondary\"\r\n            scrollButtons=\"desktop\"\r\n            aria-label=\"icon label tabs\"\r\n          >\r\n            {pages.map((page, i) =>\r\n              i !== 4 ? (\r\n                <Tab\r\n                  className={classes.tabControl}\r\n                  key={page.label}\r\n                  icon={page.icon}\r\n                  label={matches ? page.label : null}\r\n                  id={`full-width-tab-${i}`}\r\n                  aria-controls={`full-width-tabpanel-${i}`}\r\n                />\r\n              ) : (\r\n                loggedIn && (\r\n                  <Tab\r\n                    className={classes.tabControl}\r\n                    key={page.label}\r\n                    icon={page.icon}\r\n                    label={matches ? page.label : null}\r\n                    id={`full-width-tab-${i}`}\r\n                    aria-controls={`full-width-tabpanel-${i}`}\r\n                  />\r\n                )\r\n              )\r\n            )}\r\n          </Tabs>\r\n        </Paper>\r\n      </AppBar>\r\n      {pages.map((page, i) => (\r\n        <div\r\n          key={page.label + i}\r\n          role=\"tabpanel\"\r\n          hidden={value !== i}\r\n          id={`full-width-tabpanel-${i}`}\r\n          aria-labelledby={`full-width-tab-${i}`}\r\n        >\r\n          {value === i && <Box className={classes.tabPanel}>{page.child}</Box>}\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\nconst mapStateToProps = (state: AppState) => ({\r\n  loggedIn: state.auth.loggedIn,\r\n  pathName: state.router.location.pathname,\r\n});\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  push: bindActionCreators(push, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(LearningPage);\r\n","import React, { useState } from \"react\";\r\n\r\nconst initialColors = [\r\n  { color: \"red\", active: false },\r\n  { color: \"red\", active: false },\r\n  { color: \"yellow\", active: false },\r\n  { color: \"yellow\", active: false },\r\n  { color: \"blue\", active: false },\r\n  { color: \"blue\", active: false },\r\n  { color: \"orange\", active: false },\r\n  { color: \"orange\", active: false },\r\n  { color: \"pink\", active: false },\r\n  { color: \"pink\", active: false },\r\n  { color: \"purple\", active: false },\r\n  { color: \"purple\", active: false },\r\n  { color: \"white\", active: false },\r\n  { color: \"white\", active: false },\r\n  { color: \"green\", active: false },\r\n  { color: \"green\", active: false },\r\n];\r\nlet lastColor = null;\r\nlet lastTimer = null;\r\n\r\nfunction Test() {\r\n  const [colors, setColors] = useState(initialColors);\r\n\r\n  const changeColor = (index) => {\r\n    setColors((prev) =>\r\n      prev.map((x, i) => (i === index ? { ...x, active: !x.active } : x))\r\n    );\r\n  };\r\n\r\n  const clickHandler = (index) => {\r\n    if (colors[index].active) return;\r\n    else changeColor(index);\r\n    if (lastColor === colors[index].color) {\r\n      clearTimeout(lastTimer);\r\n    } else {\r\n      lastTimer = setTimeout(() => {\r\n        changeColor(index);\r\n      }, 1000);\r\n    }\r\n    lastColor = colors[index].color;\r\n  };\r\n  const resetGame = () => {\r\n    lastColor = null;\r\n    clearTimeout(lastTimer);\r\n    setColors(initialColors);\r\n  };\r\n  return (\r\n    <div>\r\n      <button onClick={resetGame}>Rest</button>\r\n      <div\r\n        style={{\r\n          display: \"flex\",\r\n          flexFlow: \"wrap\",\r\n          maxWidth: 400,\r\n          maxHeight: 400,\r\n          justifyContent: \"space-between\",\r\n          margin: \"auto\",\r\n        }}\r\n      >\r\n        {colors.map(({ color, active }, i) => (\r\n          <button\r\n            key={i}\r\n            style={{\r\n              backgroundColor: active ? color : \"black\",\r\n              height: 100,\r\n              width: 100,\r\n            }}\r\n            onClick={() => clickHandler(i)}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Test;\r\n","import React, { lazy, Suspense } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport { LoadingCircle } from \"../components/Layout/Loadings\";\n\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport About from \"../components/InfoPages/About\";\nimport PostList from \"../components/PostPages/PostList\";\nimport LoginPage from \"../components/AuthPages/LoginPage\";\nimport LostPassPage from \"../components/AuthPages/LostPage\";\nimport RegisterPage from \"../components/AuthPages/RegisterPage\";\nimport Dashboard from \"../components/UserPages/Dashboard\";\nimport Profile from \"../components/UserPages/Profile\";\nimport LearningPage from \"../components/LearningPages\";\nimport Test from \"./Test\";\n\nconst Post = lazy(() => import(\"../components/PostPages\"));\nconst Guide = lazy(() => import(\"../components/LearningPages/Guide\"));\nconst Course = lazy(() => import(\"../components/LearningPages/Course\"));\nconst Lesson = lazy(() => import(\"../components/LearningPages/Lesson\"));\nconst Exercise = lazy(() => import(\"../components/LearningPages/Exercise\"));\n\nconst AppRouter = () => (\n  <Switch>\n    <Suspense fallback={<LoadingCircle />}>\n      <Route exact path={[\"/\", \"/post\"]} component={PostList} />\n      <Route exact path=\"/learning\" component={LearningPage} />\n      <Route\n        exact\n        path={[\"/guide\", \"/course\", \"/exercise\", \"/favorite\", \"/lesson\"]}\n        component={LearningPage}\n      />\n      <Route exact path=\"/post/:id\" component={Post} />\n      <Route exact path=\"/guide/:id\" component={Guide} />\n      <Route\n        exact\n        path={[\"/course/:id\", \"/guide/:id/course=:id\"]}\n        component={Course}\n      />\n      <Route\n        exact\n        path={[\n          \"/lesson/:id\",\n          \"/course/:id/lesson=:id\",\n          \"/guide/:id/lesson=:id\",\n          \"/guide/:id/course=:id/lesson=:id\",\n        ]}\n        component={Lesson}\n      />\n      <Route\n        exact\n        path={[\n          \"/exercise/:id\",\n          \"/course/:id/exercise=:id\",\n          \"/guide/:id/exercise=:id\",\n          \"/guide/:id/course=:id/exercise=:id\",\n        ]}\n        component={Exercise}\n      />\n      <Route exact path=\"/login\" component={LoginPage} />\n      <Route exact path=\"/register\" component={RegisterPage} />\n      <Route exact path=\"/lostpassword\" component={LostPassPage} />\n      <ProtectedRoute\n        exact\n        path=\"/dashboard\"\n        component={Dashboard}\n        isAllowed={true}\n        restrictedPath=\"/dashboard\"\n        authenticationPath=\"/login\"\n      />\n      <ProtectedRoute\n        exact\n        path=\"/profile\"\n        component={Profile}\n        isAllowed={true}\n        restrictedPath=\"/profile\"\n        authenticationPath=\"/login\"\n      />\n      <Route exact path=\"/about\" component={About} />\n      <Route exact path=\"/test\" component={Test} />\n    </Suspense>\n  </Switch>\n);\n\nexport default AppRouter;\n","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport {\r\n  Divider,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { ArrowForward } from \"@material-ui/icons\";\r\nimport { ILesson } from \"../../../../../_types/lesson.types\";\r\n// import AccountCircle from \"@material-ui/icons/AccountCircle\";\r\n// import MenuItem from \"@material-ui/core/MenuItem\";\r\n// import Menu from \"@material-ui/core/Menu\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      flexGrow: 1,\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n    title: {\r\n      flexGrow: 1,\r\n    },\r\n    divider: {\r\n      margin: theme.spacing(0, 2),\r\n    },\r\n  })\r\n);\r\n\r\ninterface Props {\r\n  modeChanger: () => void;\r\n  lesson?: ILesson;\r\n}\r\n\r\nexport default function MenuAppBar({ lesson, modeChanger }: Props) {\r\n  const classes = useStyles();\r\n  // const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  // const open = Boolean(anchorEl);\r\n\r\n  // const handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n  //   setAnchorEl(event.currentTarget);\r\n  // };\r\n\r\n  // const handleClose = () => {\r\n  //   setAnchorEl(null);\r\n  // };\r\n\r\n  return (\r\n    <AppBar position=\"static\" color=\"default\" className={classes.root}>\r\n      <Toolbar>\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          onClick={modeChanger}\r\n        >\r\n          <ArrowForward />\r\n        </IconButton>\r\n        <Divider orientation=\"vertical\" flexItem className={classes.divider} />\r\n        <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\r\n          {lesson?.title}\r\n        </Typography>\r\n        {/*<div>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"menu-appbar\"\r\n            aria-haspopup=\"true\"\r\n            onClick={handleMenu}\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <Menu\r\n            id=\"menu-appbar\"\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            keepMounted\r\n            transformOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            open={open}\r\n            onClose={handleClose}\r\n          >\r\n            <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n            <MenuItem onClick={handleClose}>My account</MenuItem>\r\n          </Menu>\r\n          </div>*/}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { canvasWheel } from \"../../../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\n\r\ninterface CanvasProps {\r\n  Melo: IMelodition;\r\n  drawGame: (canvas: HTMLCanvasElement) => void;\r\n}\r\nconst GameFront: React.FC<CanvasProps> = ({ Melo, drawGame }) => {\r\n  const drawFrontContext = (ref: HTMLCanvasElement | null) => {\r\n    if (ref && Melo.gameLoading && Melo.canvasSize) {\r\n      drawGame(ref);\r\n    }\r\n  };\r\n  return (\r\n    <canvas\r\n      ref={(ref) => drawFrontContext(ref)}\r\n      width={Melo.canvasSize?.width}\r\n      height={Melo.canvasSize?.height}\r\n      style={{ position: \"absolute\", top: 0, left: 0, zIndex: 2 }}\r\n      onWheel={(e) => canvasWheel(e)}\r\n    />\r\n  );\r\n};\r\nexport default GameFront;\r\n","import React from \"react\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\n\r\ninterface CanvasProps {\r\n  Melo: IMelodition;\r\n}\r\n\r\nconst GameBack: React.FC<CanvasProps> = ({ Melo }) => {\r\n  const drawBackContext = (ref: HTMLCanvasElement | null) => {\r\n    if (ref && Melo.canvasSize && Melo.gameLoading) {\r\n      const backCtx = ref.getContext(\"2d\")!;\r\n      backCtx.clearRect(0, 0, Melo.canvasSize.width, Melo.canvasSize.height);\r\n      const keyRefs = Melo.pianoSize;\r\n      const length = keyRefs ? keyRefs.length - 1 : 61;\r\n      const lineWidth = keyRefs ? keyRefs[length].width : 0.5;\r\n      const h = Melo.canvasSize.height;\r\n      keyRefs?.forEach((rect, i) => {\r\n        backCtx.beginPath();\r\n        const x = rect.left;\r\n        if (rect.key === \"CF\") {\r\n          backCtx.moveTo(x, 0);\r\n          backCtx.lineTo(x, h);\r\n          backCtx.lineWidth = lineWidth;\r\n          backCtx.strokeStyle = \"rgba(50,50,50,0.8)\";\r\n          backCtx.stroke();\r\n        } else if (rect.key === \"last\") {\r\n          backCtx.moveTo(x, 0);\r\n          backCtx.lineTo(x, h);\r\n          backCtx.lineWidth = lineWidth;\r\n          backCtx.strokeStyle = \"rgba(50,50,50,0.8)\";\r\n          backCtx.stroke();\r\n        } else if (rect.key === \"black\") {\r\n          backCtx.rect(x, 0, rect.width, h);\r\n          backCtx.fillStyle = \"rgba(0,0,0,0.4)\";\r\n          backCtx.fill();\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <canvas\r\n      ref={(ref) => drawBackContext(ref)}\r\n      width={Melo.canvasSize?.width}\r\n      height={Melo.canvasSize?.height}\r\n      style={{ zIndex: 1 }}\r\n    />\r\n  );\r\n};\r\nexport default GameBack;\r\n","import React from \"react\";\r\nimport { canvasWheel } from \"../../../../../_actions/player.actions\";\r\nimport { ICanvas } from \"../../../../../_types/player.types\";\r\n\r\nconst SvgLine: React.FC<ICanvas> = ({ width, baseLine }) => {\r\n  return (\r\n    <svg\r\n      width={width + 7}\r\n      height={baseLine}\r\n      onWheel={(e) => canvasWheel(e)}\r\n      style={{\r\n        bottom: 0,\r\n        left: -7,\r\n        zIndex: 3,\r\n        position: \"absolute\",\r\n        filter: \"drop-shadow(rgba(0, 0, 0, 0.7) 0px 1px 1px)\",\r\n      }}\r\n    >\r\n      <style>{\"@keyframes draw{to{stroke-dashoffset:0}}\"}</style>\r\n      <polygon points={\"0,0 10,8 0,16\"} fill={\"red\"} />\r\n      <line\r\n        style={{\r\n          strokeDasharray: width + 7,\r\n          strokeDashoffset: width + 7,\r\n          animation: \"draw 1s linear forwards\",\r\n        }}\r\n        x1={0}\r\n        y1={8}\r\n        x2={width + 7}\r\n        y2={8}\r\n        strokeWidth={2.5}\r\n        stroke={\"red\"}\r\n      />\r\n    </svg>\r\n  );\r\n};\r\nexport default SvgLine;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { drawGame } from \"../../../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\nimport { AppActions, AppState } from \"../../../../../_types\";\r\nimport GameFront from \"./GameFront\";\r\nimport GameBack from \"./GameBack\";\r\nimport SvgLine from \"./SvgLine\";\r\n\r\ninterface Props {\r\n  Melo: IMelodition;\r\n  drawGame: (canvas: any) => void;\r\n}\r\n\r\nconst GameCanvas: React.FC<Props> = ({ Melo, drawGame }) => {\r\n  return (\r\n    <div\r\n      style={{\r\n        width: Melo.canvasSize?.width,\r\n        height: Melo.canvasSize?.height,\r\n        position: \"relative\",\r\n        boxShadow: \"inset 0 1px 4px 0px black\",\r\n      }}\r\n    >\r\n      <GameFront Melo={Melo} drawGame={drawGame} />\r\n      <GameBack Melo={Melo} />\r\n      {Melo.canvasSize && <SvgLine {...Melo.canvasSize} />}\r\n    </div>\r\n  );\r\n};\r\nconst mapStateToProps = (state: AppState) => ({\r\n  Melo: state.melodition,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawGame: bindActionCreators(drawGame, dispatch),\r\n});\r\n\r\nconst connectedPianoCanvas = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(GameCanvas);\r\n\r\nexport default connectedPianoCanvas;\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { ArrowBackIos } from \"@material-ui/icons\";\r\nimport {\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  IconButton,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  changeMode,\r\n  drawGame,\r\n  gamePiano,\r\n  resizePlayer,\r\n} from \"../../../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\nimport { AppActions, AppState } from \"../../../../../_types\";\r\nimport { ILesson } from \"../../../../../_types/lesson.types\";\r\nimport { ICourse } from \"../../../../../_types/course.types\";\r\nimport { PlayButton } from \"../../../Player/Buttons\";\r\nimport { LoadingCircle } from \"../../../Loadings\";\r\nimport Seekbar from \"../../../Player/SeekBar\";\r\nimport PlayerHeader from \"./PlayerHeader\";\r\nimport PianoCanvas from \"../GameCanvas\";\r\nimport Piano from \"..\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100vw\",\r\n      height: \"100vh\",\r\n      overflow: \"hidden\",\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    main: {\r\n      width: \"100vw\",\r\n      overflow: \"hidden\",\r\n      minHeight: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        minHeight: \"calc(100vh - 56px)\",\r\n      },\r\n      display: \"flex\",\r\n    },\r\n    content: {\r\n      height: \"100%\",\r\n      width: \"100%\",\r\n      flexWrap: \"nowrap\",\r\n    },\r\n    doubleGrid: {\r\n      flexWrap: \"nowrap\",\r\n      width: \"100%\",\r\n      maxWidth: \"100%\",\r\n      \"& > div\": {\r\n        margin: \"auto\",\r\n        padding: 0,\r\n        height: \"100%\",\r\n      },\r\n    },\r\n    centerText: {\r\n      textAlign: \"center\",\r\n    },\r\n    loading: {\r\n      display: \"flex\",\r\n      height: \"83%\",\r\n      boxShadow: \"inset 0 1px 4px 0px black\",\r\n    },\r\n  });\r\n\r\ninterface LessonPlayerModeProps extends WithStyles<typeof useStyles> {\r\n  history: string;\r\n  lesson?: ILesson;\r\n  course?: ICourse;\r\n  theme: \"light\" | \"dark\";\r\n  melodition: IMelodition;\r\n}\r\n\r\ninterface States {\r\n  list: boolean;\r\n}\r\n\r\ntype Props = LessonPlayerModeProps & ReturnType<typeof mapDispatchToProps>;\r\n\r\nclass LessonPlayerMode extends Component<Props, States> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      list: false,\r\n    };\r\n  }\r\n\r\n  svgWidth = (i: number): number => {\r\n    const num = i === 1 ? 668 : 584;\r\n    return num;\r\n  };\r\n\r\n  toggleDrawer = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\r\n    if (event.type === \"keydown\") {\r\n      return;\r\n    }\r\n    if (this.state.list) {\r\n      this.setState({ list: false });\r\n    } else {\r\n      this.setState({ list: true });\r\n    }\r\n  };\r\n  playmodeChanger = () => {\r\n    this.props.changeMode(false);\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  updateDimensions = () => {\r\n    if (!this.props.melodition.pianoLoading) {\r\n      this.props.resizePlayer();\r\n    }\r\n  };\r\n  render() {\r\n    const { classes, melodition, lesson } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        <PlayerHeader modeChanger={this.playmodeChanger} lesson={lesson} />\r\n        {melodition.playMode ? (\r\n          <Grid container className={classes.main}>\r\n            <Grid item xs={1}>\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n                className={classes.content}\r\n              >\r\n                <PlayButton loading={melodition.loading} />\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={10}>\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"center\"\r\n                alignItems=\"center\"\r\n                className={classes.content}\r\n              >\r\n                <Grid item xs={12}>\r\n                  {melodition.pianoLoading ? (\r\n                    <LoadingCircle noPad />\r\n                  ) : (\r\n                    <PianoCanvas />\r\n                  )}\r\n                  <Piano />\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={1}>\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"space-around\"\r\n                alignItems=\"center\"\r\n                className={classes.content}\r\n              >\r\n                <Seekbar />\r\n                <IconButton color=\"secondary\" aria-label=\"play mode\">\r\n                  <ArrowBackIos />\r\n                </IconButton>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        ) : (\r\n          <Grid container className={classes.main}>\r\n            <LoadingCircle />\r\n          </Grid>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (\r\n  state: AppState,\r\n  ownProps: Props\r\n): LessonPlayerModeProps => ({\r\n  history: state.router.location.pathname,\r\n  classes: ownProps.classes,\r\n  melodition: state.melodition,\r\n  theme: state.auth.theme,\r\n  lesson: state.single.lesson.data,\r\n  course: state.single.course.data,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  changeMode: bindActionCreators(changeMode, dispatch),\r\n  drawGame: bindActionCreators(drawGame, dispatch),\r\n  drawPiano: bindActionCreators(gamePiano, dispatch),\r\n  resizePlayer: bindActionCreators(resizePlayer, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(\r\n  withStyles(useStyles)(LessonPlayerMode)\r\n) as unknown) as ComponentType<unknown>;\r\n","import {\r\n  SHOW_SNACKBAR,\r\n  REMOVE_SNACKBAR,\r\n  DefaultSnackState,\r\n} from \"../_types/snackbar.types\";\r\n\r\nexport const snackbarShow = (snackbar: DefaultSnackState) => ({\r\n  type: SHOW_SNACKBAR,\r\n  snackbar: {\r\n    ...snackbar,\r\n  },\r\n})\r\n\r\nexport const snackbarRemove = (key: string) => ({ type: REMOVE_SNACKBAR, key })\r\n","import { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { AppState, AppActions } from \"../../../_types\";\r\nimport { ISnack } from \"../../../_types/snackbar.types\";\r\nimport { snackbarRemove } from \"../../../_actions/snackbar.actions\";\r\n\r\nlet displayed: string[] = [];\r\n\r\ninterface NotifierProps {\r\n  snackbars?: ISnack[];\r\n}\r\n\r\ntype Props = NotifierProps & LinkDispatchProps;\r\n\r\nconst Notifier = ({ snackbars, removeSnack }: Props): null => {\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n  const storeDisplayed = (id: string) => {\r\n    displayed = [...displayed, id];\r\n  };\r\n\r\n  const removeDisplayed = (id: string) => {\r\n    displayed = [...displayed.filter((key) => id !== key)];\r\n  };\r\n\r\n  useEffect(() => {\r\n    snackbars?.forEach(\r\n      ({ key, message, options = {}, dismissed = false }: ISnack) => {\r\n        if (dismissed) {\r\n          closeSnackbar(key);\r\n          return;\r\n        }\r\n        if (displayed.includes(key)) return;\r\n        enqueueSnackbar(message, {\r\n          key,\r\n          ...options,\r\n          onClose: (event, reason, myKey) => {\r\n            if (options.onClose) {\r\n              options.onClose(event, reason, myKey);\r\n            }\r\n          },\r\n          onExited: (event, myKey) => {\r\n            if (removeSnack) removeSnack(String(myKey));\r\n            removeDisplayed(String(myKey));\r\n          },\r\n        });\r\n        storeDisplayed(key);\r\n      }\r\n    );\r\n  }, [snackbars, closeSnackbar, enqueueSnackbar, removeSnack]);\r\n\r\n  return null;\r\n};\r\ninterface LinkDispatchProps {\r\n  removeSnack?: (key: string) => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): NotifierProps => {\r\n  const { snackbar } = state;\r\n  return {\r\n    snackbars: snackbar.snackbars,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  removeSnack: bindActionCreators(snackbarRemove, dispatch),\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifier);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { push, goBack } from \"connected-react-router\";\r\nimport { ArrowForward } from \"@material-ui/icons\";\r\nimport { Theme, makeStyles, createStyles } from \"@material-ui/core/styles\";\r\nimport {\r\n  AppBar,\r\n  Link,\r\n  Paper,\r\n  Toolbar,\r\n  IconButton,\r\n  Divider,\r\n  Breadcrumbs,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  AllInbox,\r\n  LibraryMusic,\r\n  QueueMusic,\r\n  MusicNote,\r\n  EmojiSymbols,\r\n  Favorite,\r\n} from \"@material-ui/icons\";\r\nimport { AppActions, AppState } from \"../../_types\";\r\nimport { pathFinder } from \"../../_helpers/constants\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    bracrumbs: {\r\n      padding: theme.spacing(1, 2, 0, 2),\r\n      \"& > ol > li\": {\r\n        padding: theme.spacing(1, 0.5),\r\n      },\r\n    },\r\n    back: {\r\n      margin: theme.spacing(0, 2),\r\n    },\r\n  })\r\n);\r\n\r\nconst pages: any = {\r\n  post: <AllInbox />,\r\n  guide: <LibraryMusic />,\r\n  course: <QueueMusic />,\r\n  lesson: <MusicNote />,\r\n  exercise: <EmojiSymbols />,\r\n  favorite: <Favorite />,\r\n};\r\n\r\ninterface IBreadcrumbs {\r\n  pathname: string;\r\n  single: any;\r\n}\r\n\r\ninterface ILinksPath {\r\n  name: \"home\";\r\n  url: \"/\";\r\n}\r\n\r\ntype Props = IBreadcrumbs & LinkDispatchProps;\r\n\r\nconst Breadcrumb = (props: Props) => {\r\n  const { single, pathname, push, back } = props;\r\n\r\n  const [linkPath, setLinkPath] = useState([] as ILinksPath[]);\r\n\r\n  const [trigger, setTrigger] = useState(false);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    const path = pathFinder(pathname);\r\n    const keys = Object.keys(path);\r\n    const linkArray: any[] = [];\r\n    keys.forEach((key, i) => {\r\n      const post = single[keys[i - 1]];\r\n      const title = post?.data?.title;\r\n      let name = i === 0 ? pages[key] : title ? title : \"...\";\r\n      linkArray[i] = {\r\n        url: pathname\r\n          .split(\"/\")\r\n          .slice(0, i + 2)\r\n          .join(\"/\"),\r\n        name: name,\r\n      };\r\n    });\r\n    if (path.length > 0) {\r\n      setTrigger(true);\r\n      setLinkPath(linkArray);\r\n    }\r\n    return () => {\r\n      setTrigger(false);\r\n    };\r\n  }, [pathname, single]);\r\n\r\n  const handleClick = (\r\n    event: React.MouseEvent<HTMLAnchorElement, MouseEvent>\r\n  ) => {\r\n    event.preventDefault();\r\n    push(event.currentTarget.pathname);\r\n  };\r\n\r\n  return trigger ? (\r\n    <AppBar position=\"static\">\r\n      <Paper square style={{ overflow: \"hidden\" }}>\r\n        <Toolbar disableGutters>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"menu\"\r\n            onClick={back}\r\n            className={classes.back}\r\n          >\r\n            <ArrowForward />\r\n          </IconButton>\r\n          <Divider orientation=\"vertical\" flexItem />\r\n          <Breadcrumbs aria-label=\"breadcrumb\" className={classes.bracrumbs}>\r\n            {linkPath.map((link, i) => (\r\n              <Link\r\n                key={i + link.name}\r\n                href={link.url}\r\n                color=\"inherit\"\r\n                aria-label={link.name}\r\n                onClick={handleClick}\r\n              >\r\n                {link.name}\r\n              </Link>\r\n            ))}\r\n          </Breadcrumbs>\r\n        </Toolbar>\r\n      </Paper>\r\n    </AppBar>\r\n  ) : null;\r\n};\r\n\r\ninterface LinkDispatchProps {\r\n  push: (key: string) => void;\r\n  back: () => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: {}): IBreadcrumbs => {\r\n  const { pathname } = state.router.location;\r\n  return {\r\n    pathname,\r\n    single: state.single,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  push: bindActionCreators(push, dispatch),\r\n  back: bindActionCreators(goBack, dispatch),\r\n});\r\n\r\nconst conectedBreadcrumb = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Breadcrumb);\r\n\r\nexport default conectedBreadcrumb;\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\n\r\nexport const globalStyle = createMuiTheme(\r\n    {\r\n        direction: \"rtl\",\r\n        typography: {\r\n            fontFamily: \"Vazir\",\r\n        },\r\n        overrides: {\r\n            MuiBreadcrumbs: {\r\n                root: {\r\n                    width: 'calc(100vw - 64px)',\r\n                },\r\n                ol: {\r\n                    flexWrap: \"nowrap\",\r\n                    overflowX: \"scroll\",\r\n                    scrollbarWidth: \"none\",\r\n                    whiteSpace: \"nowrap\",\r\n                    '&::-webkit-scrollbar': {\r\n                        display: \"none\"\r\n                    }\r\n                }\r\n            },\r\n            MuiCardActions: {\r\n                root: {\r\n                    padding: undefined\r\n                }\r\n            },\r\n            MuiCssBaseline: {\r\n                '@global': {\r\n                    '*': {\r\n                        scrollbarWidth: 'thin',\r\n                        scrollbarColor: \"rgb(245, 0, 87) #0000\",\r\n                    },\r\n                    '*::-webkit-scrollbar': {\r\n                        width: '10px'\r\n                    },\r\n                    '*::-webkit-scrollbar-track': {\r\n                        '-webkit-border-radius': '10px',\r\n                        borderRadius: '8px',\r\n                    },\r\n                    '*::-webkit-scrollbar-thumb': {\r\n                        '-webkit-border-radius': '10px',\r\n                        borderRadius: '10px',\r\n                        background: 'rgb(245, 0, 87)',\r\n                    },\r\n                    '*::-webkit-scrollbar-thumb:window-inactive': {\r\n                        background: 'rgb(245, 0, 87)'\r\n                    }\r\n                }\r\n            },\r\n            MuiIconButton: {\r\n                colorSecondary: {\r\n                    \"&:hover\": {\r\n                        backgroundColor: \"rgb(200 200 200 / 0.5)\",\r\n                    },\r\n                },\r\n            },\r\n        },\r\n    })\r\n\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport { blue, pink, red } from \"@material-ui/core/colors\";\r\nimport { faIR } from \"@material-ui/core/locale\";\r\nimport { globalStyle } from \"./GlobalTheme\";\r\n\r\nexport const DarkTheme = createMuiTheme(\r\n    {\r\n        ...globalStyle,\r\n        palette: {\r\n            type: \"dark\",\r\n            primary: blue,\r\n            error: red,\r\n            secondary: {\r\n                main: pink[300],\r\n            },\r\n        },\r\n    },\r\n    faIR\r\n);\r\n","import { createMuiTheme } from \"@material-ui/core\";\r\nimport { red } from \"@material-ui/core/colors\";\r\nimport { faIR } from \"@material-ui/core/locale\";\r\nimport { globalStyle } from \"./GlobalTheme\";\r\n\r\nexport const LightTheme = createMuiTheme(\r\n  {\r\n    ...globalStyle,\r\n    palette: {\r\n      error: red,\r\n    },\r\n  },\r\n  faIR\r\n);\r\n","import React, { useEffect } from \"react\";\r\nimport { Avatar, createStyles, makeStyles, Theme } from \"@material-ui/core\";\r\nimport {\r\n  AccountCircle,\r\n  Star,\r\n  Notifications,\r\n  MoreHoriz,\r\n} from \"@material-ui/icons/\";\r\nimport Badge from \"@material-ui/core/Badge\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\nimport { store } from \"../../../_store/store.config\";\r\nimport { profileRequest } from \"../../../_actions/profile.actions\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    sectionDesktop: {\r\n      display: \"none\",\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        display: \"flex\",\r\n      },\r\n    },\r\n    sectionMobile: {\r\n      display: \"flex\",\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        display: \"none\",\r\n      },\r\n    },\r\n    avatarSmall: {\r\n      color: theme.palette.text.primary,\r\n      backgroundColor: theme.palette.background.paper,\r\n      width: theme.spacing(3),\r\n      height: theme.spacing(3),\r\n    },\r\n  })\r\n);\r\n\r\nconst IconController = ({\r\n  state,\r\n  dispatch,\r\n  loggedIn,\r\n  profile,\r\n}: AppBarInterface) => {\r\n  useEffect(() => {\r\n    if (loggedIn && !profile) {\r\n      store.dispatch(profileRequest());\r\n      console.log(\"request profile\");\r\n    }\r\n    return () => {};\r\n  }, [loggedIn, profile]);\r\n  const classes = useStyles();\r\n  const { menuId, mobileMenuId } = state;\r\n  const profileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n    dispatch({ type: \"profile-anchor\", payload: event.currentTarget });\r\n  };\r\n  const mobileMenuOpen = (event: React.MouseEvent<HTMLElement>) => {\r\n    dispatch({ type: \"mobile-anchor\", payload: event.currentTarget });\r\n  };\r\n  const image = profile?.image_select;\r\n  return loggedIn ? (\r\n    <React.Fragment>\r\n      <div className={classes.sectionDesktop}>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <Star />\r\n          </Badge>\r\n        </IconButton>\r\n        <IconButton aria-label=\"show 17 new alerts\" color=\"inherit\">\r\n          <Badge badgeContent={17} color=\"secondary\">\r\n            <Notifications />\r\n          </Badge>\r\n        </IconButton>\r\n\r\n        <IconButton\r\n          edge=\"end\"\r\n          aria-label=\"account of current user\"\r\n          aria-controls={menuId}\r\n          aria-haspopup=\"true\"\r\n          onClick={profileMenuOpen}\r\n          color=\"inherit\"\r\n        >\r\n          <Avatar\r\n            className={classes.avatarSmall}\r\n            src={image ? image : undefined}\r\n          >\r\n            <AccountCircle />\r\n          </Avatar>\r\n        </IconButton>\r\n      </div>\r\n      <div className={classes.sectionMobile}>\r\n        <IconButton\r\n          aria-label=\"show more\"\r\n          aria-controls={mobileMenuId}\r\n          aria-haspopup=\"true\"\r\n          onClick={mobileMenuOpen}\r\n          color=\"inherit\"\r\n        >\r\n          <MoreHoriz />\r\n        </IconButton>\r\n      </div>\r\n    </React.Fragment>\r\n  ) : (\r\n    <IconButton\r\n      edge=\"end\"\r\n      aria-label=\"account of current user\"\r\n      aria-controls={menuId}\r\n      aria-haspopup=\"true\"\r\n      onClick={profileMenuOpen}\r\n      color=\"inherit\"\r\n    >\r\n      <AccountCircle />\r\n    </IconButton>\r\n  );\r\n};\r\nexport default IconController;\r\n","import React from \"react\";\r\nimport InputBase from \"@material-ui/core/InputBase\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport {\r\n  createStyles,\r\n  fade,\r\n  Theme,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\n\r\nconst styles = (theme: Theme) =>\r\n  createStyles({\r\n    search: {\r\n      position: \"relative\",\r\n      borderRadius: theme.shape.borderRadius,\r\n      backgroundColor: fade(theme.palette.common.white, 0.15),\r\n      \"&:hover\": {\r\n        backgroundColor: fade(theme.palette.common.white, 0.25),\r\n      },\r\n      width: \"100%\",\r\n      marginLeft: theme.spacing(1),\r\n      [theme.breakpoints.up(420)]: {\r\n        width: \"auto\",\r\n      },\r\n    },\r\n    searchIcon: {\r\n      padding: theme.spacing(0, 2),\r\n      height: \"100%\",\r\n      position: \"absolute\",\r\n      top: 0,\r\n      pointerEvents: \"none\",\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"center\",\r\n      cursor: \"pointer\",\r\n    },\r\n    inputRoot: {\r\n      color: \"inherit\",\r\n    },\r\n    inputInput: {\r\n      padding: theme.spacing(1, 1, 1, 0),\r\n      // vertical padding + font size from searchIcon\r\n      paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n      transition: theme.transitions.create(\"width\"),\r\n      width: \"0\",\r\n      \"&:focus\": {\r\n        width: \"12ch\",\r\n      },\r\n      [theme.breakpoints.down(420)]: {\r\n        width: \"7ch\",\r\n      },\r\n      [theme.breakpoints.down(350)]: {\r\n        width: \"0\",\r\n      },\r\n    },\r\n  });\r\n\r\ninterface SearchProps extends WithStyles<typeof styles> {}\r\ninterface SearchStates {\r\n  query: string;\r\n  results: any;\r\n  loading: boolean;\r\n  message: string;\r\n}\r\n\r\nclass SearchInput extends React.Component<SearchProps, SearchStates> {\r\n  constructor(props: SearchProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      query: \"\",\r\n      results: {},\r\n      loading: false,\r\n      message: \"\",\r\n    };\r\n  }\r\n  handleOnInputChange = (\r\n    event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\r\n  ) => {\r\n    const query = event.target.value;\r\n    this.setState({ query, loading: true });\r\n  };\r\n\r\n  fetchSearchResult = () => {};\r\n\r\n  render() {\r\n    const { classes } = this.props;\r\n    const { query } = this.state;\r\n    return (\r\n      <div className={classes.search}>\r\n        <div className={classes.searchIcon}>\r\n          <SearchIcon />\r\n        </div>\r\n        <InputBase\r\n          placeholder=\"جستجو...\"\r\n          classes={{\r\n            root: classes.inputRoot,\r\n            input: classes.inputInput,\r\n          }}\r\n          inputProps={{ \"aria-label\": \"search\" }}\r\n          type=\"text\"\r\n          value={query}\r\n          onChange={(event) => this.handleOnInputChange(event)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default withStyles(styles)(SearchInput);\r\n","import React from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { Badge, IconButton, Menu, MenuItem } from \"@material-ui/core\";\r\nimport { AccountCircle, Stars, Notifications } from \"@material-ui/icons\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\n\r\nconst MobileMenu = (props: AppBarInterface) => {\r\n  const { mobileMenuId, mobileMoreAnchor } = props.state;\r\n  const mobileMenuIsOpen = Boolean(mobileMoreAnchor);\r\n  const handleProfileMenu = (\r\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>\r\n  ) => {\r\n    props.dispatch({ type: \"profile-anchor\", payload: event.currentTarget });\r\n  };\r\n  const handleMobileMenu = () => {\r\n    props.dispatch({ type: \"mobile-close\" });\r\n  };\r\n  const handleSignOut = () => {\r\n    handleMobileMenu();\r\n    if (props.logout) props.logout();\r\n  };\r\n  return props.loggedIn ? (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchor}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      open={mobileMenuIsOpen}\r\n      onClose={handleMobileMenu}\r\n    >\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 4 new mails\" color=\"inherit\">\r\n          <Badge badgeContent={4} color=\"secondary\">\r\n            <Stars />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Messages</p>\r\n      </MenuItem>\r\n      <MenuItem>\r\n        <IconButton aria-label=\"show 11 new alerts\" color=\"inherit\">\r\n          <Badge badgeContent={11} color=\"secondary\">\r\n            <Notifications />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Notification</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleProfileMenu}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Account</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleSignOut}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Sign Out</p>\r\n      </MenuItem>\r\n    </Menu>\r\n  ) : (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchor}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      open={mobileMenuIsOpen}\r\n      onClose={handleMobileMenu}\r\n    >\r\n      <Link to=\"/login\" component={RouterLink} color=\"secondary\">\r\n        <MenuItem onClick={handleMobileMenu}>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"primary-search-account-menu\"\r\n            aria-haspopup=\"true\"\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <p>ورود</p>\r\n        </MenuItem>\r\n      </Link>\r\n      <Link to=\"/register\" component={RouterLink} color=\"secondary\">\r\n        <MenuItem onClick={handleMobileMenu}>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"primary-search-account-menu\"\r\n            aria-haspopup=\"true\"\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <p>ثبت نام</p>\r\n        </MenuItem>\r\n      </Link>\r\n    </Menu>\r\n  );\r\n};\r\nexport default MobileMenu;\r\n","import React from \"react\";\r\nimport {\r\n  SettingsApplications,\r\n  AccountBox,\r\n  Home,\r\n  FileCopy,\r\n  Info,\r\n} from \"@material-ui/icons\";\r\n\r\nexport const sideLink = {\r\n  in: [\r\n    { name: \"پروفایل\", to: \"/profile\", icon: <SettingsApplications /> },\r\n    { name: \"کابری من\", to: \"/dashboard\", icon: <AccountBox /> },\r\n  ],\r\n  out: [\r\n    { name: \"ورود\", to: \"/login\", icon: <AccountBox /> },\r\n    { name: \"ثبت نام\", to: \"/register\", icon: <AccountBox /> },\r\n  ],\r\n};\r\nexport const links = [\r\n  { to: \"/\", title: \"خانه‌\", icon: <Home /> },\r\n  { to: \"/learning\", title: \"درس ها‌\", icon: <FileCopy /> },\r\n  { to: \"/about\", title: \"درباره‌\", icon: <Info /> },\r\n];\r\n","import React from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { sideLink } from \"./Links\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\n\r\nconst MenuRender = (props: AppBarInterface) => {\r\n  const { loggedIn, state, logout, dispatch } = props;\r\n  const { profileMoreAnchor, menuId } = state;\r\n  const profileMenuIsOpen = Boolean(profileMoreAnchor);\r\n  const handleSignOut = () => {\r\n    if (logout) logout();\r\n    handleDrawerClose();\r\n  };\r\n  const handleDrawerClose = () => {\r\n    dispatch({ type: \"profile-close\" });\r\n  };\r\n  const botLinks = loggedIn ? sideLink.in : sideLink.out;\r\n  return (\r\n    <Menu\r\n      anchorEl={profileMoreAnchor}\r\n      anchorOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: \"top\", horizontal: \"right\" }}\r\n      open={profileMenuIsOpen}\r\n      onClose={handleDrawerClose}\r\n    >\r\n      {botLinks.map((item, index) => (\r\n        <Link\r\n          to={item.to}\r\n          key={\"menuitem-\" + index}\r\n          onClick={handleDrawerClose}\r\n          component={RouterLink}\r\n          color=\"secondary\"\r\n        >\r\n          <MenuItem onClick={handleDrawerClose}>{item.name}</MenuItem>\r\n        </Link>\r\n      ))}\r\n      {loggedIn && <MenuItem onClick={handleSignOut}>خروج</MenuItem>}\r\n    </Menu>\r\n  );\r\n};\r\nexport default MenuRender;\r\n","import React from \"react\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport {\r\n  createStyles,\r\n  makeStyles,\r\n  Theme,\r\n  useTheme,\r\n} from \"@material-ui/core/styles\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport List from \"@material-ui/core/List\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport {\r\n  Brightness7,\r\n  Brightness4,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n} from \"@material-ui/icons\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport { links, sideLink } from \"./Links\";\r\nimport { AppBarInterface } from \"./MainAppBar\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"flex\",\r\n    },\r\n    hide: {\r\n      display: \"none\",\r\n    },\r\n    drawer: {\r\n      width: drawerWidth,\r\n      flexShrink: 0,\r\n    },\r\n    drawerPaper: {\r\n      width: drawerWidth,\r\n    },\r\n    drawerHeader: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      padding: theme.spacing(0, 1),\r\n      // necessary for content to be below app bar\r\n      ...theme.mixins.toolbar,\r\n      justifyContent: \"flex-start\",\r\n    },\r\n    toolbar: {\r\n      display: \"flex\",\r\n      alignItems: \"center\",\r\n      justifyContent: \"space-between\",\r\n      padding: theme.spacing(0, 1, 0, 4),\r\n      // necessary for content to be below app bar\r\n      ...theme.mixins.toolbar,\r\n    },\r\n  })\r\n);\r\n\r\nexport default function MiniDrawer({\r\n  state,\r\n  loggedIn,\r\n  theme,\r\n  changeTheme,\r\n  dispatch,\r\n}: AppBarInterface) {\r\n  const classes = useStyles();\r\n  const { direction } = useTheme();\r\n  const handleDrawerClose = () => {\r\n    dispatch({ type: \"menu-toggle\" });\r\n  };\r\n\r\n  const handleThemeChanger = () => {\r\n    if (theme === \"light\") changeTheme(\"dark\");\r\n    else changeTheme(\"light\");\r\n  };\r\n\r\n  const botLinks = loggedIn ? sideLink.in : sideLink.out;\r\n  return (\r\n    <div className={classes.root}>\r\n      <CssBaseline />\r\n      <Drawer\r\n        className={classes.drawer}\r\n        variant=\"temporary\"\r\n        anchor={direction === \"ltr\" ? \"right\" : \"left\"}\r\n        open={state.menuIsOpen}\r\n        onClose={handleDrawerClose}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}\r\n      >\r\n        <div className={classes.toolbar}>\r\n          <IconButton\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleThemeChanger}\r\n            edge=\"start\"\r\n          >\r\n            {theme === \"light\" ? <Brightness7 /> : <Brightness4 />}\r\n          </IconButton>\r\n          <IconButton onClick={handleDrawerClose}>\r\n            {direction === \"ltr\" ? <ChevronLeft /> : <ChevronRight />}\r\n          </IconButton>\r\n        </div>\r\n        <Divider />\r\n        <List>\r\n          {links.map((text, index) => (\r\n            <Link\r\n              to={text.to}\r\n              key={\"sidelink-\" + index}\r\n              onClick={handleDrawerClose}\r\n              component={RouterLink}\r\n              color=\"secondary\"\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>{text.icon}</ListItemIcon>\r\n                <ListItemText primary={text.title} />\r\n              </ListItem>\r\n            </Link>\r\n          ))}\r\n        </List>\r\n        <Divider />\r\n        <List>\r\n          {botLinks.map((item, index) => (\r\n            <Link\r\n              to={item.to}\r\n              key={\"sidelink-\" + index}\r\n              onClick={handleDrawerClose}\r\n              component={RouterLink}\r\n              color=\"secondary\"\r\n            >\r\n              <ListItem button>\r\n                <ListItemIcon>{item.icon}</ListItemIcon>\r\n                <ListItemText primary={item.name} />\r\n              </ListItem>\r\n            </Link>\r\n          ))}\r\n        </List>\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport { createStyles, Theme, Collapse } from \"@material-ui/core\";\r\nimport { links } from \"./Links\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      display: \"none\",\r\n      [theme.breakpoints.up(420)]: {\r\n        marginLeft: theme.spacing(1),\r\n        display: \"inline-block\",\r\n      },\r\n      [theme.breakpoints.up(\"sm\")]: {\r\n        marginLeft: theme.spacing(2),\r\n        display: \"inline-block\",\r\n      },\r\n      [theme.breakpoints.up(\"md\")]: {\r\n        marginLeft: theme.spacing(4),\r\n        display: \"inline-block\",\r\n      },\r\n      [theme.breakpoints.up(\"lg\")]: {\r\n        marginLeft: theme.spacing(8),\r\n        display: \"inline-block\",\r\n      },\r\n    },\r\n    linkKeeper: {\r\n      overflow: \"hidden\",\r\n      height: \"1.2em\",\r\n      lineHeight: \"1.2em\",\r\n    },\r\n    links: {\r\n      textAlign: \"center\",\r\n      flexGrow: 1,\r\n    },\r\n  })\r\n);\r\n\r\ninterface LinkConstProps {\r\n  openStatus: boolean;\r\n}\r\n\r\nconst LinkConst = ({ openStatus }: LinkConstProps) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <Collapse in={!openStatus} className={classes.links}>\r\n      <div className={classes.linkKeeper}>\r\n        {links.map((link, i) => (\r\n          <Link\r\n            key={\"link-\" + i}\r\n            to={link.to}\r\n            className={classes.root}\r\n            component={RouterLink}\r\n            color=\"secondary\"\r\n          >\r\n            {link.title}\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </Collapse>\r\n  );\r\n};\r\nexport default LinkConst;\r\n","import React, { Dispatch } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { makeStyles, Theme, createStyles } from \"@material-ui/core/styles\";\r\nimport { HeaderState, HeaderAction } from \"../../../_reducers/header.reducer\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport IconController from \"./LeftIcons\";\r\nimport { IHeaderProps } from \"./Header\";\r\nimport SearchInput from \"./SearchInput\";\r\nimport MobileMenu from \"./MobileMenu\";\r\nimport MenuRender from \"./MenuRender\";\r\nimport MiniDrawer from \"./MiniDrawer\";\r\nimport LinkConst from \"./LinkConst\";\r\n\r\nconst drawerWidth = 240;\r\nconst version = process.env.REACT_APP_VERSION;\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    appBar: {\r\n      zIndex: theme.zIndex.drawer + 1,\r\n      transition: theme.transitions.create([\"width\", \"margin\"], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.leavingScreen,\r\n      }),\r\n    },\r\n    appBarShift: {\r\n      marginLeft: drawerWidth,\r\n      width: `calc(100% - ${drawerWidth}px)`,\r\n      transition: theme.transitions.create([\"width\", \"margin\"], {\r\n        easing: theme.transitions.easing.sharp,\r\n        duration: theme.transitions.duration.enteringScreen,\r\n      }),\r\n    },\r\n    hide: {\r\n      display: \"none\",\r\n    },\r\n    menuButton: {\r\n      marginRight: theme.spacing(2),\r\n    },\r\n  })\r\n);\r\n\r\nexport type AppBarInterface = AppBarProps & IHeaderProps;\r\n\r\ninterface AppBarProps {\r\n  state: HeaderState;\r\n  dispatch: Dispatch<HeaderAction>;\r\n}\r\nconst MainAppBar = (props: AppBarInterface) => {\r\n  const classes = useStyles();\r\n\r\n  const { menuIsOpen } = props.state;\r\n\r\n  const handleDrawerOpen = () => {\r\n    props.dispatch({ type: \"menu-toggle\" });\r\n  };\r\n\r\n  return (\r\n    <AppBar\r\n      color={\"default\"}\r\n      position=\"relative\"\r\n      className={clsx(classes.appBar, {\r\n        [classes.appBarShift]: menuIsOpen,\r\n      })}\r\n    >\r\n      <Toolbar>\r\n        <IconButton\r\n          color=\"inherit\"\r\n          aria-label=\"open drawer\"\r\n          onClick={handleDrawerOpen}\r\n          edge=\"start\"\r\n          className={clsx(classes.menuButton, {\r\n            [classes.hide]: menuIsOpen,\r\n          })}\r\n        >\r\n          <MenuIcon />\r\n        </IconButton>\r\n        <Link component={RouterLink} color=\"secondary\" to=\"/\">\r\n          ملودیشن\r\n        </Link>\r\n        <p onClick={() => sessionStorage.clear()}>({version})</p>\r\n        <LinkConst openStatus={menuIsOpen} />\r\n        <SearchInput />\r\n        <IconController {...props} />\r\n      </Toolbar>\r\n      <MiniDrawer {...props} />\r\n      <MobileMenu {...props} />\r\n      <MenuRender {...props} />\r\n    </AppBar>\r\n  );\r\n};\r\nexport default MainAppBar;\r\n","export interface HeaderState {\r\n    menuId: string;\r\n    menuIsOpen: boolean;\r\n    mobileMenuId: string;\r\n    profileMoreAnchor: null | HTMLElement;\r\n    mobileMoreAnchor: null | HTMLElement;\r\n}\r\n\r\nexport const initialState: HeaderState = {\r\n    menuId: \"primary-search-account-menu\",\r\n    mobileMenuId: \"primary-search-account-menu-mobile\",\r\n    profileMoreAnchor: null,\r\n    mobileMoreAnchor: null,\r\n    menuIsOpen: false,\r\n};\r\n\r\nexport type HeaderAction =\r\n    | { type: \"menu-toggle\" | \"profile-close\" | \"mobile-close\" }\r\n    | { type: \"field\"; fieldName: string; payload: string }\r\n    | { type: \"loggedIn\"; payload: boolean }\r\n    | { type: \"profile-anchor\"; payload: null | HTMLElement }\r\n    | { type: \"mobile-anchor\"; payload: null | HTMLElement };\r\n\r\nexport default function HeaderReducer(state: HeaderState, action: HeaderAction) {\r\n    switch (action.type) {\r\n        case \"field\":\r\n            return {\r\n                ...state,\r\n                [action.fieldName]: action.payload,\r\n            };\r\n        case \"menu-toggle\":\r\n            return {\r\n                ...state,\r\n                menuIsOpen: !state.menuIsOpen,\r\n            };\r\n        case \"profile-close\":\r\n            return {\r\n                ...state,\r\n                profileMoreAnchor: null,\r\n            };\r\n        case \"mobile-close\":\r\n            return {\r\n                ...state,\r\n                mobileMoreAnchor: null,\r\n            };\r\n        case \"mobile-anchor\":\r\n            return {\r\n                ...state,\r\n                mobileMoreAnchor: action.payload,\r\n            };\r\n        case \"profile-anchor\":\r\n            return {\r\n                ...state,\r\n                profileMoreAnchor: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n","import React, { ComponentType, useReducer } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { AppState } from \"../../../_types\";\r\nimport { AppActions } from \"../../../_types\";\r\nimport MainAppBar from \"./MainAppBar\";\r\nimport { changeTheme, logoutRequest } from \"../../../_actions/user.actions\";\r\nimport HeaderReducer, { initialState } from \"../../../_reducers/header.reducer\";\r\nimport { IProfile } from \"../../../_types/profile.types\";\r\n\r\ninterface MapProps {\r\n  loggedIn: boolean;\r\n  profile?: IProfile;\r\n  theme: \"light\" | \"dark\";\r\n}\r\n\r\nexport type IHeaderProps = LinkDispatchProps & MapProps;\r\n\r\nconst Header: React.FC<IHeaderProps> = ({ ...rest }) => {\r\n  const [state, dispatch] = useReducer(HeaderReducer, initialState);\r\n\r\n  return <MainAppBar state={state} dispatch={dispatch} {...rest} />;\r\n};\r\n\r\ninterface LinkDispatchProps {\r\n  logout: () => void;\r\n  changeTheme: (theme: \"light\" | \"dark\") => void;\r\n}\r\n\r\nconst mapStateToProps = (state: AppState): MapProps => {\r\n  const { loggedIn, theme } = state.auth;\r\n  return { loggedIn, theme, profile: state.user.data };\r\n};\r\n\r\nconst mapDispatchToProps = (\r\n  dispatch: ThunkDispatch<any, any, AppActions>\r\n): LinkDispatchProps => ({\r\n  logout: bindActionCreators(logoutRequest, dispatch),\r\n  changeTheme: bindActionCreators(changeTheme, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Header) as unknown) as ComponentType<unknown>;\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { create } from \"jss\";\r\nimport jssRTL from \"jss-rtl\";\r\nimport { connect } from \"react-redux\";\r\nimport { ConnectedRouter } from \"connected-react-router\";\r\nimport { SnackbarProvider } from \"notistack\";\r\nimport { history } from \"./_store/store.config\";\r\nimport AppRouter from \"./router\";\r\nimport \"./App.css\";\r\nimport {\r\n  Box,\r\n  createStyles,\r\n  jssPreset,\r\n  Paper,\r\n  responsiveFontSizes,\r\n  Slide,\r\n  StylesProvider,\r\n  Theme,\r\n  ThemeProvider,\r\n  withStyles,\r\n  WithStyles,\r\n} from \"@material-ui/core\";\r\nimport LessonPlayerMode from \"./components/Layout/Instruments/Piano/PlayMode/LessonPlayMode\";\r\nimport Notifier from \"./components/Layout/SnackBar/Notifier\";\r\nimport Breadcrumb from \"./components/Layout/Breadcrumbs\";\r\nimport { LightTheme, DarkTheme } from \"./components/Layout/Themes\";\r\nimport Header from \"./components/Layout/Header/Header\";\r\nimport { requsetMidi } from \"./_actions/midi.actions\";\r\nimport { AppState } from \"./_types\";\r\n\r\nconst jss = create({ plugins: [...jssPreset().plugins, jssRTL()] });\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    app: {\r\n      width: \"100vw\",\r\n      height: \"100vh\",\r\n      overflowX: \"hidden\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      overflow: \"hidden\",\r\n    },\r\n    mainBody: {\r\n      height: \"inherit\",\r\n      overflowX: \"hidden\",\r\n      overflowY: \"auto\",\r\n    },\r\n  });\r\n\r\ninterface AppProps extends WithStyles<typeof useStyles> {\r\n  playMode: boolean;\r\n  theme: \"light\" | \"dark\";\r\n}\r\ntype Props = AppProps & LinkDispatchProps;\r\n\r\nclass App extends Component<Props> {\r\n  componentDidMount() {\r\n    if (typeof window.orientation === \"undefined\") requsetMidi();\r\n  }\r\n  render() {\r\n    const { theme, playMode, classes } = this.props;\r\n    const currentTheme = theme === \"light\" ? LightTheme : DarkTheme;\r\n    const responsTheme = responsiveFontSizes(currentTheme);\r\n    return (\r\n      <ConnectedRouter history={history}>\r\n        <StylesProvider jss={jss}>\r\n          <ThemeProvider theme={responsTheme}>\r\n            <SnackbarProvider>\r\n              <Slide direction=\"right\" in={playMode} mountOnEnter unmountOnExit>\r\n                <Paper>\r\n                  <LessonPlayerMode />\r\n                </Paper>\r\n              </Slide>\r\n              <Box className={classes.app}>\r\n                <Header />\r\n                <Breadcrumb />\r\n                <Notifier />\r\n                <Box id=\"main-body\" className={classes.mainBody}>\r\n                  <AppRouter />\r\n                </Box>\r\n              </Box>\r\n            </SnackbarProvider>\r\n          </ThemeProvider>\r\n        </StylesProvider>\r\n      </ConnectedRouter>\r\n    );\r\n  }\r\n}\r\n\r\ninterface LinkDispatchProps {}\r\n\r\nconst mapStateToProps = (state: AppState, ownProps: Props) => {\r\n  const { theme } = state.auth;\r\n  const { playMode } = state.melodition;\r\n  return { theme, playMode, classes: ownProps.classes };\r\n};\r\n\r\nconst connectedApp = (connect(\r\n  mapStateToProps,\r\n  {}\r\n)(withStyles(useStyles)(App)) as unknown) as ComponentType<unknown>;\r\n\r\nexport default connectedApp;\r\n","import App from \"./App\";\r\nimport React from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { store } from \"./_store/store.config\";\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n","export const REGISTER_REQUEST = \"USER_REGISTER_REQUEST\";\r\nexport const REGISTER_SUCCESS = \"USER_REGISTER_SUCCESS\";\r\nexport const REGISTER_FAILURE = \"USER_REGISTER_FAILURE\";\r\n\r\nexport const LOGIN_REQUEST = \"USER_LOGIN_REQUEST\";\r\nexport const LOGIN_SUCCESS = \"USER_LOGIN_SUCCESS\";\r\nexport const LOGIN_FAILURE = \"USER_LOGIN_FAILURE\";\r\n\r\nexport const USER_LOGOUT = \"USER_LOGOUT\";\r\n\r\nexport const LOST_REQUEST = \"USER_LOST_REQUEST\";\r\nexport const LOST_SUCCESS = \"USER_LOST_SUCCESS\";\r\nexport const LOST_FAILURE = \"USER_LOST_FAILURE\";\r\n\r\nexport const CHANGE_THEME = \"CHANGE_THEME\";\r\n\r\nexport interface DefaultUserState {\r\n  loggedIn: boolean;\r\n  loading: boolean;\r\n  user?: LoginResponse;\r\n  error?: string;\r\n  theme: \"light\" | \"dark\";\r\n}\r\nexport type ILost = {\r\n  user_login: string;\r\n  recaptcha?: boolean;\r\n};\r\nexport type IUser = {\r\n  username: string;\r\n  password: string;\r\n  recaptcha?: boolean;\r\n};\r\nexport type IRegister = {\r\n  email: string;\r\n  username: string;\r\n  password: string;\r\n  lastname: string;\r\n  firstname: string;\r\n  policy?: boolean;\r\n  recaptcha?: boolean;\r\n};\r\nexport type LoginResponse = {\r\n  user_display_name: string;\r\n  token: string;\r\n  user_id: string;\r\n  user_email: string;\r\n  user_nicename: string;\r\n};\r\n\r\nexport interface LoginRequestAction {\r\n  type: typeof LOGIN_REQUEST;\r\n}\r\nexport interface LoginSuccessAction {\r\n  type: typeof LOGIN_SUCCESS;\r\n  user: LoginResponse;\r\n}\r\nexport interface LoginFailureAction {\r\n  type: typeof LOGIN_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface RegisterRequestAction {\r\n  type: typeof REGISTER_REQUEST;\r\n}\r\nexport interface RegisterSuccessAction {\r\n  type: typeof REGISTER_SUCCESS;\r\n  user: string;\r\n}\r\nexport interface RegisterFailureAction {\r\n  type: typeof REGISTER_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface LogoutAction {\r\n  type: typeof USER_LOGOUT;\r\n}\r\n\r\nexport interface LostRequestAction {\r\n  type: typeof LOST_REQUEST;\r\n}\r\nexport interface LostSuccessAction {\r\n  type: typeof LOST_SUCCESS;\r\n  message: string;\r\n}\r\nexport interface LostFailureAction {\r\n  type: typeof LOST_FAILURE;\r\n  error: string;\r\n}\r\n\r\nexport interface ChangeThemeAction {\r\n  type: typeof CHANGE_THEME;\r\n  theme: \"light\" | \"dark\";\r\n}\r\n\r\nexport type UserActionTypes =\r\n  | RegisterRequestAction\r\n  | RegisterSuccessAction\r\n  | RegisterFailureAction\r\n  | LostRequestAction\r\n  | LostSuccessAction\r\n  | LostFailureAction\r\n  | LogoutAction\r\n  | LoginRequestAction\r\n  | LoginSuccessAction\r\n  | LoginFailureAction\r\n  | ChangeThemeAction\r\n","import { ILesson } from \"./lesson.types\";\r\n\r\nexport const REQUEST_EXERCISES = \"REQUEST_EXERCISES\";\r\nexport const SUCCESS_EXERCISES = \"SUCCESS_EXERCISES\";\r\nexport const FAILURE_EXERCISES = \"FAILURE_EXERCISES\";\r\n\r\nexport const SAVE_EXERCISES = \"SAVE_EXERCISES\";\r\n\r\nexport const REQUEST_EXERCISE = \"REQUEST_EXERCISE\";\r\nexport const SUCCESS_EXERCISE = \"SUCCESS_EXERCISE\";\r\nexport const FAILURE_EXERCISE = \"FAILURE_EXERCISE\";\r\n\r\nexport interface DefaultExercisesState {\r\n  data: ILesson[];\r\n  error: string;\r\n  loading: boolean;\r\n  nextLoad: number;\r\n}\r\nexport interface DefaultExerciseState {\r\n  data?: ILesson;\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\nexport interface RequestExercises {\r\n  type: typeof REQUEST_EXERCISES;\r\n}\r\nexport interface SeccessExercises {\r\n  type: typeof SUCCESS_EXERCISES;\r\n  payload: {\r\n    data: ILesson[];\r\n    nextLoad: number;\r\n  }\r\n}\r\n\r\nexport interface SaveExercises {\r\n  type: typeof SAVE_EXERCISES;\r\n  data: ILesson[];\r\n}\r\n\r\nexport interface FailureExercises {\r\n  type: typeof FAILURE_EXERCISES;\r\n  error: string;\r\n}\r\n\r\nexport interface RequestExercise {\r\n  type: typeof REQUEST_EXERCISE;\r\n}\r\nexport interface SeccessExercise {\r\n  type: typeof SUCCESS_EXERCISE;\r\n  data: ILesson;\r\n  error?: string;\r\n}\r\nexport interface FailureExercise {\r\n  type: typeof FAILURE_EXERCISE;\r\n  error: string;\r\n}\r\n\r\nexport type ExerciseActionTypes =\r\n  | RequestExercises\r\n  | SeccessExercises\r\n  | FailureExercises\r\n  | RequestExercise\r\n  | SeccessExercise\r\n  | FailureExercise\r\n  | SaveExercises;\r\n","import React from \"react\";\r\nimport {\r\n  CircularProgress,\r\n  createStyles,\r\n  makeStyles,\r\n  Theme,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    loading: {\r\n      display: \"flex\",\r\n      height: \"83%\",\r\n      boxShadow: \"inset 0 1px 4px 0px black\",\r\n    },\r\n    loadingPad: {\r\n      display: \"flex\",\r\n      width: \"100vw\",\r\n      minHeight: \"calc(100vh - 300px)\",\r\n      overflow: \"hidden\",\r\n    },\r\n  })\r\n);\r\n\r\ninterface LoadingProps {\r\n  noPad?: boolean;\r\n}\r\n\r\nexport const LoadingCircle: React.FC<LoadingProps> = ({ noPad }) => {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={noPad ? classes.loading : classes.loadingPad}>\r\n      <CircularProgress color=\"secondary\" style={{ margin: \"auto\" }} />\r\n    </div>\r\n  );\r\n};\r\n","export const REQUEST_LESSONS = \"REQUEST_LESSONS\";\r\nexport const SUCCESS_LESSONS = \"SUCCESS_LESSONS\";\r\nexport const FAILURE_LESSONS = \"FAILURE_LESSONS\";\r\n\r\nexport const SAVE_LESSONS = \"SAVE_LESSONS\";\r\n\r\nexport const REQUEST_LESSON = \"REQUEST_LESSON\";\r\nexport const SUCCESS_LESSON = \"SUCCESS_LESSON\";\r\nexport const FAILURE_LESSON = \"FAILURE_LESSON\";\r\n\r\nexport interface DefaultLessonsState {\r\n  data: ILesson[];\r\n  error: string;\r\n  loading: boolean;\r\n  nextLoad: number;\r\n}\r\nexport interface DefaultLessonState {\r\n  data?: ILesson;\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\nexport interface ILesson {\r\n  id: number;\r\n  title: string;\r\n  content: string;\r\n  author: string;\r\n  excerpt: string;\r\n  featured_img: string;\r\n  slug: string;\r\n  info: LessonInfo;\r\n}\r\nexport type LessonInfo = {\r\n  series: infoDetails;\r\n  instrument: infoDetails;\r\n  grade: infoDetails;\r\n  genre: infoDetails;\r\n};\r\n\r\ntype infoDetails = {\r\n  name: string,\r\n  id: number,\r\n  img: string,\r\n  color: string,\r\n  description: string\r\n}\r\n\r\nexport interface RequestLessons {\r\n  type: typeof REQUEST_LESSONS;\r\n}\r\nexport interface SeccessLessons {\r\n  type: typeof SUCCESS_LESSONS;\r\n  payload: {\r\n    data: ILesson[];\r\n    nextLoad: number;\r\n  }\r\n}\r\nexport interface FailureLessons {\r\n  type: typeof FAILURE_LESSONS;\r\n  error: string;\r\n}\r\n\r\nexport interface SaveLessons {\r\n  type: typeof SAVE_LESSONS;\r\n  data: ILesson[];\r\n}\r\n\r\nexport interface RequestLesson {\r\n  type: typeof REQUEST_LESSON;\r\n}\r\nexport interface SeccessLesson {\r\n  type: typeof SUCCESS_LESSON;\r\n  data: ILesson;\r\n}\r\nexport interface FailureLesson {\r\n  type: typeof FAILURE_LESSON;\r\n  error: string;\r\n}\r\n\r\n\r\nexport type LessonActionTypes =\r\n  | RequestLessons\r\n  | SeccessLessons\r\n  | FailureLessons\r\n  | RequestLesson\r\n  | SeccessLesson\r\n  | FailureLesson\r\n  | SaveLessons;\r\n","import { ThumbnailsInfo } from \"./guide.types\";\r\nimport { ILesson } from \"./lesson.types\";\r\n\r\nexport const REQUEST_COURSES = \"REQUEST_COURSES\";\r\nexport const SUCCESS_COURSES = \"SUCCESS_COURSES\";\r\nexport const FAILURE_COURSES = \"FAILURE_COURSES\";\r\n\r\nexport const SAVE_COURSES = \"SAVE_COURSES\";\r\n\r\nexport const REQUEST_COURSE = \"REQUEST_COURSE\";\r\nexport const SUCCESS_COURSE = \"SUCCESS_COURSE\";\r\nexport const FAILURE_COURSE = \"FAILURE_COURSE\";\r\n\r\nexport interface DefaultCoursesState {\r\n    data: ICourse[];\r\n    error: string;\r\n    loading: boolean;\r\n    nextLoad: number;\r\n}\r\n\r\nexport interface DefaultCourseState {\r\n    data?: ICourse;\r\n    error: string;\r\n    loading: boolean;\r\n}\r\n\r\nexport interface ICourse {\r\n    title: string;\r\n    id: number;\r\n    slug: string;\r\n    content: string;\r\n    teacher: string;\r\n    description: string;\r\n    instrument_id: number,\r\n    instrument_name: string,\r\n    genre_id: number,\r\n    genre_name: string,\r\n    grade: string,\r\n    color: string,\r\n    thumbnails: ThumbnailsInfo;\r\n    course_select: ILesson[];\r\n}\r\n\r\nexport interface RequestCourses {\r\n    type: typeof REQUEST_COURSES;\r\n}\r\nexport interface SeccessCourses {\r\n    type: typeof SUCCESS_COURSES;\r\n    payload: {\r\n        data: ICourse[];\r\n        nextLoad: number;\r\n    }\r\n}\r\nexport interface FailureCourses {\r\n    type: typeof FAILURE_COURSES;\r\n    error: string;\r\n}\r\n\r\nexport interface SaveGuides {\r\n    type: typeof SAVE_COURSES;\r\n    data: ICourse[];\r\n}\r\n\r\nexport interface RequestCourse {\r\n    type: typeof REQUEST_COURSE;\r\n}\r\nexport interface SeccessCourse {\r\n    type: typeof SUCCESS_COURSE;\r\n    data: ICourse;\r\n}\r\nexport interface FailureCourse {\r\n    type: typeof FAILURE_COURSE;\r\n    error: string;\r\n}\r\n\r\nexport type CourseActionTypes =\r\n    | RequestCourses\r\n    | SeccessCourses\r\n    | FailureCourses\r\n    | RequestCourse\r\n    | SeccessCourse\r\n    | FailureCourse\r\n    | SaveGuides;\r\n","import { TransitionProps } from \"@material-ui/core/transitions/transition\";\r\nimport { TransitionHandler, VariantType, TransitionCloseHandler, SnackbarOrigin } from \"notistack/dist\";\r\n\r\nexport const SHOW_SNACKBAR = \"SHOW_SNACKBAR\";\r\nexport const CLEAR_SNACKBAR = \"CLEAR_SNACKBAR\";\r\nexport const REMOVE_SNACKBAR = \"REMOVE_SNACKBAR\";\r\n\r\nexport interface DefaultSnackState {\r\n  type?: string;\r\n  snackbars?: ISnack[];\r\n}\r\nexport type ISnack = {\r\n  message: string;\r\n  key: string;\r\n  dismissed?: boolean;\r\n  options: SnackOption;\r\n};\r\ninterface SnackOption {\r\n  TransitionComponent?: (props: TransitionProps) => JSX.Element;\r\n  autoHideDuration?: number | null;\r\n  anchorOrigin?: SnackbarOrigin;\r\n  variant?: VariantType;\r\n  action?: (key: string) => JSX.Element;\r\n  onClose?: TransitionCloseHandler\r\n  onExited?: TransitionHandler;\r\n}\r\nexport interface SeccessSnackAction {\r\n  type: typeof SHOW_SNACKBAR;\r\n  snackbar: ISnack;\r\n}\r\nexport interface ClearSnackAction {\r\n  type: typeof CLEAR_SNACKBAR;\r\n  dismissAll?: boolean;\r\n  key?: string;\r\n}\r\nexport interface RemoveSnackAction {\r\n  type: typeof REMOVE_SNACKBAR;\r\n  key: string;\r\n}\r\n\r\nexport type SnackActionTypes =\r\n  | SeccessSnackAction\r\n  | ClearSnackAction\r\n  | RemoveSnackAction;\r\n","import { ICourse } from \"./course.types\";\r\nimport { ILesson } from \"./lesson.types\";\r\n\r\nexport const REQUEST_GUIDES = \"REQUEST_GUIDES\";\r\nexport const SUCCESS_GUIDES = \"SUCCESS_GUIDES\";\r\nexport const FAILURE_GUIDES = \"FAILURE_GUIDES\";\r\n\r\nexport const SAVE_GUIDES = \"SAVE_GUIDES\";\r\n\r\nexport const REQUEST_GUIDE = \"REQUEST_GUIDE\";\r\nexport const SUCCESS_GUIDE = \"SUCCESS_GUIDE\";\r\nexport const FAILURE_GUIDE = \"FAILURE_GUIDE\";\r\n\r\nexport interface DefaultGuidesState {\r\n    data: IGuide[];\r\n    error: string;\r\n    loading: boolean;\r\n    nextLoad: number;\r\n}\r\nexport interface DefaultGuideState {\r\n    data?: IGuide;\r\n    error: string;\r\n    loading: boolean;\r\n}\r\n\r\nexport interface IGuide {\r\n    title: string;\r\n    id: number;\r\n    slug: string;\r\n    teacher: string;\r\n    description: string;\r\n    instrument_id: number;\r\n    instrument_name: string;\r\n    color: string;\r\n    thumbnails: ThumbnailsInfo;\r\n    guide_select: GuideSelect[];\r\n}\r\nexport type GuideSelect = {\r\n    exercise_description: string;\r\n    exercise: ILesson[];\r\n    course_description: string;\r\n    course: ICourse[];\r\n}\r\nexport type ThumbnailsInfo = {\r\n    thumbnail: string;\r\n    medium: string;\r\n    medium_large: string;\r\n    large: string;\r\n    '1536x1536': string;\r\n    '2048x2048': string;\r\n};\r\n\r\nexport interface RequestGuides {\r\n    type: typeof REQUEST_GUIDES;\r\n}\r\nexport interface SeccessGuides {\r\n    type: typeof SUCCESS_GUIDES;\r\n    payload: {\r\n        data: IGuide[];\r\n        nextLoad: number;\r\n    }\r\n}\r\n\r\nexport interface SaveGuides {\r\n    type: typeof SAVE_GUIDES;\r\n    data: IGuide[];\r\n}\r\n\r\nexport interface FailureGuides {\r\n    type: typeof FAILURE_GUIDES;\r\n    error: string;\r\n}\r\n\r\nexport interface RequestGuide {\r\n    type: typeof REQUEST_GUIDE;\r\n}\r\nexport interface SeccessGuide {\r\n    type: typeof SUCCESS_GUIDE;\r\n    data: IGuide;\r\n}\r\nexport interface FailureGuide {\r\n    type: typeof FAILURE_GUIDE;\r\n    error: string;\r\n}\r\n\r\nexport type GuideActionTypes =\r\n    | RequestGuides\r\n    | SeccessGuides\r\n    | FailureGuides\r\n    | RequestGuide\r\n    | SeccessGuide\r\n    | FailureGuide\r\n    | SaveGuides;\r\n","import { Dispatch } from \"react\";\r\nimport { AppActions, AppState } from \"../_types\";\r\nimport {\r\n  FAVORITE_SUCCESS,\r\n  IFavorite,\r\n  INFO_FAILURE,\r\n  INFO_REQUEST,\r\n  INFO_SUCCESS,\r\n  IPlaytime,\r\n  PLAYTIME_SUCCESS,\r\n} from \"../_types/profile.types\";\r\nimport { errorHandler, seccessHandler, loginErrorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { API } from \"../_helpers/api\";\r\n\r\nexport const profileRequest = () => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: INFO_REQUEST });\r\n    API.get(`/jwt-auth/v1/profile`)\r\n      .then(res => {\r\n        const { favorite, ...rest } = res.data\r\n        dispatch({\r\n          type: INFO_SUCCESS,\r\n          profile: rest,\r\n        });\r\n        dispatch({\r\n          type: FAVORITE_SUCCESS,\r\n          favorite,\r\n        });\r\n      })\r\n      .catch(err => errorHandler(err, INFO_FAILURE))\r\n  }\r\n)\r\nexport const updateProfile = (user: any) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    const requestUpdate = (userData: any) => (\r\n      API.put(`/jwt-auth/v1/profile`, userData)\r\n        .then(res => {\r\n          dispatch({\r\n            type: INFO_SUCCESS,\r\n            profile: { ...res.data },\r\n          });\r\n        })\r\n        .catch(err => errorHandler(err, INFO_FAILURE))\r\n    )\r\n    dispatch({ type: INFO_REQUEST });\r\n    if (user.image_select) {\r\n      var data = new FormData();\r\n      data.append(\"file\", user.image_select);\r\n      API.post(\"wp/v2/media\", data)\r\n        .then((res) => {\r\n          requestUpdate({ ...user, image_select: String(res.data.id) })\r\n        })\r\n        .catch((err) => errorHandler(err, INFO_FAILURE));\r\n\r\n    } else { requestUpdate(user) }\r\n  }\r\n)\r\nexport const getPlayTimes = () => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: INFO_REQUEST });\r\n    API.get(`/jwt-auth/v1/user?for=playtime`)\r\n      .then(res => {\r\n        dispatch({\r\n          type: PLAYTIME_SUCCESS,\r\n          playtime: res.data,\r\n        });\r\n      })\r\n      .catch(err => errorHandler(err, INFO_FAILURE))\r\n  }\r\n)\r\nexport const addFavorites = (data: IFavorite) => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const isLogged = getState().auth.loggedIn\r\n    if (isLogged) {\r\n      dispatch({ type: INFO_REQUEST });\r\n      API.put(`/jwt-auth/v1/user?for=favorite`, data)\r\n        .then(res => {\r\n          dispatch({\r\n            type: FAVORITE_SUCCESS,\r\n            favorite: res.data,\r\n          });\r\n        })\r\n        .catch(err => errorHandler(err, INFO_FAILURE))\r\n    } else {\r\n      loginErrorHandler(INFO_FAILURE);\r\n    }\r\n  }\r\n)\r\nexport const addPlayTimes = (data: IPlaytime) => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const isLogged = getState().auth.loggedIn\r\n    if (isLogged) {\r\n      API.put(`/jwt-auth/v1/user?for=playtime`, data)\r\n        .then(res => {\r\n          dispatch({\r\n            type: PLAYTIME_SUCCESS,\r\n            playtime: res.data,\r\n          });\r\n          seccessHandler(\"Saved\")\r\n        })\r\n        .catch(err => errorHandler(err, INFO_FAILURE))\r\n    } else {\r\n      loginErrorHandler(INFO_FAILURE);\r\n    }\r\n  }\r\n)","export const REQUEST_POSTS = \"REQUEST_POSTS\";\r\nexport const SUCCESS_POSTS = \"SUCCESS_POSTS\";\r\nexport const FAILURE_POSTS = \"FAILURE_POSTS\";\r\n\r\nexport const REQUEST_POST = \"REQUEST_POST\";\r\nexport const SUCCESS_POST = \"SUCCESS_POST\";\r\nexport const FAILURE_POST = \"FAILURE_POST\";\r\n\r\nexport interface DefaultPostsState {\r\n  data: IPost[];\r\n  error: string;\r\n  loading: boolean;\r\n  nextLoad: number;\r\n}\r\nexport interface DefaultPostState {\r\n  data?: IPost;\r\n  error: string;\r\n  loading: boolean;\r\n}\r\n\r\nexport interface IPost {\r\n  id: number,\r\n  title: string,\r\n  content: string,\r\n  slug: string,\r\n  excerpt: string,\r\n  date: string,\r\n  author: string,\r\n  featured_img: string,\r\n  categories: string[]\r\n  tags: string[]\r\n}\r\n\r\nexport interface RequestPosts {\r\n  type: typeof REQUEST_POSTS;\r\n}\r\nexport interface SeccessPosts {\r\n  type: typeof SUCCESS_POSTS;\r\n  payload: {\r\n    data: IPost[];\r\n    nextLoad: number;\r\n  }\r\n}\r\nexport interface FailurePosts {\r\n  type: typeof FAILURE_POSTS;\r\n  error: string;\r\n}\r\n\r\nexport interface RequestPost {\r\n  type: typeof REQUEST_POST;\r\n}\r\nexport interface SeccessPost {\r\n  type: typeof SUCCESS_POST;\r\n  data: IPost;\r\n}\r\nexport interface FailurePost {\r\n  type: typeof FAILURE_POST;\r\n  error: string;\r\n}\r\n\r\nexport type PostActionTypes =\r\n  | RequestPosts\r\n  | SeccessPosts\r\n  | FailurePosts\r\n  | RequestPost\r\n  | SeccessPost\r\n  | FailurePost;\r\n","import { Dispatch } from \"react\";\r\nimport { goBack, push } from 'connected-react-router'\r\nimport {\r\n  REGISTER_FAILURE,\r\n  REGISTER_REQUEST,\r\n  REGISTER_SUCCESS,\r\n  LOGIN_FAILURE,\r\n  LOGIN_REQUEST,\r\n  LOGIN_SUCCESS,\r\n  LOST_REQUEST,\r\n  LOST_SUCCESS,\r\n  CHANGE_THEME,\r\n  LOST_FAILURE,\r\n  USER_LOGOUT,\r\n  IRegister,\r\n  IUser,\r\n  ILost,\r\n} from \"../_types/auth.types\";\r\nimport { AppActions } from \"../_types\";\r\nimport { SHOW_SNACKBAR } from \"../_types/snackbar.types\";\r\nimport { errorHandler, snackBarMaker } from \"../components/Layout/SnackBar/alert\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { DELETE_PROFILE } from \"../_types/profile.types\";\r\n\r\nexport const loginRequest = (user: IUser) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: LOGIN_REQUEST });\r\n    API.post(`/jwt-auth/v1/token`, user)\r\n      .then(res => {\r\n        dispatch({ type: LOGIN_SUCCESS, user: res.data });\r\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\r\n        API.defaults.headers.common = { \"Authorization\": \"Bearer \" + res.data.token };\r\n        API.defaults.headers[\"Authorization\"] = \"Bearer \" + res.data.token;\r\n        dispatch(goBack());\r\n        dispatch({\r\n          type: SHOW_SNACKBAR,\r\n          snackbar: snackBarMaker(\r\n            `${res.data.user_display_name} logged in successfully.`,\r\n            \"success\"\r\n          ),\r\n        });\r\n      })\r\n      .catch(err => errorHandler(err, LOGIN_FAILURE))\r\n  }\r\n)\r\nexport const changeTheme = (theme: \"light\" | \"dark\") => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: CHANGE_THEME, theme });\r\n  }\r\n)\r\n\r\nexport const logoutRequest = () => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    localStorage.removeItem(\"user\");\r\n    delete API.defaults.headers.common[\"Authorization\"];\r\n    delete API.defaults.headers[\"Authorization\"];\r\n    dispatch({ type: USER_LOGOUT });\r\n    dispatch({ type: DELETE_PROFILE });\r\n  }\r\n)\r\n\r\nexport const registerRequest = (user: IRegister) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: REGISTER_REQUEST });\r\n    API.post(`/jwt-auth/v1/register`, user)\r\n      .then(\r\n        (res) => {\r\n          dispatch({ type: REGISTER_SUCCESS, user: res.data });\r\n          dispatch(push(\"/login\"));\r\n          dispatch({\r\n            type: SHOW_SNACKBAR,\r\n            snackbar: snackBarMaker(res.data.message, \"success\"),\r\n          });\r\n        })\r\n      .catch(err => errorHandler(err, REGISTER_FAILURE))\r\n  }\r\n)\r\n\r\nexport const lostRequest = (user: ILost) => (\r\n  (dispatch: Dispatch<AppActions>) => {\r\n    dispatch({ type: LOST_REQUEST });\r\n\r\n    API.post(`/jwt-auth/v1/lostpassword`, user)\r\n      .then(\r\n        (res) => {\r\n          const message: string = res.data.message.toString();\r\n          dispatch({ type: LOST_SUCCESS, message });\r\n          dispatch(push(\"/login\"));\r\n          dispatch({\r\n            type: SHOW_SNACKBAR,\r\n            snackbar: snackBarMaker(message, \"success\"),\r\n          });\r\n        })\r\n      .catch(err => {\r\n        errorHandler(err, LOST_FAILURE)\r\n      })\r\n  }\r\n)\r\n","import { Dispatch } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport {\r\n  SAVE_COURSES,\r\n  FAILURE_COURSE,\r\n  REQUEST_COURSE,\r\n  SUCCESS_COURSE,\r\n  FAILURE_COURSES,\r\n  REQUEST_COURSES,\r\n  SUCCESS_COURSES,\r\n} from \"../_types/course.types\";\r\nimport { AppState } from \"../_types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppActions } from \"../_types\";\r\nimport { requestGuide } from \"./guide.actions\";\r\nimport { requestLesson } from \"./lesson.actions\";\r\nimport { requestExercise } from \"./exercise.actions\";\r\nimport { SAVE_EXERCISES } from \"../_types/exercise.types\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { ILesson, SAVE_LESSONS } from \"../_types/lesson.types\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\n\r\nexport const requestAllCourse = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const courseState = getState().bank.courses;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - courseState.nextLoad;\r\n    if (courseState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_COURSES });\r\n\r\n    API.get(`/lesson/v2/course`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_COURSES, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_COURSES))\r\n  }\r\n)\r\n\r\nexport const requestCourse = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const found = getState().bank.courses.data.find(course => course.id === path.course);\r\n    const { course, ...newPath } = path;\r\n    if (found) {\r\n\r\n      const compiler = Compiler(found.course_select);\r\n      dispatch({ type: SUCCESS_COURSE, data: found })\r\n      dispatch({ type: SAVE_LESSONS, data: compiler.lessons })\r\n      dispatch({ type: SAVE_EXERCISES, data: compiler.exercises })\r\n      if (path.lesson) dispatch(requestLesson(newPath))\r\n      if (path.exercise) dispatch(requestExercise(newPath))\r\n    }\r\n    else if (path.guide) {\r\n      dispatch(requestGuide(path))\r\n    }\r\n    else if (!found) {\r\n\r\n      dispatch({ type: REQUEST_COURSE });\r\n      API.get(`/lesson/v2/course?id=${path.course}`)\r\n        .then(res => {\r\n          const compiler = Compiler(res.data[0].course_select);\r\n          dispatch({ type: SUCCESS_COURSE, data: res.data[0] })\r\n          dispatch({ type: SAVE_COURSES, data: res.data })\r\n          dispatch({ type: SAVE_LESSONS, data: compiler.lessons })\r\n          dispatch({ type: SAVE_EXERCISES, data: compiler.exercises })\r\n          if (path.lesson) dispatch(requestLesson(newPath))\r\n          if (path.exercise) dispatch(requestExercise(newPath))\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_COURSE))\r\n    }\r\n  }\r\n)\r\n\r\nconst Compiler = (course_select: ILesson[]) => {\r\n  const lessons: ILesson[] = []\r\n  const exercises: ILesson[] = []\r\n  course_select.map(select => select.info.genre.name === \"Exercise\" ? exercises.push(select) : lessons.push(select))\r\n  return { lessons, exercises };\r\n};\r\n","import { Dispatch } from \"react\";\r\nimport {\r\n  SAVE_GUIDES,\r\n  FAILURE_GUIDE,\r\n  REQUEST_GUIDE,\r\n  SUCCESS_GUIDE,\r\n  FAILURE_GUIDES,\r\n  REQUEST_GUIDES,\r\n  SUCCESS_GUIDES,\r\n  GuideSelect,\r\n} from \"../_types/guide.types\";\r\nimport { AppState } from \"../_types\";\r\nimport { API } from \"../_helpers/api\";\r\nimport { AppActions } from \"../_types\";\r\nimport { errorHandler } from \"../components/Layout/SnackBar/alert\";\r\nimport { ILesson } from \"../_types/lesson.types\";\r\nimport { getTheTime, PathFinder } from \"../_helpers/constants\";\r\nimport { SAVE_EXERCISES } from \"../_types/exercise.types\";\r\nimport { ICourse, SAVE_COURSES } from \"../_types/course.types\";\r\nimport { requestExercise } from \"./exercise.actions\";\r\nimport { requestCourse } from \"./course.actions\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\n\r\nexport const requestAllGuide = () => (\r\n  (dispatch: Dispatch<AppActions>, getState: () => AppState) => {\r\n    const guideState = getState().bank.guides;\r\n    const currentTime = getTheTime();\r\n    const resetTime = currentTime - guideState.nextLoad;\r\n    if (guideState.data && resetTime <= 0) {\r\n      return;\r\n    }\r\n    dispatch({ type: REQUEST_GUIDES });\r\n\r\n    API.get(`/lesson/v2/guide`)\r\n      .then(res => dispatch({\r\n        type: SUCCESS_GUIDES, payload: {\r\n          data: res.data,\r\n          nextLoad: getTheTime(10)\r\n        }\r\n      }))\r\n      .catch(err => errorHandler(err, FAILURE_GUIDES))\r\n  }\r\n)\r\n\r\nexport const requestGuide = (path: PathFinder) => (\r\n  (dispatch: ThunkDispatch<AppState, undefined, AppActions>, getState: () => AppState) => {\r\n    const { guide, ...newPath } = path;\r\n    const found = getState().bank.guides.data.find(guide => guide.id === path.guide);\r\n    if (found) {\r\n\r\n      dispatch({ type: SUCCESS_GUIDE, data: found });\r\n      dispatch({ type: SAVE_COURSES, data: addCourses(found.guide_select) });\r\n      dispatch({ type: SAVE_EXERCISES, data: addExercises(found.guide_select) });\r\n      if (path.course) dispatch(requestCourse(newPath));\r\n      if (path.exercise) dispatch(requestExercise(newPath));\r\n    } else {\r\n\r\n      dispatch({ type: REQUEST_GUIDE });\r\n      API.get(`/lesson/v2/guide?id=${path.guide}`)\r\n        .then(res => {\r\n          dispatch({ type: SUCCESS_GUIDE, data: res.data[0] });\r\n          dispatch({ type: SAVE_GUIDES, data: res.data });\r\n          dispatch({ type: SAVE_COURSES, data: addCourses(res.data[0].guide_select) });\r\n          dispatch({ type: SAVE_EXERCISES, data: addExercises(res.data[0].guide_select) });\r\n          if (path.course) dispatch(requestCourse(newPath));\r\n          if (path.exercise) dispatch(requestExercise(newPath));\r\n        })\r\n        .catch(err => errorHandler(err, FAILURE_GUIDE));\r\n    }\r\n  }\r\n)\r\n\r\nconst addCourses = (guide_select: GuideSelect[]) => {\r\n  const added: ICourse[] = []\r\n  guide_select.map((course) => course.course?.map(lesson => added.push(lesson)))\r\n  return added;\r\n};\r\nconst addExercises = (guide_select: GuideSelect[]) => {\r\n  const added: ILesson[] = []\r\n  guide_select.map((course) => course.exercise?.map(exercise => added.push(exercise)))\r\n  return added;\r\n}"],"sourceRoot":""}