(this["webpackJsonpmelodition-typescript"]=this["webpackJsonpmelodition-typescript"]||[]).push([[42],{492:function(e,a,t){"use strict";t.r(a);var n=t(2),i=t(56),r=t(57),l=t(59),o=t(58),c=t(11),s=t(0),m=t.n(s),d=t(33),u=t(22),p=t(243),f=t(253),g=t(252),h=t(295),b=t(76),v=t(458),y=t(193),j=t(6),E=t(321),O=t(314),k=t(323),w=t(112),_=t(3),x=t(407),C=t.n(x),U=t(265),F=t(292),P=t(406),S=t.n(P),W=t(472),q=t(268),z=function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).fileUpload=void 0,n.showFileUpload=function(){var e;null===(e=n.fileUpload.current)||void 0===e||e.click()},n.handleImageChange=function(e){e.preventDefault();var a=new FileReader,t=e.target.files;if(null===t||void 0===t?void 0:t.length){var i=t[0];a.onloadend=function(){n.setState({file:i,imagePreviewUrl:a.result})},a.readAsDataURL(i),n.props.setFieldValue(n.props.field.name,i)}},n.state={file:void 0,imagePreviewUrl:null},n.fileUpload=m.a.createRef(),n}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.errorMessage,t=e.classes,n=e.image,i=this.props.field.name,r=this.state,l=r.file,o=r.imagePreviewUrl,s=Object(_.a)(t.bigAvatar,this.state.file?[t.whiteBack]:[t.primaryBack],Object(c.a)({},t.errorBack,a));return m.a.createElement("div",{className:t.container},m.a.createElement("input",{className:t.hidden,id:i,name:i,type:"file",onChange:this.handleImageChange,ref:this.fileUpload,accept:"image/png, image/jpeg"}),m.a.createElement(U.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"left"},badgeContent:m.a.createElement(S.a,{className:t.primaryColor,onClick:this.showFileUpload})},m.a.createElement(F.a,{className:s,onClick:this.showFileUpload,alt:"avatar",src:a?void 0:l?o:n||void 0},a?m.a.createElement(W.a,{style:{fontSize:36}}):m.a.createElement(q.a,{style:{fontSize:36}}))),a?m.a.createElement(b.a,{variant:"caption",color:"error"},a):null)}}]),t}(s.Component),B=C()((function(e){return Object(p.a)({hidden:{display:"none"},container:{margin:e.spacing(2,0),textAlign:"center"},bigAvatar:{margin:"auto",width:128,height:128,borderColor:e.palette.secondary.main,borderStyle:"solid",cursor:"pointer"},primaryBack:{background:e.palette.secondary.main},primaryColor:{color:e.palette.secondary.main,cursor:"pointer"},whiteBack:{background:"white"},errorBack:{background:e.palette.error.main}})}))(z),N=t(61),V=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,A=function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(){return Object(i.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.loading||this.props.getProfile()}},{key:"render",value:function(){var e=this,a=this.props,t=a.data,i=a.loading,r=a.classes;if(t){var l=t.image_select,o=t.first_name,c=t.last_name,s=t.nickname,d=t.mobile,u={image_select:l,first_name:o,last_name:c,nickname:s,mobile:d||""};return m.a.createElement(f.a,{maxWidth:!1,className:r.root},m.a.createElement(g.a,{container:!0,spacing:3},m.a.createElement(g.a,{item:!0,lg:12,md:12,xl:12,xs:12,className:r.container},m.a.createElement(f.a,{component:"main",maxWidth:"xs"},m.a.createElement(O.c,{initialValues:u,validationSchema:E.c().shape({image_select:E.b().test("fileSize","File too large ,should be lower than ".concat(Math.floor(163.84),"kb"),(function(e){return!e||"object"!==typeof e||e.size<=163840})),first_name:E.e().max(255).required("First name is required"),last_name:E.e().max(255).required("Last name is required"),nickname:E.e().max(255).required("User name is required"),mobile:E.e().matches(V,"Phone number is not valid")}),onSubmit:function(a,i){var r=i.resetForm,l=a;"string"===typeof a.image_select&&(l=Object(n.a)(Object(n.a)({},a),{},{image_select:void 0})),e.props.updateProfile(Object(n.a)({},l)),r({values:Object(n.a)(Object(n.a)({},a),{},{image_select:t.image_select})})}},(function(e){var a=e.setFieldValue,t=e.initialValues,n=e.errors;return m.a.createElement(O.b,null,m.a.createElement(h.a,{mb:3},m.a.createElement(O.a,{name:"image_select",component:B,image:t.image_select,setFieldValue:a,margin:"normal",errorMessage:n.image_select?n.image_select:void 0}),m.a.createElement(b.a,{color:"textSecondary",align:"center",variant:"h5"},"Personal Information"),m.a.createElement(O.a,{component:k.a,color:"secondary",fullWidth:!0,label:"\u0646\u0627\u0645 \u0646\u0645\u0627\u06cc\u0634\u06cc",margin:"normal",name:"nickname",variant:"outlined"}),m.a.createElement(O.a,{component:k.a,color:"secondary",fullWidth:!0,label:"\u0646\u0627\u0645",margin:"normal",name:"first_name",variant:"outlined"}),m.a.createElement(O.a,{component:k.a,color:"secondary",fullWidth:!0,label:"\u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",margin:"normal",name:"last_name",variant:"outlined"}),m.a.createElement(O.a,{component:k.a,color:"secondary",fullWidth:!0,label:"\u0645\u0648\u0628\u0627\u06cc\u0644",margin:"normal",name:"mobile",type:"mobile",variant:"outlined"}),i&&m.a.createElement(v.a,{color:"secondary"}),m.a.createElement(h.a,{my:2},m.a.createElement(y.a,{color:"secondary",disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained"},"Save"))))}))))))}return m.a.createElement(N.a,null)}}]),t}(s.Component);a.default=Object(d.c)((function(e,a){return Object(n.a)(Object(n.a)({},e.user),{},{auth:e.auth,classes:a.classes})}),(function(e){return{getProfile:Object(u.b)(w.d,e),updateProfile:Object(u.b)(w.e,e)}}))(Object(j.a)((function(e){return Object(p.a)({root:Object(c.a)({width:"99vw",minHeight:"calc(100vh - 64px)"},e.breakpoints.down("xs"),{minHeight:"calc(100vh - 48px)",padding:e.spacing(1)}),container:{display:"flex",flexDirection:"column",justifyContent:"space-between"},form:{margin:e.spacing(2),display:"flex",justifyContent:"space-between","& > div":{width:"100%"}}})}))(A))}}]);
//# sourceMappingURL=42.9602fd3a.chunk.js.map