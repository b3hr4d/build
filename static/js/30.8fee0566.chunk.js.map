{"version":3,"sources":["components/Layout/Player/Buttons.tsx","components/Layout/Instruments/Piano/constant.ts","components/Layout/Instruments/Piano/SvgKeys.ts","components/Layout/Instruments/Piano/index.tsx","components/Layout/Player/SeekBar.tsx","components/Layout/Player/SideVolume.tsx","../node_modules/@material-ui/icons/esm/VolumeDown.js","../node_modules/@material-ui/icons/esm/VolumeUp.js","components/Layout/Player/Metronome.tsx","components/Layout/Instruments/Piano/PlayMode/PlayerHeader.tsx","components/Layout/Instruments/Piano/GameCanvas/GameFront.tsx","components/Layout/Instruments/Piano/GameCanvas/GameBack.tsx","components/Layout/Instruments/Piano/GameCanvas/SvgLine.tsx","components/Layout/Instruments/Piano/GameCanvas/index.tsx","components/Layout/Instruments/Piano/PlayMode/LessonPlayMode.tsx"],"names":["PlayButton","loading","useState","onAir","setOnAir","playHandler","stopPlayer","startPlayer","keyboardUp","e","code","useEffect","document","addEventListener","removeEventListener","id","color","aria-label","onClick","style","fontSize","rightLine","leftLine","pitchName","pitch","n","t","outLine","v","emulatedKeys","z","s","x","d","c","g","b","h","j","m","l","q","2","w","3","4","r","6","y","7","u","i","9","o","0","p","PianoEvent","isDown","playedKey","preventDefault","key","hasOwnProperty","note","midiNoteOff","keyboardDown","midiNoteOn","mouseUpReset","mouseDown","currentTarget","tabIndex","mouseOver","mouseLeave","mouseUp","SvgKeys","xPos","yPos","front","back","useStyles","makeStyles","theme","root","display","flexDirection","justifyContent","flexWrap","margin","minWidth","width","cursor","touchAction","spacing","connectedPiano","connect","state","auth","Melo","melodition","dispatch","drawGamePiano","bindActionCreators","gamePiano","drawNotePiano","notePiano","props","counter","firstkey","keyRefs","console","log","changeMidi","octSize","classes","setKeyRef","ref","octave","pianoLoading","pianoSize","getBoundingClientRect","padTop","window","outerWidth","height","Math","floor","innerHeight","playMode","tapSize","rythm","bpm","detectSize","baseLine","pianoLeft","left","noteMode","neededLines","need","up","lines","down","lineSide","spaceSize","notes","linesArray","Array","from","_","notePos","forEach","pos","className","map","oct","xmlns","viewBox","fill","marginRight","undefined","k","lastKey","length","backFill","frontFill","active","neededTracks","some","el","textPos","onMouseUp","onMouseDown","onMouseLeave","onTouchEnd","onTouchMove","onTouchStart","stroke","fontWeight","cx","cy","strokeWidth","points","connectedSeekbar","drawSeekBar","callback","useCallback","node","seekLoading","seekBar","SeekInput","forwardRef","seek","setSeek","useImperativeHandle","changeSeeker","value","orientation","defaultValue","max","songLength","min","onChange","canvasWheel","aria-labelledby","padding","SideVolume","Typography","gutterBottom","variant","Slider","onChangeCommitted","newValue","MeloMusicVolume","MeloAssigner","pianoVolume","playVolume","createSvgIcon","React","createElement","justifyItems","selectVol","selectInput","paddingTop","Metronome","on","setOn","Switch","checked","metOn","name","inputProps","Grid","container","item","VolumeDown","xs","event","metVol","VolumeUp","Select","native","label","metTrack","target","flexGrow","menuButton","title","breakpoints","divider","MenuAppBar","lesson","modeChanger","AppBar","position","Toolbar","IconButton","edge","ArrowForward","Divider","flexItem","GameFront","drawGame","gameLoading","canvasSize","drawFrontContext","top","zIndex","onWheel","GameBack","backCtx","getContext","clearRect","lineWidth","rect","beginPath","moveTo","lineTo","strokeStyle","fillStyle","drawBackContext","SvgLine","bottom","filter","strokeDasharray","strokeDashoffset","animation","x1","y1","x2","y2","connectedPianoCanvas","boxShadow","absolute","LessonPlayerMode","timer","reSize","playmodeChanger","changeMode","updateDimensions","setState","clearTimeout","setTimeout","resizePlayer","this","main","rightSide","middleSide","canvasLoading","noPad","Piano","direction","justify","alignItems","leftSide","ArrowBackIos","Component","ownProps","history","router","location","pathname","single","data","drawPiano","withStyles","createStyles","overflow","backgroundColor","palette","background","paper","flexBasis","volume","centerText","textAlign"],"mappings":"yOAQaA,EAAmC,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QAAc,EACrCC,oBAAS,GAD4B,mBACxDC,EADwD,KACjDC,EADiD,KAGzDC,EAAc,WACdF,GACFG,cACAF,GAAS,KAETG,cACAH,GAAS,KAGPI,EAAa,SAACC,GACH,UAAXA,EAAEC,MAAqBT,GACzBI,KASJ,OANAM,qBAAU,WAER,OADAC,SAASC,iBAAiB,QAASL,GAC5B,WACLI,SAASE,oBAAoB,QAASN,OAIxC,kBAAC,IAAD,CACEO,GAAG,cACHC,MAAM,YACNC,aAAW,YACXC,QAASb,GAERF,EACC,kBAAC,IAAD,CAAoBgB,MAAO,CAAEC,SAAU,WAEvC,kBAAC,IAAD,CAAmBD,MAAO,CAAEC,SAAU,c,gOCvCjCC,EAAY,CACrB,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IAESC,EAAW,CACpB,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IAESC,EAAY,SAACC,GACtB,IAAIC,EAAID,EAAQ,GACZE,EAAI,IAkCR,OAjCU,IAAND,IACAC,EAAI,MAEE,IAAND,IACAC,EAAI,KAEE,IAAND,IACAC,EAAI,MAEE,IAAND,IACAC,EAAI,KAEE,IAAND,IACAC,EAAI,KAEE,IAAND,IACAC,EAAI,MAEE,IAAND,IACAC,EAAI,KAEE,IAAND,IACAC,EAAI,MAEE,IAAND,IACAC,EAAI,KAEE,KAAND,IACAC,EAAI,MAEE,KAAND,IACAC,EAAI,KAED,GAAKA,GAEHC,EAAU,SAACC,GAAD,OAAqB,MAANA,GAAmB,KAANA,GAAkB,KAANA,GAAkB,KAANA,GAErEC,EAAe,CACjBC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHN,EAAG,GACHO,EAAG,GACHC,EAAG,GACHC,EAAG,GACHZ,EAAG,GACHa,EAAG,GACHC,EAAG,GACH,IAAK,GACLC,EAAG,GACH,IAAK,GACL,IAAK,GACL,IAAK,GACLC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHnC,EAAG,GACHoC,EAAG,GACHC,EAAG,GACHpB,EAAG,GACHqB,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACHC,EAAG,GACH,IAAK,GACL,IAAK,GACL,IAAK,IAIIC,EAAb,iDACIC,QAAS,EADb,KAEIC,eAFJ,OAGIlD,WAAa,SAACC,GACVA,EAAEkD,iBACF,IAAMC,EAAMnD,EAAEmD,IACd,GAAI/B,EAAagC,eAAeD,GAAM,CAClC,IAAME,EAAOjC,EAAa+B,GAC1BG,YAAYD,GACZ,EAAKJ,UAAY,OAT7B,KAYIM,aAAe,SAACvD,GACZA,EAAEkD,iBACF,IAAMC,EAAMnD,EAAEmD,IACd,GAAI/B,EAAagC,eAAeD,IACxBA,IAAQ,EAAKF,UAAW,CACxB,IAAMI,EAAOjC,EAAa+B,GAC1BK,YAAWH,GACX,EAAKJ,UAAYE,IAnBjC,KAuBIM,aAAe,WACX,EAAKT,QAAS,GAxBtB,KA0BIU,UAAY,SAAC1D,GACTA,EAAEkD,iBACF,IACMG,EADmBrD,EAAE2D,cACVC,SACjB,EAAKZ,QAAS,EACd,EAAKC,UAAYI,EACjBG,YAAWH,IAhCnB,KAkCIQ,UAAY,SAAC7D,GACTA,EAAEkD,iBACF,IACMG,EADmBrD,EAAE2D,cACVC,SACb,EAAKZ,QAAUK,IAAS,EAAKJ,YAC7B,EAAKA,UAAYI,EACjBG,YAAWH,KAxCvB,KA2CIS,WAAa,SAAC9D,GACVA,EAAEkD,iBACF,IACMG,EADmBrD,EAAE2D,cACVC,SACb,EAAKZ,SACLM,YAAYD,GACZ,EAAKJ,UAAY,OAjD7B,KAoDIc,QAAU,SAAC/D,GACPA,EAAEkD,iBACF,IACMG,EADmBrD,EAAE2D,cACVC,SACjB,EAAKZ,QAAS,EACdM,YAAYD,GACZ,EAAKJ,UAAY,Q,yGCjHVe,EArFC,CAAC,CACfX,KAAM,IACNY,KAAM,GACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,6IACN,CACDd,KAAM,KACNY,KAAM,GACNC,KAAM,GACN5D,GAAI,QACJ6D,MAAO,iFACPC,KAAM,4DACL,CACDf,KAAM,IACNY,KAAM,IACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,mMACN,CACDd,KAAM,KACNY,KAAM,IACNC,KAAM,GACN5D,GAAI,QACJ6D,MAAO,wFACPC,KAAM,qEACL,CACDf,KAAM,IACNY,KAAM,IACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,2JACN,CACDd,KAAM,IACNY,KAAM,IACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,2JACN,CACDd,KAAM,KACNY,KAAM,IACNC,KAAM,GACN5D,GAAI,QACJ6D,MAAO,wFACPC,KAAM,qEACL,CACDf,KAAM,IACNY,KAAM,IACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,yMACN,CACDd,KAAM,KACNY,KAAM,IACNC,KAAM,GACN5D,GAAI,QACJ6D,MAAO,wFACPC,KAAM,qEACL,CACDf,KAAM,IACNY,KAAM,IACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,yMACN,CACDd,KAAM,KACNY,KAAM,IACNC,KAAM,GACN5D,GAAI,QACJ6D,MAAO,wFACPC,KAAM,qEACL,CACDf,KAAM,IACNY,KAAM,IACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,2JACN,CACDd,KAAM,IACNY,KAAM,IACNC,KAAM,IACN5D,GAAI,QACJ6D,MAAO,8GCtEHE,EAAYC,aAAW,SAACC,GAAD,MAAmB,CAC9CC,KAAM,CACJC,QAAS,OACTC,cAAe,cACfC,eAAgB,SAChBC,SAAU,SACVC,OAAQ,SACRC,SAAU,QACVC,MAAO,OACPC,OAAQ,UACR,wBAAyB,OACzB,sBAAuB,OACvB,qBAAsB,OACtB,mBAAoB,OACpB,kBAAmB,OACnB,cAAe,OACfC,YAAa,QAEfb,KAAM,CACJS,OAAQN,EAAMW,QAAQ,EAAG,QA+OvBC,EAAiBC,aAVC,SAACC,GAAD,MAAsB,CAC5Cd,MAAOc,EAAMC,KAAKf,MAClBgB,KAAMF,EAAMG,eAGa,SAACC,GAAD,MAAoD,CAC7EC,cAAeC,YAAmBC,IAAWH,GAC7CI,cAAeF,YAAmBG,IAAWL,MAGxBL,EAxOQ,SAACW,GAAW,IACtBR,EAAuCQ,EAAvCR,KAAMG,EAAiCK,EAAjCL,cAAeG,EAAkBE,EAAlBF,cADA,EAUpC,IAAI9C,IANNQ,EAJsC,EAItCA,aACAxD,EALsC,EAKtCA,WACA2D,EANsC,EAMtCA,UACAK,EAPsC,EAOtCA,QACAD,EARsC,EAQtCA,WACAD,EATsC,EAStCA,UAGEmC,EAAU,GACVC,EAAW,GACTC,EAAU,GAEhBhG,qBAAU,WAKR,OAJAiG,QAAQC,IAAI,iBACZC,sBAAW,GACXlG,SAASC,iBAAiB,UAAWmD,GACrCpD,SAASC,iBAAiB,QAASL,GAC5B,WACLoG,QAAQC,IAAI,oBACZC,sBAAW,GACXlG,SAASE,oBAAoB,UAAWkD,GACxCpD,SAASE,oBAAoB,QAASN,MAEvC,CAACwF,EAAK/F,QAAS+D,EAAcxD,IAEhC,IAEyBuG,EAFnBC,EAAUlC,IAiCVmC,EAAY,SAACC,GACjB,GAAIA,EAAK,CACP,IAAMtD,EAAMsD,EAAI7C,SAChBsC,EAAQ/C,GAAOsD,IA0DnB,OA5FyBH,EA2FTf,EAAKmB,QA1FL,GACZV,EAAU,GACVC,EAAW,IACFK,EAAU,GACnBN,EAAU,GACVC,EAAW,IACFK,EAAU,GACnBN,EAAU,GACVC,EAAW,KAEXD,EAAU,GACVC,EAAW,IAiFb,yBAAKQ,IAvDQ,SAACA,GACd,GAAIA,GAAOlB,EAAKoB,aAAc,CAC5B,IAAMC,EAAYH,EAAII,wBAChB9B,EAAQ6B,EAAU7B,MAClB+B,EAASC,OAAOC,WAAa,IAAM,GAAK,GACxCC,EAASC,KAAKC,MAClBJ,OAAOK,aAAeR,EAAUK,OAASH,IAE3C,GAAIvB,EAAK8B,SAAU,CACjB,IAAMC,EAhCO,SAACL,GAClB,IAAMM,EAAmB,EAAXhC,EAAKiC,IAanB,OAVQP,EAASM,EA4BGE,CAAWR,GACrBS,EAAWJ,GAAW/B,EAAKiC,KAAO,EAAI,EAAIjC,EAAKiC,KAAO,EACtDG,EAAYf,EAAUgB,KAE5BlC,EAAcQ,EADK,CAAEnB,QAAOkC,SAAQS,WAAUC,aACXL,QAC9B,GAAI/B,EAAKsC,UAAYtC,EAAKuC,YAAa,CAC5C,IAAMC,EAAOxC,EAAKuC,YAAYE,GAAK,GAAK,IAAM,GACxCC,EACJ1C,EAAKuC,YAAYI,KAAO,IAAM3C,EAAKuC,YAAYE,GAAK,GAAK,GAAK,GAC1DG,EAAWJ,EAAO,GAAKnH,IAAYC,IACnCyG,EAAUL,EAAS,KAAOgB,EAAQ,GAClCG,EAAYrD,GAASQ,EAAKuC,YAAYO,MAAQ,GAC9C1H,EACQ,GAAZyH,EAAkB,EAAI,EAAgB,GAAZA,EAAkB,GAAK,GAAiB,GAAZA,EAClDE,EAAaC,MAAMC,KACvBD,MAAMN,IACN,SAACQ,EAAG/F,GAAJ,OAAUqF,EAAOI,EAASzF,MAEtBgG,EAAoB,GAC1BJ,EAAWK,SAAQ,SAACxH,EAAGuB,GACrB,IAAMH,GAAMG,EAAI,GAAK4E,EAAW,EAChCoB,EAAQvH,GAAK,CAAEyH,IAAKrG,EAAGc,KAAMvC,YAAUK,IACvCuH,EAAQvH,EAAI,GAAK,CAAEyH,IAAKrG,EAAGc,KAAMvC,YAAUK,EAAI,OAEjD0E,EAAcK,EAAS,CACrBnB,QACAkC,OAAQA,EAAS,IACjBK,UACAc,YACAzH,WACA2H,aACAI,iBAGFhD,EAAcQ,KAYA2C,UAAWtC,EAAQ/B,MAClC+D,MAAMC,KAAKD,MAAMhD,EAAKmB,SAAS,SAAC+B,EAAG/F,GAAJ,MAAU,OAASA,EAAI,MAAIoG,KACzD,SAACC,EAAKrG,GACJ,IAAMqC,EAAQQ,EAAKmB,OAAShE,IAAM,EAAI,IAAM,IAC5C,OACE,yBACEsG,MAAM,6BACN1I,GAAIyI,EACJ5F,IAAK4F,EACLhE,MAAOA,EACPkC,OAAO,OACPgC,QAAO,cAASlE,EAAT,QACPmE,KAAK,OACLxI,MACEgC,IAAM6C,EAAKmB,OAAS,EAChB,CAAEyC,YAAa,EAAI5D,EAAKmB,aACxB0C,GAGLpF,EAAQ8E,KAAI,SAACO,EAAGrI,GAAO,IAAD,EACjBsI,EAAUtF,EAAQuF,OAClBV,EAAY7C,IAAYC,EAAW,QAAUoD,EAAEhG,KAC/CkC,EAAKmB,OAAShE,IAAM,GAAK4G,IAAYtI,EAAI,IAC3CsI,IACAT,EAAY,OACZnG,KAEF,IAAI8G,EAAoB,UAATH,EAAE/I,GAAiB,eAAY8I,EAC1CK,EACO,UAATJ,EAAE/I,GAAiB,QAAU,yBACzBoJ,EAAM,UAAGnE,EAAKoE,oBAAR,aAAG,EAAmBC,MAChC,SAACC,GAAD,OAAQA,EAAG9I,MAAQ,KAAOiF,KAEtB8D,EAAmB,UAATT,EAAE/I,GAAiB+I,EAAEpF,KAAOoF,EAAEpF,KAAO,EACrD,OACEqF,IAAYtI,EAAI,GACd,uBACEV,GAAI+I,EAAE/I,GACNmG,IAAKD,EACLuD,UAAWhG,EACXiG,YAAatG,EACbuG,aAAcnG,EACdoG,WAAYpG,EACZqG,YAAatG,EACbuG,aAAc1G,EACdP,IAAK4F,EAAM,IAAMM,EAAEhG,KAAOX,EAC1BmG,UAAWA,EACXjF,SAAUoC,GAEV,0BACE1F,GAAG,OACHkB,EAAG6H,EAAElF,MACL+E,KAAiBG,EAAE/I,GACnB+J,OAAQb,IAEA,UAATH,EAAE/I,GACD,0BACEA,GAAG,QACHkB,EAAG6H,EAAEjF,KACL8E,KAAiBO,IAGnB,0BACEnJ,GAAG,QACHiB,EAAGuI,EACHvH,EAAG8G,EAAEnF,KACLgF,KAAiB,mBACjBvI,SAAS,KACT2J,WAAW,OAEVjB,EAAEhG,MAGNqG,GACC,4BACEa,GAAIlB,EAAEpF,KAAO,EACbuG,GAAInB,EAAEnF,KAAO,GACb7B,EAAE,IACF6G,KAAiB,gBACjBmB,OAAmBhB,EAAE/I,GACrBmK,YAAY,MAGD,KAAdzE,KACC,6BAAS0E,OAAO,uBAAuBxB,KAAK,sBA0BrD/D,O,+FCxOTwF,EAAmBvF,aAND,SAACC,GAAD,MAAsB,CAC5CE,KAAMF,EAAMG,eAEa,SAACC,GAAD,MAAoD,CAC7EmF,YAAajF,YAAmBiF,IAAanF,MAEtBL,EAvBe,SAAC,GAA2B,IAAzBG,EAAwB,EAAxBA,KAAMqF,EAAkB,EAAlBA,YACzCC,EAAWC,uBACf,SAACC,GAIC,OAHIA,GAAQxF,EAAKyF,aACfJ,EAAY,CAAEK,QAASF,IAElB,eAET,CAACxF,EAAKyF,YAAaJ,IAGrB,OACE,yBAAKlK,MAAO,CAAEuG,OAAQ,QACpB,kBAACiE,EAAD,CAAWzE,IAAKoE,EAAUtF,KAAMA,QAYvBoF,MAKf,IAAMO,EAAYC,sBAAoC,WAAW1E,GAAS,IAAjBlB,EAAgB,EAAhBA,KAAgB,EAC/C9F,mBAAS,GADsC,mBAChE2L,EADgE,KAC1DC,EAD0D,KAEvEC,8BAAoB7E,GAAK,WACvB,MAAO,CACL8E,aAAcA,MAGlB,IAAMA,EAAe,SAACC,GACC,kBAAVA,GACTH,EAAQG,IAQZ,OACE,kBAAC,IAAD,CACEjL,MAAM,YACNkL,YAAY,WACZjL,aAAW,UACXkL,aAAc,EACdC,IAAKpG,EAAKqG,WACVC,IAAK,EACLC,SAAU,SAACrD,EAAGzI,GAbE,IAACwL,EACE,kBADFA,EAaexL,IAXhC+L,YAAYP,IAYZQ,kBAAgB,kBAChBR,MAAOJ,Q,kMCnEP/G,EAAYC,aAAW,SAACC,GAAD,MAAmB,CAC9CC,KAAM,CACJyH,QAAS1H,EAAMW,QAAQ,EAAG,QAIjBgH,EAAuB,WAClC,IAAM3F,EAAUlC,IAWhB,OACE,yBAAKwE,UAAWtC,EAAQ/B,MACtB,kBAAC2H,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,WAAjC,gBAGA,kBAACC,EAAA,EAAD,CACE/L,MAAM,YACNmL,aAAc,GACdG,IAAK,GACLU,kBAZoB,SAAC9D,EAAQ+D,GACjCC,YAAgBD,EAAW,MAYvBR,kBAAgB,uBAElB,kBAACG,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,WAAjC,gBAGA,kBAACC,EAAA,EAAD,CACE/L,MAAM,YACNmL,aAAc,GACdG,IAAK,GACLU,kBAzBoB,SAAC9D,EAAQ+D,GACjCE,YAAa,CAAEC,YAAaH,EAAW,OAyBnCR,kBAAgB,sBAElB,kBAACG,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,WAAjC,eAGA,kBAACC,EAAA,EAAD,CACE/L,MAAM,YACNmL,aAAc,GACdG,IAAK,GACLU,kBAtCmB,SAAC9D,EAAQ+D,GAChCE,YAAa,CAAEE,WAAYJ,EAAW,OAsClCR,kBAAgB,wB,gGCrDTa,cAAcC,IAAMC,cAAc,OAAQ,CACvDvL,EAAG,6FACD,cCFWqL,cAAcC,IAAMC,cAAc,OAAQ,CACvDvL,EAAG,gMACD,YCQE6C,EAAYC,aAAW,SAACC,GAAD,MAAmB,CAC9CC,KAAM,CACJC,QAAS,OACTuI,aAAc,YAEhBC,UAAW,CACThB,QAAS1H,EAAMW,QAAQ,EAAG,GAC1B+B,OAAQ,GACRlC,MAAO,IACP,iBAAkB,CAChBkH,QAAS,iBAGbiB,YAAa,CACXC,WAAY5I,EAAMW,QAAQ,GAC1B+B,OAAQ,GACRlC,MAAO,QAMEqI,EAAsC,WACjD,IAAM7G,EAAUlC,IADuC,EAEnCyI,IAAMrN,UAAS,GAFoB,mBAEhD4N,EAFgD,KAE5CC,EAF4C,KAgBvD,OACE,yBAAKzE,UAAWtC,EAAQ/B,MACtB,kBAAC+I,EAAA,EAAD,CACEC,QAASH,EACTvB,SAVW,WACfwB,GAAM,SAACxK,GAEL,OADA4J,YAAa,CAAEe,OAAQ3K,KACfA,MAQN4K,KAAK,YACLC,WAAY,CAAE,aAAc,sBAE9B,kBAACC,EAAA,EAAD,CAAMC,WAAS,EAAC3I,QAAS,EAAG2D,UAAWtC,EAAQ0G,WAC7C,kBAACW,EAAA,EAAD,CAAME,MAAI,GACR,kBAACC,EAAD,OAEF,kBAACH,EAAA,EAAD,CAAME,MAAI,EAACE,IAAE,GACX,kBAAC1B,EAAA,EAAD,CACE/L,MAAM,YACNgM,kBAxBW,SAAC0B,EAAYzB,GAChCE,YAAa,CAAEwB,OAAQ1B,EAAW,OAwB1Bd,aAAc,GACdG,IAAK,GACLG,kBAAgB,uBAGpB,kBAAC4B,EAAA,EAAD,CAAME,MAAI,GACR,kBAACK,EAAD,QAGJ,kBAACC,EAAA,EAAD,CACEC,QAAM,EACNC,MAAM,kBACN/N,MAAM,YACNoN,WAAY,CACVD,KAAM,kBACNpN,GAAI,8BAENwL,SA7Cc,SAACmC,GACnBvB,YAAa,CAAE6B,SAAUN,EAAMO,OAAOhD,SA6ClC3C,UAAWtC,EAAQ2G,aAEnB,4BAAQ1B,MAAO,GAAf,OACA,4BAAQA,MAAO,GAAf,OACA,4BAAQA,MAAO,GAAf,YCxEFnH,EAAYC,aAAW,SAACC,GAAD,MAAmB,CAC9CC,KAAM,CACJiK,SAAU,GAEZC,WAAY,CACVvF,YAAa5E,EAAMW,QAAQ,IAE7ByJ,MAAM,aACJF,SAAU,GACTlK,EAAMqK,YAAY1G,KAAK,MAAQ,CAC9BzD,QAAS,SAGboK,QAAS,CACPhK,OAAQN,EAAMW,QAAQ,EAAG,QASd,SAAS4J,EAAT,GAAqD,IAA/BC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,YACrCzI,EAAUlC,IAYhB,OACE,kBAAC4K,EAAA,EAAD,CAAQC,SAAS,SAAS3O,MAAM,UAAUsI,UAAWtC,EAAQ/B,MAC3D,kBAAC2K,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CACEC,KAAK,QACL9O,MAAM,UACNC,aAAW,OACXC,QAASuO,GAET,kBAACM,EAAA,EAAD,OAEF,kBAACC,EAAA,EAAD,CAAS9D,YAAY,WAAW+D,UAAQ,EAAC3G,UAAWtC,EAAQsI,UAC5D,kBAAC1C,EAAA,EAAD,CAAYE,QAAQ,KAAK9L,MAAM,UAAUsI,UAAWtC,EAAQoI,OAA5D,OACGI,QADH,IACGA,OADH,EACGA,EAAQJ,OAEX,kBAAC,EAAD,QC3DR,IAgBec,EAhB0B,SAAC,GAAwB,IAAD,IAArBlK,EAAqB,EAArBA,KAAMmK,EAAe,EAAfA,SAMhD,OACE,4BACEjJ,IAAK,SAACA,GAAD,OAPgB,SAACA,GACpBA,GAAOlB,EAAKoK,aAAepK,EAAKqK,YAClCF,EAASjJ,GAKKoJ,CAAiBpJ,IAC/B1B,MAAK,UAAEQ,EAAKqK,kBAAP,aAAE,EAAiB7K,MACxBkC,OAAM,UAAE1B,EAAKqK,kBAAP,aAAE,EAAiB3I,OACzBvG,MAAO,CAAEwO,SAAU,WAAYY,IAAK,EAAGlI,KAAM,EAAGmI,OAAQ,GACxDC,QAAS,SAAChQ,GAAD,OAAO+L,YAAY/L,OC4BnBiQ,EAzCyB,SAAC,GAAc,IAAD,IAAX1K,EAAW,EAAXA,KAgCzC,OACE,4BACEkB,IAAK,SAACA,GAAD,OAjCe,SAACA,GACvB,GAAIA,GAAOlB,EAAKqK,YAAcrK,EAAKoK,YAAa,CAC9C,IAAMO,EAAUzJ,EAAI0J,WAAW,MAC/BD,EAAQE,UAAU,EAAG,EAAG7K,EAAKqK,WAAW7K,MAAOQ,EAAKqK,WAAW3I,QAC/D,IAAMf,EAAUX,EAAKqB,UACf2C,EAASrD,EAAUA,EAAQqD,OAAS,EAAI,GACxC8G,EAAYnK,EAAUA,EAAQqD,GAAQxE,MAAQ,GAC9CnD,EAAI2D,EAAKqK,WAAW3I,OACnB,OAAPf,QAAO,IAAPA,KAASyC,SAAQ,SAAC2H,EAAM5N,GACtBwN,EAAQK,YACR,IAAMhP,EAAI+O,EAAK1I,KACE,OAAb0I,EAAKnN,KAMe,SAAbmN,EAAKnN,KALd+M,EAAQM,OAAOjP,EAAG,GAClB2O,EAAQO,OAAOlP,EAAGK,GAClBsO,EAAQG,UAAYA,EACpBH,EAAQQ,YAAc,qBACtBR,EAAQ7F,UAOc,UAAbiG,EAAKnN,MACd+M,EAAQI,KAAK/O,EAAG,EAAG+O,EAAKvL,MAAOnD,GAC/BsO,EAAQS,UAAY,kBACpBT,EAAQhH,YAOE0H,CAAgBnK,IAC9B1B,MAAK,UAAEQ,EAAKqK,kBAAP,aAAE,EAAiB7K,MACxBkC,OAAM,UAAE1B,EAAKqK,kBAAP,aAAE,EAAiB3I,OACzBvG,MAAO,CAAEqP,OAAQ,MCRRc,EAhCoB,SAAC,GAAyB,IAAvB9L,EAAsB,EAAtBA,MAAO2C,EAAe,EAAfA,SAC3C,OACE,yBACE3C,MAAOA,EAAQ,EACfkC,OAAQS,EACRsI,QAAS,SAAChQ,GAAD,OAAO+L,YAAY/L,IAC5BU,MAAO,CACLoQ,OAAQ,EACRlJ,MAAO,EACPmI,OAAQ,EACRb,SAAU,WACV6B,OAAQ,gDAGV,+BAAQ,4CACR,6BAASrG,OAAO,gBAAgBxB,KAAK,QACrC,0BACExI,MAAO,CACLsQ,gBAAiBjM,EAAQ,EACzBkM,iBAAkBlM,EAAQ,EAC1BmM,UAAW,2BAEbC,GAAI,EACJC,GAAI,EACJC,GAAItM,EAAQ,EACZuM,GAAI,EACJ7G,YAAa,IACbJ,OAAO,UCcAkH,EALcnM,aARL,SAACC,GAAD,MAAsB,CAC5CE,KAAMF,EAAMG,eAGa,SAACC,GAAD,MAAoD,CAC7EiK,SAAU/J,YAAmB+J,IAAUjK,MAGZL,EAvBO,SAAC,GAAD,QAAGG,EAAH,EAAGA,KAAMmK,EAAT,EAASA,SAAT,OAClC,yBACEhP,MAAO,CACLqE,MAAK,UAAEQ,EAAKqK,kBAAP,aAAE,EAAiB7K,MACxBkC,OAAM,UAAE1B,EAAKqK,kBAAP,aAAE,EAAiB3I,OACzBiI,SAAU,WACVsC,UAAW,8BAGZjM,EAAKoK,aAAe,kBAAC,IAAD,CAAe8B,UAAQ,IAC5C,kBAAC,EAAD,CAAWlM,KAAMA,EAAMmK,SAAUA,IACjC,kBAAC,EAAD,CAAUnK,KAAMA,IACfA,EAAKqK,aAAerK,EAAKoK,aAAe,kBAAC,EAAYpK,EAAKqK,gB,SCoEzD8B,E,4MACJC,W,IACAtM,MAAQ,CACNuM,QAAQ,G,EAEVC,gBAAkB,WAChB,EAAK9L,MAAM+L,YAAW,I,EAQxBC,iBAAmB,WACZ,EAAKhM,MAAMP,WAAWmB,eACzB,EAAKqL,SAAS,CAAEJ,QAAQ,IACxBK,aAAa,EAAKN,OAClB,EAAKA,MAAQO,YAAW,WACtB,EAAKnM,MAAMoM,eACX,EAAKH,SAAS,CAAEJ,QAAQ,MACvB,O,kEAZL7K,OAAO3G,iBAAiB,SAAUgS,KAAKL,oB,6CAGvChL,OAAO1G,oBAAoB,SAAU+R,KAAKL,oB,+BAYlC,IAAD,EACiCK,KAAKrM,MAArCQ,EADD,EACCA,QAASf,EADV,EACUA,WAAYuJ,EADtB,EACsBA,OAC7B,OACE,yBAAKlG,UAAWtC,EAAQ/B,MACtB,kBAAC,EAAD,CAAcwK,YAAaoD,KAAKP,gBAAiB9C,OAAQA,IACxDvJ,EAAW6B,SACV,kBAACuG,EAAA,EAAD,CAAMC,WAAS,EAAChF,UAAWtC,EAAQ8L,MACjC,kBAACzE,EAAA,EAAD,CAAME,MAAI,EAACE,GAAI,EAAGnF,UAAWtC,EAAQ+L,WACnC,kBAAC,EAAD,MACA,kBAAC,IAAD,CAAY9S,QAASgG,EAAWhG,WAElC,kBAACoO,EAAA,EAAD,CAAME,MAAI,EAACE,GAAI,IACb,kBAACJ,EAAA,EAAD,CAAMC,WAAS,EAAChF,UAAWtC,EAAQgM,YAChCH,KAAK/M,MAAMuM,QAAUpM,EAAWmB,aAC/B,kBAACiH,EAAA,EAAD,CAAME,MAAI,EAACjF,UAAWtC,EAAQiM,eAC5B,kBAAC,IAAD,CAAeC,OAAK,KAGtB,kBAAC,EAAD,MAEF,kBAACC,EAAA,EAAD,QAGJ,kBAAC9E,EAAA,EAAD,CAAME,MAAI,EAACE,GAAI,GACb,kBAACJ,EAAA,EAAD,CACEC,WAAS,EACT8E,UAAU,SACVC,QAAQ,eACRC,WAAW,SACXhK,UAAWtC,EAAQuM,UAEnB,kBAAC,IAAD,MACA,kBAAC1D,EAAA,EAAD,CAAY7O,MAAM,YAAYC,aAAW,aACvC,kBAACuS,EAAA,EAAD,UAMR,kBAACnF,EAAA,EAAD,CAAMC,WAAS,EAAChF,UAAWtC,EAAQ8L,MACjC,kBAAC,IAAD,Y,GAhEmBW,aA0Ff5N,uBAlBQ,SACtBC,EACA4N,GAFsB,MAGK,CAC3BC,QAAS7N,EAAM8N,OAAOC,SAASC,SAC/B9M,QAAS0M,EAAS1M,QAClBf,WAAYH,EAAMG,WAClBjB,MAAOc,EAAMC,KAAKf,MAClBwK,OAAQ1J,EAAMiO,OAAOvE,OAAOwE,SAGH,SAAC9N,GAAD,MAAoD,CAC7EqM,WAAYnM,YAAmBmM,IAAYrM,GAC3CiK,SAAU/J,YAAmB+J,IAAUjK,GACvC+N,UAAW7N,YAAmBC,IAAWH,GACzC0M,aAAcxM,YAAmBwM,IAAc1M,MAGjCL,CAIdqO,aAlKgB,SAAClP,GAAD,mBAChBmP,YAAa,CACXlP,KAAM,CACJO,MAAO,QACPkC,OAAQ,QACR0M,SAAU,SACVC,gBAAiBrP,EAAMsP,QAAQC,WAAWC,OAE5C1B,MAAI,GACFtN,MAAO,QACP4O,SAAU,SACV1M,OAAQ,sBAHN,cAID1C,EAAMqK,YAAY1G,KAAK,MAAQ,CAC9BjB,OAAQ,uBALR,wBAOO,QAPP,GASJsL,YAAU,GACR9N,QAAS,OACTwC,OAAQ,sBAFA,cAGP1C,EAAMqK,YAAY1G,KAAK,MAAQ,CAC9BjB,OAAQ,uBAJF,8BAMO,UANP,+BAOQ,SAPR,yBAQE,UARF,GAUVuL,cAAe,CACb/N,QAAS,OACTM,MAAO,OACPiP,UAAW,cAEblB,UAAQ,GACN7L,OAAQ,sBADF,cAEL1C,EAAMqK,YAAY1G,KAAK,MAAQ,CAC9BjB,OAAQ,uBAHJ,yBAKI,UALJ,GAORqL,WAAS,GACPrL,OAAQ,sBADD,cAEN1C,EAAMqK,YAAY1G,KAAK,MAAQ,CAC9BjB,OAAQ,uBAHH,wBAKE,QALF,8BAMQ,UANR,+BAOS,gBAPT,GASTgN,OAAQ,CACNrP,SAAU,UAEZsP,WAAY,CACVC,UAAW,cA8GfV,CAAsB/B","file":"static/js/30.8fee0566.chunk.js","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { PauseCircleOutline, PlayCircleOutline } from \"@material-ui/icons\";\r\nimport { startPlayer, stopPlayer } from \"../../../_actions/player.actions\";\r\nimport { IconButton } from \"@material-ui/core\";\r\n\r\ninterface IPlayProps {\r\n  loading: boolean;\r\n}\r\nexport const PlayButton: React.FC<IPlayProps> = ({ loading }) => {\r\n  const [onAir, setOnAir] = useState(false);\r\n\r\n  const playHandler = () => {\r\n    if (onAir) {\r\n      stopPlayer();\r\n      setOnAir(false);\r\n    } else {\r\n      startPlayer();\r\n      setOnAir(true);\r\n    }\r\n  };\r\n  const keyboardUp = (e: KeyboardEvent) => {\r\n    if (e.code === \"Space\" && !loading) {\r\n      playHandler();\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    document.addEventListener(\"keyup\", keyboardUp);\r\n    return () => {\r\n      document.removeEventListener(\"keyup\", keyboardUp);\r\n    };\r\n  });\r\n  return (\r\n    <IconButton\r\n      id=\"play-button\"\r\n      color=\"secondary\"\r\n      aria-label=\"play song\"\r\n      onClick={playHandler}\r\n    >\r\n      {onAir ? (\r\n        <PauseCircleOutline style={{ fontSize: \"1.8em\" }} />\r\n      ) : (\r\n        <PlayCircleOutline style={{ fontSize: \"1.8em\" }} />\r\n      )}\r\n    </IconButton>\r\n  );\r\n};\r\n","import { midiNoteOff, midiNoteOn } from \"../../../../_actions/player.actions\";\r\n\r\nexport const rightLine = [\r\n    1,\r\n    2,\r\n    4,\r\n    6,\r\n    7,\r\n    9,\r\n    11,\r\n    13,\r\n    14,\r\n    16,\r\n    18,\r\n    19,\r\n    21,\r\n    23,\r\n    25,\r\n    26,\r\n    28,\r\n    30,\r\n    31,\r\n    33,\r\n    35,\r\n    37,\r\n    38,\r\n    40,\r\n    42,\r\n];\r\nexport const leftLine = [\r\n    0,\r\n    2,\r\n    4,\r\n    6,\r\n    7,\r\n    9,\r\n    11,\r\n    12,\r\n    14,\r\n    16,\r\n    18,\r\n    19,\r\n    21,\r\n    23,\r\n    24,\r\n    26,\r\n    28,\r\n    30,\r\n    31,\r\n    33,\r\n    35,\r\n    36,\r\n    38,\r\n    40,\r\n    42,\r\n    43,\r\n    45,\r\n    47,\r\n];\r\nexport const pitchName = (pitch: number) => {\r\n    let n = pitch % 12;\r\n    let t = \"C\";\r\n    if (n === 1) {\r\n        t = \"Db\";\r\n    }\r\n    if (n === 2) {\r\n        t = \"D\";\r\n    }\r\n    if (n === 3) {\r\n        t = \"Eb\";\r\n    }\r\n    if (n === 4) {\r\n        t = \"E\";\r\n    }\r\n    if (n === 5) {\r\n        t = \"F\";\r\n    }\r\n    if (n === 6) {\r\n        t = \"Gb\";\r\n    }\r\n    if (n === 7) {\r\n        t = \"G\";\r\n    }\r\n    if (n === 8) {\r\n        t = \"Ab\";\r\n    }\r\n    if (n === 9) {\r\n        t = \"A\";\r\n    }\r\n    if (n === 10) {\r\n        t = \"Bb\";\r\n    }\r\n    if (n === 11) {\r\n        t = \"B\";\r\n    }\r\n    return \"\" + t;\r\n};\r\nexport const outLine = (v: number) => v === 101 || v === 81 || v === 60 || v === 40;\r\n\r\nconst emulatedKeys = {\r\n    z: 48,\r\n    s: 49,\r\n    x: 50,\r\n    d: 51,\r\n    c: 52,\r\n    v: 53,\r\n    g: 54,\r\n    b: 55,\r\n    h: 56,\r\n    n: 57,\r\n    j: 58,\r\n    m: 59,\r\n    \",\": 60,\r\n    l: 61,\r\n    \".\": 62,\r\n    \";\": 63,\r\n    \"/\": 64,\r\n    q: 65,\r\n    2: 66,\r\n    w: 67,\r\n    3: 68,\r\n    e: 69,\r\n    4: 70,\r\n    r: 71,\r\n    t: 72,\r\n    6: 73,\r\n    y: 74,\r\n    7: 75,\r\n    u: 76,\r\n    i: 77,\r\n    9: 78,\r\n    o: 79,\r\n    0: 80,\r\n    p: 81,\r\n    \"-\": 82,\r\n    \"[\": 83,\r\n    \"]\": 84,\r\n}\r\n\r\ntype IPianoEvent = React.TouchEvent<SVGGElement> | React.MouseEvent<SVGGElement, MouseEvent>\r\nexport class PianoEvent {\r\n    isDown = false\r\n    playedKey: number | string | null;\r\n    keyboardUp = (e: KeyboardEvent) => {\r\n        e.preventDefault();\r\n        const key = e.key as keyof typeof emulatedKeys;\r\n        if (emulatedKeys.hasOwnProperty(key)) {\r\n            const note = emulatedKeys[key];\r\n            midiNoteOff(note);\r\n            this.playedKey = null;\r\n        }\r\n    };\r\n    keyboardDown = (e: KeyboardEvent) => {\r\n        e.preventDefault();\r\n        const key = e.key as keyof typeof emulatedKeys;\r\n        if (emulatedKeys.hasOwnProperty(key)) {\r\n            if (key !== this.playedKey) {\r\n                const note = emulatedKeys[key];\r\n                midiNoteOn(note);\r\n                this.playedKey = key;\r\n            }\r\n        }\r\n    };\r\n    mouseUpReset = () => {\r\n        this.isDown = false;\r\n    };\r\n    mouseDown = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        this.isDown = true;\r\n        this.playedKey = note;\r\n        midiNoteOn(note);\r\n    };\r\n    mouseOver = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        if (this.isDown && note !== this.playedKey) {\r\n            this.playedKey = note;\r\n            midiNoteOn(note);\r\n        }\r\n    };\r\n    mouseLeave = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        if (this.isDown) {\r\n            midiNoteOff(note);\r\n            this.playedKey = null;\r\n        }\r\n    };\r\n    mouseUp = (e: IPianoEvent) => {\r\n        e.preventDefault();\r\n        const ref: SVGGElement = e.currentTarget;\r\n        const note = ref.tabIndex;\r\n        this.isDown = false;\r\n        midiNoteOff(note);\r\n        this.playedKey = null;\r\n    };\r\n}","const SvgKeys = [{\r\n  note: \"C\",\r\n  xPos: 47,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M0.5 0.5H42.5V155.5C42.5 156.881 43.6193 158 45 158H79.5V245C79.5 247.485 77.4853 249.5 75 249.5H5C2.51472 249.5 0.5 247.485 0.5 245V0.5Z\",\r\n}, {\r\n  note: \"Db\",\r\n  xPos: 77,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M95 0H45V153C45 154.105 45.8954 155 47 155H93C94.1046 155 95 154.105 95 153V0Z\",\r\n  back: \"M79 130H61C52 130 52 150 52 150H88C88 150 88 130 79 130Z\",\r\n}, {\r\n  note: \"D\",\r\n  xPos: 130,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M150.5 0.5H97.5V155.5C97.5 156.881 96.3807 158 95 158H84.5V245C84.5 247.485 86.5147 249.5 89 249.5H159C161.485 249.5 163.5 247.485 163.5 245V158H153C151.619 158 150.5 156.881 150.5 155.5V0.5Z\",\r\n}, {\r\n  note: \"Eb\",\r\n  xPos: 185,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M203 0H153V153C153 154.105 153.895 155 155 155H201C202.105 155 203 154.105 203 153V0Z\",\r\n  back: \"M187 130H169C160 130 160 150 160 150H196C196 150 196 130 187 130Z\",\r\n}, {\r\n  note: \"E\",\r\n  xPos: 214,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M247.5 0.5H205.5V155.5C205.5 156.881 204.381 158 203 158H168.5V245C168.5 247.485 170.515 249.5 173 249.5H243C245.485 249.5 247.5 247.485 247.5 245V0.5Z\",\r\n}, {\r\n  note: \"F\",\r\n  xPos: 298,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M252.5 0.5H291.5V155.5C291.5 156.881 292.619 158 294 158H331.5V245C331.5 247.485 329.485 249.5 327 249.5H257C254.515 249.5 252.5 247.485 252.5 245V0.5Z\",\r\n}, {\r\n  note: \"Gb\",\r\n  xPos: 327,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M344 0H294V153C294 154.105 294.895 155 296 155H342C343.105 155 344 154.105 344 153V0Z\",\r\n  back: \"M328 130H310C301 130 301 150 301 150H337C337 150 337 130 328 130Z\",\r\n}, {\r\n  note: \"G\",\r\n  xPos: 383,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M390.5 0.5H346.5V155.5C346.5 156.881 345.381 158 344 158H336.5V245C336.5 247.485 338.515 249.5 341 249.5H411C413.485 249.5 415.5 247.485 415.5 245V158H393C391.619 158 390.5 156.881 390.5 155.5V0.5Z\",\r\n}, {\r\n  note: \"Ab\",\r\n  xPos: 427,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M443 0H393V153C393 154.105 393.895 155 395 155H441C442.105 155 443 154.105 443 153V0Z\",\r\n  back: \"M427 130H409C400 130 400 150 400 150H436C436 150 436 130 427 130Z\",\r\n}, {\r\n  note: \"A\",\r\n  xPos: 466,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M491.5 0.5H445.5V155.5C445.5 156.881 444.381 158 443 158H420.5V245C420.5 247.485 422.515 249.5 425 249.5H495C497.485 249.5 499.5 247.485 499.5 245V158H494C492.619 158 491.5 156.881 491.5 155.5V0.5Z\",\r\n}, {\r\n  note: \"Bb\",\r\n  xPos: 526,\r\n  yPos: 95,\r\n  id: \"black\",\r\n  front: \"M544 0H494V153C494 154.105 494.895 155 496 155H542C543.105 155 544 154.105 544 153V0Z\",\r\n  back: \"M528 130H510C501 130 501 150 501 150H537C537 150 537 130 528 130Z\",\r\n}, {\r\n  note: \"B\",\r\n  xPos: 551,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M583.5 0.5H546.5V155.5C546.5 156.881 545.381 158 544 158H504.5V245C504.5 247.485 506.515 249.5 509 249.5H579C581.485 249.5 583.5 247.485 583.5 245V0.5Z\",\r\n}, {\r\n  note: \"C\",\r\n  xPos: 637,\r\n  yPos: 205,\r\n  id: \"white\",\r\n  front: \"M663 249.5H593C590.515 249.5 588.5 247.485 588.5 245V0.5H667.5V245C667.5 247.485 665.485 249.5 663 249.5Z\",\r\n}];\r\n\r\nexport default SvgKeys;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { gamePiano, notePiano } from \"../../../../_actions/player.actions\";\r\nimport { leftLine, PianoEvent, pitchName, rightLine } from \"./constant\";\r\nimport { makeStyles, Theme } from \"@material-ui/core\";\r\nimport { changeMidi } from \"../../../../_actions/midi.actions\";\r\nimport { INotePos } from \"../../../../_types/player.types\";\r\nimport { AppActions, AppState } from \"../../../../_types\";\r\nimport SvgKeys from \"./SvgKeys\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"row-reverse\",\r\n    justifyContent: \"center\",\r\n    flexWrap: \"nowrap\",\r\n    margin: \"0 auto\",\r\n    minWidth: \"215px\",\r\n    width: \"100%\",\r\n    cursor: \"default\",\r\n    \"-webkit-touch-callout\": \"none\",\r\n    \"-webkit-user-select\": \"none\",\r\n    \"-khtml-user-select\": \"none\",\r\n    \"-moz-user-select\": \"none\",\r\n    \"-ms-user-select\": \"none\",\r\n    \"user-select\": \"none\",\r\n    touchAction: \"none\",\r\n  },\r\n  back: {\r\n    margin: theme.spacing(0, 2),\r\n  },\r\n}));\r\n\r\ntype Props = ReturnType<typeof mapStateToProps> &\r\n  ReturnType<typeof mapDispatchToProps>;\r\n\r\nconst Piano: React.FC<Props> = (props) => {\r\n  const { /*theme,*/ Melo, drawGamePiano, drawNotePiano } = props;\r\n\r\n  const {\r\n    keyboardDown,\r\n    keyboardUp,\r\n    mouseDown,\r\n    mouseUp,\r\n    mouseLeave,\r\n    mouseOver,\r\n  } = new PianoEvent();\r\n\r\n  let counter = 36;\r\n  let firstkey = 36;\r\n  const keyRefs = {} as SVGGElement[];\r\n\r\n  useEffect(() => {\r\n    console.log(\"Piano mounted\");\r\n    changeMidi(true);\r\n    document.addEventListener(\"keydown\", keyboardDown);\r\n    document.addEventListener(\"keyup\", keyboardUp);\r\n    return () => {\r\n      console.log(\"Piano disMounted\");\r\n      changeMidi(false);\r\n      document.removeEventListener(\"keydown\", keyboardDown);\r\n      document.removeEventListener(\"keyup\", keyboardUp);\r\n    };\r\n  }, [Melo.loading, keyboardDown, keyboardUp]);\r\n\r\n  const classes = useStyles();\r\n\r\n  const counterFunction = (octSize: number) => {\r\n    if (octSize > 6) {\r\n      counter = 24;\r\n      firstkey = 24;\r\n    } else if (octSize > 3) {\r\n      counter = 36;\r\n      firstkey = 36;\r\n    } else if (octSize > 1) {\r\n      counter = 48;\r\n      firstkey = 48;\r\n    } else {\r\n      counter = 60;\r\n      firstkey = 60;\r\n    }\r\n  };\r\n  const detectSize = (height: number) => {\r\n    const rythm = Melo.bpm * 4;\r\n    let tap = 32;\r\n    if (height > 700) {\r\n      tap = height / rythm;\r\n    } else if (height > 500) {\r\n      tap = height / rythm;\r\n    } else if (height > 300) {\r\n      tap = height / rythm;\r\n    } else if (height > 100) {\r\n      tap = height / rythm;\r\n    } else {\r\n      tap = height / rythm;\r\n    }\r\n    return tap;\r\n  };\r\n  const setKeyRef = (ref: SVGGElement | null) => {\r\n    if (ref) {\r\n      const key = ref.tabIndex;\r\n      keyRefs[key] = ref;\r\n    }\r\n  };\r\n\r\n  const setRef = (ref: HTMLDivElement) => {\r\n    if (ref && Melo.pianoLoading) {\r\n      const pianoSize = ref.getBoundingClientRect();\r\n      const width = pianoSize.width;\r\n      const padTop = window.outerWidth > 640 ? 64 : 56;\r\n      const height = Math.floor(\r\n        window.innerHeight - (pianoSize.height + padTop)\r\n      );\r\n      if (Melo.playMode) {\r\n        const tapSize = detectSize(height);\r\n        const baseLine = tapSize * (Melo.bpm <= 4 ? 4 : Melo.bpm) + 8;\r\n        const pianoLeft = pianoSize.left;\r\n        const canvasSize = { width, height, baseLine, pianoLeft };\r\n        drawGamePiano(keyRefs, canvasSize, tapSize);\r\n      } else if (Melo.noteMode && Melo.neededLines) {\r\n        const need = Melo.neededLines.up > 83 ? 102 : 83;\r\n        const lines =\r\n          Melo.neededLines.down < 58 || Melo.neededLines.up > 83 ? 28 : 16;\r\n        const lineSide = need > 83 ? rightLine : leftLine;\r\n        const tapSize = height / 2.1 / (lines / 2);\r\n        const spaceSize = width / (Melo.neededLines.notes + 2);\r\n        const fontSize =\r\n          spaceSize * 0.5 < 7 ? 7 : spaceSize * 0.5 > 12 ? 12 : spaceSize * 0.5;\r\n        const linesArray = Array.from(\r\n          Array(lines),\r\n          (_, i) => need - lineSide[i]\r\n        );\r\n        const notePos: INotePos = {};\r\n        linesArray.forEach((v, i) => {\r\n          const y = ((i + 1) * tapSize) / 2;\r\n          notePos[v] = { pos: y, note: pitchName(v) };\r\n          notePos[v - 1] = { pos: y, note: pitchName(v - 1) };\r\n        });\r\n        drawNotePiano(keyRefs, {\r\n          width,\r\n          height: height / 2.1,\r\n          tapSize,\r\n          spaceSize,\r\n          fontSize,\r\n          linesArray,\r\n          notePos,\r\n        });\r\n      } else {\r\n        drawGamePiano(keyRefs);\r\n      }\r\n    }\r\n  };\r\n  const themeColor = (color: string) => {\r\n    // if (color === \"black\") return theme === \"dark\" ? \"white\" : \"black\";\r\n    // if (color === \"white\") return theme === \"dark\" ? \"black\" : \"white\";\r\n    return color;\r\n  };\r\n  // const themer = theme === \"dark\" ? 1 : 0;\r\n  counterFunction(Melo.octave);\r\n  return (\r\n    <div ref={setRef} className={classes.root}>\r\n      {Array.from(Array(Melo.octave), (_, i) => \"oct\" + (i + 1)).map(\r\n        (oct, i) => {\r\n          const width = Melo.octave - i === 1 ? 668 : 584;\r\n          return (\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              id={oct}\r\n              key={oct}\r\n              width={width}\r\n              height=\"100%\"\r\n              viewBox={`0 0 ${width} 275`}\r\n              fill=\"none\"\r\n              style={\r\n                i !== Melo.octave - 1\r\n                  ? { marginRight: 8 / Melo.octave }\r\n                  : undefined\r\n              }\r\n            >\r\n              {SvgKeys.map((k, n) => {\r\n                let lastKey = SvgKeys.length;\r\n                let className = counter === firstkey ? \"first\" : k.note;\r\n                if (Melo.octave - i === 1 && lastKey === n + 1) {\r\n                  lastKey++;\r\n                  className = \"last\";\r\n                  i++;\r\n                }\r\n                let backFill = k.id === \"white\" ? \"#B5B5B5\" : undefined;\r\n                let frontFill =\r\n                  k.id === \"white\" ? \"black\" : \"rgb(255 255 255 / 65%)\";\r\n                const active = Melo.neededTracks?.some(\r\n                  (el) => el.pitch + 36 === counter\r\n                );\r\n                const textPos = k.id === \"white\" ? k.xPos : k.xPos + 6;\r\n                return (\r\n                  lastKey !== n + 1 && (\r\n                    <g\r\n                      id={k.id}\r\n                      ref={setKeyRef}\r\n                      onMouseUp={mouseUp}\r\n                      onMouseDown={mouseDown}\r\n                      onMouseLeave={mouseLeave}\r\n                      onTouchEnd={mouseLeave}\r\n                      onTouchMove={mouseOver}\r\n                      onTouchStart={mouseDown}\r\n                      key={oct + \"-\" + k.note + i}\r\n                      className={className}\r\n                      tabIndex={counter}\r\n                    >\r\n                      <path\r\n                        id=\"back\"\r\n                        d={k.front}\r\n                        fill={themeColor(k.id)}\r\n                        stroke={backFill}\r\n                      />\r\n                      {k.id !== \"white\" ? (\r\n                        <path\r\n                          id=\"front\"\r\n                          d={k.back}\r\n                          fill={themeColor(frontFill)}\r\n                        />\r\n                      ) : (\r\n                        <text\r\n                          id=\"front\"\r\n                          x={textPos}\r\n                          y={k.yPos}\r\n                          fill={themeColor(\"rgb(155 155 155)\")}\r\n                          fontSize=\"25\"\r\n                          fontWeight=\"900\"\r\n                        >\r\n                          {k.note}\r\n                        </text>\r\n                      )}\r\n                      {active && (\r\n                        <circle\r\n                          cx={k.xPos - 8}\r\n                          cy={k.yPos + 20}\r\n                          r=\"6\"\r\n                          fill={themeColor(\"rgb(56 56 56)\")}\r\n                          stroke={themeColor(k.id)}\r\n                          strokeWidth=\"2\"\r\n                        />\r\n                      )}\r\n                      {counter++ === 60 && (\r\n                        <polygon points=\"30,265 40,255 50,265\" fill=\"black\" />\r\n                      )}\r\n                    </g>\r\n                  )\r\n                );\r\n              })}\r\n            </svg>\r\n          );\r\n        }\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state: AppState) => ({\r\n  theme: state.auth.theme,\r\n  Melo: state.melodition,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawGamePiano: bindActionCreators(gamePiano, dispatch),\r\n  drawNotePiano: bindActionCreators(notePiano, dispatch),\r\n});\r\n\r\nconst connectedPiano = connect(mapStateToProps, mapDispatchToProps)(Piano);\r\n\r\nexport default connectedPiano;\r\n","import React, {\r\n  useState,\r\n  forwardRef,\r\n  useImperativeHandle,\r\n  useCallback,\r\n} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport Slider from \"@material-ui/core/Slider\";\r\nimport { AppActions, AppState } from \"../../../_types\";\r\nimport { canvasWheel, drawSeekBar } from \"../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../_types/player.types\";\r\n\r\ntype SeekBarProps = ReturnType<typeof mapStateToProps> &\r\n  ReturnType<typeof mapDispatchToProps>;\r\n\r\nconst Seekbar: React.FC<SeekBarProps> = ({ Melo, drawSeekBar }) => {\r\n  const callback = useCallback(\r\n    (node: any) => {\r\n      if (node && Melo.seekLoading) {\r\n        drawSeekBar({ seekBar: node });\r\n      }\r\n      return () => {};\r\n    },\r\n    [Melo.seekLoading, drawSeekBar]\r\n  );\r\n\r\n  return (\r\n    <div style={{ height: \"40%\" }}>\r\n      <SeekInput ref={callback} Melo={Melo} />\r\n    </div>\r\n  );\r\n};\r\nconst mapStateToProps = (state: AppState) => ({\r\n  Melo: state.melodition,\r\n});\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawSeekBar: bindActionCreators(drawSeekBar, dispatch),\r\n});\r\nconst connectedSeekbar = connect(mapStateToProps, mapDispatchToProps)(Seekbar);\r\n\r\nexport default connectedSeekbar;\r\n\r\ninterface SeekInputProps {\r\n  Melo: IMelodition;\r\n}\r\nconst SeekInput = forwardRef<unknown, SeekInputProps>(({ Melo }, ref) => {\r\n  const [seek, setSeek] = useState(0);\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      changeSeeker: changeSeeker,\r\n    };\r\n  });\r\n  const changeSeeker = (value: number) => {\r\n    if (typeof value === \"number\") {\r\n      setSeek(value);\r\n    }\r\n  };\r\n  const seekchanger = (value: number | number[]) => {\r\n    if (typeof value === \"number\") {\r\n      canvasWheel(value);\r\n    }\r\n  };\r\n  return (\r\n    <Slider\r\n      color=\"secondary\"\r\n      orientation=\"vertical\"\r\n      aria-label=\"seekbar\"\r\n      defaultValue={0}\r\n      max={Melo.songLength}\r\n      min={0}\r\n      onChange={(_, e) => seekchanger(e)}\r\n      aria-labelledby=\"vertical-slider\"\r\n      value={seek}\r\n    />\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport { makeStyles, Slider, Theme, Typography } from \"@material-ui/core\";\r\nimport {\r\n  MeloAssigner,\r\n  MeloMusicVolume,\r\n} from \"../../../_actions/player.actions\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    padding: theme.spacing(1, 1),\r\n  },\r\n}));\r\n\r\nexport const SideVolume: React.FC = () => {\r\n  const classes = useStyles();\r\n\r\n  const handlePlayVolume = (_: any, newValue: any) => {\r\n    MeloAssigner({ playVolume: newValue / 100 });\r\n  };\r\n  const handlePianoVolume = (_: any, newValue: any) => {\r\n    MeloAssigner({ pianoVolume: newValue / 100 });\r\n  };\r\n  const handleMusicVolume = (_: any, newValue: any) => {\r\n    MeloMusicVolume(newValue / 100);\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <Typography gutterBottom variant=\"caption\">\r\n        Music Volume\r\n      </Typography>\r\n      <Slider\r\n        color=\"secondary\"\r\n        defaultValue={75}\r\n        min={0.1}\r\n        onChangeCommitted={handleMusicVolume}\r\n        aria-labelledby=\"musicvolume-slider\"\r\n      />\r\n      <Typography gutterBottom variant=\"caption\">\r\n        Piano Volume\r\n      </Typography>\r\n      <Slider\r\n        color=\"secondary\"\r\n        defaultValue={50}\r\n        min={0.1}\r\n        onChangeCommitted={handlePianoVolume}\r\n        aria-labelledby=\"playvolume-slider\"\r\n      />\r\n      <Typography gutterBottom variant=\"caption\">\r\n        Play Volume\r\n      </Typography>\r\n      <Slider\r\n        color=\"secondary\"\r\n        defaultValue={75}\r\n        min={0.1}\r\n        onChangeCommitted={handlePlayVolume}\r\n        aria-labelledby=\"playvolume-slider\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z\"\n}), 'VolumeDown');","import React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon(React.createElement(\"path\", {\n  d: \"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"\n}), 'VolumeUp');","import React from \"react\";\r\nimport {\r\n  Grid,\r\n  makeStyles,\r\n  Select,\r\n  Slider,\r\n  Switch,\r\n  Theme,\r\n} from \"@material-ui/core\";\r\nimport { MeloAssigner } from \"../../../_actions/player.actions\";\r\nimport { VolumeDown, VolumeUp } from \"@material-ui/icons\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n    justifyItems: \"baseline\",\r\n  },\r\n  selectVol: {\r\n    padding: theme.spacing(1, 2),\r\n    height: 30,\r\n    width: 180,\r\n    \"& > div > span\": {\r\n      padding: \"0 !important\",\r\n    },\r\n  },\r\n  selectInput: {\r\n    paddingTop: theme.spacing(1),\r\n    height: 30,\r\n    width: 80,\r\n  },\r\n}));\r\n\r\ninterface MetronomeProps {}\r\n\r\nexport const Metronome: React.FC<MetronomeProps> = () => {\r\n  const classes = useStyles();\r\n  const [on, setOn] = React.useState(true);\r\n\r\n  const handleSound = (event: React.ChangeEvent<{ value: unknown }>) => {\r\n    MeloAssigner({ metTrack: event.target.value });\r\n  };\r\n  const handleVolume = (event: any, newValue: any) => {\r\n    MeloAssigner({ metVol: newValue / 100 });\r\n  };\r\n  const handleOn = () => {\r\n    setOn((p) => {\r\n      MeloAssigner({ metOn: !p });\r\n      return !p;\r\n    });\r\n  };\r\n  return (\r\n    <div className={classes.root}>\r\n      <Switch\r\n        checked={on}\r\n        onChange={handleOn}\r\n        name=\"Metronome\"\r\n        inputProps={{ \"aria-label\": \"Metronome switch\" }}\r\n      />\r\n      <Grid container spacing={2} className={classes.selectVol}>\r\n        <Grid item>\r\n          <VolumeDown />\r\n        </Grid>\r\n        <Grid item xs>\r\n          <Slider\r\n            color=\"secondary\"\r\n            onChangeCommitted={handleVolume}\r\n            defaultValue={75}\r\n            min={0.1}\r\n            aria-labelledby=\"continuous-slider\"\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <VolumeUp />\r\n        </Grid>\r\n      </Grid>\r\n      <Select\r\n        native\r\n        label=\"Metronome Sound\"\r\n        color=\"secondary\"\r\n        inputProps={{\r\n          name: \"Metronome Sound\",\r\n          id: \"outlined-age-native-simple\",\r\n        }}\r\n        onChange={handleSound}\r\n        className={classes.selectInput}\r\n      >\r\n        <option value={0}>One</option>\r\n        <option value={1}>Two</option>\r\n        <option value={2}>Three</option>\r\n      </Select>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { makeStyles, Theme } from \"@material-ui/core/styles\";\r\nimport {\r\n  Divider,\r\n  Typography,\r\n  Toolbar,\r\n  AppBar,\r\n  IconButton,\r\n} from \"@material-ui/core\";\r\nimport { ArrowForward } from \"@material-ui/icons\";\r\nimport { ICardDetail } from \"../../../../../_types\";\r\nimport { Metronome } from \"../../../Player/Metronome\";\r\n// import AccountCircle from \"@material-ui/icons/AccountCircle\";\r\n// import MenuItem from \"@material-ui/core/MenuItem\";\r\n// import Menu from \"@material-ui/core/Menu\";\r\n\r\nconst useStyles = makeStyles((theme: Theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n    [theme.breakpoints.down(\"xs\")]: {\r\n      display: \"none\",\r\n    },\r\n  },\r\n  divider: {\r\n    margin: theme.spacing(0, 2),\r\n  },\r\n}));\r\n\r\ninterface Props {\r\n  modeChanger: () => void;\r\n  lesson?: ICardDetail;\r\n}\r\n\r\nexport default function MenuAppBar({ lesson, modeChanger }: Props) {\r\n  const classes = useStyles();\r\n  // const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n  // const open = Boolean(anchorEl);\r\n\r\n  // const handleMenu = (event: React.MouseEvent<HTMLElement>) => {\r\n  //   setAnchorEl(event.currentTarget);\r\n  // };\r\n\r\n  // const handleClose = () => {\r\n  //   setAnchorEl(null);\r\n  // };\r\n\r\n  return (\r\n    <AppBar position=\"static\" color=\"default\" className={classes.root}>\r\n      <Toolbar>\r\n        <IconButton\r\n          edge=\"start\"\r\n          color=\"inherit\"\r\n          aria-label=\"menu\"\r\n          onClick={modeChanger}\r\n        >\r\n          <ArrowForward />\r\n        </IconButton>\r\n        <Divider orientation=\"vertical\" flexItem className={classes.divider} />\r\n        <Typography variant=\"h6\" color=\"inherit\" className={classes.title}>\r\n          {lesson?.title}\r\n        </Typography>\r\n        <Metronome />\r\n        {/*<div>\r\n          <IconButton\r\n            aria-label=\"account of current user\"\r\n            aria-controls=\"menu-appbar\"\r\n            aria-haspopup=\"true\"\r\n            onClick={handleMenu}\r\n            color=\"inherit\"\r\n          >\r\n            <AccountCircle />\r\n          </IconButton>\r\n          <Menu\r\n            id=\"menu-appbar\"\r\n            anchorEl={anchorEl}\r\n            anchorOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            keepMounted\r\n            transformOrigin={{\r\n              vertical: \"top\",\r\n              horizontal: \"right\",\r\n            }}\r\n            open={open}\r\n            onClose={handleClose}\r\n          >\r\n            <MenuItem onClick={handleClose}>Profile</MenuItem>\r\n            <MenuItem onClick={handleClose}>My account</MenuItem>\r\n          </Menu>\r\n          </div>*/}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { canvasWheel } from \"../../../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\n\r\ninterface CanvasProps {\r\n  Melo: IMelodition;\r\n  drawGame: (canvas: HTMLCanvasElement) => void;\r\n}\r\nconst GameFront: React.FC<CanvasProps> = ({ Melo, drawGame }) => {\r\n  const drawFrontContext = (ref: HTMLCanvasElement | null) => {\r\n    if (ref && Melo.gameLoading && Melo.canvasSize) {\r\n      drawGame(ref);\r\n    }\r\n  };\r\n  return (\r\n    <canvas\r\n      ref={(ref) => drawFrontContext(ref)}\r\n      width={Melo.canvasSize?.width}\r\n      height={Melo.canvasSize?.height}\r\n      style={{ position: \"absolute\", top: 0, left: 0, zIndex: 2 }}\r\n      onWheel={(e) => canvasWheel(e)}\r\n    />\r\n  );\r\n};\r\nexport default GameFront;\r\n","import React from \"react\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\n\r\ninterface CanvasProps {\r\n  Melo: IMelodition;\r\n}\r\n\r\nconst GameBack: React.FC<CanvasProps> = ({ Melo }) => {\r\n  const drawBackContext = (ref: HTMLCanvasElement | null) => {\r\n    if (ref && Melo.canvasSize && Melo.gameLoading) {\r\n      const backCtx = ref.getContext(\"2d\")!;\r\n      backCtx.clearRect(0, 0, Melo.canvasSize.width, Melo.canvasSize.height);\r\n      const keyRefs = Melo.pianoSize;\r\n      const length = keyRefs ? keyRefs.length - 1 : 61;\r\n      const lineWidth = keyRefs ? keyRefs[length].width : 0.5;\r\n      const h = Melo.canvasSize.height;\r\n      keyRefs?.forEach((rect, i) => {\r\n        backCtx.beginPath();\r\n        const x = rect.left;\r\n        if (rect.key === \"CF\") {\r\n          backCtx.moveTo(x, 0);\r\n          backCtx.lineTo(x, h);\r\n          backCtx.lineWidth = lineWidth;\r\n          backCtx.strokeStyle = \"rgba(50,50,50,0.8)\";\r\n          backCtx.stroke();\r\n        } else if (rect.key === \"last\") {\r\n          backCtx.moveTo(x, 0);\r\n          backCtx.lineTo(x, h);\r\n          backCtx.lineWidth = lineWidth;\r\n          backCtx.strokeStyle = \"rgba(50,50,50,0.8)\";\r\n          backCtx.stroke();\r\n        } else if (rect.key === \"black\") {\r\n          backCtx.rect(x, 0, rect.width, h);\r\n          backCtx.fillStyle = \"rgba(0,0,0,0.4)\";\r\n          backCtx.fill();\r\n        }\r\n      });\r\n    }\r\n  };\r\n  return (\r\n    <canvas\r\n      ref={(ref) => drawBackContext(ref)}\r\n      width={Melo.canvasSize?.width}\r\n      height={Melo.canvasSize?.height}\r\n      style={{ zIndex: 1 }}\r\n    />\r\n  );\r\n};\r\nexport default GameBack;\r\n","import React from \"react\";\r\nimport { canvasWheel } from \"../../../../../_actions/player.actions\";\r\nimport { ICanvas } from \"../../../../../_types/player.types\";\r\n\r\nconst SvgLine: React.FC<ICanvas> = ({ width, baseLine }) => {\r\n  return (\r\n    <svg\r\n      width={width + 7}\r\n      height={baseLine}\r\n      onWheel={(e) => canvasWheel(e)}\r\n      style={{\r\n        bottom: 0,\r\n        left: -7,\r\n        zIndex: 6,\r\n        position: \"absolute\",\r\n        filter: \"drop-shadow(rgba(0, 0, 0, 0.7) 0px 1px 1px)\",\r\n      }}\r\n    >\r\n      <style>{\"@keyframes draw{to{stroke-dashoffset:0}}\"}</style>\r\n      <polygon points=\"0,0 10,8 0,16\" fill=\"red\" />\r\n      <line\r\n        style={{\r\n          strokeDasharray: width + 7,\r\n          strokeDashoffset: width + 7,\r\n          animation: \"draw 1s linear forwards\",\r\n        }}\r\n        x1={0}\r\n        y1={8}\r\n        x2={width + 7}\r\n        y2={8}\r\n        strokeWidth={2.5}\r\n        stroke=\"red\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\nexport default SvgLine;\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { drawGame } from \"../../../../../_actions/player.actions\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\nimport { AppActions, AppState } from \"../../../../../_types\";\r\nimport GameFront from \"./GameFront\";\r\nimport GameBack from \"./GameBack\";\r\nimport SvgLine from \"./SvgLine\";\r\nimport { LoadingCircle } from \"../../../Loadings\";\r\n\r\ninterface Props {\r\n  Melo: IMelodition;\r\n  drawGame: (canvas: any) => void;\r\n}\r\n\r\nconst GameCanvas: React.FC<Props> = ({ Melo, drawGame }) => (\r\n  <div\r\n    style={{\r\n      width: Melo.canvasSize?.width,\r\n      height: Melo.canvasSize?.height,\r\n      position: \"relative\",\r\n      boxShadow: \"inset 0 1px 4px 0px black\",\r\n    }}\r\n  >\r\n    {Melo.gameLoading && <LoadingCircle absolute />}\r\n    <GameFront Melo={Melo} drawGame={drawGame} />\r\n    <GameBack Melo={Melo} />\r\n    {Melo.canvasSize && !Melo.gameLoading && <SvgLine {...Melo.canvasSize} />}\r\n  </div>\r\n);\r\nconst mapStateToProps = (state: AppState) => ({\r\n  Melo: state.melodition,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  drawGame: bindActionCreators(drawGame, dispatch),\r\n});\r\n\r\nconst connectedPianoCanvas = connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(GameCanvas);\r\n\r\nexport default connectedPianoCanvas;\r\n","import React, { Component, ComponentType } from \"react\";\r\nimport { ThunkDispatch } from \"redux-thunk\";\r\nimport { bindActionCreators } from \"redux\";\r\nimport { connect } from \"react-redux\";\r\nimport { ArrowBackIos } from \"@material-ui/icons\";\r\nimport {\r\n  createStyles,\r\n  Grid,\r\n  Theme,\r\n  IconButton,\r\n  WithStyles,\r\n  withStyles,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  changeMode,\r\n  drawGame,\r\n  gamePiano,\r\n  resizePlayer,\r\n} from \"../../../../../_actions/player.actions\";\r\nimport { ICardDetail, AppActions, AppState } from \"../../../../../_types\";\r\nimport { IMelodition } from \"../../../../../_types/player.types\";\r\nimport { SideVolume } from \"../../../Player/SideVolume\";\r\nimport { PlayButton } from \"../../../Player/Buttons\";\r\nimport { LoadingCircle } from \"../../../Loadings\";\r\nimport Seekbar from \"../../../Player/SeekBar\";\r\nimport PlayerHeader from \"./PlayerHeader\";\r\nimport PianoCanvas from \"../GameCanvas\";\r\nimport Piano from \"..\";\r\n\r\nconst useStyles = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      width: \"100vw\",\r\n      height: \"100vh\",\r\n      overflow: \"hidden\",\r\n      backgroundColor: theme.palette.background.paper,\r\n    },\r\n    main: {\r\n      width: \"100vw\",\r\n      overflow: \"hidden\",\r\n      height: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        height: \"calc(100vh - 56px)\",\r\n      },\r\n      display: \"flex\",\r\n    },\r\n    middleSide: {\r\n      display: \"flex\",\r\n      height: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        height: \"calc(100vh - 56px)\",\r\n      },\r\n      flexDirection: \"column\",\r\n      justifyContent: \"start\",\r\n      overflow: \"hidden\",\r\n    },\r\n    canvasLoading: {\r\n      display: \"flex\",\r\n      width: \"100%\",\r\n      flexBasis: \"83.333333%\",\r\n    },\r\n    leftSide: {\r\n      height: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        height: \"calc(100vh - 56px)\",\r\n      },\r\n      flexWrap: \"nowrap\",\r\n    },\r\n    rightSide: {\r\n      height: \"calc(100vh - 64px)\",\r\n      [theme.breakpoints.down(\"xs\")]: {\r\n        height: \"calc(100vh - 56px)\",\r\n      },\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"space-around\",\r\n    },\r\n    volume: {\r\n      flexWrap: \"nowrap\",\r\n    },\r\n    centerText: {\r\n      textAlign: \"center\",\r\n    },\r\n  });\r\n\r\ninterface LessonPlayerModeProps extends WithStyles<typeof useStyles> {\r\n  history: string;\r\n  lesson?: ICardDetail;\r\n  theme: \"light\" | \"dark\";\r\n  melodition: IMelodition;\r\n}\r\n\r\ntype Props = LessonPlayerModeProps & ReturnType<typeof mapDispatchToProps>;\r\n\r\ninterface States {\r\n  reSize: boolean;\r\n}\r\nclass LessonPlayerMode extends Component<Props, States> {\r\n  timer: NodeJS.Timeout;\r\n  state = {\r\n    reSize: false,\r\n  };\r\n  playmodeChanger = () => {\r\n    this.props.changeMode(false);\r\n  };\r\n  componentDidMount() {\r\n    window.addEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"resize\", this.updateDimensions);\r\n  }\r\n  updateDimensions = () => {\r\n    if (!this.props.melodition.pianoLoading) {\r\n      this.setState({ reSize: true });\r\n      clearTimeout(this.timer);\r\n      this.timer = setTimeout(() => {\r\n        this.props.resizePlayer();\r\n        this.setState({ reSize: false });\r\n      }, 500);\r\n    }\r\n  };\r\n  render() {\r\n    const { classes, melodition, lesson } = this.props;\r\n    return (\r\n      <div className={classes.root}>\r\n        <PlayerHeader modeChanger={this.playmodeChanger} lesson={lesson} />\r\n        {melodition.playMode ? (\r\n          <Grid container className={classes.main}>\r\n            <Grid item xs={1} className={classes.rightSide}>\r\n              <SideVolume />\r\n              <PlayButton loading={melodition.loading} />\r\n            </Grid>\r\n            <Grid item xs={10}>\r\n              <Grid container className={classes.middleSide}>\r\n                {this.state.reSize || melodition.pianoLoading ? (\r\n                  <Grid item className={classes.canvasLoading}>\r\n                    <LoadingCircle noPad />\r\n                  </Grid>\r\n                ) : (\r\n                  <PianoCanvas />\r\n                )}\r\n                <Piano />\r\n              </Grid>\r\n            </Grid>\r\n            <Grid item xs={1}>\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justify=\"space-around\"\r\n                alignItems=\"center\"\r\n                className={classes.leftSide}\r\n              >\r\n                <Seekbar />\r\n                <IconButton color=\"secondary\" aria-label=\"play mode\">\r\n                  <ArrowBackIos />\r\n                </IconButton>\r\n              </Grid>\r\n            </Grid>\r\n          </Grid>\r\n        ) : (\r\n          <Grid container className={classes.main}>\r\n            <LoadingCircle />\r\n          </Grid>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (\r\n  state: AppState,\r\n  ownProps: Props\r\n): LessonPlayerModeProps => ({\r\n  history: state.router.location.pathname,\r\n  classes: ownProps.classes,\r\n  melodition: state.melodition,\r\n  theme: state.auth.theme,\r\n  lesson: state.single.lesson.data,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: ThunkDispatch<any, any, AppActions>) => ({\r\n  changeMode: bindActionCreators(changeMode, dispatch),\r\n  drawGame: bindActionCreators(drawGame, dispatch),\r\n  drawPiano: bindActionCreators(gamePiano, dispatch),\r\n  resizePlayer: bindActionCreators(resizePlayer, dispatch),\r\n});\r\n\r\nexport default (connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(\r\n  withStyles(useStyles)(LessonPlayerMode)\r\n) as unknown) as ComponentType<unknown>;\r\n"],"sourceRoot":""}