(this["webpackJsonpmelodition-typescript"]=this["webpackJsonpmelodition-typescript"]||[]).push([[24],{426:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(405),o=a(13),r=a(30),c=a(43),l=a(42),s=a(14),d=a(0),m=a.n(d),p=a(10),u=a(15),h=a(289),g=a(339),f=a(78),b=a(5),v=a(19),x=a(406),y=a(73),j=a(123),E=function(e){var t=e.width,a=e.height,n=e.loading,o=Object(i.a)(e,["width","height","loading"]);return m.a.createElement("canvas",{ref:function(e){return function(e){if(e&&n){var i=e.getContext("2d");i.clearRect(0,0,t,a),i.strokeStyle="black",i.lineWidth=.1,i.strokeRect(0,o.tapSize/2,t,a-o.tapSize),i.fillStyle="rgba(200, 200, 200, 0.2)",i.fillRect(0,o.tapSize/2,t,a-o.tapSize),o.linesArray.forEach((function(e,a){var n=(a+1)*o.tapSize/2;a%2!==0&&a!==o.linesArray.length-1&&(i.beginPath(),i.font="bold "+o.fontSize+"px arial",i.textAlign="center",i.textBaseline="middle",i.fillStyle="black",i.fillText(Object(j.d)(e),.5*o.spaceSize,n),Object(j.c)(e)||(i.moveTo(o.spaceSize,n),i.lineTo(t-o.spaceSize/2,n),i.lineWidth=1.5,i.strokeStyle="black",i.stroke(),i.fill()))}))}}(e)},width:t,height:a,style:{zIndex:1}})},w=Object(u.c)((function(e){return{Melo:e.melodition}}),(function(e){return{drawNotes:Object(p.b)(v.e,e)}}))((function(e){var t=e.Melo,a=e.drawNotes;if(t.noteInfo){var n=t.noteInfo,i=n.width,o=n.height;return m.a.createElement("div",{style:{width:i,height:o,position:"relative",margin:"5px 0"}},m.a.createElement(E,Object.assign({},t.noteInfo,{loading:t.notesLoading})),m.a.createElement("canvas",{ref:function(e){return function(e){e&&t.notesLoading&&a(e)}(e)},width:i,height:o,style:{position:"absolute",top:0,left:0,zIndex:2}}))}return m.a.createElement(y.a,null)})),O=a(409),S=a(408),k=a(56),z=a(180),N=a(181),I=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).updateDimensions=function(){e.props.melodition.pianoLoading||e.props.resizePlayer()},e.changeContent=function(t){var a=JSON.parse(t);e.props.requestPlayer(a)},e.svgWidth=function(e){return 1===e?668:584},e.playModeChanger=function(){e.props.changeMode(!0)},e}return Object(r.a)(a,[{key:"shouldComponentUpdate",value:function(e){var t;return e.data&&(null===(t=this.props.data)||void 0===t?void 0:t.id)!==e.data.id&&this.changeContent(e.data.content),!0}},{key:"componentDidMount",value:function(){var e;console.log("mounted"),window.addEventListener("resize",this.updateDimensions);var t=Object(k.d)(this.props.pathname);this.props.requestLesson(t),(null===(e=this.props.data)||void 0===e?void 0:e.id)===t.exercise&&this.changeContent(this.props.data.content)}},{key:"componentWillUnmount",value:function(){console.log("dismount"),this.props.resetPlayer(),window.removeEventListener("resize",this.updateDimensions),this.setState=function(){}}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data,n=e.melodition,o=e.error,r=Object(i.a)(e,["classes","data","melodition","error"]);return m.a.createElement("div",{className:t.root},n.loading||n.playMode?m.a.createElement(y.a,null):a?m.a.createElement(g.a,{container:!0,className:t.main},m.a.createElement(g.a,{item:!0,xs:1},m.a.createElement(O.a,Object.assign({},r,{data:a}))),m.a.createElement(g.a,{item:!0,xs:10},m.a.createElement(g.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:t.content},m.a.createElement(g.a,{item:!0,xs:6,className:t.doubleGrid},m.a.createElement(g.a,{container:!0,justify:"center",alignItems:"center"},m.a.createElement(g.a,{item:!0,xs:12},n.pianoLoading?m.a.createElement(y.a,{noPad:!0}):m.a.createElement(w,null),m.a.createElement(N.a,null)))),m.a.createElement(g.a,{item:!0,xs:3,className:t.doubleGrid},m.a.createElement(g.a,{container:!0,justify:"center",alignItems:"center"},m.a.createElement(g.a,{item:!0,xs:6},m.a.createElement(f.a,null,a.excerpt)),m.a.createElement(g.a,{item:!0,xs:6,className:t.centerText},m.a.createElement(S.a,null)))))),m.a.createElement(g.a,{item:!0,xs:1},m.a.createElement(g.a,{container:!0,direction:"column",justify:"center",alignItems:"center",className:t.sideStyle},m.a.createElement(z.a,{loading:n.loading})))):m.a.createElement(f.a,{component:"div",className:t.autoMargin},o))}}]),a}(d.Component),M=Object(u.c)((function(e,t){return Object(n.a)(Object(n.a)({},e.single.exercise),{},{melodition:e.melodition,theme:e.auth.theme,classes:t.classes,course:e.single.course.data,pathname:e.router.location.pathname})}),(function(e){return{changeMode:Object(p.b)(v.b,e),requestLesson:Object(p.b)(x.b,e),requestPlayer:Object(p.b)(v.k,e),resetPlayer:Object(p.b)(v.l,e),resizePlayer:Object(p.b)(v.m,e)}}))(Object(b.a)((function(e){var t,a;return Object(h.a)({root:(t={width:"100vw",minHeight:"calc(100vh - 128px)",overflow:"hidden"},Object(s.a)(t,e.breakpoints.down("xs"),{minHeight:"calc(100vh - 113px)"}),Object(s.a)(t,"display","flex"),t),autoMargin:{margin:"auto"},main:(a={width:"100vw",minHeight:"calc(100vh - 128px)",overflow:"hidden"},Object(s.a)(a,e.breakpoints.down("xs"),{minHeight:"calc(100vh - 113px)"}),Object(s.a)(a,"display","flex"),a),content:{height:"100%",width:"100%",flexWrap:"nowrap"},doubleGrid:{flexWrap:"nowrap",width:"100%",maxWidth:"100%","& > div":{margin:"auto",padding:0,height:"100%"}},centerText:{textAlign:"center"},sideStyle:{height:"100%",width:"100%",flexWrap:"nowrap"},loading:{display:"flex",height:"200px",boxShadow:"inset 0 1px 4px 0px black"}})}))(I));t.default=M}}]);
//# sourceMappingURL=24.9cd06af1.chunk.js.map